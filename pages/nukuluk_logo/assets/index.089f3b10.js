const Cd=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}};Cd();var Gs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Rd(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}function zs(v){throw new Error('Could not dynamically require "'+v+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var th={exports:{}};/*! p5.js v1.4.1 February 02, 2022 */(function(v,e){(function(r){v.exports=r()})(function(){var r;return function t(a,l,c){function n(m,p){if(!l[m]){if(!a[m]){var s=typeof zs=="function"&&zs;if(!p&&s)return s(m,!0);if(f)return f(m,!0);var i=new Error("Cannot find module '"+m+"'");throw i.code="MODULE_NOT_FOUND",i}var o=l[m]={exports:{}};a[m][0].call(o.exports,function(d){return n(a[m][1][d]||d)},o,o.exports,t,a,l,c)}return l[m].exports}for(var f=typeof zs=="function"&&zs,h=0;h<c.length;h++)n(c[h]);return n}({1:[function(t,a,l){l.byteLength=function(o){var d=s(o),u=d[0],g=d[1];return 3*(u+g)/4-g},l.toByteArray=function(o){var d,u,g=s(o),b=g[0],_=g[1],w=new f(function(L,A){return 3*(L+A)/4-A}(b,_)),S=0,T=0<_?b-4:b;for(u=0;u<T;u+=4)d=n[o.charCodeAt(u)]<<18|n[o.charCodeAt(u+1)]<<12|n[o.charCodeAt(u+2)]<<6|n[o.charCodeAt(u+3)],w[S++]=d>>16&255,w[S++]=d>>8&255,w[S++]=255&d;return _===2&&(d=n[o.charCodeAt(u)]<<2|n[o.charCodeAt(u+1)]>>4,w[S++]=255&d),_===1&&(d=n[o.charCodeAt(u)]<<10|n[o.charCodeAt(u+1)]<<4|n[o.charCodeAt(u+2)]>>2,w[S++]=d>>8&255,w[S++]=255&d),w},l.fromByteArray=function(o){for(var d,u=o.length,g=u%3,b=[],_=0,w=u-g;_<w;_+=16383)b.push(i(o,_,w<_+16383?w:_+16383));return g==1?(d=o[u-1],b.push(c[d>>2]+c[d<<4&63]+"==")):g==2&&(d=(o[u-2]<<8)+o[u-1],b.push(c[d>>10]+c[d>>4&63]+c[d<<2&63]+"=")),b.join("")};for(var c=[],n=[],f=typeof Uint8Array!="undefined"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0,p=h.length;m<p;++m)c[m]=h[m],n[h.charCodeAt(m)]=m;function s(o){var d=o.length;if(0<d%4)throw new Error("Invalid string. Length must be a multiple of 4");var u=o.indexOf("=");return u===-1&&(u=d),[u,u===d?0:4-u%4]}function i(o,d,u){for(var g,b,_=[],w=d;w<u;w+=3)g=(o[w]<<16&16711680)+(o[w+1]<<8&65280)+(255&o[w+2]),_.push(c[(b=g)>>18&63]+c[b>>12&63]+c[b>>6&63]+c[63&b]);return _.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],2:[function(t,a,l){},{}],3:[function(t,a,l){arguments[4][2][0].apply(l,arguments)},{dup:2}],4:[function(t,a,l){(function(s){var n=t("base64-js"),f=t("ieee754"),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;l.Buffer=s,l.SlowBuffer=function(j){return+j!=j&&(j=0),s.alloc(+j)},l.INSPECT_MAX_BYTES=50;var m=2147483647;function p(j){if(m<j)throw new RangeError('The value "'+j+'" is invalid for option "size"');var B=new Uint8Array(j);return Object.setPrototypeOf(B,s.prototype),B}function s(j,B,V){if(typeof j!="number")return i(j,B,V);if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(j)}function i(j,B,V){if(typeof j=="string")return function(X,ye){if(typeof ye=="string"&&ye!==""||(ye="utf8"),!s.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);var ne=0|b(X,ye),pe=p(ne),ve=pe.write(X,ye);return ve!==ne&&(pe=pe.slice(0,ve)),pe}(j,B);if(ArrayBuffer.isView(j))return u(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(Pe(j,ArrayBuffer)||j&&Pe(j.buffer,ArrayBuffer))return function(X,ye,ne){if(ye<0||X.byteLength<ye)throw new RangeError('"offset" is outside of buffer bounds');if(X.byteLength<ye+(ne||0))throw new RangeError('"length" is outside of buffer bounds');var pe;return pe=ye===void 0&&ne===void 0?new Uint8Array(X):ne===void 0?new Uint8Array(X,ye):new Uint8Array(X,ye,ne),Object.setPrototypeOf(pe,s.prototype),pe}(j,B,V);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var te=j.valueOf&&j.valueOf();if(te!=null&&te!==j)return s.from(te,B,V);var $=function(X){if(s.isBuffer(X)){var ye=0|g(X.length),ne=p(ye);return ne.length===0||X.copy(ne,0,0,ye),ne}if(X.length!==void 0)return typeof X.length!="number"||ae(X.length)?p(0):u(X);if(X.type==="Buffer"&&Array.isArray(X.data))return u(X.data)}(j);if($)return $;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return s.from(j[Symbol.toPrimitive]("string"),B,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function o(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function d(j){return o(j),p(j<0?0:0|g(j))}function u(j){for(var B=j.length<0?0:0|g(j.length),V=p(B),te=0;te<B;te+=1)V[te]=255&j[te];return V}function g(j){if(m<=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m.toString(16)+" bytes");return 0|j}function b(j,B){if(s.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||Pe(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var V=j.length,te=2<arguments.length&&arguments[2]===!0;if(!te&&V===0)return 0;for(var $=!1;;)switch(B){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return ue(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*V;case"hex":return V>>>1;case"base64":return ge(j).length;default:if($)return te?-1:ue(j).length;B=(""+B).toLowerCase(),$=!0}}function _(j,B,V){var te=j[B];j[B]=j[V],j[V]=te}function w(j,B,V,te,$){if(j.length===0)return-1;if(typeof V=="string"?(te=V,V=0):2147483647<V?V=2147483647:V<-2147483648&&(V=-2147483648),ae(V=+V)&&(V=$?0:j.length-1),V<0&&(V=j.length+V),V>=j.length){if($)return-1;V=j.length-1}else if(V<0){if(!$)return-1;V=0}if(typeof B=="string"&&(B=s.from(B,te)),s.isBuffer(B))return B.length===0?-1:S(j,B,V,te,$);if(typeof B=="number")return B&=255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(j,B,V):Uint8Array.prototype.lastIndexOf.call(j,B,V):S(j,[B],V,te,$);throw new TypeError("val must be string, number or Buffer")}function S(j,B,V,te,$){var X,ye=1,ne=j.length,pe=B.length;if(te!==void 0&&((te=String(te).toLowerCase())==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(j.length<2||B.length<2)return-1;ne/=ye=2,pe/=2,V/=2}function ve(Ie,ie){return ye===1?Ie[ie]:Ie.readUInt16BE(ie*ye)}if($){var he=-1;for(X=V;X<ne;X++)if(ve(j,X)===ve(B,he===-1?0:X-he)){if(he===-1&&(he=X),X-he+1===pe)return he*ye}else he!==-1&&(X-=X-he),he=-1}else for(ne<V+pe&&(V=ne-pe),X=V;0<=X;X--){for(var Ae=!0,Oe=0;Oe<pe;Oe++)if(ve(j,X+Oe)!==ve(B,Oe)){Ae=!1;break}if(Ae)return X}return-1}function T(j,B,V,te){V=Number(V)||0;var $=j.length-V;te?$<(te=Number(te))&&(te=$):te=$;var X=B.length;X/2<te&&(te=X/2);for(var ye=0;ye<te;++ye){var ne=parseInt(B.substr(2*ye,2),16);if(ae(ne))return ye;j[V+ye]=ne}return ye}function L(j,B,V,te){return de(function($){for(var X=[],ye=0;ye<$.length;++ye)X.push(255&$.charCodeAt(ye));return X}(B),j,V,te)}function A(j,B,V,te){return de(function($,X){for(var ye,ne,pe,ve=[],he=0;he<$.length&&!((X-=2)<0);++he)ye=$.charCodeAt(he),ne=ye>>8,pe=ye%256,ve.push(pe),ve.push(ne);return ve}(B,j.length-V),j,V,te)}function P(j,B,V){return B===0&&V===j.length?n.fromByteArray(j):n.fromByteArray(j.slice(B,V))}function R(j,B,V){V=Math.min(j.length,V);for(var te=[],$=B;$<V;){var X,ye,ne,pe,ve=j[$],he=null,Ae=239<ve?4:223<ve?3:191<ve?2:1;if($+Ae<=V)switch(Ae){case 1:ve<128&&(he=ve);break;case 2:(192&(X=j[$+1]))==128&&127<(pe=(31&ve)<<6|63&X)&&(he=pe);break;case 3:X=j[$+1],ye=j[$+2],(192&X)==128&&(192&ye)==128&&2047<(pe=(15&ve)<<12|(63&X)<<6|63&ye)&&(pe<55296||57343<pe)&&(he=pe);break;case 4:X=j[$+1],ye=j[$+2],ne=j[$+3],(192&X)==128&&(192&ye)==128&&(192&ne)==128&&65535<(pe=(15&ve)<<18|(63&X)<<12|(63&ye)<<6|63&ne)&&pe<1114112&&(he=pe)}he===null?(he=65533,Ae=1):65535<he&&(he-=65536,te.push(he>>>10&1023|55296),he=56320|1023&he),te.push(he),$+=Ae}return function(Oe){var Ie=Oe.length;if(Ie<=D)return String.fromCharCode.apply(String,Oe);for(var ie="",ee=0;ee<Ie;)ie+=String.fromCharCode.apply(String,Oe.slice(ee,ee+=D));return ie}(te)}l.kMaxLength=m,(s.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(j,B),j.foo()===42}catch{return!1}}())||typeof console=="undefined"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),typeof Symbol!="undefined"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(j,B,V){return i(j,B,V)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(j,B,V){return $=B,X=V,o(te=j),te<=0?p(te):$!==void 0?typeof X=="string"?p(te).fill($,X):p(te).fill($):p(te);var te,$,X},s.allocUnsafe=function(j){return d(j)},s.allocUnsafeSlow=function(j){return d(j)},s.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==s.prototype},s.compare=function(j,B){if(Pe(j,Uint8Array)&&(j=s.from(j,j.offset,j.byteLength)),Pe(B,Uint8Array)&&(B=s.from(B,B.offset,B.byteLength)),!s.isBuffer(j)||!s.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===B)return 0;for(var V=j.length,te=B.length,$=0,X=Math.min(V,te);$<X;++$)if(j[$]!==B[$]){V=j[$],te=B[$];break}return V<te?-1:te<V?1:0},s.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(j,B){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return s.alloc(0);var V;if(B===void 0)for(V=B=0;V<j.length;++V)B+=j[V].length;var te=s.allocUnsafe(B),$=0;for(V=0;V<j.length;++V){var X=j[V];if(Pe(X,Uint8Array)&&(X=s.from(X)),!s.isBuffer(X))throw new TypeError('"list" argument must be an Array of Buffers');X.copy(te,$),$+=X.length}return te},s.byteLength=b,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var B=0;B<j;B+=2)_(this,B,B+1);return this},s.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var B=0;B<j;B+=4)_(this,B,B+3),_(this,B+1,B+2);return this},s.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var B=0;B<j;B+=8)_(this,B,B+7),_(this,B+1,B+6),_(this,B+2,B+5),_(this,B+3,B+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){var j=this.length;return j===0?"":arguments.length===0?R(this,0,j):function(B,V,te){var $=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((te===void 0||te>this.length)&&(te=this.length),te<=0)||(te>>>=0)<=(V>>>=0))return"";for(B=B||"utf8";;)switch(B){case"hex":return k(this,V,te);case"utf8":case"utf-8":return R(this,V,te);case"ascii":return F(this,V,te);case"latin1":case"binary":return I(this,V,te);case"base64":return P(this,V,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,V,te);default:if($)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),$=!0}}.apply(this,arguments)},s.prototype.equals=function(j){if(!s.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||s.compare(this,j)===0},s.prototype.inspect=function(){var j="",B=l.INSPECT_MAX_BYTES;return j=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(j+=" ... "),"<Buffer "+j+">"},h&&(s.prototype[h]=s.prototype.inspect),s.prototype.compare=function(j,B,V,te,$){if(Pe(j,Uint8Array)&&(j=s.from(j,j.offset,j.byteLength)),!s.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(B===void 0&&(B=0),V===void 0&&(V=j?j.length:0),te===void 0&&(te=0),$===void 0&&($=this.length),B<0||V>j.length||te<0||$>this.length)throw new RangeError("out of range index");if($<=te&&V<=B)return 0;if($<=te)return-1;if(V<=B)return 1;if(this===j)return 0;for(var X=($>>>=0)-(te>>>=0),ye=(V>>>=0)-(B>>>=0),ne=Math.min(X,ye),pe=this.slice(te,$),ve=j.slice(B,V),he=0;he<ne;++he)if(pe[he]!==ve[he]){X=pe[he],ye=ve[he];break}return X<ye?-1:ye<X?1:0},s.prototype.includes=function(j,B,V){return this.indexOf(j,B,V)!==-1},s.prototype.indexOf=function(j,B,V){return w(this,j,B,V,!0)},s.prototype.lastIndexOf=function(j,B,V){return w(this,j,B,V,!1)},s.prototype.write=function(j,B,V,te){if(B===void 0)te="utf8",V=this.length,B=0;else if(V===void 0&&typeof B=="string")te=B,V=this.length,B=0;else{if(!isFinite(B))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");B>>>=0,isFinite(V)?(V>>>=0,te===void 0&&(te="utf8")):(te=V,V=void 0)}var $=this.length-B;if((V===void 0||$<V)&&(V=$),0<j.length&&(V<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");te=te||"utf8";for(var X,ye,ne,pe,ve,he,Ae=!1;;)switch(te){case"hex":return T(this,j,B,V);case"utf8":case"utf-8":return ve=B,he=V,de(ue(j,(pe=this).length-ve),pe,ve,he);case"ascii":return L(this,j,B,V);case"latin1":case"binary":return L(this,j,B,V);case"base64":return X=this,ye=B,ne=V,de(ge(j),X,ye,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,j,B,V);default:if(Ae)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),Ae=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function F(j,B,V){var te="";V=Math.min(j.length,V);for(var $=B;$<V;++$)te+=String.fromCharCode(127&j[$]);return te}function I(j,B,V){var te="";V=Math.min(j.length,V);for(var $=B;$<V;++$)te+=String.fromCharCode(j[$]);return te}function k(j,B,V){var te=j.length;(!B||B<0)&&(B=0),(!V||V<0||te<V)&&(V=te);for(var $="",X=B;X<V;++X)$+=we[j[X]];return $}function U(j,B,V){for(var te=j.slice(B,V),$="",X=0;X<te.length;X+=2)$+=String.fromCharCode(te[X]+256*te[X+1]);return $}function q(j,B,V){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(V<j+B)throw new RangeError("Trying to access beyond buffer length")}function Q(j,B,V,te,$,X){if(!s.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if($<B||B<X)throw new RangeError('"value" argument is out of bounds');if(V+te>j.length)throw new RangeError("Index out of range")}function W(j,B,V,te){if(V+te>j.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function K(j,B,V,te,$){return B=+B,V>>>=0,$||W(j,0,V,4),f.write(j,B,V,te,23,4),V+4}function Y(j,B,V,te,$){return B=+B,V>>>=0,$||W(j,0,V,8),f.write(j,B,V,te,52,8),V+8}s.prototype.slice=function(j,B){var V=this.length;(j=~~j)<0?(j+=V)<0&&(j=0):V<j&&(j=V),(B=B===void 0?V:~~B)<0?(B+=V)<0&&(B=0):V<B&&(B=V),B<j&&(B=j);var te=this.subarray(j,B);return Object.setPrototypeOf(te,s.prototype),te},s.prototype.readUIntLE=function(j,B,V){j>>>=0,B>>>=0,V||q(j,B,this.length);for(var te=this[j],$=1,X=0;++X<B&&($*=256);)te+=this[j+X]*$;return te},s.prototype.readUIntBE=function(j,B,V){j>>>=0,B>>>=0,V||q(j,B,this.length);for(var te=this[j+--B],$=1;0<B&&($*=256);)te+=this[j+--B]*$;return te},s.prototype.readUInt8=function(j,B){return j>>>=0,B||q(j,1,this.length),this[j]},s.prototype.readUInt16LE=function(j,B){return j>>>=0,B||q(j,2,this.length),this[j]|this[j+1]<<8},s.prototype.readUInt16BE=function(j,B){return j>>>=0,B||q(j,2,this.length),this[j]<<8|this[j+1]},s.prototype.readUInt32LE=function(j,B){return j>>>=0,B||q(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},s.prototype.readUInt32BE=function(j,B){return j>>>=0,B||q(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},s.prototype.readIntLE=function(j,B,V){j>>>=0,B>>>=0,V||q(j,B,this.length);for(var te=this[j],$=1,X=0;++X<B&&($*=256);)te+=this[j+X]*$;return($*=128)<=te&&(te-=Math.pow(2,8*B)),te},s.prototype.readIntBE=function(j,B,V){j>>>=0,B>>>=0,V||q(j,B,this.length);for(var te=B,$=1,X=this[j+--te];0<te&&($*=256);)X+=this[j+--te]*$;return($*=128)<=X&&(X-=Math.pow(2,8*B)),X},s.prototype.readInt8=function(j,B){return j>>>=0,B||q(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},s.prototype.readInt16LE=function(j,B){j>>>=0,B||q(j,2,this.length);var V=this[j]|this[j+1]<<8;return 32768&V?4294901760|V:V},s.prototype.readInt16BE=function(j,B){j>>>=0,B||q(j,2,this.length);var V=this[j+1]|this[j]<<8;return 32768&V?4294901760|V:V},s.prototype.readInt32LE=function(j,B){return j>>>=0,B||q(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},s.prototype.readInt32BE=function(j,B){return j>>>=0,B||q(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},s.prototype.readFloatLE=function(j,B){return j>>>=0,B||q(j,4,this.length),f.read(this,j,!0,23,4)},s.prototype.readFloatBE=function(j,B){return j>>>=0,B||q(j,4,this.length),f.read(this,j,!1,23,4)},s.prototype.readDoubleLE=function(j,B){return j>>>=0,B||q(j,8,this.length),f.read(this,j,!0,52,8)},s.prototype.readDoubleBE=function(j,B){return j>>>=0,B||q(j,8,this.length),f.read(this,j,!1,52,8)},s.prototype.writeUIntLE=function(j,B,V,te){j=+j,B>>>=0,V>>>=0,te||Q(this,j,B,V,Math.pow(2,8*V)-1,0);var $=1,X=0;for(this[B]=255&j;++X<V&&($*=256);)this[B+X]=j/$&255;return B+V},s.prototype.writeUIntBE=function(j,B,V,te){j=+j,B>>>=0,V>>>=0,te||Q(this,j,B,V,Math.pow(2,8*V)-1,0);var $=V-1,X=1;for(this[B+$]=255&j;0<=--$&&(X*=256);)this[B+$]=j/X&255;return B+V},s.prototype.writeUInt8=function(j,B,V){return j=+j,B>>>=0,V||Q(this,j,B,1,255,0),this[B]=255&j,B+1},s.prototype.writeUInt16LE=function(j,B,V){return j=+j,B>>>=0,V||Q(this,j,B,2,65535,0),this[B]=255&j,this[B+1]=j>>>8,B+2},s.prototype.writeUInt16BE=function(j,B,V){return j=+j,B>>>=0,V||Q(this,j,B,2,65535,0),this[B]=j>>>8,this[B+1]=255&j,B+2},s.prototype.writeUInt32LE=function(j,B,V){return j=+j,B>>>=0,V||Q(this,j,B,4,4294967295,0),this[B+3]=j>>>24,this[B+2]=j>>>16,this[B+1]=j>>>8,this[B]=255&j,B+4},s.prototype.writeUInt32BE=function(j,B,V){return j=+j,B>>>=0,V||Q(this,j,B,4,4294967295,0),this[B]=j>>>24,this[B+1]=j>>>16,this[B+2]=j>>>8,this[B+3]=255&j,B+4},s.prototype.writeIntLE=function(j,B,V,te){if(j=+j,B>>>=0,!te){var $=Math.pow(2,8*V-1);Q(this,j,B,V,$-1,-$)}var X=0,ye=1,ne=0;for(this[B]=255&j;++X<V&&(ye*=256);)j<0&&ne===0&&this[B+X-1]!==0&&(ne=1),this[B+X]=(j/ye>>0)-ne&255;return B+V},s.prototype.writeIntBE=function(j,B,V,te){if(j=+j,B>>>=0,!te){var $=Math.pow(2,8*V-1);Q(this,j,B,V,$-1,-$)}var X=V-1,ye=1,ne=0;for(this[B+X]=255&j;0<=--X&&(ye*=256);)j<0&&ne===0&&this[B+X+1]!==0&&(ne=1),this[B+X]=(j/ye>>0)-ne&255;return B+V},s.prototype.writeInt8=function(j,B,V){return j=+j,B>>>=0,V||Q(this,j,B,1,127,-128),j<0&&(j=255+j+1),this[B]=255&j,B+1},s.prototype.writeInt16LE=function(j,B,V){return j=+j,B>>>=0,V||Q(this,j,B,2,32767,-32768),this[B]=255&j,this[B+1]=j>>>8,B+2},s.prototype.writeInt16BE=function(j,B,V){return j=+j,B>>>=0,V||Q(this,j,B,2,32767,-32768),this[B]=j>>>8,this[B+1]=255&j,B+2},s.prototype.writeInt32LE=function(j,B,V){return j=+j,B>>>=0,V||Q(this,j,B,4,2147483647,-2147483648),this[B]=255&j,this[B+1]=j>>>8,this[B+2]=j>>>16,this[B+3]=j>>>24,B+4},s.prototype.writeInt32BE=function(j,B,V){return j=+j,B>>>=0,V||Q(this,j,B,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[B]=j>>>24,this[B+1]=j>>>16,this[B+2]=j>>>8,this[B+3]=255&j,B+4},s.prototype.writeFloatLE=function(j,B,V){return K(this,j,B,!0,V)},s.prototype.writeFloatBE=function(j,B,V){return K(this,j,B,!1,V)},s.prototype.writeDoubleLE=function(j,B,V){return Y(this,j,B,!0,V)},s.prototype.writeDoubleBE=function(j,B,V){return Y(this,j,B,!1,V)},s.prototype.copy=function(j,B,V,te){if(!s.isBuffer(j))throw new TypeError("argument should be a Buffer");if(V=V||0,te||te===0||(te=this.length),B>=j.length&&(B=j.length),B=B||0,0<te&&te<V&&(te=V),te===V||j.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),j.length-B<te-V&&(te=j.length-B+V);var $=te-V;if(this===j&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(B,V,te);else if(this===j&&V<B&&B<te)for(var X=$-1;0<=X;--X)j[X+B]=this[X+V];else Uint8Array.prototype.set.call(j,this.subarray(V,te),B);return $},s.prototype.fill=function(j,B,V,te){if(typeof j=="string"){if(typeof B=="string"?(te=B,B=0,V=this.length):typeof V=="string"&&(te=V,V=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!s.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(j.length===1){var $=j.charCodeAt(0);(te==="utf8"&&$<128||te==="latin1")&&(j=$)}}else typeof j=="number"?j&=255:typeof j=="boolean"&&(j=Number(j));if(B<0||this.length<B||this.length<V)throw new RangeError("Out of range index");if(V<=B)return this;var X;if(B>>>=0,V=V===void 0?this.length:V>>>0,typeof(j=j||0)=="number")for(X=B;X<V;++X)this[X]=j;else{var ye=s.isBuffer(j)?j:s.from(j,te),ne=ye.length;if(ne===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(X=0;X<V-B;++X)this[X+B]=ye[X%ne]}return this};var se=/[^+/0-9A-Za-z-_]/g;function ue(j,B){var V;B=B||1/0;for(var te=j.length,$=null,X=[],ye=0;ye<te;++ye){if(55295<(V=j.charCodeAt(ye))&&V<57344){if(!$){if(56319<V){-1<(B-=3)&&X.push(239,191,189);continue}if(ye+1===te){-1<(B-=3)&&X.push(239,191,189);continue}$=V;continue}if(V<56320){-1<(B-=3)&&X.push(239,191,189),$=V;continue}V=65536+($-55296<<10|V-56320)}else $&&-1<(B-=3)&&X.push(239,191,189);if($=null,V<128){if(--B<0)break;X.push(V)}else if(V<2048){if((B-=2)<0)break;X.push(V>>6|192,63&V|128)}else if(V<65536){if((B-=3)<0)break;X.push(V>>12|224,V>>6&63|128,63&V|128)}else{if(!(V<1114112))throw new Error("Invalid code point");if((B-=4)<0)break;X.push(V>>18|240,V>>12&63|128,V>>6&63|128,63&V|128)}}return X}function ge(j){return n.toByteArray(function(B){if((B=(B=B.split("=")[0]).trim().replace(se,"")).length<2)return"";for(;B.length%4!=0;)B+="=";return B}(j))}function de(j,B,V,te){for(var $=0;$<te&&!($+V>=B.length||$>=j.length);++$)B[$+V]=j[$];return $}function Pe(j,B){return j instanceof B||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===B.name}function ae(j){return j!=j}var we=function(){for(var j="0123456789abcdef",B=new Array(256),V=0;V<16;++V)for(var te=16*V,$=0;$<16;++$)B[te+$]=j[V]+j[$];return B}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:236}],5:[function(t,a,l){a.exports=function(c){if(typeof c!="function")throw TypeError(String(c)+" is not a function");return c}},{}],6:[function(t,a,l){var c=t("../internals/is-object");a.exports=function(n){if(!c(n)&&n!==null)throw TypeError("Can't set "+String(n)+" as a prototype");return n}},{"../internals/is-object":74}],7:[function(t,a,l){var c=t("../internals/well-known-symbol"),n=t("../internals/object-create"),f=t("../internals/object-define-property"),h=c("unscopables"),m=Array.prototype;m[h]==null&&f.f(m,h,{configurable:!0,value:n(null)}),a.exports=function(p){m[h][p]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(t,a,l){var c=t("../internals/string-multibyte").charAt;a.exports=function(n,f,h){return f+(h?c(n,f).length:1)}},{"../internals/string-multibyte":123}],9:[function(t,a,l){a.exports=function(c,n,f){if(!(c instanceof n))throw TypeError("Incorrect "+(f?f+" ":"")+"invocation");return c}},{}],10:[function(t,a,l){var c=t("../internals/is-object");a.exports=function(n){if(!c(n))throw TypeError(String(n)+" is not an object");return n}},{"../internals/is-object":74}],11:[function(t,a,l){a.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"},{}],12:[function(t,a,l){function c(W){return p(W)&&s(Q,i(W))}var n,f=t("../internals/array-buffer-native"),h=t("../internals/descriptors"),m=t("../internals/global"),p=t("../internals/is-object"),s=t("../internals/has"),i=t("../internals/classof"),o=t("../internals/create-non-enumerable-property"),d=t("../internals/redefine"),u=t("../internals/object-define-property").f,g=t("../internals/object-get-prototype-of"),b=t("../internals/object-set-prototype-of"),_=t("../internals/well-known-symbol"),w=t("../internals/uid"),S=m.Int8Array,T=S&&S.prototype,L=m.Uint8ClampedArray,A=L&&L.prototype,P=S&&g(S),R=T&&g(T),D=Object.prototype,F=D.isPrototypeOf,I=_("toStringTag"),k=w("TYPED_ARRAY_TAG"),U=f&&!!b&&i(m.opera)!=="Opera",q=!1,Q={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(n in Q)m[n]||(U=!1);if((!U||typeof P!="function"||P===Function.prototype)&&(P=function(){throw TypeError("Incorrect invocation")},U))for(n in Q)m[n]&&b(m[n],P);if((!U||!R||R===D)&&(R=P.prototype,U))for(n in Q)m[n]&&b(m[n].prototype,R);if(U&&g(A)!==R&&b(A,R),h&&!s(R,I))for(n in q=!0,u(R,I,{get:function(){return p(this)?this[k]:void 0}}),Q)m[n]&&o(m[n],k,n);a.exports={NATIVE_ARRAY_BUFFER_VIEWS:U,TYPED_ARRAY_TAG:q&&k,aTypedArray:function(W){if(c(W))return W;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(W){if(b){if(F.call(P,W))return W}else for(var K in Q)if(s(Q,n)){var Y=m[K];if(Y&&(W===Y||F.call(Y,W)))return W}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(W,K,Y){if(h){if(Y)for(var se in Q){var ue=m[se];ue&&s(ue.prototype,W)&&delete ue.prototype[W]}R[W]&&!Y||d(R,W,Y?K:U&&T[W]||K)}},exportTypedArrayStaticMethod:function(W,K,Y){var se,ue;if(h){if(b){if(Y)for(se in Q)(ue=m[se])&&s(ue,W)&&delete ue[W];if(P[W]&&!Y)return;try{return d(P,W,Y?K:U&&S[W]||K)}catch{}}for(se in Q)!(ue=m[se])||ue[W]&&!Y||d(ue,W,K)}},isView:function(W){var K=i(W);return K==="DataView"||s(Q,K)},isTypedArray:c,TypedArray:P,TypedArrayPrototype:R}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(t,a,l){function c(ve){return[255&ve]}function n(ve){return[255&ve,ve>>8&255]}function f(ve){return[255&ve,ve>>8&255,ve>>16&255,ve>>24&255]}function h(ve){return ve[3]<<24|ve[2]<<16|ve[1]<<8|ve[0]}function m(ve){return B(ve,23,4)}function p(ve){return B(ve,52,8)}function s(ve,he){I(ve[se],he,{get:function(){return Q(this)[he]}})}function i(ve,he,Ae,Oe){var Ie=A(Ae),ie=Q(ve);if(Ie+he>ie.byteLength)throw j(ue);var ee=Q(ie.buffer).bytes,Le=Ie+ie.byteOffset,De=ee.slice(Le,Le+he);return Oe?De:De.reverse()}function o(ve,he,Ae,Oe,Ie,ie){var ee=A(Ae),Le=Q(ve);if(ee+he>Le.byteLength)throw j(ue);for(var De=Q(Le.buffer).bytes,Ze=ee+Le.byteOffset,Ce=Oe(+Ie),je=0;je<he;je++)De[Ze+je]=Ce[ie?je:he-je-1]}var d=t("../internals/global"),u=t("../internals/descriptors"),g=t("../internals/array-buffer-native"),b=t("../internals/create-non-enumerable-property"),_=t("../internals/redefine-all"),w=t("../internals/fails"),S=t("../internals/an-instance"),T=t("../internals/to-integer"),L=t("../internals/to-length"),A=t("../internals/to-index"),P=t("../internals/ieee754"),R=t("../internals/object-get-prototype-of"),D=t("../internals/object-set-prototype-of"),F=t("../internals/object-get-own-property-names").f,I=t("../internals/object-define-property").f,k=t("../internals/array-fill"),U=t("../internals/set-to-string-tag"),q=t("../internals/internal-state"),Q=q.get,W=q.set,K="ArrayBuffer",Y="DataView",se="prototype",ue="Wrong index",ge=d[K],de=ge,Pe=d[Y],ae=Pe&&Pe[se],we=Object.prototype,j=d.RangeError,B=P.pack,V=P.unpack;if(g){if(!w(function(){ge(1)})||!w(function(){new ge(-1)})||w(function(){return new ge,new ge(1.5),new ge(NaN),ge.name!=K})){for(var te,$=(de=function(ve){return S(this,de),new ge(A(ve))})[se]=ge[se],X=F(ge),ye=0;X.length>ye;)(te=X[ye++])in de||b(de,te,ge[te]);$.constructor=de}D&&R(ae)!==we&&D(ae,we);var ne=new Pe(new de(2)),pe=ae.setInt8;ne.setInt8(0,2147483648),ne.setInt8(1,2147483649),!ne.getInt8(0)&&ne.getInt8(1)||_(ae,{setInt8:function(ve,he){pe.call(this,ve,he<<24>>24)},setUint8:function(ve,he){pe.call(this,ve,he<<24>>24)}},{unsafe:!0})}else de=function(ve){S(this,de,K);var he=A(ve);W(this,{bytes:k.call(new Array(he),0),byteLength:he}),u||(this.byteLength=he)},Pe=function(ve,he,Ae){S(this,Pe,Y),S(ve,de,Y);var Oe=Q(ve).byteLength,Ie=T(he);if(Ie<0||Oe<Ie)throw j("Wrong offset");if(Oe<Ie+(Ae=Ae===void 0?Oe-Ie:L(Ae)))throw j("Wrong length");W(this,{buffer:ve,byteLength:Ae,byteOffset:Ie}),u||(this.buffer=ve,this.byteLength=Ae,this.byteOffset=Ie)},u&&(s(de,"byteLength"),s(Pe,"buffer"),s(Pe,"byteLength"),s(Pe,"byteOffset")),_(Pe[se],{getInt8:function(ve){return i(this,1,ve)[0]<<24>>24},getUint8:function(ve){return i(this,1,ve)[0]},getInt16:function(ve,he){var Ae=i(this,2,ve,1<arguments.length?he:void 0);return(Ae[1]<<8|Ae[0])<<16>>16},getUint16:function(ve,he){var Ae=i(this,2,ve,1<arguments.length?he:void 0);return Ae[1]<<8|Ae[0]},getInt32:function(ve,he){return h(i(this,4,ve,1<arguments.length?he:void 0))},getUint32:function(ve,he){return h(i(this,4,ve,1<arguments.length?he:void 0))>>>0},getFloat32:function(ve,he){return V(i(this,4,ve,1<arguments.length?he:void 0),23)},getFloat64:function(ve,he){return V(i(this,8,ve,1<arguments.length?he:void 0),52)},setInt8:function(ve,he){o(this,1,ve,c,he)},setUint8:function(ve,he){o(this,1,ve,c,he)},setInt16:function(ve,he,Ae){o(this,2,ve,n,he,2<arguments.length?Ae:void 0)},setUint16:function(ve,he,Ae){o(this,2,ve,n,he,2<arguments.length?Ae:void 0)},setInt32:function(ve,he,Ae){o(this,4,ve,f,he,2<arguments.length?Ae:void 0)},setUint32:function(ve,he,Ae){o(this,4,ve,f,he,2<arguments.length?Ae:void 0)},setFloat32:function(ve,he,Ae){o(this,4,ve,m,he,2<arguments.length?Ae:void 0)},setFloat64:function(ve,he,Ae){o(this,8,ve,p,he,2<arguments.length?Ae:void 0)}});U(de,K),U(Pe,Y),a.exports={ArrayBuffer:de,DataView:Pe}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(t,a,l){var c=t("../internals/to-object"),n=t("../internals/to-absolute-index"),f=t("../internals/to-length"),h=Math.min;a.exports=[].copyWithin||function(m,p,s){var i=c(this),o=f(i.length),d=n(m,o),u=n(p,o),g=2<arguments.length?s:void 0,b=h((g===void 0?o:n(g,o))-u,o-d),_=1;for(u<d&&d<u+b&&(_=-1,u+=b-1,d+=b-1);0<b--;)u in i?i[d]=i[u]:delete i[d],d+=_,u+=_;return i}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(t,a,l){var c=t("../internals/to-object"),n=t("../internals/to-absolute-index"),f=t("../internals/to-length");a.exports=function(h,m,p){for(var s=c(this),i=f(s.length),o=arguments.length,d=n(1<o?m:void 0,i),u=2<o?p:void 0,g=u===void 0?i:n(u,i);d<g;)s[d++]=h;return s}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(t,a,l){var c=t("../internals/array-iteration").forEach,n=t("../internals/array-method-is-strict"),f=t("../internals/array-method-uses-to-length"),h=n("forEach"),m=f("forEach");a.exports=h&&m?[].forEach:function(p,s){return c(this,p,1<arguments.length?s:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,a,l){var c=t("../internals/function-bind-context"),n=t("../internals/to-object"),f=t("../internals/call-with-safe-iteration-closing"),h=t("../internals/is-array-iterator-method"),m=t("../internals/to-length"),p=t("../internals/create-property"),s=t("../internals/get-iterator-method");a.exports=function(i,o,d){var u,g,b,_,w,S,T=n(i),L=typeof this=="function"?this:Array,A=arguments.length,P=1<A?o:void 0,R=P!==void 0,D=s(T),F=0;if(R&&(P=c(P,2<A?d:void 0,2)),D==null||L==Array&&h(D))for(g=new L(u=m(T.length));F<u;F++)S=R?P(T[F],F):T[F],p(g,F,S);else for(w=(_=D.call(T)).next,g=new L;!(b=w.call(_)).done;F++)S=R?f(_,P,[b.value,F],!0):b.value,p(g,F,S);return g.length=F,g}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":39,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(t,a,l){function c(m){return function(p,s,i){var o,d=n(p),u=f(d.length),g=h(i,u);if(m&&s!=s){for(;g<u;)if((o=d[g++])!=o)return!0}else for(;g<u;g++)if((m||g in d)&&d[g]===s)return m||g||0;return!m&&-1}}var n=t("../internals/to-indexed-object"),f=t("../internals/to-length"),h=t("../internals/to-absolute-index");a.exports={includes:c(!0),indexOf:c(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(t,a,l){function c(i){var o=i==1,d=i==2,u=i==3,g=i==4,b=i==6,_=i==5||b;return function(w,S,T,L){for(var A,P,R=h(w),D=f(R),F=n(S,T,3),I=m(D.length),k=0,U=L||p,q=o?U(w,I):d?U(w,0):void 0;k<I;k++)if((_||k in D)&&(P=F(A=D[k],k,R),i)){if(o)q[k]=P;else if(P)switch(i){case 3:return!0;case 5:return A;case 6:return k;case 2:s.call(q,A)}else if(g)return!1}return b?-1:u||g?g:q}}var n=t("../internals/function-bind-context"),f=t("../internals/indexed-object"),h=t("../internals/to-object"),m=t("../internals/to-length"),p=t("../internals/array-species-create"),s=[].push;a.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(t,a,l){var c=t("../internals/to-indexed-object"),n=t("../internals/to-integer"),f=t("../internals/to-length"),h=t("../internals/array-method-is-strict"),m=t("../internals/array-method-uses-to-length"),p=Math.min,s=[].lastIndexOf,i=!!s&&1/[1].lastIndexOf(1,-0)<0,o=h("lastIndexOf"),d=m("indexOf",{ACCESSORS:!0,1:0}),u=i||!o||!d;a.exports=u?function(g,b){if(i)return s.apply(this,arguments)||0;var _=c(this),w=f(_.length),S=w-1;for(1<arguments.length&&(S=p(S,n(b))),S<0&&(S=w+S);0<=S;S--)if(S in _&&_[S]===g)return S||0;return-1}:s},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(t,a,l){var c=t("../internals/fails"),n=t("../internals/well-known-symbol"),f=t("../internals/engine-v8-version"),h=n("species");a.exports=function(m){return 51<=f||!c(function(){var p=[];return(p.constructor={})[h]=function(){return{foo:1}},p[m](Boolean).foo!==1})}},{"../internals/engine-v8-version":47,"../internals/fails":50,"../internals/well-known-symbol":146}],22:[function(t,a,l){var c=t("../internals/fails");a.exports=function(n,f){var h=[][n];return!!h&&c(function(){h.call(null,f||function(){throw 1},1)})}},{"../internals/fails":50}],23:[function(t,a,l){function c(s){throw s}var n=t("../internals/descriptors"),f=t("../internals/fails"),h=t("../internals/has"),m=Object.defineProperty,p={};a.exports=function(s,i){if(h(p,s))return p[s];var o=[][s],d=!!h(i=i||{},"ACCESSORS")&&i.ACCESSORS,u=h(i,0)?i[0]:c,g=h(i,1)?i[1]:void 0;return p[s]=!!o&&!f(function(){if(d&&!n)return!0;var b={length:-1};d?m(b,1,{enumerable:!0,get:c}):b[1]=1,o.call(b,u,g)})}},{"../internals/descriptors":42,"../internals/fails":50,"../internals/has":60}],24:[function(t,a,l){function c(p){return function(s,i,o,d){n(i);var u=f(s),g=h(u),b=m(u.length),_=p?b-1:0,w=p?-1:1;if(o<2)for(;;){if(_ in g){d=g[_],_+=w;break}if(_+=w,p?_<0:b<=_)throw TypeError("Reduce of empty array with no initial value")}for(;p?0<=_:_<b;_+=w)_ in g&&(d=i(d,g[_],_,u));return d}}var n=t("../internals/a-function"),f=t("../internals/to-object"),h=t("../internals/indexed-object"),m=t("../internals/to-length");a.exports={left:c(!1),right:c(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(t,a,l){var c=t("../internals/is-object"),n=t("../internals/is-array"),f=t("../internals/well-known-symbol")("species");a.exports=function(h,m){var p;return n(h)&&(typeof(p=h.constructor)!="function"||p!==Array&&!n(p.prototype)?c(p)&&(p=p[f])===null&&(p=void 0):p=void 0),new(p===void 0?Array:p)(m===0?0:m)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(t,a,l){var c=t("../internals/an-object");a.exports=function(n,f,h,m){try{return m?f(c(h)[0],h[1]):f(h)}catch(s){var p=n.return;throw p!==void 0&&c(p.call(n)),s}}},{"../internals/an-object":10}],27:[function(t,a,l){var c=t("../internals/well-known-symbol")("iterator"),n=!1;try{var f=0,h={next:function(){return{done:!!f++}},return:function(){n=!0}};h[c]=function(){return this},Array.from(h,function(){throw 2})}catch{}a.exports=function(m,p){if(!p&&!n)return!1;var s=!1;try{var i={};i[c]=function(){return{next:function(){return{done:s=!0}}}},m(i)}catch{}return s}},{"../internals/well-known-symbol":146}],28:[function(t,a,l){var c={}.toString;a.exports=function(n){return c.call(n).slice(8,-1)}},{}],29:[function(t,a,l){var c=t("../internals/to-string-tag-support"),n=t("../internals/classof-raw"),f=t("../internals/well-known-symbol")("toStringTag"),h=n(function(){return arguments}())=="Arguments";a.exports=c?n:function(m){var p,s,i;return m===void 0?"Undefined":m===null?"Null":typeof(s=function(o,d){try{return o[d]}catch{}}(p=Object(m),f))=="string"?s:h?n(p):(i=n(p))=="Object"&&typeof p.callee=="function"?"Arguments":i}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(t,a,l){var c=t("../internals/object-define-property").f,n=t("../internals/object-create"),f=t("../internals/redefine-all"),h=t("../internals/function-bind-context"),m=t("../internals/an-instance"),p=t("../internals/iterate"),s=t("../internals/define-iterator"),i=t("../internals/set-species"),o=t("../internals/descriptors"),d=t("../internals/internal-metadata").fastKey,u=t("../internals/internal-state"),g=u.set,b=u.getterFor;a.exports={getConstructor:function(_,w,S,T){function L(D,F,I){var k,U,q=P(D),Q=R(D,F);return Q?Q.value=I:(q.last=Q={index:U=d(F,!0),key:F,value:I,previous:k=q.last,next:void 0,removed:!1},q.first||(q.first=Q),k&&(k.next=Q),o?q.size++:D.size++,U!=="F"&&(q.index[U]=Q)),D}var A=_(function(D,F){m(D,A,w),g(D,{type:w,index:n(null),first:void 0,last:void 0,size:0}),o||(D.size=0),F!=null&&p(F,D[T],D,S)}),P=b(w),R=function(D,F){var I,k=P(D),U=d(F);if(U!=="F")return k.index[U];for(I=k.first;I;I=I.next)if(I.key==F)return I};return f(A.prototype,{clear:function(){for(var D=P(this),F=D.index,I=D.first;I;)I.removed=!0,I.previous&&(I.previous=I.previous.next=void 0),delete F[I.index],I=I.next;D.first=D.last=void 0,o?D.size=0:this.size=0},delete:function(D){var F=P(this),I=R(this,D);if(I){var k=I.next,U=I.previous;delete F.index[I.index],I.removed=!0,U&&(U.next=k),k&&(k.previous=U),F.first==I&&(F.first=k),F.last==I&&(F.last=U),o?F.size--:this.size--}return!!I},forEach:function(D,F){for(var I,k=P(this),U=h(D,1<arguments.length?F:void 0,3);I=I?I.next:k.first;)for(U(I.value,I.key,this);I&&I.removed;)I=I.previous},has:function(D){return!!R(this,D)}}),f(A.prototype,S?{get:function(D){var F=R(this,D);return F&&F.value},set:function(D,F){return L(this,D===0?0:D,F)}}:{add:function(D){return L(this,D=D===0?0:D,D)}}),o&&c(A.prototype,"size",{get:function(){return P(this).size}}),A},setStrong:function(_,w,S){var T=w+" Iterator",L=b(w),A=b(T);s(_,w,function(P,R){g(this,{type:T,target:P,state:L(P),kind:R,last:void 0})},function(){for(var P=A(this),R=P.kind,D=P.last;D&&D.removed;)D=D.previous;return P.target&&(P.last=D=D?D.next:P.state.first)?R=="keys"?{value:D.key,done:!1}:R=="values"?{value:D.value,done:!1}:{value:[D.key,D.value],done:!1}:{value:P.target=void 0,done:!0}},S?"entries":"values",!S,!0),i(w)}}},{"../internals/an-instance":9,"../internals/define-iterator":40,"../internals/descriptors":42,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/global"),f=t("../internals/is-forced"),h=t("../internals/redefine"),m=t("../internals/internal-metadata"),p=t("../internals/iterate"),s=t("../internals/an-instance"),i=t("../internals/is-object"),o=t("../internals/fails"),d=t("../internals/check-correctness-of-iteration"),u=t("../internals/set-to-string-tag"),g=t("../internals/inherit-if-required");a.exports=function(b,_,w){function S(W){var K=R[W];h(R,W,W=="add"?function(Y){return K.call(this,Y===0?0:Y),this}:W=="delete"?function(Y){return!(L&&!i(Y))&&K.call(this,Y===0?0:Y)}:W=="get"?function(Y){return L&&!i(Y)?void 0:K.call(this,Y===0?0:Y)}:W=="has"?function(Y){return!(L&&!i(Y))&&K.call(this,Y===0?0:Y)}:function(Y,se){return K.call(this,Y===0?0:Y,se),this})}var T=b.indexOf("Map")!==-1,L=b.indexOf("Weak")!==-1,A=T?"set":"add",P=n[b],R=P&&P.prototype,D=P,F={};if(f(b,typeof P!="function"||!(L||R.forEach&&!o(function(){new P().entries().next()}))))D=w.getConstructor(_,b,T,A),m.REQUIRED=!0;else if(f(b,!0)){var I=new D,k=I[A](L?{}:-0,1)!=I,U=o(function(){I.has(1)}),q=d(function(W){new P(W)}),Q=!L&&o(function(){for(var W=new P,K=5;K--;)W[A](K,K);return!W.has(-0)});q||(((D=_(function(W,K){s(W,D,b);var Y=g(new P,W,D);return K!=null&&p(K,Y[A],Y,T),Y})).prototype=R).constructor=D),(U||Q)&&(S("delete"),S("has"),T&&S("get")),(Q||k)&&S(A),L&&R.clear&&delete R.clear}return F[b]=D,c({global:!0,forced:D!=P},F),u(D,b),L||w.setStrong(D,b,T),D}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":49,"../internals/fails":50,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],32:[function(t,a,l){var c=t("../internals/has"),n=t("../internals/own-keys"),f=t("../internals/object-get-own-property-descriptor"),h=t("../internals/object-define-property");a.exports=function(m,p){for(var s=n(p),i=h.f,o=f.f,d=0;d<s.length;d++){var u=s[d];c(m,u)||i(m,u,o(p,u))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],33:[function(t,a,l){var c=t("../internals/well-known-symbol")("match");a.exports=function(n){var f=/./;try{"/./"[n](f)}catch{try{return f[c]=!1,"/./"[n](f)}catch{}}return!1}},{"../internals/well-known-symbol":146}],34:[function(t,a,l){var c=t("../internals/fails");a.exports=!c(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype})},{"../internals/fails":50}],35:[function(t,a,l){var c=t("../internals/require-object-coercible"),n=/"/g;a.exports=function(f,h,m,p){var s=String(c(f)),i="<"+h;return m!==""&&(i+=" "+m+'="'+String(p).replace(n,"&quot;")+'"'),i+">"+s+"</"+h+">"}},{"../internals/require-object-coercible":113}],36:[function(t,a,l){function c(){return this}var n=t("../internals/iterators-core").IteratorPrototype,f=t("../internals/object-create"),h=t("../internals/create-property-descriptor"),m=t("../internals/set-to-string-tag"),p=t("../internals/iterators");a.exports=function(s,i,o){var d=i+" Iterator";return s.prototype=f(n,{next:h(1,o)}),m(s,d,!1,!0),p[d]=c,s}},{"../internals/create-property-descriptor":38,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],37:[function(t,a,l){var c=t("../internals/descriptors"),n=t("../internals/object-define-property"),f=t("../internals/create-property-descriptor");a.exports=c?function(h,m,p){return n.f(h,m,f(1,p))}:function(h,m,p){return h[m]=p,h}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/object-define-property":92}],38:[function(t,a,l){a.exports=function(c,n){return{enumerable:!(1&c),configurable:!(2&c),writable:!(4&c),value:n}}},{}],39:[function(t,a,l){var c=t("../internals/to-primitive"),n=t("../internals/object-define-property"),f=t("../internals/create-property-descriptor");a.exports=function(h,m,p){var s=c(m);s in h?n.f(h,s,f(0,p)):h[s]=p}},{"../internals/create-property-descriptor":38,"../internals/object-define-property":92,"../internals/to-primitive":138}],40:[function(t,a,l){function c(){return this}var n=t("../internals/export"),f=t("../internals/create-iterator-constructor"),h=t("../internals/object-get-prototype-of"),m=t("../internals/object-set-prototype-of"),p=t("../internals/set-to-string-tag"),s=t("../internals/create-non-enumerable-property"),i=t("../internals/redefine"),o=t("../internals/well-known-symbol"),d=t("../internals/is-pure"),u=t("../internals/iterators"),g=t("../internals/iterators-core"),b=g.IteratorPrototype,_=g.BUGGY_SAFARI_ITERATORS,w=o("iterator"),S="values",T="entries";a.exports=function(L,A,P,R,D,F,I){f(P,A,R);function k(de){if(de===D&&ue)return ue;if(!_&&de in Y)return Y[de];switch(de){case"keys":case S:case T:return function(){return new P(this,de)}}return function(){return new P(this)}}var U,q,Q,W=A+" Iterator",K=!1,Y=L.prototype,se=Y[w]||Y["@@iterator"]||D&&Y[D],ue=!_&&se||k(D),ge=A=="Array"&&Y.entries||se;if(ge&&(U=h(ge.call(new L)),b!==Object.prototype&&U.next&&(d||h(U)===b||(m?m(U,b):typeof U[w]!="function"&&s(U,w,c)),p(U,W,!0,!0),d&&(u[W]=c))),D==S&&se&&se.name!==S&&(K=!0,ue=function(){return se.call(this)}),d&&!I||Y[w]===ue||s(Y,w,ue),u[A]=ue,D)if(q={values:k(S),keys:F?ue:k("keys"),entries:k(T)},I)for(Q in q)!_&&!K&&Q in Y||i(Y,Q,q[Q]);else n({target:A,proto:!0,forced:_||K},q);return q}},{"../internals/create-iterator-constructor":36,"../internals/create-non-enumerable-property":37,"../internals/export":49,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],41:[function(t,a,l){var c=t("../internals/path"),n=t("../internals/has"),f=t("../internals/well-known-symbol-wrapped"),h=t("../internals/object-define-property").f;a.exports=function(m){var p=c.Symbol||(c.Symbol={});n(p,m)||h(p,m,{value:f.f(m)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],42:[function(t,a,l){var c=t("../internals/fails");a.exports=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":50}],43:[function(t,a,l){var c=t("../internals/global"),n=t("../internals/is-object"),f=c.document,h=n(f)&&n(f.createElement);a.exports=function(m){return h?f.createElement(m):{}}},{"../internals/global":59,"../internals/is-object":74}],44:[function(t,a,l){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],45:[function(t,a,l){var c=t("../internals/engine-user-agent");a.exports=/(iphone|ipod|ipad).*applewebkit/i.test(c)},{"../internals/engine-user-agent":46}],46:[function(t,a,l){var c=t("../internals/get-built-in");a.exports=c("navigator","userAgent")||""},{"../internals/get-built-in":56}],47:[function(t,a,l){var c,n,f=t("../internals/global"),h=t("../internals/engine-user-agent"),m=f.process,p=m&&m.versions,s=p&&p.v8;s?n=(c=s.split("."))[0]+c[1]:h&&(!(c=h.match(/Edge\/(\d+)/))||74<=c[1])&&(c=h.match(/Chrome\/(\d+)/))&&(n=c[1]),a.exports=n&&+n},{"../internals/engine-user-agent":46,"../internals/global":59}],48:[function(t,a,l){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],49:[function(t,a,l){var c=t("../internals/global"),n=t("../internals/object-get-own-property-descriptor").f,f=t("../internals/create-non-enumerable-property"),h=t("../internals/redefine"),m=t("../internals/set-global"),p=t("../internals/copy-constructor-properties"),s=t("../internals/is-forced");a.exports=function(i,o){var d,u,g,b,_,w=i.target,S=i.global,T=i.stat;if(d=S?c:T?c[w]||m(w,{}):(c[w]||{}).prototype)for(u in o){if(b=o[u],g=i.noTargetGet?(_=n(d,u))&&_.value:d[u],!s(S?u:w+(T?".":"#")+u,i.forced)&&g!==void 0){if(typeof b==typeof g)continue;p(b,g)}(i.sham||g&&g.sham)&&f(b,"sham",!0),h(d,u,b,i)}}},{"../internals/copy-constructor-properties":32,"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],50:[function(t,a,l){a.exports=function(c){try{return!!c()}catch{return!0}}},{}],51:[function(t,a,l){t("../modules/es.regexp.exec");var c=t("../internals/redefine"),n=t("../internals/fails"),f=t("../internals/well-known-symbol"),h=t("../internals/regexp-exec"),m=t("../internals/create-non-enumerable-property"),p=f("species"),s=!n(function(){var g=/./;return g.exec=function(){var b=[];return b.groups={a:"7"},b},"".replace(g,"$<a>")!=="7"}),i="a".replace(/./,"$0")==="$0",o=f("replace"),d=!!/./[o]&&/./[o]("a","$0")==="",u=!n(function(){var g=/(?:)/,b=g.exec;g.exec=function(){return b.apply(this,arguments)};var _="ab".split(g);return _.length!==2||_[0]!=="a"||_[1]!=="b"});a.exports=function(g,b,_,w){var S=f(g),T=!n(function(){var F={};return F[S]=function(){return 7},""[g](F)!=7}),L=T&&!n(function(){var F=!1,I=/a/;return g==="split"&&((I={constructor:{}}).constructor[p]=function(){return I},I.flags="",I[S]=/./[S]),I.exec=function(){return F=!0,null},I[S](""),!F});if(!T||!L||g==="replace"&&(!s||!i||d)||g==="split"&&!u){var A=/./[S],P=_(S,""[g],function(F,I,k,U,q){return I.exec===h?T&&!q?{done:!0,value:A.call(I,k,U)}:{done:!0,value:F.call(k,I,U)}:{done:!1}},{REPLACE_KEEPS_$0:i,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),R=P[0],D=P[1];c(String.prototype,g,R),c(RegExp.prototype,S,b==2?function(F,I){return D.call(F,this,I)}:function(F){return D.call(F,this)})}w&&m(RegExp.prototype[S],"sham",!0)}},{"../internals/create-non-enumerable-property":37,"../internals/fails":50,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],52:[function(t,a,l){var c=t("../internals/is-array"),n=t("../internals/to-length"),f=t("../internals/function-bind-context"),h=function(m,p,s,i,o,d,u,g){for(var b,_=o,w=0,S=!!u&&f(u,g,3);w<i;){if(w in s){if(b=S?S(s[w],w,p):s[w],0<d&&c(b))_=h(m,p,b,n(b.length),_,d-1)-1;else{if(9007199254740991<=_)throw TypeError("Exceed the acceptable array length");m[_]=b}_++}w++}return _};a.exports=h},{"../internals/function-bind-context":54,"../internals/is-array":72,"../internals/to-length":134}],53:[function(t,a,l){var c=t("../internals/fails");a.exports=!c(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":50}],54:[function(t,a,l){var c=t("../internals/a-function");a.exports=function(n,f,h){if(c(n),f===void 0)return n;switch(h){case 0:return function(){return n.call(f)};case 1:return function(m){return n.call(f,m)};case 2:return function(m,p){return n.call(f,m,p)};case 3:return function(m,p,s){return n.call(f,m,p,s)}}return function(){return n.apply(f,arguments)}}},{"../internals/a-function":5}],55:[function(t,a,l){var c=t("../internals/a-function"),n=t("../internals/is-object"),f=[].slice,h={};a.exports=Function.bind||function(m){var p=c(this),s=f.call(arguments,1),i=function(){var o=s.concat(f.call(arguments));return this instanceof i?function(d,u,g){if(!(u in h)){for(var b=[],_=0;_<u;_++)b[_]="a["+_+"]";h[u]=Function("C,a","return new C("+b.join(",")+")")}return h[u](d,g)}(p,o.length,o):p.apply(m,o)};return n(p.prototype)&&(i.prototype=p.prototype),i}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(t,a,l){function c(h){return typeof h=="function"?h:void 0}var n=t("../internals/path"),f=t("../internals/global");a.exports=function(h,m){return arguments.length<2?c(n[h])||c(f[h]):n[h]&&n[h][m]||f[h]&&f[h][m]}},{"../internals/global":59,"../internals/path":104}],57:[function(t,a,l){var c=t("../internals/classof"),n=t("../internals/iterators"),f=t("../internals/well-known-symbol")("iterator");a.exports=function(h){if(h!=null)return h[f]||h["@@iterator"]||n[c(h)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(t,a,l){var c=t("../internals/an-object"),n=t("../internals/get-iterator-method");a.exports=function(f){var h=n(f);if(typeof h!="function")throw TypeError(String(f)+" is not iterable");return c(h.call(f))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(t,a,l){(function(c){function n(f){return f&&f.Math==Math&&f}a.exports=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof c=="object"&&c)||Function("return this")()}).call(this,typeof Gs!="undefined"?Gs:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],60:[function(t,a,l){var c={}.hasOwnProperty;a.exports=function(n,f){return c.call(n,f)}},{}],61:[function(t,a,l){a.exports={}},{}],62:[function(t,a,l){var c=t("../internals/global");a.exports=function(n,f){var h=c.console;h&&h.error&&(arguments.length===1?h.error(n):h.error(n,f))}},{"../internals/global":59}],63:[function(t,a,l){var c=t("../internals/get-built-in");a.exports=c("document","documentElement")},{"../internals/get-built-in":56}],64:[function(t,a,l){var c=t("../internals/descriptors"),n=t("../internals/fails"),f=t("../internals/document-create-element");a.exports=!c&&!n(function(){return Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":42,"../internals/document-create-element":43,"../internals/fails":50}],65:[function(t,a,l){var c=Math.abs,n=Math.pow,f=Math.floor,h=Math.log,m=Math.LN2;a.exports={pack:function(p,s,i){var o,d,u,g=new Array(i),b=8*i-s-1,_=(1<<b)-1,w=_>>1,S=s===23?n(2,-24)-n(2,-77):0,T=p<0||p===0&&1/p<0?1:0,L=0;for((p=c(p))!=p||p===1/0?(d=p!=p?1:0,o=_):(o=f(h(p)/m),p*(u=n(2,-o))<1&&(o--,u*=2),2<=(p+=1<=o+w?S/u:S*n(2,1-w))*u&&(o++,u/=2),_<=o+w?(d=0,o=_):1<=o+w?(d=(p*u-1)*n(2,s),o+=w):(d=p*n(2,w-1)*n(2,s),o=0));8<=s;g[L++]=255&d,d/=256,s-=8);for(o=o<<s|d,b+=s;0<b;g[L++]=255&o,o/=256,b-=8);return g[--L]|=128*T,g},unpack:function(p,s){var i,o=p.length,d=8*o-s-1,u=(1<<d)-1,g=u>>1,b=d-7,_=o-1,w=p[_--],S=127&w;for(w>>=7;0<b;S=256*S+p[_],_--,b-=8);for(i=S&(1<<-b)-1,S>>=-b,b+=s;0<b;i=256*i+p[_],_--,b-=8);if(S===0)S=1-g;else{if(S===u)return i?NaN:w?-1/0:1/0;i+=n(2,s),S-=g}return(w?-1:1)*i*n(2,S-s)}}},{}],66:[function(t,a,l){var c=t("../internals/fails"),n=t("../internals/classof-raw"),f="".split;a.exports=c(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return n(h)=="String"?f.call(h,""):Object(h)}:Object},{"../internals/classof-raw":28,"../internals/fails":50}],67:[function(t,a,l){var c=t("../internals/is-object"),n=t("../internals/object-set-prototype-of");a.exports=function(f,h,m){var p,s;return n&&typeof(p=h.constructor)=="function"&&p!==m&&c(s=p.prototype)&&s!==m.prototype&&n(f,s),f}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(t,a,l){var c=t("../internals/shared-store"),n=Function.toString;typeof c.inspectSource!="function"&&(c.inspectSource=function(f){return n.call(f)}),a.exports=c.inspectSource},{"../internals/shared-store":119}],69:[function(t,a,l){function c(g){m(g,i,{value:{objectID:"O"+ ++o,weakData:{}}})}var n=t("../internals/hidden-keys"),f=t("../internals/is-object"),h=t("../internals/has"),m=t("../internals/object-define-property").f,p=t("../internals/uid"),s=t("../internals/freezing"),i=p("meta"),o=0,d=Object.isExtensible||function(){return!0},u=a.exports={REQUIRED:!1,fastKey:function(g,b){if(!f(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!h(g,i)){if(!d(g))return"F";if(!b)return"E";c(g)}return g[i].objectID},getWeakData:function(g,b){if(!h(g,i)){if(!d(g))return!0;if(!b)return!1;c(g)}return g[i].weakData},onFreeze:function(g){return s&&u.REQUIRED&&d(g)&&!h(g,i)&&c(g),g}};n[i]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(t,a,l){var c,n,f,h=t("../internals/native-weak-map"),m=t("../internals/global"),p=t("../internals/is-object"),s=t("../internals/create-non-enumerable-property"),i=t("../internals/has"),o=t("../internals/shared-key"),d=t("../internals/hidden-keys"),u=m.WeakMap;if(h){var g=new u,b=g.get,_=g.has,w=g.set;c=function(T,L){return w.call(g,T,L),L},n=function(T){return b.call(g,T)||{}},f=function(T){return _.call(g,T)}}else{var S=o("state");d[S]=!0,c=function(T,L){return s(T,S,L),L},n=function(T){return i(T,S)?T[S]:{}},f=function(T){return i(T,S)}}a.exports={set:c,get:n,has:f,enforce:function(T){return f(T)?n(T):c(T,{})},getterFor:function(T){return function(L){var A;if(!p(L)||(A=n(L)).type!==T)throw TypeError("Incompatible receiver, "+T+" required");return A}}}},{"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(t,a,l){var c=t("../internals/well-known-symbol"),n=t("../internals/iterators"),f=c("iterator"),h=Array.prototype;a.exports=function(m){return m!==void 0&&(n.Array===m||h[f]===m)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(t,a,l){var c=t("../internals/classof-raw");a.exports=Array.isArray||function(n){return c(n)=="Array"}},{"../internals/classof-raw":28}],73:[function(t,a,l){function c(i,o){var d=m[h(i)];return d==s||d!=p&&(typeof o=="function"?n(o):!!o)}var n=t("../internals/fails"),f=/#|\.prototype\./,h=c.normalize=function(i){return String(i).replace(f,".").toLowerCase()},m=c.data={},p=c.NATIVE="N",s=c.POLYFILL="P";a.exports=c},{"../internals/fails":50}],74:[function(t,a,l){a.exports=function(c){return typeof c=="object"?c!==null:typeof c=="function"}},{}],75:[function(t,a,l){a.exports=!1},{}],76:[function(t,a,l){var c=t("../internals/is-object"),n=t("../internals/classof-raw"),f=t("../internals/well-known-symbol")("match");a.exports=function(h){var m;return c(h)&&((m=h[f])!==void 0?!!m:n(h)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(t,a,l){function c(i,o){this.stopped=i,this.result=o}var n=t("../internals/an-object"),f=t("../internals/is-array-iterator-method"),h=t("../internals/to-length"),m=t("../internals/function-bind-context"),p=t("../internals/get-iterator-method"),s=t("../internals/call-with-safe-iteration-closing");(a.exports=function(i,o,d,u,g){var b,_,w,S,T,L,A,P=m(o,d,u?2:1);if(g)b=i;else{if(typeof(_=p(i))!="function")throw TypeError("Target is not iterable");if(f(_)){for(w=0,S=h(i.length);w<S;w++)if((T=u?P(n(A=i[w])[0],A[1]):P(i[w]))&&T instanceof c)return T;return new c(!1)}b=_.call(i)}for(L=b.next;!(A=L.call(b)).done;)if(typeof(T=s(b,P,A.value,u))=="object"&&T&&T instanceof c)return T;return new c(!1)}).stop=function(i){return new c(!0,i)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(t,a,l){var c,n,f,h=t("../internals/object-get-prototype-of"),m=t("../internals/create-non-enumerable-property"),p=t("../internals/has"),s=t("../internals/well-known-symbol"),i=t("../internals/is-pure"),o=s("iterator"),d=!1;[].keys&&("next"in(f=[].keys())?(n=h(h(f)))!==Object.prototype&&(c=n):d=!0),c==null&&(c={}),i||p(c,o)||m(c,o,function(){return this}),a.exports={IteratorPrototype:c,BUGGY_SAFARI_ITERATORS:d}},{"../internals/create-non-enumerable-property":37,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(t,a,l){arguments[4][61][0].apply(l,arguments)},{dup:61}],80:[function(t,a,l){a.exports=Math.sign||function(c){return(c=+c)==0||c!=c?c:c<0?-1:1}},{}],81:[function(t,a,l){var c,n,f,h,m,p,s,i,o=t("../internals/global"),d=t("../internals/object-get-own-property-descriptor").f,u=t("../internals/classof-raw"),g=t("../internals/task").set,b=t("../internals/engine-is-ios"),_=o.MutationObserver||o.WebKitMutationObserver,w=o.process,S=o.Promise,T=u(w)=="process",L=d(o,"queueMicrotask"),A=L&&L.value;A||(c=function(){var P,R;for(T&&(P=w.domain)&&P.exit();n;){R=n.fn,n=n.next;try{R()}catch(D){throw n?h():f=void 0,D}}f=void 0,P&&P.enter()},h=T?function(){w.nextTick(c)}:_&&!b?(m=!0,p=document.createTextNode(""),new _(c).observe(p,{characterData:!0}),function(){p.data=m=!m}):S&&S.resolve?(s=S.resolve(void 0),i=s.then,function(){i.call(s,c)}):function(){g.call(o,c)}),a.exports=A||function(P){var R={fn:P,next:void 0};f&&(f.next=R),n||(n=R,h()),f=R}},{"../internals/classof-raw":28,"../internals/engine-is-ios":45,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(t,a,l){var c=t("../internals/global");a.exports=c.Promise},{"../internals/global":59}],83:[function(t,a,l){var c=t("../internals/fails");a.exports=!!Object.getOwnPropertySymbols&&!c(function(){return!String(Symbol())})},{"../internals/fails":50}],84:[function(t,a,l){var c=t("../internals/fails"),n=t("../internals/well-known-symbol"),f=t("../internals/is-pure"),h=n("iterator");a.exports=!c(function(){var m=new URL("b?a=1&b=2&c=3","http://a"),p=m.searchParams,s="";return m.pathname="c%20d",p.forEach(function(i,o){p.delete("b"),s+=o+i}),f&&!m.toJSON||!p.sort||m.href!=="http://a/c%20d?a=1&c=3"||p.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!p[h]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||s!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":50,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(t,a,l){var c=t("../internals/global"),n=t("../internals/inspect-source"),f=c.WeakMap;a.exports=typeof f=="function"&&/native code/.test(n(f))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(t,a,l){function c(f){var h,m;this.promise=new f(function(p,s){if(h!==void 0||m!==void 0)throw TypeError("Bad Promise constructor");h=p,m=s}),this.resolve=n(h),this.reject=n(m)}var n=t("../internals/a-function");a.exports.f=function(f){return new c(f)}},{"../internals/a-function":5}],87:[function(t,a,l){var c=t("../internals/is-regexp");a.exports=function(n){if(c(n))throw TypeError("The method doesn't accept regular expressions");return n}},{"../internals/is-regexp":76}],88:[function(t,a,l){var c=t("../internals/global").isFinite;a.exports=Number.isFinite||function(n){return typeof n=="number"&&c(n)}},{"../internals/global":59}],89:[function(t,a,l){var c=t("../internals/descriptors"),n=t("../internals/fails"),f=t("../internals/object-keys"),h=t("../internals/object-get-own-property-symbols"),m=t("../internals/object-property-is-enumerable"),p=t("../internals/to-object"),s=t("../internals/indexed-object"),i=Object.assign,o=Object.defineProperty;a.exports=!i||n(function(){if(c&&i({b:1},i(o({},"a",{enumerable:!0,get:function(){o(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var d={},u={},g=Symbol(),b="abcdefghijklmnopqrst";return d[g]=7,b.split("").forEach(function(_){u[_]=_}),i({},d)[g]!=7||f(i({},u)).join("")!=b})?function(d,u){for(var g=p(d),b=arguments.length,_=1,w=h.f,S=m.f;_<b;)for(var T,L=s(arguments[_++]),A=w?f(L).concat(w(L)):f(L),P=A.length,R=0;R<P;)T=A[R++],c&&!S.call(L,T)||(g[T]=L[T]);return g}:i},{"../internals/descriptors":42,"../internals/fails":50,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(t,a,l){function c(){}function n(w){return"<script>"+w+"</"+g+">"}var f,h=t("../internals/an-object"),m=t("../internals/object-define-properties"),p=t("../internals/enum-bug-keys"),s=t("../internals/hidden-keys"),i=t("../internals/html"),o=t("../internals/document-create-element"),d=t("../internals/shared-key"),u="prototype",g="script",b=d("IE_PROTO"),_=function(){try{f=document.domain&&new ActiveXObject("htmlfile")}catch{}var w,S;_=f?function(L){L.write(n("")),L.close();var A=L.parentWindow.Object;return L=null,A}(f):((S=o("iframe")).style.display="none",i.appendChild(S),S.src=String("javascript:"),(w=S.contentWindow.document).open(),w.write(n("document.F=Object")),w.close(),w.F);for(var T=p.length;T--;)delete _[u][p[T]];return _()};s[b]=!0,a.exports=Object.create||function(w,S){var T;return w!==null?(c[u]=h(w),T=new c,c[u]=null,T[b]=w):T=_(),S===void 0?T:m(T,S)}},{"../internals/an-object":10,"../internals/document-create-element":43,"../internals/enum-bug-keys":48,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(t,a,l){var c=t("../internals/descriptors"),n=t("../internals/object-define-property"),f=t("../internals/an-object"),h=t("../internals/object-keys");a.exports=c?Object.defineProperties:function(m,p){f(m);for(var s,i=h(p),o=i.length,d=0;d<o;)n.f(m,s=i[d++],p[s]);return m}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(t,a,l){var c=t("../internals/descriptors"),n=t("../internals/ie8-dom-define"),f=t("../internals/an-object"),h=t("../internals/to-primitive"),m=Object.defineProperty;l.f=c?m:function(p,s,i){if(f(p),s=h(s,!0),f(i),n)try{return m(p,s,i)}catch{}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(p[s]=i.value),p}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(t,a,l){var c=t("../internals/descriptors"),n=t("../internals/object-property-is-enumerable"),f=t("../internals/create-property-descriptor"),h=t("../internals/to-indexed-object"),m=t("../internals/to-primitive"),p=t("../internals/has"),s=t("../internals/ie8-dom-define"),i=Object.getOwnPropertyDescriptor;l.f=c?i:function(o,d){if(o=h(o),d=m(d,!0),s)try{return i(o,d)}catch{}if(p(o,d))return f(!n.f.call(o,d),o[d])}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(t,a,l){var c=t("../internals/to-indexed-object"),n=t("../internals/object-get-own-property-names").f,f={}.toString,h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];a.exports.f=function(m){return h&&f.call(m)=="[object Window]"?function(p){try{return n(p)}catch{return h.slice()}}(m):n(c(m))}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(t,a,l){var c=t("../internals/object-keys-internal"),n=t("../internals/enum-bug-keys").concat("length","prototype");l.f=Object.getOwnPropertyNames||function(f){return c(f,n)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":98}],96:[function(t,a,l){l.f=Object.getOwnPropertySymbols},{}],97:[function(t,a,l){var c=t("../internals/has"),n=t("../internals/to-object"),f=t("../internals/shared-key"),h=t("../internals/correct-prototype-getter"),m=f("IE_PROTO"),p=Object.prototype;a.exports=h?Object.getPrototypeOf:function(s){return s=n(s),c(s,m)?s[m]:typeof s.constructor=="function"&&s instanceof s.constructor?s.constructor.prototype:s instanceof Object?p:null}},{"../internals/correct-prototype-getter":34,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(t,a,l){var c=t("../internals/has"),n=t("../internals/to-indexed-object"),f=t("../internals/array-includes").indexOf,h=t("../internals/hidden-keys");a.exports=function(m,p){var s,i=n(m),o=0,d=[];for(s in i)!c(h,s)&&c(i,s)&&d.push(s);for(;p.length>o;)c(i,s=p[o++])&&(~f(d,s)||d.push(s));return d}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(t,a,l){var c=t("../internals/object-keys-internal"),n=t("../internals/enum-bug-keys");a.exports=Object.keys||function(f){return c(f,n)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":98}],100:[function(t,a,l){var c={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,f=n&&!c.call({1:2},1);l.f=f?function(h){var m=n(this,h);return!!m&&m.enumerable}:c},{}],101:[function(t,a,l){var c=t("../internals/an-object"),n=t("../internals/a-possible-prototype");a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var f,h=!1,m={};try{(f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(m,[]),h=m instanceof Array}catch{}return function(p,s){return c(p),n(s),h?f.call(p,s):p.__proto__=s,p}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(t,a,l){var c=t("../internals/to-string-tag-support"),n=t("../internals/classof");a.exports=c?{}.toString:function(){return"[object "+n(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(t,a,l){var c=t("../internals/get-built-in"),n=t("../internals/object-get-own-property-names"),f=t("../internals/object-get-own-property-symbols"),h=t("../internals/an-object");a.exports=c("Reflect","ownKeys")||function(m){var p=n.f(h(m)),s=f.f;return s?p.concat(s(m)):p}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(t,a,l){var c=t("../internals/global");a.exports=c},{"../internals/global":59}],105:[function(t,a,l){a.exports=function(c){try{return{error:!1,value:c()}}catch(n){return{error:!0,value:n}}}},{}],106:[function(t,a,l){var c=t("../internals/an-object"),n=t("../internals/is-object"),f=t("../internals/new-promise-capability");a.exports=function(h,m){if(c(h),n(m)&&m.constructor===h)return m;var p=f.f(h);return(0,p.resolve)(m),p.promise}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(t,a,l){var c=t("../internals/redefine");a.exports=function(n,f,h){for(var m in f)c(n,m,f[m],h);return n}},{"../internals/redefine":108}],108:[function(t,a,l){var c=t("../internals/global"),n=t("../internals/create-non-enumerable-property"),f=t("../internals/has"),h=t("../internals/set-global"),m=t("../internals/inspect-source"),p=t("../internals/internal-state"),s=p.get,i=p.enforce,o=String(String).split("String");(a.exports=function(d,u,g,b){var _=!!b&&!!b.unsafe,w=!!b&&!!b.enumerable,S=!!b&&!!b.noTargetGet;typeof g=="function"&&(typeof u!="string"||f(g,"name")||n(g,"name",u),i(g).source=o.join(typeof u=="string"?u:"")),d!==c?(_?!S&&d[u]&&(w=!0):delete d[u],w?d[u]=g:n(d,u,g)):w?d[u]=g:h(u,g)})(Function.prototype,"toString",function(){return typeof this=="function"&&s(this).source||m(this)})},{"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(t,a,l){var c=t("./classof-raw"),n=t("./regexp-exec");a.exports=function(f,h){var m=f.exec;if(typeof m=="function"){var p=m.call(f,h);if(typeof p!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return p}if(c(f)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return n.call(f,h)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(t,a,l){var c,n,f=t("./regexp-flags"),h=t("./regexp-sticky-helpers"),m=RegExp.prototype.exec,p=String.prototype.replace,s=m,i=(c=/a/,n=/b*/g,m.call(c,"a"),m.call(n,"a"),c.lastIndex!==0||n.lastIndex!==0),o=h.UNSUPPORTED_Y||h.BROKEN_CARET,d=/()??/.exec("")[1]!==void 0;(i||d||o)&&(s=function(u){var g,b,_,w,S=this,T=o&&S.sticky,L=f.call(S),A=S.source,P=0,R=u;return T&&((L=L.replace("y","")).indexOf("g")===-1&&(L+="g"),R=String(u).slice(S.lastIndex),0<S.lastIndex&&(!S.multiline||S.multiline&&u[S.lastIndex-1]!==`
`)&&(A="(?: "+A+")",R=" "+R,P++),b=new RegExp("^(?:"+A+")",L)),d&&(b=new RegExp("^"+A+"$(?!\\s)",L)),i&&(g=S.lastIndex),_=m.call(T?b:S,R),T?_?(_.input=_.input.slice(P),_[0]=_[0].slice(P),_.index=S.lastIndex,S.lastIndex+=_[0].length):S.lastIndex=0:i&&_&&(S.lastIndex=S.global?_.index+_[0].length:g),d&&_&&1<_.length&&p.call(_[0],b,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(_[w]=void 0)}),_}),a.exports=s},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(t,a,l){var c=t("../internals/an-object");a.exports=function(){var n=c(this),f="";return n.global&&(f+="g"),n.ignoreCase&&(f+="i"),n.multiline&&(f+="m"),n.dotAll&&(f+="s"),n.unicode&&(f+="u"),n.sticky&&(f+="y"),f}},{"../internals/an-object":10}],112:[function(t,a,l){var c=t("./fails");function n(f,h){return RegExp(f,h)}l.UNSUPPORTED_Y=c(function(){var f=n("a","y");return f.lastIndex=2,f.exec("abcd")!=null}),l.BROKEN_CARET=c(function(){var f=n("^r","gy");return f.lastIndex=2,f.exec("str")!=null})},{"./fails":50}],113:[function(t,a,l){a.exports=function(c){if(c==null)throw TypeError("Can't call method on "+c);return c}},{}],114:[function(t,a,l){a.exports=Object.is||function(c,n){return c===n?c!==0||1/c==1/n:c!=c&&n!=n}},{}],115:[function(t,a,l){var c=t("../internals/global"),n=t("../internals/create-non-enumerable-property");a.exports=function(f,h){try{n(c,f,h)}catch{c[f]=h}return h}},{"../internals/create-non-enumerable-property":37,"../internals/global":59}],116:[function(t,a,l){var c=t("../internals/get-built-in"),n=t("../internals/object-define-property"),f=t("../internals/well-known-symbol"),h=t("../internals/descriptors"),m=f("species");a.exports=function(p){var s=c(p),i=n.f;h&&s&&!s[m]&&i(s,m,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":42,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(t,a,l){var c=t("../internals/object-define-property").f,n=t("../internals/has"),f=t("../internals/well-known-symbol")("toStringTag");a.exports=function(h,m,p){h&&!n(h=p?h:h.prototype,f)&&c(h,f,{configurable:!0,value:m})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(t,a,l){var c=t("../internals/shared"),n=t("../internals/uid"),f=c("keys");a.exports=function(h){return f[h]||(f[h]=n(h))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(t,a,l){var c=t("../internals/global"),n=t("../internals/set-global"),f="__core-js_shared__",h=c[f]||n(f,{});a.exports=h},{"../internals/global":59,"../internals/set-global":115}],120:[function(t,a,l){var c=t("../internals/is-pure"),n=t("../internals/shared-store");(a.exports=function(f,h){return n[f]||(n[f]=h!==void 0?h:{})})("versions",[]).push({version:"3.6.5",mode:c?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(t,a,l){var c=t("../internals/an-object"),n=t("../internals/a-function"),f=t("../internals/well-known-symbol")("species");a.exports=function(h,m){var p,s=c(h).constructor;return s===void 0||(p=c(s)[f])==null?m:n(p)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(t,a,l){var c=t("../internals/fails");a.exports=function(n){return c(function(){var f=""[n]('"');return f!==f.toLowerCase()||3<f.split('"').length})}},{"../internals/fails":50}],123:[function(t,a,l){function c(h){return function(m,p){var s,i,o=String(f(m)),d=n(p),u=o.length;return d<0||u<=d?h?"":void 0:(s=o.charCodeAt(d))<55296||56319<s||d+1===u||(i=o.charCodeAt(d+1))<56320||57343<i?h?o.charAt(d):s:h?o.slice(d,d+2):i-56320+(s-55296<<10)+65536}}var n=t("../internals/to-integer"),f=t("../internals/require-object-coercible");a.exports={codeAt:c(!1),charAt:c(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(t,a,l){function c(d){return d+22+75*(d<26)}function n(d,u,g){var b=0;for(d=g?i(d/700):d>>1,d+=i(d/u);455<d;b+=36)d=i(d/35);return i(b+36*d/(d+38))}function f(d){var u,g,b=[],_=(d=function(q){for(var Q=[],W=0,K=q.length;W<K;){var Y=q.charCodeAt(W++);if(55296<=Y&&Y<=56319&&W<K){var se=q.charCodeAt(W++);(64512&se)==56320?Q.push(((1023&Y)<<10)+(1023&se)+65536):(Q.push(Y),W--)}else Q.push(Y)}return Q}(d)).length,w=128,S=0,T=72;for(u=0;u<d.length;u++)(g=d[u])<128&&b.push(o(g));var L=b.length,A=L;for(L&&b.push("-");A<_;){var P=h;for(u=0;u<d.length;u++)w<=(g=d[u])&&g<P&&(P=g);var R=A+1;if(P-w>i((h-S)/R))throw RangeError(s);for(S+=(P-w)*R,w=P,u=0;u<d.length;u++){if((g=d[u])<w&&++S>h)throw RangeError(s);if(g==w){for(var D=S,F=36;;F+=36){var I=F<=T?1:T+26<=F?26:F-T;if(D<I)break;var k=D-I,U=36-I;b.push(o(c(I+k%U))),D=i(k/U)}b.push(o(c(D))),T=n(S,R,A==L),S=0,++A}}++S,++w}return b.join("")}var h=2147483647,m=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",i=Math.floor,o=String.fromCharCode;a.exports=function(d){var u,g,b=[],_=d.toLowerCase().replace(p,".").split(".");for(u=0;u<_.length;u++)g=_[u],b.push(m.test(g)?"xn--"+f(g):g);return b.join(".")}},{}],125:[function(t,a,l){var c=t("../internals/to-integer"),n=t("../internals/require-object-coercible");a.exports="".repeat||function(f){var h=String(n(this)),m="",p=c(f);if(p<0||p==1/0)throw RangeError("Wrong number of repetitions");for(;0<p;(p>>>=1)&&(h+=h))1&p&&(m+=h);return m}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(t,a,l){var c=t("../internals/fails"),n=t("../internals/whitespaces");a.exports=function(f){return c(function(){return!!n[f]()||"\u200B\x85\u180E"[f]()!="\u200B\x85\u180E"||n[f].name!==f})}},{"../internals/fails":50,"../internals/whitespaces":147}],127:[function(t,a,l){function c(p){return function(s){var i=String(n(s));return 1&p&&(i=i.replace(h,"")),2&p&&(i=i.replace(m,"")),i}}var n=t("../internals/require-object-coercible"),f="["+t("../internals/whitespaces")+"]",h=RegExp("^"+f+f+"*"),m=RegExp(f+f+"*$");a.exports={start:c(1),end:c(2),trim:c(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(t,a,l){function c(I){if(D.hasOwnProperty(I)){var k=D[I];delete D[I],k()}}function n(I){return function(){c(I)}}function f(I){c(I.data)}function h(I){i.postMessage(I+"",w.protocol+"//"+w.host)}var m,p,s,i=t("../internals/global"),o=t("../internals/fails"),d=t("../internals/classof-raw"),u=t("../internals/function-bind-context"),g=t("../internals/html"),b=t("../internals/document-create-element"),_=t("../internals/engine-is-ios"),w=i.location,S=i.setImmediate,T=i.clearImmediate,L=i.process,A=i.MessageChannel,P=i.Dispatch,R=0,D={},F="onreadystatechange";S&&T||(S=function(I){for(var k=[],U=1;U<arguments.length;)k.push(arguments[U++]);return D[++R]=function(){(typeof I=="function"?I:Function(I)).apply(void 0,k)},m(R),R},T=function(I){delete D[I]},d(L)=="process"?m=function(I){L.nextTick(n(I))}:P&&P.now?m=function(I){P.now(n(I))}:A&&!_?(s=(p=new A).port2,p.port1.onmessage=f,m=u(s.postMessage,s,1)):!i.addEventListener||typeof postMessage!="function"||i.importScripts||o(h)||w.protocol==="file:"?m=F in b("script")?function(I){g.appendChild(b("script"))[F]=function(){g.removeChild(this),c(I)}}:function(I){setTimeout(n(I),0)}:(m=h,i.addEventListener("message",f,!1))),a.exports={set:S,clear:T}},{"../internals/classof-raw":28,"../internals/document-create-element":43,"../internals/engine-is-ios":45,"../internals/fails":50,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(t,a,l){var c=t("../internals/classof-raw");a.exports=function(n){if(typeof n!="number"&&c(n)!="Number")throw TypeError("Incorrect invocation");return+n}},{"../internals/classof-raw":28}],130:[function(t,a,l){var c=t("../internals/to-integer"),n=Math.max,f=Math.min;a.exports=function(h,m){var p=c(h);return p<0?n(p+m,0):f(p,m)}},{"../internals/to-integer":133}],131:[function(t,a,l){var c=t("../internals/to-integer"),n=t("../internals/to-length");a.exports=function(f){if(f===void 0)return 0;var h=c(f),m=n(h);if(h!==m)throw RangeError("Wrong length or index");return m}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(t,a,l){var c=t("../internals/indexed-object"),n=t("../internals/require-object-coercible");a.exports=function(f){return c(n(f))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(t,a,l){var c=Math.ceil,n=Math.floor;a.exports=function(f){return isNaN(f=+f)?0:(0<f?n:c)(f)}},{}],134:[function(t,a,l){var c=t("../internals/to-integer"),n=Math.min;a.exports=function(f){return 0<f?n(c(f),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(t,a,l){var c=t("../internals/require-object-coercible");a.exports=function(n){return Object(c(n))}},{"../internals/require-object-coercible":113}],136:[function(t,a,l){var c=t("../internals/to-positive-integer");a.exports=function(n,f){var h=c(n);if(h%f)throw RangeError("Wrong offset");return h}},{"../internals/to-positive-integer":137}],137:[function(t,a,l){var c=t("../internals/to-integer");a.exports=function(n){var f=c(n);if(f<0)throw RangeError("The argument can't be less than 0");return f}},{"../internals/to-integer":133}],138:[function(t,a,l){var c=t("../internals/is-object");a.exports=function(n,f){if(!c(n))return n;var h,m;if(f&&typeof(h=n.toString)=="function"&&!c(m=h.call(n))||typeof(h=n.valueOf)=="function"&&!c(m=h.call(n))||!f&&typeof(h=n.toString)=="function"&&!c(m=h.call(n)))return m;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(t,a,l){var c={};c[t("../internals/well-known-symbol")("toStringTag")]="z",a.exports=String(c)==="[object z]"},{"../internals/well-known-symbol":146}],140:[function(t,a,l){function c(he,Ae){for(var Oe=0,Ie=Ae.length,ie=new(ye(he))(Ie);Oe<Ie;)ie[Oe]=Ae[Oe++];return ie}function n(he,Ae){de(he,Ae,{get:function(){return ue(this)[Ae]}})}function f(he){var Ae;return he instanceof j||(Ae=R(he))=="ArrayBuffer"||Ae=="SharedArrayBuffer"}function h(he,Ae){return ne(he)&&typeof Ae!="symbol"&&Ae in he&&String(+Ae)==String(Ae)}function m(he,Ae){return h(he,Ae=A(Ae,!0))?_(2,he[Ae]):Pe(he,Ae)}function p(he,Ae,Oe){return!(h(he,Ae=A(Ae,!0))&&D(Oe)&&P(Oe,"value"))||P(Oe,"get")||P(Oe,"set")||Oe.configurable||P(Oe,"writable")&&!Oe.writable||P(Oe,"enumerable")&&!Oe.enumerable?de(he,Ae,Oe):(he[Ae]=Oe.value,he)}var s=t("../internals/export"),i=t("../internals/global"),o=t("../internals/descriptors"),d=t("../internals/typed-array-constructors-require-wrappers"),u=t("../internals/array-buffer-view-core"),g=t("../internals/array-buffer"),b=t("../internals/an-instance"),_=t("../internals/create-property-descriptor"),w=t("../internals/create-non-enumerable-property"),S=t("../internals/to-length"),T=t("../internals/to-index"),L=t("../internals/to-offset"),A=t("../internals/to-primitive"),P=t("../internals/has"),R=t("../internals/classof"),D=t("../internals/is-object"),F=t("../internals/object-create"),I=t("../internals/object-set-prototype-of"),k=t("../internals/object-get-own-property-names").f,U=t("../internals/typed-array-from"),q=t("../internals/array-iteration").forEach,Q=t("../internals/set-species"),W=t("../internals/object-define-property"),K=t("../internals/object-get-own-property-descriptor"),Y=t("../internals/internal-state"),se=t("../internals/inherit-if-required"),ue=Y.get,ge=Y.set,de=W.f,Pe=K.f,ae=Math.round,we=i.RangeError,j=g.ArrayBuffer,B=g.DataView,V=u.NATIVE_ARRAY_BUFFER_VIEWS,te=u.TYPED_ARRAY_TAG,$=u.TypedArray,X=u.TypedArrayPrototype,ye=u.aTypedArrayConstructor,ne=u.isTypedArray,pe="BYTES_PER_ELEMENT",ve="Wrong length";o?(V||(K.f=m,W.f=p,n(X,"buffer"),n(X,"byteOffset"),n(X,"byteLength"),n(X,"length")),s({target:"Object",stat:!0,forced:!V},{getOwnPropertyDescriptor:m,defineProperty:p}),a.exports=function(he,Ae,Oe){function Ie(qe,be){de(qe,be,{get:function(){return Xe=be,(O=ue(this)).view[Le](Xe*ie+O.byteOffset,!0);var Xe,O},set:function(Xe){return O=be,H=Xe,G=ue(this),Oe&&(H=(H=ae(H))<0?0:255<H?255:255&H),void G.view[De](O*ie+G.byteOffset,H,!0);var O,H,G},enumerable:!0})}var ie=he.match(/\d+$/)[0]/8,ee=he+(Oe?"Clamped":"")+"Array",Le="get"+he,De="set"+he,Ze=i[ee],Ce=Ze,je=Ce&&Ce.prototype,Ee={};V?d&&(Ce=Ae(function(qe,be,Xe,O){return b(qe,Ce,ee),se(D(be)?f(be)?O!==void 0?new Ze(be,L(Xe,ie),O):Xe!==void 0?new Ze(be,L(Xe,ie)):new Ze(be):ne(be)?c(Ce,be):U.call(Ce,be):new Ze(T(be)),qe,Ce)}),I&&I(Ce,$),q(k(Ze),function(qe){qe in Ce||w(Ce,qe,Ze[qe])}),Ce.prototype=je):(Ce=Ae(function(qe,be,Xe,O){b(qe,Ce,ee);var H,G,Z,oe=0,xe=0;if(D(be)){if(!f(be))return ne(be)?c(Ce,be):U.call(Ce,be);H=be,xe=L(Xe,ie);var Se=be.byteLength;if(O===void 0){if(Se%ie||(G=Se-xe)<0)throw we(ve)}else if(Se<(G=S(O)*ie)+xe)throw we(ve);Z=G/ie}else Z=T(be),H=new j(G=Z*ie);for(ge(qe,{buffer:H,byteOffset:xe,byteLength:G,length:Z,view:new B(H)});oe<Z;)Ie(qe,oe++)}),I&&I(Ce,$),je=Ce.prototype=F(X)),je.constructor!==Ce&&w(je,"constructor",Ce),te&&w(je,te,ee),Ee[ee]=Ce,s({global:!0,forced:Ce!=Ze,sham:!V},Ee),pe in Ce||w(Ce,pe,ie),pe in je||w(je,pe,ie),Q(ee)}):a.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(t,a,l){var c=t("../internals/global"),n=t("../internals/fails"),f=t("../internals/check-correctness-of-iteration"),h=t("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,m=c.ArrayBuffer,p=c.Int8Array;a.exports=!h||!n(function(){p(1)})||!n(function(){new p(-1)})||!f(function(s){new p,new p(null),new p(1.5),new p(s)},!0)||n(function(){return new p(new m(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":50,"../internals/global":59}],142:[function(t,a,l){var c=t("../internals/to-object"),n=t("../internals/to-length"),f=t("../internals/get-iterator-method"),h=t("../internals/is-array-iterator-method"),m=t("../internals/function-bind-context"),p=t("../internals/array-buffer-view-core").aTypedArrayConstructor;a.exports=function(s,i,o){var d,u,g,b,_,w,S=c(s),T=arguments.length,L=1<T?i:void 0,A=L!==void 0,P=f(S);if(P!=null&&!h(P))for(w=(_=P.call(S)).next,S=[];!(b=w.call(_)).done;)S.push(b.value);for(A&&2<T&&(L=m(L,o,2)),u=n(S.length),g=new(p(this))(u),d=0;d<u;d++)g[d]=A?L(S[d],d):S[d];return g}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(t,a,l){var c=0,n=Math.random();a.exports=function(f){return"Symbol("+String(f===void 0?"":f)+")_"+(++c+n).toString(36)}},{}],144:[function(t,a,l){var c=t("../internals/native-symbol");a.exports=c&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],145:[function(t,a,l){var c=t("../internals/well-known-symbol");l.f=c},{"../internals/well-known-symbol":146}],146:[function(t,a,l){var c=t("../internals/global"),n=t("../internals/shared"),f=t("../internals/has"),h=t("../internals/uid"),m=t("../internals/native-symbol"),p=t("../internals/use-symbol-as-uid"),s=n("wks"),i=c.Symbol,o=p?i:i&&i.withoutSetter||h;a.exports=function(d){return f(s,d)||(m&&f(i,d)?s[d]=i[d]:s[d]=o("Symbol."+d)),s[d]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(t,a,l){a.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},{}],148:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/global"),f=t("../internals/array-buffer"),h=t("../internals/set-species"),m="ArrayBuffer",p=f[m];c({global:!0,forced:n[m]!==p},{ArrayBuffer:p}),h(m)},{"../internals/array-buffer":13,"../internals/export":49,"../internals/global":59,"../internals/set-species":116}],149:[function(t,a,l){function c(L){if(!m(L))return!1;var A=L[b];return A!==void 0?!!A:h(L)}var n=t("../internals/export"),f=t("../internals/fails"),h=t("../internals/is-array"),m=t("../internals/is-object"),p=t("../internals/to-object"),s=t("../internals/to-length"),i=t("../internals/create-property"),o=t("../internals/array-species-create"),d=t("../internals/array-method-has-species-support"),u=t("../internals/well-known-symbol"),g=t("../internals/engine-v8-version"),b=u("isConcatSpreadable"),_=9007199254740991,w="Maximum allowed index exceeded",S=51<=g||!f(function(){var L=[];return L[b]=!1,L.concat()[0]!==L}),T=d("concat");n({target:"Array",proto:!0,forced:!S||!T},{concat:function(L){var A,P,R,D,F,I=p(this),k=o(I,0),U=0;for(A=-1,R=arguments.length;A<R;A++)if(c(F=A===-1?I:arguments[A])){if(D=s(F.length),_<U+D)throw TypeError(w);for(P=0;P<D;P++,U++)P in F&&i(k,U,F[P])}else{if(_<=U)throw TypeError(w);i(k,U++,F)}return k.length=U,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/fails":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/array-iteration").every,f=t("../internals/array-method-is-strict"),h=t("../internals/array-method-uses-to-length"),m=f("every"),p=h("every");c({target:"Array",proto:!0,forced:!m||!p},{every:function(s,i){return n(this,s,1<arguments.length?i:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],151:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/array-fill"),f=t("../internals/add-to-unscopables");c({target:"Array",proto:!0},{fill:n}),f("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":49}],152:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/array-iteration").filter,f=t("../internals/array-method-has-species-support"),h=t("../internals/array-method-uses-to-length"),m=f("filter"),p=h("filter");c({target:"Array",proto:!0,forced:!m||!p},{filter:function(s,i){return n(this,s,1<arguments.length?i:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],153:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/flatten-into-array"),f=t("../internals/to-object"),h=t("../internals/to-length"),m=t("../internals/a-function"),p=t("../internals/array-species-create");c({target:"Array",proto:!0},{flatMap:function(s,i){var o,d=f(this),u=h(d.length);return m(s),(o=p(d,0)).length=n(o,d,d,u,0,1,s,1<arguments.length?i:void 0),o}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":49,"../internals/flatten-into-array":52,"../internals/to-length":134,"../internals/to-object":135}],154:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/array-for-each");c({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},{"../internals/array-for-each":16,"../internals/export":49}],155:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/array-from");c({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(f){Array.from(f)})},{from:n})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":49}],156:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/array-includes").includes,f=t("../internals/add-to-unscopables");c({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(h,m){return n(this,h,1<arguments.length?m:void 0)}}),f("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":49}],157:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/array-includes").indexOf,f=t("../internals/array-method-is-strict"),h=t("../internals/array-method-uses-to-length"),m=[].indexOf,p=!!m&&1/[1].indexOf(1,-0)<0,s=f("indexOf"),i=h("indexOf",{ACCESSORS:!0,1:0});c({target:"Array",proto:!0,forced:p||!s||!i},{indexOf:function(o,d){return p?m.apply(this,arguments)||0:n(this,o,1<arguments.length?d:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],158:[function(t,a,l){var c=t("../internals/to-indexed-object"),n=t("../internals/add-to-unscopables"),f=t("../internals/iterators"),h=t("../internals/internal-state"),m=t("../internals/define-iterator"),p="Array Iterator",s=h.set,i=h.getterFor(p);a.exports=m(Array,"Array",function(o,d){s(this,{type:p,target:c(o),index:0,kind:d})},function(){var o=i(this),d=o.target,u=o.kind,g=o.index++;return!d||g>=d.length?{value:o.target=void 0,done:!0}:u=="keys"?{value:g,done:!1}:u=="values"?{value:d[g],done:!1}:{value:[g,d[g]],done:!1}},"values"),f.Arguments=f.Array,n("keys"),n("values"),n("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":40,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/indexed-object"),f=t("../internals/to-indexed-object"),h=t("../internals/array-method-is-strict"),m=[].join,p=n!=Object,s=h("join",",");c({target:"Array",proto:!0,forced:p||!s},{join:function(i){return m.call(f(this),i===void 0?",":i)}})},{"../internals/array-method-is-strict":22,"../internals/export":49,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/array-last-index-of");c({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},{"../internals/array-last-index-of":20,"../internals/export":49}],161:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/array-iteration").map,f=t("../internals/array-method-has-species-support"),h=t("../internals/array-method-uses-to-length"),m=f("map"),p=h("map");c({target:"Array",proto:!0,forced:!m||!p},{map:function(s,i){return n(this,s,1<arguments.length?i:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],162:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/is-object"),f=t("../internals/is-array"),h=t("../internals/to-absolute-index"),m=t("../internals/to-length"),p=t("../internals/to-indexed-object"),s=t("../internals/create-property"),i=t("../internals/well-known-symbol"),o=t("../internals/array-method-has-species-support"),d=t("../internals/array-method-uses-to-length"),u=o("slice"),g=d("slice",{ACCESSORS:!0,0:0,1:2}),b=i("species"),_=[].slice,w=Math.max;c({target:"Array",proto:!0,forced:!u||!g},{slice:function(S,T){var L,A,P,R=p(this),D=m(R.length),F=h(S,D),I=h(T===void 0?D:T,D);if(f(R)&&(typeof(L=R.constructor)!="function"||L!==Array&&!f(L.prototype)?n(L)&&(L=L[b])===null&&(L=void 0):L=void 0,L===Array||L===void 0))return _.call(R,F,I);for(A=new(L===void 0?Array:L)(w(I-F,0)),P=0;F<I;F++,P++)F in R&&s(A,P,R[F]);return A.length=P,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":39,"../internals/export":49,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/array-iteration").some,f=t("../internals/array-method-is-strict"),h=t("../internals/array-method-uses-to-length"),m=f("some"),p=h("some");c({target:"Array",proto:!0,forced:!m||!p},{some:function(s,i){return n(this,s,1<arguments.length?i:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],164:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/to-absolute-index"),f=t("../internals/to-integer"),h=t("../internals/to-length"),m=t("../internals/to-object"),p=t("../internals/array-species-create"),s=t("../internals/create-property"),i=t("../internals/array-method-has-species-support"),o=t("../internals/array-method-uses-to-length"),d=i("splice"),u=o("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,b=Math.min;c({target:"Array",proto:!0,forced:!d||!u},{splice:function(_,w){var S,T,L,A,P,R,D=m(this),F=h(D.length),I=n(_,F),k=arguments.length;if(k===0?S=T=0:T=k===1?(S=0,F-I):(S=k-2,b(g(f(w),0),F-I)),9007199254740991<F+S-T)throw TypeError("Maximum allowed length exceeded");for(L=p(D,T),A=0;A<T;A++)(P=I+A)in D&&s(L,A,D[P]);if(S<(L.length=T)){for(A=I;A<F-T;A++)R=A+S,(P=A+T)in D?D[R]=D[P]:delete D[R];for(A=F;F-T+S<A;A--)delete D[A-1]}else if(T<S)for(A=F-T;I<A;A--)R=A+S-1,(P=A+T-1)in D?D[R]=D[P]:delete D[R];for(A=0;A<S;A++)D[A+I]=arguments[A+2];return D.length=F-T+S,L}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/export":49,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(t,a,l){t("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],166:[function(t,a,l){var c=t("../internals/descriptors"),n=t("../internals/object-define-property").f,f=Function.prototype,h=f.toString,m=/^\s*function ([^ (]*)/;!c||"name"in f||n(f,"name",{configurable:!0,get:function(){try{return h.call(this).match(m)[1]}catch{return""}}})},{"../internals/descriptors":42,"../internals/object-define-property":92}],167:[function(t,a,l){var c=t("../internals/collection"),n=t("../internals/collection-strong");a.exports=c("Map",function(f){return function(h){return f(this,arguments.length?h:void 0)}},n)},{"../internals/collection":31,"../internals/collection-strong":30}],168:[function(t,a,l){var c=t("../internals/export"),n=Math.hypot,f=Math.abs,h=Math.sqrt;c({target:"Math",stat:!0,forced:!!n&&n(1/0,NaN)!==1/0},{hypot:function(m,p){for(var s,i,o=0,d=0,u=arguments.length,g=0;d<u;)g<(s=f(arguments[d++]))?(o=o*(i=g/s)*i+1,g=s):o+=0<s?(i=s/g)*i:s;return g===1/0?1/0:g*h(o)}})},{"../internals/export":49}],169:[function(t,a,l){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":49,"../internals/math-sign":80}],170:[function(t,a,l){function c(I){var k,U,q,Q,W,K,Y,se,ue=o(I,!1);if(typeof ue=="string"&&2<ue.length){if((k=(ue=w(ue)).charCodeAt(0))===43||k===45){if((U=ue.charCodeAt(2))===88||U===120)return NaN}else if(k===48){switch(ue.charCodeAt(1)){case 66:case 98:q=2,Q=49;break;case 79:case 111:q=8,Q=55;break;default:return+ue}for(K=(W=ue.slice(2)).length,Y=0;Y<K;Y++)if((se=W.charCodeAt(Y))<48||Q<se)return NaN;return parseInt(W,q)}}return+ue}var n=t("../internals/descriptors"),f=t("../internals/global"),h=t("../internals/is-forced"),m=t("../internals/redefine"),p=t("../internals/has"),s=t("../internals/classof-raw"),i=t("../internals/inherit-if-required"),o=t("../internals/to-primitive"),d=t("../internals/fails"),u=t("../internals/object-create"),g=t("../internals/object-get-own-property-names").f,b=t("../internals/object-get-own-property-descriptor").f,_=t("../internals/object-define-property").f,w=t("../internals/string-trim").trim,S="Number",T=f[S],L=T.prototype,A=s(u(L))==S;if(h(S,!T(" 0o1")||!T("0b1")||T("+0x1"))){for(var P,R=function(I){var k=arguments.length<1?0:I,U=this;return U instanceof R&&(A?d(function(){L.valueOf.call(U)}):s(U)!=S)?i(new T(c(k)),U,R):c(k)},D=n?g(T):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;D.length>F;F++)p(T,P=D[F])&&!p(R,P)&&_(R,P,b(T,P));(R.prototype=L).constructor=R,m(f,S,R)}},{"../internals/classof-raw":28,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],171:[function(t,a,l){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":49,"../internals/number-is-finite":88}],172:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/to-integer"),f=t("../internals/this-number-value"),h=t("../internals/string-repeat"),m=t("../internals/fails"),p=1 .toFixed,s=Math.floor,i=function(o,d,u){return d===0?u:d%2==1?i(o,d-1,u*o):i(o*o,d/2,u)};c({target:"Number",proto:!0,forced:p&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!m(function(){p.call({})})},{toFixed:function(o){function d(D,F){for(var I=-1,k=F;++I<6;)k+=D*A[I],A[I]=k%1e7,k=s(k/1e7)}function u(D){for(var F=6,I=0;0<=--F;)I+=A[F],A[F]=s(I/D),I=I%D*1e7}function g(){for(var D=6,F="";0<=--D;)if(F!==""||D===0||A[D]!==0){var I=String(A[D]);F=F===""?I:F+h.call("0",7-I.length)+I}return F}var b,_,w,S,T=f(this),L=n(o),A=[0,0,0,0,0,0],P="",R="0";if(L<0||20<L)throw RangeError("Incorrect fraction digits");if(T!=T)return"NaN";if(T<=-1e21||1e21<=T)return String(T);if(T<0&&(P="-",T=-T),1e-21<T)if(_=(b=function(D){for(var F=0,I=D;4096<=I;)F+=12,I/=4096;for(;2<=I;)F+=1,I/=2;return F}(T*i(2,69,1))-69)<0?T*i(2,-b,1):T/i(2,b,1),_*=4503599627370496,0<(b=52-b)){for(d(0,_),w=L;7<=w;)d(1e7,0),w-=7;for(d(i(10,w,1),0),w=b-1;23<=w;)u(1<<23),w-=23;u(1<<w),d(1,1),u(2),R=g()}else d(0,_),d(1<<-b,0),R=g()+h.call("0",L);return R=0<L?P+((S=R.length)<=L?"0."+h.call("0",L-S)+R:R.slice(0,S-L)+"."+R.slice(S-L)):P+R}})},{"../internals/export":49,"../internals/fails":50,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],173:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/object-assign");c({target:"Object",stat:!0,forced:Object.assign!==n},{assign:n})},{"../internals/export":49,"../internals/object-assign":89}],174:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/fails"),f=t("../internals/object-get-own-property-names-external").f;c({target:"Object",stat:!0,forced:n(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:f})},{"../internals/export":49,"../internals/fails":50,"../internals/object-get-own-property-names-external":94}],175:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/fails"),f=t("../internals/to-object"),h=t("../internals/object-get-prototype-of"),m=t("../internals/correct-prototype-getter");c({target:"Object",stat:!0,forced:n(function(){h(1)}),sham:!m},{getPrototypeOf:function(p){return h(f(p))}})},{"../internals/correct-prototype-getter":34,"../internals/export":49,"../internals/fails":50,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/to-object"),f=t("../internals/object-keys");c({target:"Object",stat:!0,forced:t("../internals/fails")(function(){f(1)})},{keys:function(h){return f(n(h))}})},{"../internals/export":49,"../internals/fails":50,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(t,a,l){var c=t("../internals/to-string-tag-support"),n=t("../internals/redefine"),f=t("../internals/object-to-string");c||n(Object.prototype,"toString",f,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(t,a,l){function c(Ce){var je;return!(!A(Ce)||typeof(je=Ce.then)!="function")&&je}function n(Ce,je,Ee){if(!je.notified){je.notified=!0;var qe=je.reactions;Q(function(){for(var be=je.value,Xe=je.state==1,O=0;qe.length>O;){var H,G,Z,oe=qe[O++],xe=Xe?oe.ok:oe.fail,Se=oe.resolve,ke=oe.reject,_e=oe.domain;try{xe?(Xe||(je.rejection===2&&De(Ce,je),je.rejection=1),xe===!0?H=be:(_e&&_e.enter(),H=xe(be),_e&&(_e.exit(),Z=!0)),H===oe.promise?ke($("Promise-chain cycle")):(G=c(H))?G.call(H,Se,ke):Se(H)):ke(be)}catch(Ye){_e&&!Z&&_e.exit(),ke(Ye)}}je.reactions=[],je.notified=!1,Ee&&!je.rejection&&ee(Ce,je)})}}function f(Ce,je,Ee){var qe,be;Ae?((qe=X.createEvent("Event")).promise=je,qe.reason=Ee,qe.initEvent(Ce,!1,!0),g.dispatchEvent(qe)):qe={promise:je,reason:Ee},(be=g["on"+Ce])?be(qe):Ce===Oe&&K("Unhandled promise rejection",Ee)}function h(Ce,je,Ee,qe){return function(be){Ce(je,Ee,be,qe)}}function m(Ce,je,Ee,qe){je.done||(je.done=!0,qe&&(je=qe),je.value=Ee,je.state=2,n(Ce,je,!0))}var p,s,i,o,d=t("../internals/export"),u=t("../internals/is-pure"),g=t("../internals/global"),b=t("../internals/get-built-in"),_=t("../internals/native-promise-constructor"),w=t("../internals/redefine"),S=t("../internals/redefine-all"),T=t("../internals/set-to-string-tag"),L=t("../internals/set-species"),A=t("../internals/is-object"),P=t("../internals/a-function"),R=t("../internals/an-instance"),D=t("../internals/classof-raw"),F=t("../internals/inspect-source"),I=t("../internals/iterate"),k=t("../internals/check-correctness-of-iteration"),U=t("../internals/species-constructor"),q=t("../internals/task").set,Q=t("../internals/microtask"),W=t("../internals/promise-resolve"),K=t("../internals/host-report-errors"),Y=t("../internals/new-promise-capability"),se=t("../internals/perform"),ue=t("../internals/internal-state"),ge=t("../internals/is-forced"),de=t("../internals/well-known-symbol"),Pe=t("../internals/engine-v8-version"),ae=de("species"),we="Promise",j=ue.get,B=ue.set,V=ue.getterFor(we),te=_,$=g.TypeError,X=g.document,ye=g.process,ne=b("fetch"),pe=Y.f,ve=pe,he=D(ye)=="process",Ae=!!(X&&X.createEvent&&g.dispatchEvent),Oe="unhandledrejection",Ie=ge(we,function(){if(F(te)===String(te)&&(Pe===66||!he&&typeof PromiseRejectionEvent!="function")||u&&!te.prototype.finally)return!0;if(51<=Pe&&/native code/.test(te))return!1;function Ce(Ee){Ee(function(){},function(){})}var je=te.resolve(1);return(je.constructor={})[ae]=Ce,!(je.then(function(){})instanceof Ce)}),ie=Ie||!k(function(Ce){te.all(Ce).catch(function(){})}),ee=function(Ce,je){q.call(g,function(){var Ee,qe=je.value;if(Le(je)&&(Ee=se(function(){he?ye.emit("unhandledRejection",qe,Ce):f(Oe,Ce,qe)}),je.rejection=he||Le(je)?2:1,Ee.error))throw Ee.value})},Le=function(Ce){return Ce.rejection!==1&&!Ce.parent},De=function(Ce,je){q.call(g,function(){he?ye.emit("rejectionHandled",Ce):f("rejectionhandled",Ce,je.value)})},Ze=function(Ce,je,Ee,qe){if(!je.done){je.done=!0,qe&&(je=qe);try{if(Ce===Ee)throw $("Promise can't be resolved itself");var be=c(Ee);be?Q(function(){var Xe={done:!1};try{be.call(Ee,h(Ze,Ce,Xe,je),h(m,Ce,Xe,je))}catch(O){m(Ce,Xe,O,je)}}):(je.value=Ee,je.state=1,n(Ce,je,!1))}catch(Xe){m(Ce,{done:!1},Xe,je)}}};Ie&&(te=function(Ce){R(this,te,we),P(Ce),p.call(this);var je=j(this);try{Ce(h(Ze,this,je),h(m,this,je))}catch(Ee){m(this,je,Ee)}},(p=function(){B(this,{type:we,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=S(te.prototype,{then:function(Ce,je){var Ee=V(this),qe=pe(U(this,te));return qe.ok=typeof Ce!="function"||Ce,qe.fail=typeof je=="function"&&je,qe.domain=he?ye.domain:void 0,Ee.parent=!0,Ee.reactions.push(qe),Ee.state!=0&&n(this,Ee,!1),qe.promise},catch:function(Ce){return this.then(void 0,Ce)}}),s=function(){var Ce=new p,je=j(Ce);this.promise=Ce,this.resolve=h(Ze,Ce,je),this.reject=h(m,Ce,je)},Y.f=pe=function(Ce){return Ce===te||Ce===i?new s(Ce):ve(Ce)},u||typeof _!="function"||(o=_.prototype.then,w(_.prototype,"then",function(Ce,je){var Ee=this;return new te(function(qe,be){o.call(Ee,qe,be)}).then(Ce,je)},{unsafe:!0}),typeof ne=="function"&&d({global:!0,enumerable:!0,forced:!0},{fetch:function(Ce){return W(te,ne.apply(g,arguments))}}))),d({global:!0,wrap:!0,forced:Ie},{Promise:te}),T(te,we,!1,!0),L(we),i=b(we),d({target:we,stat:!0,forced:Ie},{reject:function(Ce){var je=pe(this);return je.reject.call(void 0,Ce),je.promise}}),d({target:we,stat:!0,forced:u||Ie},{resolve:function(Ce){return W(u&&this===i?te:this,Ce)}}),d({target:we,stat:!0,forced:ie},{all:function(Ce){var je=this,Ee=pe(je),qe=Ee.resolve,be=Ee.reject,Xe=se(function(){var O=P(je.resolve),H=[],G=0,Z=1;I(Ce,function(oe){var xe=G++,Se=!1;H.push(void 0),Z++,O.call(je,oe).then(function(ke){Se||(Se=!0,H[xe]=ke,--Z||qe(H))},be)}),--Z||qe(H)});return Xe.error&&be(Xe.value),Ee.promise},race:function(Ce){var je=this,Ee=pe(je),qe=Ee.reject,be=se(function(){var Xe=P(je.resolve);I(Ce,function(O){Xe.call(je,O).then(Ee.resolve,qe)})});return be.error&&qe(be.value),Ee.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/get-built-in"),f=t("../internals/a-function"),h=t("../internals/an-object"),m=t("../internals/is-object"),p=t("../internals/object-create"),s=t("../internals/function-bind"),i=t("../internals/fails"),o=n("Reflect","construct"),d=i(function(){function b(){}return!(o(function(){},[],b)instanceof b)}),u=!i(function(){o(function(){})}),g=d||u;c({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(b,_,w){f(b),h(_);var S=arguments.length<3?b:f(w);if(u&&!d)return o(b,_,S);if(b==S){switch(_.length){case 0:return new b;case 1:return new b(_[0]);case 2:return new b(_[0],_[1]);case 3:return new b(_[0],_[1],_[2]);case 4:return new b(_[0],_[1],_[2],_[3])}var T=[null];return T.push.apply(T,_),new(s.apply(b,T))}var L=S.prototype,A=p(m(L)?L:Object.prototype),P=Function.apply.call(b,A,_);return m(P)?P:A}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":49,"../internals/fails":50,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(t,a,l){var c=t("../internals/descriptors"),n=t("../internals/global"),f=t("../internals/is-forced"),h=t("../internals/inherit-if-required"),m=t("../internals/object-define-property").f,p=t("../internals/object-get-own-property-names").f,s=t("../internals/is-regexp"),i=t("../internals/regexp-flags"),o=t("../internals/regexp-sticky-helpers"),d=t("../internals/redefine"),u=t("../internals/fails"),g=t("../internals/internal-state").set,b=t("../internals/set-species"),_=t("../internals/well-known-symbol")("match"),w=n.RegExp,S=w.prototype,T=/a/g,L=/a/g,A=new w(T)!==T,P=o.UNSUPPORTED_Y;if(c&&f("RegExp",!A||P||u(function(){return L[_]=!1,w(T)!=T||w(L)==L||w(T,"i")!="/a/i"}))){let k=function(U){U in R||m(R,U,{configurable:!0,get:function(){return w[U]},set:function(q){w[U]=q}})};for(var I=k,R=function(U,q){var Q,W=this instanceof R,K=s(U),Y=q===void 0;if(!W&&K&&U.constructor===R&&Y)return U;A?K&&!Y&&(U=U.source):U instanceof R&&(Y&&(q=i.call(U)),U=U.source),P&&(Q=!!q&&-1<q.indexOf("y"))&&(q=q.replace(/y/g,""));var se=h(A?new w(U,q):w(U,q),W?this:S,R);return P&&Q&&g(se,{sticky:Q}),se},D=p(w),F=0;D.length>F;)k(D[F++]);(S.constructor=R).prototype=S,d(n,"RegExp",R)}b("RegExp")},{"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/regexp-exec");c({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},{"../internals/export":49,"../internals/regexp-exec":110}],182:[function(t,a,l){var c=t("../internals/redefine"),n=t("../internals/an-object"),f=t("../internals/fails"),h=t("../internals/regexp-flags"),m="toString",p=RegExp.prototype,s=p[m],i=f(function(){return s.call({source:"a",flags:"b"})!="/a/b"}),o=s.name!=m;(i||o)&&c(RegExp.prototype,m,function(){var d=n(this),u=String(d.source),g=d.flags;return"/"+u+"/"+String(g===void 0&&d instanceof RegExp&&!("flags"in p)?h.call(d):g)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":50,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(t,a,l){var c=t("../internals/collection"),n=t("../internals/collection-strong");a.exports=c("Set",function(f){return function(h){return f(this,arguments.length?h:void 0)}},n)},{"../internals/collection":31,"../internals/collection-strong":30}],184:[function(t,a,l){var c,n=t("../internals/export"),f=t("../internals/object-get-own-property-descriptor").f,h=t("../internals/to-length"),m=t("../internals/not-a-regexp"),p=t("../internals/require-object-coercible"),s=t("../internals/correct-is-regexp-logic"),i=t("../internals/is-pure"),o="".endsWith,d=Math.min,u=s("endsWith");n({target:"String",proto:!0,forced:!!(i||u||!(c=f(String.prototype,"endsWith"))||c.writable)&&!u},{endsWith:function(g,b){var _=String(p(this));m(g);var w=1<arguments.length?b:void 0,S=h(_.length),T=w===void 0?S:d(h(w),S),L=String(g);return o?o.call(_,L,T):_.slice(T-L.length,T)===L}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/not-a-regexp"),f=t("../internals/require-object-coercible");c({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(h,m){return!!~String(f(this)).indexOf(n(h),1<arguments.length?m:void 0)}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(t,a,l){var c=t("../internals/string-multibyte").charAt,n=t("../internals/internal-state"),f=t("../internals/define-iterator"),h="String Iterator",m=n.set,p=n.getterFor(h);f(String,"String",function(s){m(this,{type:h,string:String(s),index:0})},function(){var s,i=p(this),o=i.string,d=i.index;return d>=o.length?{value:void 0,done:!0}:(s=c(o,d),i.index+=s.length,{value:s,done:!1})})},{"../internals/define-iterator":40,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(t,a,l){var c=t("../internals/fix-regexp-well-known-symbol-logic"),n=t("../internals/an-object"),f=t("../internals/to-length"),h=t("../internals/require-object-coercible"),m=t("../internals/advance-string-index"),p=t("../internals/regexp-exec-abstract");c("match",1,function(s,i,o){return[function(d){var u=h(this),g=d==null?void 0:d[s];return g!==void 0?g.call(d,u):new RegExp(d)[s](String(u))},function(d){var u=o(i,d,this);if(u.done)return u.value;var g=n(d),b=String(this);if(!g.global)return p(g,b);for(var _,w=g.unicode,S=[],T=g.lastIndex=0;(_=p(g,b))!==null;){var L=String(_[0]);(S[T]=L)===""&&(g.lastIndex=m(b,f(g.lastIndex),w)),T++}return T===0?null:S}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(t,a,l){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":49,"../internals/string-repeat":125}],189:[function(t,a,l){var c=t("../internals/fix-regexp-well-known-symbol-logic"),n=t("../internals/an-object"),f=t("../internals/to-object"),h=t("../internals/to-length"),m=t("../internals/to-integer"),p=t("../internals/require-object-coercible"),s=t("../internals/advance-string-index"),i=t("../internals/regexp-exec-abstract"),o=Math.max,d=Math.min,u=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,b=/\$([$&'`]|\d\d?)/g;c("replace",2,function(_,w,S,T){var L=T.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,A=T.REPLACE_KEEPS_$0,P=L?"$":"$0";return[function(D,F){var I=p(this),k=D==null?void 0:D[_];return k!==void 0?k.call(D,I,F):w.call(String(I),D,F)},function(D,F){if(!L&&A||typeof F=="string"&&F.indexOf(P)===-1){var I=S(w,D,this,F);if(I.done)return I.value}var k=n(D),U=String(this),q=typeof F=="function";q||(F=String(F));var Q=k.global;if(Q){var W=k.unicode;k.lastIndex=0}for(var K=[];;){var Y=i(k,U);if(Y===null||(K.push(Y),!Q))break;String(Y[0])===""&&(k.lastIndex=s(U,h(k.lastIndex),W))}for(var se,ue="",ge=0,de=0;de<K.length;de++){Y=K[de];for(var Pe=String(Y[0]),ae=o(d(m(Y.index),U.length),0),we=[],j=1;j<Y.length;j++)we.push((se=Y[j])===void 0?se:String(se));var B=Y.groups;if(q){var V=[Pe].concat(we,ae,U);B!==void 0&&V.push(B);var te=String(F.apply(void 0,V))}else te=R(Pe,U,ae,we,B,F);ge<=ae&&(ue+=U.slice(ge,ae)+te,ge=ae+Pe.length)}return ue+U.slice(ge)}];function R(D,F,I,k,U,q){var Q=I+D.length,W=k.length,K=b;return U!==void 0&&(U=f(U),K=g),w.call(q,K,function(Y,se){var ue;switch(se.charAt(0)){case"$":return"$";case"&":return D;case"`":return F.slice(0,I);case"'":return F.slice(Q);case"<":ue=U[se.slice(1,-1)];break;default:var ge=+se;if(ge==0)return Y;if(W<ge){var de=u(ge/10);return de===0?Y:de<=W?k[de-1]===void 0?se.charAt(1):k[de-1]+se.charAt(1):Y}ue=k[ge-1]}return ue===void 0?"":ue})}})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(t,a,l){var c=t("../internals/fix-regexp-well-known-symbol-logic"),n=t("../internals/an-object"),f=t("../internals/require-object-coercible"),h=t("../internals/same-value"),m=t("../internals/regexp-exec-abstract");c("search",1,function(p,s,i){return[function(o){var d=f(this),u=o==null?void 0:o[p];return u!==void 0?u.call(o,d):new RegExp(o)[p](String(d))},function(o){var d=i(s,o,this);if(d.done)return d.value;var u=n(o),g=String(this),b=u.lastIndex;h(b,0)||(u.lastIndex=0);var _=m(u,g);return h(u.lastIndex,b)||(u.lastIndex=b),_===null?-1:_.index}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(t,a,l){var c=t("../internals/fix-regexp-well-known-symbol-logic"),n=t("../internals/is-regexp"),f=t("../internals/an-object"),h=t("../internals/require-object-coercible"),m=t("../internals/species-constructor"),p=t("../internals/advance-string-index"),s=t("../internals/to-length"),i=t("../internals/regexp-exec-abstract"),o=t("../internals/regexp-exec"),d=t("../internals/fails"),u=[].push,g=Math.min,b=4294967295,_=!d(function(){return!RegExp(b,"y")});c("split",2,function(w,S,T){var L;return L="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(A,P){var R=String(h(this)),D=P===void 0?b:P>>>0;if(D==0)return[];if(A===void 0)return[R];if(!n(A))return S.call(R,A,D);for(var F,I,k,U=[],q=(A.ignoreCase?"i":"")+(A.multiline?"m":"")+(A.unicode?"u":"")+(A.sticky?"y":""),Q=0,W=new RegExp(A.source,q+"g");(F=o.call(W,R))&&!(Q<(I=W.lastIndex)&&(U.push(R.slice(Q,F.index)),1<F.length&&F.index<R.length&&u.apply(U,F.slice(1)),k=F[0].length,Q=I,U.length>=D));)W.lastIndex===F.index&&W.lastIndex++;return Q===R.length?!k&&W.test("")||U.push(""):U.push(R.slice(Q)),U.length>D?U.slice(0,D):U}:"0".split(void 0,0).length?function(A,P){return A===void 0&&P===0?[]:S.call(this,A,P)}:S,[function(A,P){var R=h(this),D=A==null?void 0:A[w];return D!==void 0?D.call(A,R,P):L.call(String(R),A,P)},function(A,P){var R=T(L,A,this,P,L!==S);if(R.done)return R.value;var D=f(A),F=String(this),I=m(D,RegExp),k=D.unicode,U=(D.ignoreCase?"i":"")+(D.multiline?"m":"")+(D.unicode?"u":"")+(_?"y":"g"),q=new I(_?D:"^(?:"+D.source+")",U),Q=P===void 0?b:P>>>0;if(Q==0)return[];if(F.length===0)return i(q,F)===null?[F]:[];for(var W=0,K=0,Y=[];K<F.length;){q.lastIndex=_?K:0;var se,ue=i(q,_?F:F.slice(K));if(ue===null||(se=g(s(q.lastIndex+(_?0:K)),F.length))===W)K=p(F,K,k);else{if(Y.push(F.slice(W,K)),Y.length===Q)return Y;for(var ge=1;ge<=ue.length-1;ge++)if(Y.push(ue[ge]),Y.length===Q)return Y;K=W=se}}return Y.push(F.slice(W)),Y}]},!_)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":50,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/create-html");c({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return n(this,"sub","","")}})},{"../internals/create-html":35,"../internals/export":49,"../internals/string-html-forced":122}],193:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/string-trim").trim;c({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return n(this)}})},{"../internals/export":49,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(t,a,l){var c=t("../internals/export"),n=t("../internals/descriptors"),f=t("../internals/global"),h=t("../internals/has"),m=t("../internals/is-object"),p=t("../internals/object-define-property").f,s=t("../internals/copy-constructor-properties"),i=f.Symbol;if(n&&typeof i=="function"&&(!("description"in i.prototype)||i().description!==void 0)){var o={},d=function(w){var S=arguments.length<1||w===void 0?void 0:String(w),T=this instanceof d?new i(S):S===void 0?i():i(S);return S===""&&(o[T]=!0),T};s(d,i);var u=d.prototype=i.prototype;u.constructor=d;var g=u.toString,b=String(i("test"))=="Symbol(test)",_=/^Symbol\((.*)\)[^)]+$/;p(u,"description",{configurable:!0,get:function(){var w=m(this)?this.valueOf():this,S=g.call(w);if(h(o,w))return"";var T=b?S.slice(7,-1):S.replace(_,"$1");return T===""?void 0:T}}),c({global:!0,forced:!0},{Symbol:d})}},{"../internals/copy-constructor-properties":32,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(t,a,l){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":41}],196:[function(t,a,l){function c(G,Z){var oe=ee[G]=R(ve[$]);return ye(oe,{type:te,tag:G,description:Z}),o||(oe.description=Z),oe}function n(G,Z){S(G);var oe=L(Z),xe=D(oe).concat(H(oe));return B(xe,function(Se){o&&!O.call(oe,Se)||Xe(G,Se,oe[Se])}),G}function f(G,Z){var oe=L(G),xe=A(Z,!0);if(oe!==pe||!b(ee,xe)||b(Le,xe)){var Se=Ae(oe,xe);return!Se||!b(ee,xe)||b(oe,V)&&oe[V][xe]||(Se.enumerable=!0),Se}}function h(G){var Z=Ie(L(G)),oe=[];return B(Z,function(xe){b(ee,xe)||b(ue,xe)||oe.push(xe)}),oe}var m=t("../internals/export"),p=t("../internals/global"),s=t("../internals/get-built-in"),i=t("../internals/is-pure"),o=t("../internals/descriptors"),d=t("../internals/native-symbol"),u=t("../internals/use-symbol-as-uid"),g=t("../internals/fails"),b=t("../internals/has"),_=t("../internals/is-array"),w=t("../internals/is-object"),S=t("../internals/an-object"),T=t("../internals/to-object"),L=t("../internals/to-indexed-object"),A=t("../internals/to-primitive"),P=t("../internals/create-property-descriptor"),R=t("../internals/object-create"),D=t("../internals/object-keys"),F=t("../internals/object-get-own-property-names"),I=t("../internals/object-get-own-property-names-external"),k=t("../internals/object-get-own-property-symbols"),U=t("../internals/object-get-own-property-descriptor"),q=t("../internals/object-define-property"),Q=t("../internals/object-property-is-enumerable"),W=t("../internals/create-non-enumerable-property"),K=t("../internals/redefine"),Y=t("../internals/shared"),se=t("../internals/shared-key"),ue=t("../internals/hidden-keys"),ge=t("../internals/uid"),de=t("../internals/well-known-symbol"),Pe=t("../internals/well-known-symbol-wrapped"),ae=t("../internals/define-well-known-symbol"),we=t("../internals/set-to-string-tag"),j=t("../internals/internal-state"),B=t("../internals/array-iteration").forEach,V=se("hidden"),te="Symbol",$="prototype",X=de("toPrimitive"),ye=j.set,ne=j.getterFor(te),pe=Object[$],ve=p.Symbol,he=s("JSON","stringify"),Ae=U.f,Oe=q.f,Ie=I.f,ie=Q.f,ee=Y("symbols"),Le=Y("op-symbols"),De=Y("string-to-symbol-registry"),Ze=Y("symbol-to-string-registry"),Ce=Y("wks"),je=p.QObject,Ee=!je||!je[$]||!je[$].findChild,qe=o&&g(function(){return R(Oe({},"a",{get:function(){return Oe(this,"a",{value:7}).a}})).a!=7})?function(G,Z,oe){var xe=Ae(pe,Z);xe&&delete pe[Z],Oe(G,Z,oe),xe&&G!==pe&&Oe(pe,Z,xe)}:Oe,be=u?function(G){return typeof G=="symbol"}:function(G){return Object(G)instanceof ve},Xe=function(G,Z,oe){G===pe&&Xe(Le,Z,oe),S(G);var xe=A(Z,!0);return S(oe),b(ee,xe)?(oe.enumerable?(b(G,V)&&G[V][xe]&&(G[V][xe]=!1),oe=R(oe,{enumerable:P(0,!1)})):(b(G,V)||Oe(G,V,P(1,{})),G[V][xe]=!0),qe(G,xe,oe)):Oe(G,xe,oe)},O=function(G){var Z=A(G,!0),oe=ie.call(this,Z);return!(this===pe&&b(ee,Z)&&!b(Le,Z))&&(!(oe||!b(this,Z)||!b(ee,Z)||b(this,V)&&this[V][Z])||oe)},H=function(G){var Z=G===pe,oe=Ie(Z?Le:L(G)),xe=[];return B(oe,function(Se){!b(ee,Se)||Z&&!b(pe,Se)||xe.push(ee[Se])}),xe};d||(K((ve=function(G){if(this instanceof ve)throw TypeError("Symbol is not a constructor");var Z=arguments.length&&G!==void 0?String(G):void 0,oe=ge(Z),xe=function(Se){this===pe&&xe.call(Le,Se),b(this,V)&&b(this[V],oe)&&(this[V][oe]=!1),qe(this,oe,P(1,Se))};return o&&Ee&&qe(pe,oe,{configurable:!0,set:xe}),c(oe,Z)})[$],"toString",function(){return ne(this).tag}),K(ve,"withoutSetter",function(G){return c(ge(G),G)}),Q.f=O,q.f=Xe,U.f=f,F.f=I.f=h,k.f=H,Pe.f=function(G){return c(de(G),G)},o&&(Oe(ve[$],"description",{configurable:!0,get:function(){return ne(this).description}}),i||K(pe,"propertyIsEnumerable",O,{unsafe:!0}))),m({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:ve}),B(D(Ce),function(G){ae(G)}),m({target:te,stat:!0,forced:!d},{for:function(G){var Z=String(G);if(b(De,Z))return De[Z];var oe=ve(Z);return De[Z]=oe,Ze[oe]=Z,oe},keyFor:function(G){if(!be(G))throw TypeError(G+" is not a symbol");if(b(Ze,G))return Ze[G]},useSetter:function(){Ee=!0},useSimple:function(){Ee=!1}}),m({target:"Object",stat:!0,forced:!d,sham:!o},{create:function(G,Z){return Z===void 0?R(G):n(R(G),Z)},defineProperty:Xe,defineProperties:n,getOwnPropertyDescriptor:f}),m({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:h,getOwnPropertySymbols:H}),m({target:"Object",stat:!0,forced:g(function(){k.f(1)})},{getOwnPropertySymbols:function(G){return k.f(T(G))}}),he&&m({target:"JSON",stat:!0,forced:!d||g(function(){var G=ve();return he([G])!="[null]"||he({a:G})!="{}"||he(Object(G))!="{}"})},{stringify:function(G,Z,oe){for(var xe,Se=[G],ke=1;ke<arguments.length;)Se.push(arguments[ke++]);if((w(xe=Z)||G!==void 0)&&!be(G))return _(Z)||(Z=function(_e,Ye){if(typeof xe=="function"&&(Ye=xe.call(this,_e,Ye)),!be(Ye))return Ye}),Se[1]=Z,he.apply(null,Se)}}),ve[$][X]||W(ve[$],X,ve[$].valueOf),we(ve,te),ue[V]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/define-well-known-symbol":41,"../internals/descriptors":42,"../internals/export":49,"../internals/fails":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-copy-within"),f=c.aTypedArray;(0,c.exportTypedArrayMethod)("copyWithin",function(h,m,p){return n.call(f(this),h,m,2<arguments.length?p:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-iteration").every,f=c.aTypedArray;(0,c.exportTypedArrayMethod)("every",function(h,m){return n(f(this),h,1<arguments.length?m:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-fill"),f=c.aTypedArray;(0,c.exportTypedArrayMethod)("fill",function(h){return n.apply(f(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-iteration").filter,f=t("../internals/species-constructor"),h=c.aTypedArray,m=c.aTypedArrayConstructor;(0,c.exportTypedArrayMethod)("filter",function(p,s){for(var i=n(h(this),p,1<arguments.length?s:void 0),o=f(this,this.constructor),d=0,u=i.length,g=new(m(o))(u);d<u;)g[d]=i[d++];return g})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-iteration").findIndex,f=c.aTypedArray;(0,c.exportTypedArrayMethod)("findIndex",function(h,m){return n(f(this),h,1<arguments.length?m:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-iteration").find,f=c.aTypedArray;(0,c.exportTypedArrayMethod)("find",function(h,m){return n(f(this),h,1<arguments.length?m:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(t,a,l){t("../internals/typed-array-constructor")("Float32",function(c){return function(n,f,h){return c(this,n,f,h)}})},{"../internals/typed-array-constructor":140}],204:[function(t,a,l){t("../internals/typed-array-constructor")("Float64",function(c){return function(n,f,h){return c(this,n,f,h)}})},{"../internals/typed-array-constructor":140}],205:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-iteration").forEach,f=c.aTypedArray;(0,c.exportTypedArrayMethod)("forEach",function(h,m){n(f(this),h,1<arguments.length?m:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-includes").includes,f=c.aTypedArray;(0,c.exportTypedArrayMethod)("includes",function(h,m){return n(f(this),h,1<arguments.length?m:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-includes").indexOf,f=c.aTypedArray;(0,c.exportTypedArrayMethod)("indexOf",function(h,m){return n(f(this),h,1<arguments.length?m:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(t,a,l){t("../internals/typed-array-constructor")("Int16",function(c){return function(n,f,h){return c(this,n,f,h)}})},{"../internals/typed-array-constructor":140}],209:[function(t,a,l){t("../internals/typed-array-constructor")("Int32",function(c){return function(n,f,h){return c(this,n,f,h)}})},{"../internals/typed-array-constructor":140}],210:[function(t,a,l){function c(){return s.call(d(this))}var n=t("../internals/global"),f=t("../internals/array-buffer-view-core"),h=t("../modules/es.array.iterator"),m=t("../internals/well-known-symbol")("iterator"),p=n.Uint8Array,s=h.values,i=h.keys,o=h.entries,d=f.aTypedArray,u=f.exportTypedArrayMethod,g=p&&p.prototype[m],b=!!g&&(g.name=="values"||g.name==null);u("entries",function(){return o.call(d(this))}),u("keys",function(){return i.call(d(this))}),u("values",c,!b),u(m,c,!b)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=c.aTypedArray,f=c.exportTypedArrayMethod,h=[].join;f("join",function(m){return h.apply(n(this),arguments)})},{"../internals/array-buffer-view-core":12}],212:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-last-index-of"),f=c.aTypedArray;(0,c.exportTypedArrayMethod)("lastIndexOf",function(h){return n.apply(f(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-iteration").map,f=t("../internals/species-constructor"),h=c.aTypedArray,m=c.aTypedArrayConstructor;(0,c.exportTypedArrayMethod)("map",function(p,s){return n(h(this),p,1<arguments.length?s:void 0,function(i,o){return new(m(f(i,i.constructor)))(o)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-reduce").right,f=c.aTypedArray;(0,c.exportTypedArrayMethod)("reduceRight",function(h,m){return n(f(this),h,arguments.length,1<arguments.length?m:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-reduce").left,f=c.aTypedArray;(0,c.exportTypedArrayMethod)("reduce",function(h,m){return n(f(this),h,arguments.length,1<arguments.length?m:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=c.aTypedArray,f=c.exportTypedArrayMethod,h=Math.floor;f("reverse",function(){for(var m,p=n(this).length,s=h(p/2),i=0;i<s;)m=this[i],this[i++]=this[--p],this[p]=m;return this})},{"../internals/array-buffer-view-core":12}],217:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/to-length"),f=t("../internals/to-offset"),h=t("../internals/to-object"),m=t("../internals/fails"),p=c.aTypedArray;(0,c.exportTypedArrayMethod)("set",function(s,i){p(this);var o=f(1<arguments.length?i:void 0,1),d=this.length,u=h(s),g=n(u.length),b=0;if(d<g+o)throw RangeError("Wrong length");for(;b<g;)this[o+b]=u[b++]},m(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/species-constructor"),f=t("../internals/fails"),h=c.aTypedArray,m=c.aTypedArrayConstructor,p=c.exportTypedArrayMethod,s=[].slice;p("slice",function(i,o){for(var d=s.call(h(this),i,o),u=n(this,this.constructor),g=0,b=d.length,_=new(m(u))(b);g<b;)_[g]=d[g++];return _},f(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/species-constructor":121}],219:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/array-iteration").some,f=c.aTypedArray;(0,c.exportTypedArrayMethod)("some",function(h,m){return n(f(this),h,1<arguments.length?m:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=c.aTypedArray,f=c.exportTypedArrayMethod,h=[].sort;f("sort",function(m){return h.call(n(this),m)})},{"../internals/array-buffer-view-core":12}],221:[function(t,a,l){var c=t("../internals/array-buffer-view-core"),n=t("../internals/to-length"),f=t("../internals/to-absolute-index"),h=t("../internals/species-constructor"),m=c.aTypedArray;(0,c.exportTypedArrayMethod)("subarray",function(p,s){var i=m(this),o=i.length,d=f(p,o);return new(h(i,i.constructor))(i.buffer,i.byteOffset+d*i.BYTES_PER_ELEMENT,n((s===void 0?o:f(s,o))-d))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(t,a,l){var c=t("../internals/global"),n=t("../internals/array-buffer-view-core"),f=t("../internals/fails"),h=c.Int8Array,m=n.aTypedArray,p=n.exportTypedArrayMethod,s=[].toLocaleString,i=[].slice,o=!!h&&f(function(){s.call(new h(1))});p("toLocaleString",function(){return s.apply(o?i.call(m(this)):m(this),arguments)},f(function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()})||!f(function(){h.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":59}],223:[function(t,a,l){var c=t("../internals/array-buffer-view-core").exportTypedArrayMethod,n=t("../internals/fails"),f=t("../internals/global").Uint8Array,h=f&&f.prototype||{},m=[].toString,p=[].join;n(function(){m.call({})})&&(m=function(){return p.call(this)}),c("toString",m,h.toString!=m)},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":59}],224:[function(t,a,l){t("../internals/typed-array-constructor")("Uint16",function(c){return function(n,f,h){return c(this,n,f,h)}})},{"../internals/typed-array-constructor":140}],225:[function(t,a,l){t("../internals/typed-array-constructor")("Uint32",function(c){return function(n,f,h){return c(this,n,f,h)}})},{"../internals/typed-array-constructor":140}],226:[function(t,a,l){t("../internals/typed-array-constructor")("Uint8",function(c){return function(n,f,h){return c(this,n,f,h)}})},{"../internals/typed-array-constructor":140}],227:[function(t,a,l){t("../internals/typed-array-constructor")("Uint8",function(c){return function(n,f,h){return c(this,n,f,h)}},!0)},{"../internals/typed-array-constructor":140}],228:[function(t,a,l){var c=t("../internals/global"),n=t("../internals/dom-iterables"),f=t("../internals/array-for-each"),h=t("../internals/create-non-enumerable-property");for(var m in n){var p=c[m],s=p&&p.prototype;if(s&&s.forEach!==f)try{h(s,"forEach",f)}catch{s.forEach=f}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":59}],229:[function(t,a,l){var c=t("../internals/global"),n=t("../internals/dom-iterables"),f=t("../modules/es.array.iterator"),h=t("../internals/create-non-enumerable-property"),m=t("../internals/well-known-symbol"),p=m("iterator"),s=m("toStringTag"),i=f.values;for(var o in n){var d=c[o],u=d&&d.prototype;if(u){if(u[p]!==i)try{h(u,p,i)}catch{u[p]=i}if(u[s]||h(u,s,o),n[o]){for(var g in f)if(u[g]!==f[g])try{h(u,g,f[g])}catch{u[g]=f[g]}}}}},{"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],230:[function(t,a,l){t("../modules/es.array.iterator");function c(te){try{return decodeURIComponent(te)}catch{return te}}function n(te){var $,X=te.replace(de," "),ye=4;try{return decodeURIComponent(X)}catch{for(;ye;)X=X.replace(($=ye--,Pe[$-1]||(Pe[$-1]=RegExp("((?:%[\\da-f]{2}){"+$+"})","gi"))),c);return X}}function f(te){return we[te]}function h(te){return encodeURIComponent(te).replace(ae,f)}function m(te,$){if($)for(var X,ye,ne=$.split("&"),pe=0;pe<ne.length;)(X=ne[pe++]).length&&(ye=X.split("="),te.push({key:n(ye.shift()),value:n(ye.join("="))}))}function p(te){this.entries.length=0,m(this.entries,te)}function s(te,$){if(te<$)throw TypeError("Not enough arguments")}var i=t("../internals/export"),o=t("../internals/get-built-in"),d=t("../internals/native-url"),u=t("../internals/redefine"),g=t("../internals/redefine-all"),b=t("../internals/set-to-string-tag"),_=t("../internals/create-iterator-constructor"),w=t("../internals/internal-state"),S=t("../internals/an-instance"),T=t("../internals/has"),L=t("../internals/function-bind-context"),A=t("../internals/classof"),P=t("../internals/an-object"),R=t("../internals/is-object"),D=t("../internals/object-create"),F=t("../internals/create-property-descriptor"),I=t("../internals/get-iterator"),k=t("../internals/get-iterator-method"),U=t("../internals/well-known-symbol"),q=o("fetch"),Q=o("Headers"),W=U("iterator"),K="URLSearchParams",Y=K+"Iterator",se=w.set,ue=w.getterFor(K),ge=w.getterFor(Y),de=/\+/g,Pe=Array(4),ae=/[!'()~]|%20/g,we={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},j=_(function(te,$){se(this,{type:Y,iterator:I(ue(te).entries),kind:$})},"Iterator",function(){var te=ge(this),$=te.kind,X=te.iterator.next(),ye=X.value;return X.done||(X.value=$==="keys"?ye.key:$==="values"?ye.value:[ye.key,ye.value]),X}),B=function(te){S(this,B,K);var $,X,ye,ne,pe,ve,he,Ae,Oe,Ie=0<arguments.length?te:void 0,ie=[];if(se(this,{type:K,entries:ie,updateURL:function(){},updateSearchParams:p}),Ie!==void 0)if(R(Ie))if(typeof($=k(Ie))=="function")for(ye=(X=$.call(Ie)).next;!(ne=ye.call(X)).done;){if((he=(ve=(pe=I(P(ne.value))).next).call(pe)).done||(Ae=ve.call(pe)).done||!ve.call(pe).done)throw TypeError("Expected sequence with length 2");ie.push({key:he.value+"",value:Ae.value+""})}else for(Oe in Ie)T(Ie,Oe)&&ie.push({key:Oe,value:Ie[Oe]+""});else m(ie,typeof Ie=="string"?Ie.charAt(0)==="?"?Ie.slice(1):Ie:Ie+"")},V=B.prototype;g(V,{append:function(te,$){s(arguments.length,2);var X=ue(this);X.entries.push({key:te+"",value:$+""}),X.updateURL()},delete:function(te){s(arguments.length,1);for(var $=ue(this),X=$.entries,ye=te+"",ne=0;ne<X.length;)X[ne].key===ye?X.splice(ne,1):ne++;$.updateURL()},get:function(te){s(arguments.length,1);for(var $=ue(this).entries,X=te+"",ye=0;ye<$.length;ye++)if($[ye].key===X)return $[ye].value;return null},getAll:function(te){s(arguments.length,1);for(var $=ue(this).entries,X=te+"",ye=[],ne=0;ne<$.length;ne++)$[ne].key===X&&ye.push($[ne].value);return ye},has:function(te){s(arguments.length,1);for(var $=ue(this).entries,X=te+"",ye=0;ye<$.length;)if($[ye++].key===X)return!0;return!1},set:function(te,$){s(arguments.length,1);for(var X,ye=ue(this),ne=ye.entries,pe=!1,ve=te+"",he=$+"",Ae=0;Ae<ne.length;Ae++)(X=ne[Ae]).key===ve&&(pe?ne.splice(Ae--,1):(pe=!0,X.value=he));pe||ne.push({key:ve,value:he}),ye.updateURL()},sort:function(){var te,$,X,ye=ue(this),ne=ye.entries,pe=ne.slice();for(X=ne.length=0;X<pe.length;X++){for(te=pe[X],$=0;$<X;$++)if(ne[$].key>te.key){ne.splice($,0,te);break}$===X&&ne.push(te)}ye.updateURL()},forEach:function(te,$){for(var X,ye=ue(this).entries,ne=L(te,1<arguments.length?$:void 0,3),pe=0;pe<ye.length;)ne((X=ye[pe++]).value,X.key,this)},keys:function(){return new j(this,"keys")},values:function(){return new j(this,"values")},entries:function(){return new j(this,"entries")}},{enumerable:!0}),u(V,W,V.entries),u(V,"toString",function(){for(var te,$=ue(this).entries,X=[],ye=0;ye<$.length;)te=$[ye++],X.push(h(te.key)+"="+h(te.value));return X.join("&")},{enumerable:!0}),b(B,K),i({global:!0,forced:!d},{URLSearchParams:B}),d||typeof q!="function"||typeof Q!="function"||i({global:!0,enumerable:!0,forced:!0},{fetch:function(te,$){var X,ye,ne,pe=[te];return 1<arguments.length&&(R(X=$)&&(ye=X.body,A(ye)===K&&((ne=X.headers?new Q(X.headers):new Q).has("content-type")||ne.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),X=D(X,{body:F(0,String(ye)),headers:F(0,ne)}))),pe.push(X)),q.apply(this,pe)}}),a.exports={URLSearchParams:B,getState:ue}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":36,"../internals/create-property-descriptor":38,"../internals/export":49,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(t,a,l){t("../modules/es.string.iterator");function c(ce,Fe){var Ke,He,rt;if(Fe.charAt(0)=="["){if(Fe.charAt(Fe.length-1)!="]"||!(Ke=ve(Fe.slice(1,-1))))return ge;ce.host=Ke}else if(Le(ce)){if(Fe=D(Fe),$.test(Fe)||(Ke=pe(Fe))===null)return ge;ce.host=Ke}else{if(X.test(Fe))return ge;for(Ke="",He=P(Fe),rt=0;rt<He.length;rt++)Ke+=ie(He[rt],he);ce.host=Ke}}function n(ce){var Fe,Ke,He,rt;if(typeof ce=="number"){for(Fe=[],Ke=0;Ke<4;Ke++)Fe.unshift(ce%256),ce=Y(ce/256);return Fe.join(".")}if(typeof ce!="object")return ce;for(Fe="",He=function(Ve){for(var Mt=null,St=1,ht=null,wt=0,$e=0;$e<8;$e++)Ve[$e]!==0?(St<wt&&(Mt=ht,St=wt),ht=null,wt=0):(ht===null&&(ht=$e),++wt);return St<wt&&(Mt=ht,St=wt),Mt}(ce),Ke=0;Ke<8;Ke++)rt&&ce[Ke]===0||(rt=rt&&!1,He===Ke?(Fe+=Ke?":":"::",rt=!0):(Fe+=ce[Ke].toString(16),Ke<7&&(Fe+=":")));return"["+Fe+"]"}function f(ce){return ce.username!=""||ce.password!=""}function h(ce){return!ce.host||ce.cannotBeABaseURL||ce.scheme=="file"}function m(ce,Fe){var Ke;return ce.length==2&&Pe.test(ce.charAt(0))&&((Ke=ce.charAt(1))==":"||!Fe&&Ke=="|")}function p(ce){var Fe;return 1<ce.length&&m(ce.slice(0,2))&&(ce.length==2||(Fe=ce.charAt(2))==="/"||Fe==="\\"||Fe==="?"||Fe==="#")}function s(ce){var Fe=ce.path,Ke=Fe.length;!Ke||ce.scheme=="file"&&Ke==1&&m(Fe[0],!0)||Fe.pop()}function i(ce,Fe,Ke,He){var rt,Ve,Mt,St,ht,wt,$e=Ke||De,Ct=0,ut="",Nr=!1,Fr=!1,tr=!1;for(Ke||(ce.scheme="",ce.username="",ce.password="",ce.host=null,ce.port=null,ce.path=[],ce.query=null,ce.fragment=null,ce.cannotBeABaseURL=!1,Fe=Fe.replace(ye,"")),Fe=Fe.replace(ne,""),rt=P(Fe);Ct<=rt.length;){switch(Ve=rt[Ct],$e){case De:if(!Ve||!Pe.test(Ve)){if(Ke)return ue;$e=Ce;continue}ut+=Ve.toLowerCase(),$e=Ze;break;case Ze:if(Ve&&(ae.test(Ve)||Ve=="+"||Ve=="-"||Ve=="."))ut+=Ve.toLowerCase();else{if(Ve!=":"){if(Ke)return ue;ut="",$e=Ce,Ct=0;continue}if(Ke&&(Le(ce)!=L(ee,ut)||ut=="file"&&(f(ce)||ce.port!==null)||ce.scheme=="file"&&!ce.host))return;if(ce.scheme=ut,Ke)return void(Le(ce)&&ee[ce.scheme]==ce.port&&(ce.port=null));ut="",ce.scheme=="file"?$e=xe:Le(ce)&&He&&He.scheme==ce.scheme?$e=je:Le(ce)?$e=Xe:rt[Ct+1]=="/"?($e=Ee,Ct++):(ce.cannotBeABaseURL=!0,ce.path.push(""),$e=it)}break;case Ce:if(!He||He.cannotBeABaseURL&&Ve!="#")return ue;if(He.cannotBeABaseURL&&Ve=="#"){ce.scheme=He.scheme,ce.path=He.path.slice(),ce.query=He.query,ce.fragment="",ce.cannotBeABaseURL=!0,$e=vt;break}$e=He.scheme=="file"?xe:qe;continue;case je:if(Ve!="/"||rt[Ct+1]!="/"){$e=qe;continue}$e=O,Ct++;break;case Ee:if(Ve=="/"){$e=H;break}$e=Ye;continue;case qe:if(ce.scheme=He.scheme,Ve==d)ce.username=He.username,ce.password=He.password,ce.host=He.host,ce.port=He.port,ce.path=He.path.slice(),ce.query=He.query;else if(Ve=="/"||Ve=="\\"&&Le(ce))$e=be;else if(Ve=="?")ce.username=He.username,ce.password=He.password,ce.host=He.host,ce.port=He.port,ce.path=He.path.slice(),ce.query="",$e=lt;else{if(Ve!="#"){ce.username=He.username,ce.password=He.password,ce.host=He.host,ce.port=He.port,ce.path=He.path.slice(),ce.path.pop(),$e=Ye;continue}ce.username=He.username,ce.password=He.password,ce.host=He.host,ce.port=He.port,ce.path=He.path.slice(),ce.query=He.query,ce.fragment="",$e=vt}break;case be:if(!Le(ce)||Ve!="/"&&Ve!="\\"){if(Ve!="/"){ce.username=He.username,ce.password=He.password,ce.host=He.host,ce.port=He.port,$e=Ye;continue}$e=H}else $e=O;break;case Xe:if($e=O,Ve!="/"||ut.charAt(Ct+1)!="/")continue;Ct++;break;case O:if(Ve=="/"||Ve=="\\")break;$e=H;continue;case H:if(Ve=="@"){Nr&&(ut="%40"+ut),Nr=!0,Mt=P(ut);for(var Ur=0;Ur<Mt.length;Ur++){var nn=Mt[Ur];if(nn!=":"||tr){var fr=ie(nn,Ie);tr?ce.password+=fr:ce.username+=fr}else tr=!0}ut=""}else if(Ve==d||Ve=="/"||Ve=="?"||Ve=="#"||Ve=="\\"&&Le(ce)){if(Nr&&ut=="")return"Invalid authority";Ct-=P(ut).length+1,ut="",$e=G}else ut+=Ve;break;case G:case Z:if(Ke&&ce.scheme=="file"){$e=ke;continue}if(Ve!=":"||Fr){if(Ve==d||Ve=="/"||Ve=="?"||Ve=="#"||Ve=="\\"&&Le(ce)){if(Le(ce)&&ut=="")return ge;if(Ke&&ut==""&&(f(ce)||ce.port!==null))return;if(St=c(ce,ut))return St;if(ut="",$e=_e,Ke)return;continue}Ve=="["?Fr=!0:Ve=="]"&&(Fr=!1),ut+=Ve}else{if(ut=="")return ge;if(St=c(ce,ut))return St;if(ut="",$e=oe,Ke==Z)return}break;case oe:if(!we.test(Ve)){if(Ve==d||Ve=="/"||Ve=="?"||Ve=="#"||Ve=="\\"&&Le(ce)||Ke){if(ut!=""){var ui=parseInt(ut,10);if(65535<ui)return de;ce.port=Le(ce)&&ui===ee[ce.scheme]?null:ui,ut=""}if(Ke)return;$e=_e;continue}return de}ut+=Ve;break;case xe:if(ce.scheme="file",Ve=="/"||Ve=="\\")$e=Se;else{if(!He||He.scheme!="file"){$e=Ye;continue}if(Ve==d)ce.host=He.host,ce.path=He.path.slice(),ce.query=He.query;else if(Ve=="?")ce.host=He.host,ce.path=He.path.slice(),ce.query="",$e=lt;else{if(Ve!="#"){p(rt.slice(Ct).join(""))||(ce.host=He.host,ce.path=He.path.slice(),s(ce)),$e=Ye;continue}ce.host=He.host,ce.path=He.path.slice(),ce.query=He.query,ce.fragment="",$e=vt}}break;case Se:if(Ve=="/"||Ve=="\\"){$e=ke;break}He&&He.scheme=="file"&&!p(rt.slice(Ct).join(""))&&(m(He.path[0],!0)?ce.path.push(He.path[0]):ce.host=He.host),$e=Ye;continue;case ke:if(Ve==d||Ve=="/"||Ve=="\\"||Ve=="?"||Ve=="#"){if(!Ke&&m(ut))$e=Ye;else if(ut==""){if(ce.host="",Ke)return;$e=_e}else{if(St=c(ce,ut))return St;if(ce.host=="localhost"&&(ce.host=""),Ke)return;ut="",$e=_e}continue}ut+=Ve;break;case _e:if(Le(ce)){if($e=Ye,Ve!="/"&&Ve!="\\")continue}else if(Ke||Ve!="?")if(Ke||Ve!="#"){if(Ve!=d&&($e=Ye,Ve!="/"))continue}else ce.fragment="",$e=vt;else ce.query="",$e=lt;break;case Ye:if(Ve==d||Ve=="/"||Ve=="\\"&&Le(ce)||!Ke&&(Ve=="?"||Ve=="#")){if((wt=(wt=ut).toLowerCase())===".."||wt==="%2e."||wt===".%2e"||wt==="%2e%2e"?(s(ce),Ve=="/"||Ve=="\\"&&Le(ce)||ce.path.push("")):(ht=ut)==="."||ht.toLowerCase()==="%2e"?Ve=="/"||Ve=="\\"&&Le(ce)||ce.path.push(""):(ce.scheme=="file"&&!ce.path.length&&m(ut)&&(ce.host&&(ce.host=""),ut=ut.charAt(0)+":"),ce.path.push(ut)),ut="",ce.scheme=="file"&&(Ve==d||Ve=="?"||Ve=="#"))for(;1<ce.path.length&&ce.path[0]==="";)ce.path.shift();Ve=="?"?(ce.query="",$e=lt):Ve=="#"&&(ce.fragment="",$e=vt)}else ut+=ie(Ve,Oe);break;case it:Ve=="?"?(ce.query="",$e=lt):Ve=="#"?(ce.fragment="",$e=vt):Ve!=d&&(ce.path[0]+=ie(Ve,he));break;case lt:Ke||Ve!="#"?Ve!=d&&(Ve=="'"&&Le(ce)?ce.query+="%27":ce.query+=Ve=="#"?"%23":ie(Ve,he)):(ce.fragment="",$e=vt);break;case vt:Ve!=d&&(ce.fragment+=ie(Ve,Ae))}Ct++}}function o(ce,Fe){return{get:ce,set:Fe,configurable:!0,enumerable:!0}}var d,u=t("../internals/export"),g=t("../internals/descriptors"),b=t("../internals/native-url"),_=t("../internals/global"),w=t("../internals/object-define-properties"),S=t("../internals/redefine"),T=t("../internals/an-instance"),L=t("../internals/has"),A=t("../internals/object-assign"),P=t("../internals/array-from"),R=t("../internals/string-multibyte").codeAt,D=t("../internals/string-punycode-to-ascii"),F=t("../internals/set-to-string-tag"),I=t("../modules/web.url-search-params"),k=t("../internals/internal-state"),U=_.URL,q=I.URLSearchParams,Q=I.getState,W=k.set,K=k.getterFor("URL"),Y=Math.floor,se=Math.pow,ue="Invalid scheme",ge="Invalid host",de="Invalid port",Pe=/[A-Za-z]/,ae=/[\d+-.A-Za-z]/,we=/\d/,j=/^(0x|0X)/,B=/^[0-7]+$/,V=/^\d+$/,te=/^[\dA-Fa-f]+$/,$=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,X=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ye=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ne=/[\u0009\u000A\u000D]/g,pe=function(ce){var Fe,Ke,He,rt,Ve,Mt,St,ht=ce.split(".");if(ht.length&&ht[ht.length-1]==""&&ht.pop(),4<(Fe=ht.length))return ce;for(Ke=[],He=0;He<Fe;He++){if((rt=ht[He])=="")return ce;if(Ve=10,1<rt.length&&rt.charAt(0)=="0"&&(Ve=j.test(rt)?16:8,rt=rt.slice(Ve==8?1:2)),rt==="")Mt=0;else{if(!(Ve==10?V:Ve==8?B:te).test(rt))return ce;Mt=parseInt(rt,Ve)}Ke.push(Mt)}for(He=0;He<Fe;He++)if(Mt=Ke[He],He==Fe-1){if(Mt>=se(256,5-Fe))return null}else if(255<Mt)return null;for(St=Ke.pop(),He=0;He<Ke.length;He++)St+=Ke[He]*se(256,3-He);return St},ve=function(ce){function Fe(){return ce.charAt(ut)}var Ke,He,rt,Ve,Mt,St,ht,wt=[0,0,0,0,0,0,0,0],$e=0,Ct=null,ut=0;if(Fe()==":"){if(ce.charAt(1)!=":")return;ut+=2,Ct=++$e}for(;Fe();){if($e==8)return;if(Fe()!=":"){for(Ke=He=0;He<4&&te.test(Fe());)Ke=16*Ke+parseInt(Fe(),16),ut++,He++;if(Fe()=="."){if(He==0||(ut-=He,6<$e))return;for(rt=0;Fe();){if(Ve=null,0<rt){if(!(Fe()=="."&&rt<4))return;ut++}if(!we.test(Fe()))return;for(;we.test(Fe());){if(Mt=parseInt(Fe(),10),Ve===null)Ve=Mt;else{if(Ve==0)return;Ve=10*Ve+Mt}if(255<Ve)return;ut++}wt[$e]=256*wt[$e]+Ve,++rt!=2&&rt!=4||$e++}if(rt!=4)return;break}if(Fe()==":"){if(ut++,!Fe())return}else if(Fe())return;wt[$e++]=Ke}else{if(Ct!==null)return;ut++,Ct=++$e}}if(Ct!==null)for(St=$e-Ct,$e=7;$e!=0&&0<St;)ht=wt[$e],wt[$e--]=wt[Ct+St-1],wt[Ct+--St]=ht;else if($e!=8)return;return wt},he={},Ae=A({},he,{" ":1,'"':1,"<":1,">":1,"`":1}),Oe=A({},Ae,{"#":1,"?":1,"{":1,"}":1}),Ie=A({},Oe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ie=function(ce,Fe){var Ke=R(ce,0);return 32<Ke&&Ke<127&&!L(Fe,ce)?ce:encodeURIComponent(ce)},ee={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Le=function(ce){return L(ee,ce.scheme)},De={},Ze={},Ce={},je={},Ee={},qe={},be={},Xe={},O={},H={},G={},Z={},oe={},xe={},Se={},ke={},_e={},Ye={},it={},lt={},vt={},dt=function(ce,Fe){var Ke,He,rt=T(this,dt,"URL"),Ve=1<arguments.length?Fe:void 0,Mt=String(ce),St=W(rt,{type:"URL"});if(Ve!==void 0){if(Ve instanceof dt)Ke=K(Ve);else if(He=i(Ke={},String(Ve)))throw TypeError(He)}if(He=i(St,Mt,null,Ke))throw TypeError(He);var ht=St.searchParams=new q,wt=Q(ht);wt.updateSearchParams(St.query),wt.updateURL=function(){St.query=String(ht)||null},g||(rt.href=Tt.call(rt),rt.origin=Tr.call(rt),rt.protocol=dr.call(rt),rt.username=rn.call(rt),rt.password=kr.call(rt),rt.host=me.call(rt),rt.hostname=Ue.call(rt),rt.port=ze.call(rt),rt.pathname=Be.call(rt),rt.search=Je.call(rt),rt.searchParams=yt.call(rt),rt.hash=bt.call(rt))},gt=dt.prototype,Tt=function(){var ce=K(this),Fe=ce.scheme,Ke=ce.username,He=ce.password,rt=ce.host,Ve=ce.port,Mt=ce.path,St=ce.query,ht=ce.fragment,wt=Fe+":";return rt!==null?(wt+="//",f(ce)&&(wt+=Ke+(He?":"+He:"")+"@"),wt+=n(rt),Ve!==null&&(wt+=":"+Ve)):Fe=="file"&&(wt+="//"),wt+=ce.cannotBeABaseURL?Mt[0]:Mt.length?"/"+Mt.join("/"):"",St!==null&&(wt+="?"+St),ht!==null&&(wt+="#"+ht),wt},Tr=function(){var ce=K(this),Fe=ce.scheme,Ke=ce.port;if(Fe=="blob")try{return new URL(Fe.path[0]).origin}catch{return"null"}return Fe!="file"&&Le(ce)?Fe+"://"+n(ce.host)+(Ke!==null?":"+Ke:""):"null"},dr=function(){return K(this).scheme+":"},rn=function(){return K(this).username},kr=function(){return K(this).password},me=function(){var ce=K(this),Fe=ce.host,Ke=ce.port;return Fe===null?"":Ke===null?n(Fe):n(Fe)+":"+Ke},Ue=function(){var ce=K(this).host;return ce===null?"":n(ce)},ze=function(){var ce=K(this).port;return ce===null?"":String(ce)},Be=function(){var ce=K(this),Fe=ce.path;return ce.cannotBeABaseURL?Fe[0]:Fe.length?"/"+Fe.join("/"):""},Je=function(){var ce=K(this).query;return ce?"?"+ce:""},yt=function(){return K(this).searchParams},bt=function(){var ce=K(this).fragment;return ce?"#"+ce:""};if(g&&w(gt,{href:o(Tt,function(ce){var Fe=K(this),Ke=String(ce),He=i(Fe,Ke);if(He)throw TypeError(He);Q(Fe.searchParams).updateSearchParams(Fe.query)}),origin:o(Tr),protocol:o(dr,function(ce){var Fe=K(this);i(Fe,String(ce)+":",De)}),username:o(rn,function(ce){var Fe=K(this),Ke=P(String(ce));if(!h(Fe)){Fe.username="";for(var He=0;He<Ke.length;He++)Fe.username+=ie(Ke[He],Ie)}}),password:o(kr,function(ce){var Fe=K(this),Ke=P(String(ce));if(!h(Fe)){Fe.password="";for(var He=0;He<Ke.length;He++)Fe.password+=ie(Ke[He],Ie)}}),host:o(me,function(ce){var Fe=K(this);Fe.cannotBeABaseURL||i(Fe,String(ce),G)}),hostname:o(Ue,function(ce){var Fe=K(this);Fe.cannotBeABaseURL||i(Fe,String(ce),Z)}),port:o(ze,function(ce){var Fe=K(this);h(Fe)||((ce=String(ce))==""?Fe.port=null:i(Fe,ce,oe))}),pathname:o(Be,function(ce){var Fe=K(this);Fe.cannotBeABaseURL||(Fe.path=[],i(Fe,ce+"",_e))}),search:o(Je,function(ce){var Fe=K(this);(ce=String(ce))==""?Fe.query=null:(ce.charAt(0)=="?"&&(ce=ce.slice(1)),Fe.query="",i(Fe,ce,lt)),Q(Fe.searchParams).updateSearchParams(Fe.query)}),searchParams:o(yt),hash:o(bt,function(ce){var Fe=K(this);(ce=String(ce))!=""?(ce.charAt(0)=="#"&&(ce=ce.slice(1)),Fe.fragment="",i(Fe,ce,vt)):Fe.fragment=null})}),S(gt,"toJSON",function(){return Tt.call(this)},{enumerable:!0}),S(gt,"toString",function(){return Tt.call(this)},{enumerable:!0}),U){var xt=U.createObjectURL,_t=U.revokeObjectURL;xt&&S(dt,"createObjectURL",function(ce){return xt.apply(U,arguments)}),_t&&S(dt,"revokeObjectURL",function(ce){return _t.apply(U,arguments)})}F(dt,"URL"),u({global:!0,forced:!b,sham:!g},{URL:dt})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":230}],232:[function(t,a,l){a.exports=t("./").polyfill()},{"./":233}],233:[function(t,a,l){(function(c,n){var f,h;f=this,h=function(){function m(ne){return typeof ne=="function"}var p=Array.isArray?Array.isArray:function(ne){return Object.prototype.toString.call(ne)==="[object Array]"},s=0,i=void 0,o=void 0,d=function(ne,pe){T[s]=ne,T[s+1]=pe,(s+=2)===2&&(o?o(L):F())},u=typeof window!="undefined"?window:void 0,g=u||{},b=g.MutationObserver||g.WebKitMutationObserver,_=typeof self=="undefined"&&c!==void 0&&{}.toString.call(c)==="[object process]",w=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";function S(){var ne=setTimeout;return function(){return ne(L,1)}}var T=new Array(1e3);function L(){for(var ne=0;ne<s;ne+=2)(0,T[ne])(T[ne+1]),T[ne]=void 0,T[ne+1]=void 0;s=0}var A,P,R,D,F=void 0;function I(ne,pe){var ve=this,he=new this.constructor(q);he[U]===void 0&&V(he);var Ae=ve._state;if(Ae){var Oe=arguments[Ae-1];d(function(){return j(Ae,he,Oe,ve._result)})}else ae(ve,he,ne,pe);return he}function k(ne){if(ne&&typeof ne=="object"&&ne.constructor===this)return ne;var pe=new this(q);return ue(pe,ne),pe}F=_?function(){return c.nextTick(L)}:b?(P=0,R=new b(L),D=document.createTextNode(""),R.observe(D,{characterData:!0}),function(){D.data=P=++P%2}):w?((A=new MessageChannel).port1.onmessage=L,function(){return A.port2.postMessage(0)}):u===void 0&&typeof t=="function"?function(){try{var ne=Function("return this")().require("vertx");return(i=ne.runOnLoop||ne.runOnContext)!==void 0?function(){i(L)}:S()}catch{return S()}}():S();var U=Math.random().toString(36).substring(2);function q(){}var Q=void 0,W=1,K=2;function Y(ne,pe,ve){d(function(he){var Ae=!1,Oe=function(Ie,ie,ee,Le){try{Ie.call(ie,ee,Le)}catch(De){return De}}(ve,pe,function(Ie){Ae||(Ae=!0,pe!==Ie?ue(he,Ie):de(he,Ie))},function(Ie){Ae||(Ae=!0,Pe(he,Ie))},he._label);!Ae&&Oe&&(Ae=!0,Pe(he,Oe))},ne)}function se(ne,pe,ve){var he,Ae;pe.constructor===ne.constructor&&ve===I&&pe.constructor.resolve===k?(he=ne,(Ae=pe)._state===W?de(he,Ae._result):Ae._state===K?Pe(he,Ae._result):ae(Ae,void 0,function(Oe){return ue(he,Oe)},function(Oe){return Pe(he,Oe)})):ve===void 0?de(ne,pe):m(ve)?Y(ne,pe,ve):de(ne,pe)}function ue(ne,pe){if(ne===pe)Pe(ne,new TypeError("You cannot resolve a promise with itself"));else if(Ae=typeof(he=pe),he===null||Ae!="object"&&Ae!="function")de(ne,pe);else{var ve=void 0;try{ve=pe.then}catch(Oe){return void Pe(ne,Oe)}se(ne,pe,ve)}var he,Ae}function ge(ne){ne._onerror&&ne._onerror(ne._result),we(ne)}function de(ne,pe){ne._state===Q&&(ne._result=pe,ne._state=W,ne._subscribers.length!==0&&d(we,ne))}function Pe(ne,pe){ne._state===Q&&(ne._state=K,ne._result=pe,d(ge,ne))}function ae(ne,pe,ve,he){var Ae=ne._subscribers,Oe=Ae.length;ne._onerror=null,Ae[Oe]=pe,Ae[Oe+W]=ve,Ae[Oe+K]=he,Oe===0&&ne._state&&d(we,ne)}function we(ne){var pe=ne._subscribers,ve=ne._state;if(pe.length!==0){for(var he=void 0,Ae=void 0,Oe=ne._result,Ie=0;Ie<pe.length;Ie+=3)he=pe[Ie],Ae=pe[Ie+ve],he?j(ve,he,Ae,Oe):Ae(Oe);ne._subscribers.length=0}}function j(ne,pe,ve,he){var Ae=m(ve),Oe=void 0,Ie=void 0,ie=!0;if(Ae){try{Oe=ve(he)}catch(ee){ie=!1,Ie=ee}if(pe===Oe)return void Pe(pe,new TypeError("A promises callback cannot return that same promise."))}else Oe=he;pe._state!==Q||(Ae&&ie?ue(pe,Oe):ie===!1?Pe(pe,Ie):ne===W?de(pe,Oe):ne===K&&Pe(pe,Oe))}var B=0;function V(ne){ne[U]=B++,ne._state=void 0,ne._result=void 0,ne._subscribers=[]}var te=($.prototype._enumerate=function(ne){for(var pe=0;this._state===Q&&pe<ne.length;pe++)this._eachEntry(ne[pe],pe)},$.prototype._eachEntry=function(ne,pe){var ve=this._instanceConstructor,he=ve.resolve;if(he===k){var Ae=void 0,Oe=void 0,Ie=!1;try{Ae=ne.then}catch(ee){Ie=!0,Oe=ee}if(Ae===I&&ne._state!==Q)this._settledAt(ne._state,pe,ne._result);else if(typeof Ae!="function")this._remaining--,this._result[pe]=ne;else if(ve===X){var ie=new ve(q);Ie?Pe(ie,Oe):se(ie,ne,Ae),this._willSettleAt(ie,pe)}else this._willSettleAt(new ve(function(ee){return ee(ne)}),pe)}else this._willSettleAt(he(ne),pe)},$.prototype._settledAt=function(ne,pe,ve){var he=this.promise;he._state===Q&&(this._remaining--,ne===K?Pe(he,ve):this._result[pe]=ve),this._remaining===0&&de(he,this._result)},$.prototype._willSettleAt=function(ne,pe){var ve=this;ae(ne,void 0,function(he){return ve._settledAt(W,pe,he)},function(he){return ve._settledAt(K,pe,he)})},$);function $(ne,pe){this._instanceConstructor=ne,this.promise=new ne(q),this.promise[U]||V(this.promise),p(pe)?(this.length=pe.length,this._remaining=pe.length,this._result=new Array(this.length),this.length===0?de(this.promise,this._result):(this.length=this.length||0,this._enumerate(pe),this._remaining===0&&de(this.promise,this._result))):Pe(this.promise,new Error("Array Methods must be provided an Array"))}var X=(ye.prototype.catch=function(ne){return this.then(null,ne)},ye.prototype.finally=function(ne){var pe=this.constructor;return m(ne)?this.then(function(ve){return pe.resolve(ne()).then(function(){return ve})},function(ve){return pe.resolve(ne()).then(function(){throw ve})}):this.then(ne,ne)},ye);function ye(ne){this[U]=B++,this._result=this._state=void 0,this._subscribers=[],q!==ne&&(typeof ne!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof ye?function(pe,ve){try{ve(function(he){ue(pe,he)},function(he){Pe(pe,he)})}catch(he){Pe(pe,he)}}(this,ne):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return X.prototype.then=I,X.all=function(ne){return new te(this,ne).promise},X.race=function(ne){var pe=this;return p(ne)?new pe(function(ve,he){for(var Ae=ne.length,Oe=0;Oe<Ae;Oe++)pe.resolve(ne[Oe]).then(ve,he)}):new pe(function(ve,he){return he(new TypeError("You must pass an array to race."))})},X.resolve=k,X.reject=function(ne){var pe=new this(q);return Pe(pe,ne),pe},X._setScheduler=function(ne){o=ne},X._setAsap=function(ne){d=ne},X._asap=d,X.polyfill=function(){var ne=void 0;if(n!==void 0)ne=n;else if(typeof self!="undefined")ne=self;else try{ne=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var pe=ne.Promise;if(pe){var ve=null;try{ve=Object.prototype.toString.call(pe.resolve())}catch{}if(ve==="[object Promise]"&&!pe.cast)return}ne.Promise=X},X.Promise=X},typeof l=="object"&&a!==void 0?a.exports=h():f.ES6Promise=h()}).call(this,t("_process"),typeof Gs!="undefined"?Gs:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{_process:241}],234:[function(t,a,l){(function(c,n){if(l!==void 0&&a!==void 0)n(l,a);else{var f={exports:{}};n(f.exports,f),c.fetchJsonp=f.exports}})(this,function(c,n){var f=5e3,h="callback";function m(s){try{delete window[s]}catch{window[s]=void 0}}function p(s){var i=document.getElementById(s);i&&document.getElementsByTagName("head")[0].removeChild(i)}n.exports=function(s){var i=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],o=s,d=i.timeout||f,u=i.jsonpCallback||h,g=void 0;return new Promise(function(b,_){var w=i.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),S=u+"_"+w;window[w]=function(L){b({ok:!0,json:function(){return Promise.resolve(L)}}),g&&clearTimeout(g),p(S),m(w)},o+=o.indexOf("?")===-1?"?":"&";var T=document.createElement("script");T.setAttribute("src",""+o+u+"="+w),i.charset&&T.setAttribute("charset",i.charset),T.id=S,document.getElementsByTagName("head")[0].appendChild(T),g=setTimeout(function(){_(new Error("JSONP request to "+s+" timed out")),m(w),p(S),window[w]=function(){m(w)}},d),T.onerror=function(){_(new Error("JSONP request to "+s+" failed")),m(w),p(S),g&&clearTimeout(g)}})}})},{}],235:[function(t,a,l){var c=c||function(n){if(!(n===void 0||typeof navigator!="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent))){var f=n.document,h=function(){return n.URL||n.webkitURL||n},m=f.createElementNS("http://www.w3.org/1999/xhtml","a"),p="download"in m,s=/constructor/i.test(n.HTMLElement)||n.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),o=function(_){(n.setImmediate||n.setTimeout)(function(){throw _},0)},d=function(_){setTimeout(function(){typeof _=="string"?h().revokeObjectURL(_):_.remove()},4e4)},u=function(_){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob([String.fromCharCode(65279),_],{type:_.type}):_},g=function(_,w,S){S||(_=u(_));function T(){(function(R,D,F){for(var I=(D=[].concat(D)).length;I--;){var k=R["on"+D[I]];if(typeof k=="function")try{k.call(R,F||R)}catch(U){o(U)}}})(A,"writestart progress write writeend".split(" "))}var L,A=this,P=_.type==="application/octet-stream";if(A.readyState=A.INIT,p)return L=h().createObjectURL(_),void setTimeout(function(){var R,D;m.href=L,m.download=w,R=m,D=new MouseEvent("click"),R.dispatchEvent(D),T(),d(L),A.readyState=A.DONE});(function(){if((i||P&&s)&&n.FileReader){var R=new FileReader;return R.onloadend=function(){var D=i?R.result:R.result.replace(/^data:[^;]*;/,"data:attachment/file;");n.open(D,"_blank")||(n.location.href=D),D=void 0,A.readyState=A.DONE,T()},R.readAsDataURL(_),A.readyState=A.INIT}L=L||h().createObjectURL(_),P?n.location.href=L:n.open(L,"_blank")||(n.location.href=L),A.readyState=A.DONE,T(),d(L)})()},b=g.prototype;return typeof navigator!="undefined"&&navigator.msSaveOrOpenBlob?function(_,w,S){return w=w||_.name||"download",S||(_=u(_)),navigator.msSaveOrOpenBlob(_,w)}:(b.abort=function(){},b.readyState=b.INIT=0,b.WRITING=1,b.DONE=2,b.error=b.onwritestart=b.onprogress=b.onwrite=b.onabort=b.onerror=b.onwriteend=null,function(_,w,S){return new g(_,w||_.name||"download",S)})}}(typeof self!="undefined"&&self||typeof window!="undefined"&&window||this.content);a!==void 0&&a.exports?a.exports.saveAs=c:r!=null},{}],236:[function(t,a,l){l.read=function(c,n,f,h,m){var p,s,i=8*m-h-1,o=(1<<i)-1,d=o>>1,u=-7,g=f?m-1:0,b=f?-1:1,_=c[n+g];for(g+=b,p=_&(1<<-u)-1,_>>=-u,u+=i;0<u;p=256*p+c[n+g],g+=b,u-=8);for(s=p&(1<<-u)-1,p>>=-u,u+=h;0<u;s=256*s+c[n+g],g+=b,u-=8);if(p===0)p=1-d;else{if(p===o)return s?NaN:1/0*(_?-1:1);s+=Math.pow(2,h),p-=d}return(_?-1:1)*s*Math.pow(2,p-h)},l.write=function(c,n,f,h,m,p){var s,i,o,d=8*p-m-1,u=(1<<d)-1,g=u>>1,b=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=h?0:p-1,w=h?1:-1,S=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(i=isNaN(n)?1:0,s=u):(s=Math.floor(Math.log(n)/Math.LN2),n*(o=Math.pow(2,-s))<1&&(s--,o*=2),2<=(n+=1<=s+g?b/o:b*Math.pow(2,1-g))*o&&(s++,o/=2),u<=s+g?(i=0,s=u):1<=s+g?(i=(n*o-1)*Math.pow(2,m),s+=g):(i=n*Math.pow(2,g-1)*Math.pow(2,m),s=0));8<=m;c[f+_]=255&i,_+=w,i/=256,m-=8);for(s=s<<m|i,d+=m;0<d;c[f+_]=255&s,_+=w,s/=256,d-=8);c[f+_-w]|=128*S}},{}],237:[function(t,a,l){var c;function n(O,H){return O.b===H.b&&O.a===H.a}function f(O,H){return O.b<H.b||O.b===H.b&&O.a<=H.a}function h(O,H,G){var Z=H.b-O.b,oe=G.b-H.b;return 0<Z+oe?Z<oe?H.a-O.a+Z/(Z+oe)*(O.a-G.a):H.a-G.a+oe/(Z+oe)*(G.a-O.a):0}function m(O,H,G){var Z=H.b-O.b,oe=G.b-H.b;return 0<Z+oe?(H.a-G.a)*Z+(H.a-O.a)*oe:0}function p(O,H){return O.a<H.a||O.a===H.a&&O.b<=H.b}function s(O,H,G){var Z=H.a-O.a,oe=G.a-H.a;return 0<Z+oe?Z<oe?H.b-O.b+Z/(Z+oe)*(O.b-G.b):H.b-G.b+oe/(Z+oe)*(G.b-O.b):0}function i(O,H,G){var Z=H.a-O.a,oe=G.a-H.a;return 0<Z+oe?(H.b-G.b)*Z+(H.b-O.b)*oe:0}function o(O,H,G,Z){return(O=O<0?0:O)<=(G=G<0?0:G)?G===0?(H+Z)/2:H+O/(O+G)*(Z-H):Z+G/(O+G)*(H-Z)}function d(O){var H=w(O.b);return T(H,O.c),T(H.b,O.c),L(H,O.a),H}function u(O,H){var G=!1,Z=!1;O!==H&&(H.a!==O.a&&(Z=!0,P(H.a,O.a)),H.d!==O.d&&(G=!0,R(H.d,O.d)),S(H,O),Z||(T(H,O.a),O.a.c=O),G||(L(H,O.d),O.d.a=O))}function g(O){var H=O.b,G=!1;O.d!==O.b.d&&(G=!0,R(O.d,O.b.d)),O.c===O?P(O.a,null):(O.b.d.a=he(O),O.a.c=O.c,S(O,he(O)),G||L(O,O.d)),H.c===H?(P(H.a,null),R(H.d,null)):(O.d.a=he(H),H.a.c=H.c,S(H,he(H))),A(O)}function b(O){var H=w(O),G=H.b;return S(H,O.e),H.a=O.b.a,T(G,H.a),H.d=G.d=O.d,H=H.b,S(O.b,he(O.b)),S(O.b,H),O.b.a=H.a,H.b.a.c=H.b,H.b.d=O.b.d,H.f=O.f,H.b.f=O.b.f,H}function _(O,H){var G=!1,Z=w(O),oe=Z.b;return H.d!==O.d&&(G=!0,R(H.d,O.d)),S(Z,O.e),S(oe,H),Z.a=O.b.a,oe.a=H.a,Z.d=oe.d=O.d,O.d.a=oe,G||L(Z,O.d),Z}function w(O){var H=new ve,G=new ve,Z=O.b.h;return(((G.h=Z).b.h=H).h=O).b.h=G,H.b=G,((H.c=H).e=G).b=H,(G.c=G).e=H}function S(O,H){var G=O.c,Z=H.c;G.b.e=H,(Z.b.e=O).c=Z,H.c=G}function T(O,H){var G=H.f,Z=new Oe(H,G);for(G.e=Z,G=(H.f=Z).c=O;G.a=Z,(G=G.c)!==O;);}function L(O,H){var G=H.d,Z=new pe(H,G);for(G.b=Z,(H.d=Z).a=O,Z.c=H.c,G=O;G.d=Z,(G=G.e)!==O;);}function A(O){var H=O.h;O=O.b.h,(H.b.h=O).b.h=H}function P(O,H){for(var G=O.c,Z=G;Z.a=H,(Z=Z.c)!==G;);G=O.f,((Z=O.e).f=G).e=Z}function R(O,H){for(var G=O.a,Z=G;Z.d=H,(Z=Z.e)!==G;);G=O.d,((Z=O.b).d=G).b=Z}function D(O){var H=0;return Math.abs(O[1])>Math.abs(O[0])&&(H=1),Math.abs(O[2])>Math.abs(O[H])&&(H=2),H}function F(O,H){O.f+=H.f,O.b.f+=H.b.f}function I(O,H,G){return O=O.a,H=H.a,G=G.a,H.b.a===O?G.b.a===O?f(H.a,G.a)?m(G.b.a,H.a,G.a)<=0:0<=m(H.b.a,G.a,H.a):m(G.b.a,O,G.a)<=0:G.b.a===O?0<=m(H.b.a,O,H.a):(H=h(H.b.a,O,H.a),(O=h(G.b.a,O,G.a))<=H)}function k(O){O.a.i=null;var H=O.e;H.a.c=H.c,H.c.a=H.a,O.e=null}function U(O,H){g(O.a),O.c=!1,(O.a=H).i=O}function q(O){for(var H=O.a.a;(O=Xe(O)).a.a===H;);return O.c&&(U(O,H=_(be(O).a.b,O.a.e)),O=Xe(O)),O}function Q(O,H,G){var Z=new qe;return Z.a=G,Z.e=te(O.f,H.e,Z),G.i=Z}function W(O,H){switch(O.s){case 100130:return(1&H)!=0;case 100131:return H!==0;case 100132:return 0<H;case 100133:return H<0;case 100134:return 2<=H||H<=-2}return!1}function K(O){var H=O.a,G=H.d;G.c=O.d,G.a=H,k(O)}function Y(O,H,G){for(H=(O=H).a;O!==G;){O.c=!1;var Z=be(O),oe=Z.a;if(oe.a!==H.a){if(!Z.c){K(O);break}U(Z,oe=_(H.c.b,oe.b))}H.c!==oe&&(u(he(oe),oe),u(H,oe)),K(O),H=Z.a,O=Z}return H}function se(O,H,G,Z,oe,xe){for(var Se=!0;Q(O,H,G.b),(G=G.c)!==Z;);for(oe===null&&(oe=be(H).a.b.c);(G=(Z=be(H)).a.b).a===oe.a;)G.c!==oe&&(u(he(G),G),u(he(oe),G)),Z.f=H.f-G.f,Z.d=W(O,Z.f),H.b=!0,!Se&&Pe(O,H)&&(F(G,oe),k(H),g(oe)),Se=!1,H=Z,oe=G;H.b=!0,xe&&we(O,H)}function ue(O,H,G,Z,oe){var xe=[H.g[0],H.g[1],H.g[2]];H.d=null,H.d=O.o&&O.o(xe,G,Z,O.c)||null,H.d===null&&(oe?O.n||(ne(O,100156),O.n=!0):H.d=G[0])}function ge(O,H,G){var Z=[null,null,null,null];Z[0]=H.a.d,Z[1]=G.a.d,ue(O,H.a,Z,[.5,.5,0,0],!1),u(H,G)}function de(O,H,G,Z,oe){var xe=Math.abs(H.b-O.b)+Math.abs(H.a-O.a),Se=Math.abs(G.b-O.b)+Math.abs(G.a-O.a),ke=oe+1;Z[oe]=.5*Se/(xe+Se),Z[ke]=.5*xe/(xe+Se),O.g[0]+=Z[oe]*H.g[0]+Z[ke]*G.g[0],O.g[1]+=Z[oe]*H.g[1]+Z[ke]*G.g[1],O.g[2]+=Z[oe]*H.g[2]+Z[ke]*G.g[2]}function Pe(O,H){var G=be(H),Z=H.a,oe=G.a;if(f(Z.a,oe.a)){if(0<m(oe.b.a,Z.a,oe.a))return!1;if(n(Z.a,oe.a)){if(Z.a!==oe.a){G=O.e;var xe=Z.a.h;if(0<=xe){var Se=(G=G.b).d,ke=G.e,_e=G.c,Ye=_e[xe];Se[Ye]=Se[G.a],(_e[Se[Ye]]=Ye)<=--G.a&&(Ye<=1||f(ke[Se[Ye>>1]],ke[Se[Ye]])?je(G,Ye):Ee(G,Ye)),ke[xe]=null,_e[xe]=G.b,G.b=xe}else for(G.c[-(xe+1)]=null;0<G.a&&G.c[G.d[G.a-1]]===null;)--G.a;ge(O,he(oe),Z)}}else b(oe.b),u(Z,he(oe)),H.b=G.b=!0}else{if(m(Z.b.a,oe.a,Z.a)<0)return!1;Xe(H).b=H.b=!0,b(Z.b),u(he(oe),Z)}return!0}function ae(O,H){var G=be(H),Z=H.a,oe=G.a,xe=Z.a,Se=oe.a,ke=Z.b.a,_e=oe.b.a,Ye=new Oe;if(m(ke,O.a,xe),m(_e,O.a,Se),xe===Se||Math.min(xe.a,ke.a)>Math.max(Se.a,_e.a))return!1;if(f(xe,Se)){if(0<m(_e,xe,Se))return!1}else if(m(ke,Se,xe)<0)return!1;var it,lt,vt=ke,dt=xe,gt=_e,Tt=Se;if(f(vt,dt)||(it=vt,vt=dt,dt=it),f(gt,Tt)||(it=gt,gt=Tt,Tt=it),f(vt,gt)||(it=vt,vt=gt,gt=it,it=dt,dt=Tt,Tt=it),f(gt,dt)?f(dt,Tt)?((it=h(vt,gt,dt))+(lt=h(gt,dt,Tt))<0&&(it=-it,lt=-lt),Ye.b=o(it,gt.b,lt,dt.b)):((it=m(vt,gt,dt))+(lt=-m(vt,Tt,dt))<0&&(it=-it,lt=-lt),Ye.b=o(it,gt.b,lt,Tt.b)):Ye.b=(gt.b+dt.b)/2,p(vt,dt)||(it=vt,vt=dt,dt=it),p(gt,Tt)||(it=gt,gt=Tt,Tt=it),p(vt,gt)||(it=vt,vt=gt,gt=it,it=dt,dt=Tt,Tt=it),p(gt,dt)?p(dt,Tt)?((it=s(vt,gt,dt))+(lt=s(gt,dt,Tt))<0&&(it=-it,lt=-lt),Ye.a=o(it,gt.a,lt,dt.a)):((it=i(vt,gt,dt))+(lt=-i(vt,Tt,dt))<0&&(it=-it,lt=-lt),Ye.a=o(it,gt.a,lt,Tt.a)):Ye.a=(gt.a+dt.a)/2,f(Ye,O.a)&&(Ye.b=O.a.b,Ye.a=O.a.a),vt=f(xe,Se)?xe:Se,f(vt,Ye)&&(Ye.b=vt.b,Ye.a=vt.a),n(Ye,xe)||n(Ye,Se))return Pe(O,H),!1;if(!n(ke,O.a)&&0<=m(ke,O.a,Ye)||!n(_e,O.a)&&m(_e,O.a,Ye)<=0){if(_e===O.a)return b(Z.b),u(oe.b,Z),Z=be(H=q(H)).a,Y(O,be(H),G),se(O,H,he(Z),Z,Z,!0),!0;if(ke!==O.a)return 0<=m(ke,O.a,Ye)&&(Xe(H).b=H.b=!0,b(Z.b),Z.a.b=O.a.b,Z.a.a=O.a.a),m(_e,O.a,Ye)<=0&&(H.b=G.b=!0,b(oe.b),oe.a.b=O.a.b,oe.a.a=O.a.a),!1;for(b(oe.b),u(Z.e,he(oe)),Se=(xe=G=H).a.b.a;(xe=Xe(xe)).a.b.a===Se;);return xe=be(H=xe).a.b.c,G.a=he(oe),se(O,H,(oe=Y(O,G,null)).c,Z.b.c,xe,!0),!0}return b(Z.b),b(oe.b),u(he(oe),Z),Z.a.b=Ye.b,Z.a.a=Ye.a,Z.a.h=ie(O.e,Z.a),Z=Z.a,oe=[0,0,0,0],Ye=[xe.d,ke.d,Se.d,_e.d],Z.g[0]=Z.g[1]=Z.g[2]=0,de(Z,xe,ke,oe,0),de(Z,Se,_e,oe,2),ue(O,Z,Ye,oe,!0),Xe(H).b=H.b=G.b=!0,!1}function we(O,H){for(var G=be(H);;){for(;G.b;)G=be(H=G);if(!H.b&&((H=Xe(G=H))===null||!H.b))break;H.b=!1;var Z,oe=H.a,xe=G.a;if(Z=oe.b.a!==xe.b.a)e:{var Se=be(Z=H),ke=Z.a,_e=Se.a,Ye=void 0;if(f(ke.b.a,_e.b.a)){if(m(ke.b.a,_e.b.a,ke.a)<0){Z=!1;break e}Xe(Z).b=Z.b=!0,Ye=b(ke),u(_e.b,Ye),Ye.d.c=Z.d}else{if(0<m(_e.b.a,ke.b.a,_e.a)){Z=!1;break e}Z.b=Se.b=!0,Ye=b(_e),u(ke.e,_e.b),Ye.b.d.c=Z.d}Z=!0}if(Z&&(G.c?(k(G),g(xe),xe=(G=be(H)).a):H.c&&(k(H),g(oe),oe=(H=Xe(G)).a)),oe.a!==xe.a){if(oe.b.a===xe.b.a||H.c||G.c||oe.b.a!==O.a&&xe.b.a!==O.a)Pe(O,H);else if(ae(O,H))break}oe.a===xe.a&&oe.b.a===xe.b.a&&(F(xe,oe),k(H),g(oe),H=Xe(G))}}function j(O,H){for(var G=(O.a=H).c;G.i===null;)if((G=G.c)===H.c){G=O;var Z=H;(Se=new qe).a=Z.c.b;for(var oe=(_e=G.f).a;(oe=oe.a).b!==null&&!_e.c(_e.b,Se,oe.b););var xe=be(_e=oe.b),Se=_e.a;if(oe=xe.a,m(Se.b.a,Z,Se.a)===0)n((Se=_e.a).a,Z)||n(Se.b.a,Z)||(b(Se.b),_e.c&&(g(Se.c),_e.c=!1),u(Z.c,Se),j(G,Z));else{var ke=f(oe.b.a,Se.b.a)?_e:xe;xe=void 0,_e.d||ke.c?(xe=ke===_e?_(Z.c.b,Se.e):_(oe.b.c.b,Z.c).b,ke.c?U(ke,xe):((_e=Q(Se=G,_e,xe)).f=Xe(_e).f+_e.a.f,_e.d=W(Se,_e.f)),j(G,Z)):se(G,_e,Z.c,Z.c,null,!0)}return}if(_e=(Se=be(G=q(G.i))).a,(Se=Y(O,Se,null)).c===_e){Se=(_e=Se).c,oe=be(G),xe=G.a,ke=oe.a;var _e,Ye=!1;xe.b.a!==ke.b.a&&ae(O,G),n(xe.a,O.a)&&(u(he(Se),xe),Se=be(G=q(G)).a,Y(O,be(G),oe),Ye=!0),n(ke.a,O.a)&&(u(_e,he(ke)),_e=Y(O,oe,null),Ye=!0),Ye?se(O,G,_e.c,Se,Se,!0):(Z=f(ke.a,xe.a)?he(ke):xe,se(O,G,Z=_(_e.c.b,Z),Z.c,Z.c,!1),Z.b.i.c=!0,we(O,G))}else se(O,G,Se.c,_e,_e,!0)}function B(O,H){var G=new qe,Z=d(O.b);Z.a.b=4e150,Z.a.a=H,Z.b.a.b=-4e150,Z.b.a.a=H,O.a=Z.b.a,G.a=Z,G.f=0,G.d=!1,G.c=!1,G.h=!0,G.b=!1,Z=te(Z=O.f,Z.a,G),G.e=Z}function V(O){this.a=new $,this.b=O,this.c=I}function te(O,H,G){for(;(H=H.c).b!==null&&!O.c(O.b,H.b,G););return O=new $(G,H.a,H),H.a.c=O,H.a=O}function $(O,H,G){this.b=O||null,this.a=H||this,this.c=G||this}function X(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function ye(O,H){if(O.d!==H)for(;O.d!==H;)if(O.d<H)switch(O.d){case 0:ne(O,100151),O.u(null);break;case 1:ne(O,100152),O.t()}else switch(O.d){case 2:ne(O,100154),O.v();break;case 1:ne(O,100153),O.w()}}function ne(O,H){O.p&&O.p(H,O.c)}function pe(O,H){this.b=O||this,this.d=H||this,this.a=null,this.c=!1}function ve(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function he(O){return O.b.e}function Ae(){this.c=new Oe,this.a=new pe,this.b=new ve,this.d=new ve,this.b.b=this.d,this.d.b=this.b}function Oe(O,H){this.e=O||this,this.f=H||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Ie(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Le}function ie(O,H){if(O.e){var G,Z=O.b,oe=++Z.a;return 2*oe>Z.f&&(Z.f*=2,Z.c=De(Z.c,Z.f+1)),Z.b===0?G=oe:(G=Z.b,Z.b=Z.c[Z.b]),Z.e[G]=H,Z.c[G]=oe,Z.d[oe]=G,Z.h&&Ee(Z,oe),G}return Z=O.a++,O.c[Z]=H,-(Z+1)}function ee(O){if(O.a===0)return Ce(O.b);var H=O.c[O.d[O.a-1]];if(O.b.a!==0&&f(Ze(O.b),H))return Ce(O.b);for(;--O.a,0<O.a&&O.c[O.d[O.a-1]]===null;);return H}function Le(){this.d=De([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function De(O,H){for(var G=Array(H),Z=0;Z<O.length;Z++)G[Z]=O[Z];for(;Z<H;Z++)G[Z]=0;return G}function Ze(O){return O.e[O.d[1]]}function Ce(O){var H=O.d,G=O.e,Z=O.c,oe=H[1],xe=G[oe];return 0<O.a&&(H[1]=H[O.a],Z[H[1]]=1,G[oe]=null,Z[oe]=O.b,O.b=oe,0<--O.a&&je(O,1)),xe}function je(O,H){for(var G=O.d,Z=O.e,oe=O.c,xe=H,Se=G[xe];;){var ke=xe<<1;ke<O.a&&f(Z[G[ke+1]],Z[G[ke]])&&(ke+=1);var _e=G[ke];if(ke>O.a||f(Z[Se],Z[_e])){oe[G[xe]=Se]=xe;break}oe[G[xe]=_e]=xe,xe=ke}}function Ee(O,H){for(var G=O.d,Z=O.e,oe=O.c,xe=H,Se=G[xe];;){var ke=xe>>1,_e=G[ke];if(ke==0||f(Z[_e],Z[Se])){oe[G[xe]=Se]=xe;break}oe[G[xe]=_e]=xe,xe=ke}}function qe(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function be(O){return O.e.c.b}function Xe(O){return O.e.a.b}(c=X.prototype).x=function(){ye(this,0)},c.B=function(O,H){switch(O){case 100142:return;case 100140:switch(H){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=H)}break;case 100141:return void(this.m=!!H);default:return void ne(this,100900)}ne(this,100901)},c.y=function(O){switch(O){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ne(this,100900)}return!1},c.A=function(O,H,G){this.j[0]=O,this.j[1]=H,this.j[2]=G},c.z=function(O,H){var G=H||null;switch(O){case 100100:case 100106:this.h=G;break;case 100104:case 100110:this.l=G;break;case 100101:case 100107:this.k=G;break;case 100102:case 100108:this.i=G;break;case 100103:case 100109:this.p=G;break;case 100105:case 100111:this.o=G;break;case 100112:this.r=G;break;default:ne(this,100900)}},c.C=function(O,H){var G=!1,Z=[0,0,0];ye(this,2);for(var oe=0;oe<3;++oe){var xe=O[oe];xe<-1e150&&(xe=-1e150,G=!0),1e150<xe&&(xe=1e150,G=!0),Z[oe]=xe}G&&ne(this,100155),(G=this.q)===null?u(G=d(this.b),G.b):(b(G),G=G.e),G.a.d=H,G.a.g[0]=Z[0],G.a.g[1]=Z[1],G.a.g[2]=Z[2],G.f=1,G.b.f=-1,this.q=G},c.u=function(O){ye(this,0),this.d=1,this.b=new Ae,this.c=O},c.t=function(){ye(this,1),this.d=2,this.q=null},c.v=function(){ye(this,2),this.d=1},c.w=function(){ye(this,1),this.d=0;var O,H,G=!1,Z=[_e=this.j[0],oe=this.j[1],Se=this.j[2]];if(_e===0&&oe===0&&Se===0){for(var oe=[-2e150,-2e150,-2e150],xe=[2e150,2e150,2e150],Se=[],ke=[],_e=(G=this.b.c).e;_e!==G;_e=_e.e)for(var Ye=0;Ye<3;++Ye){var it=_e.g[Ye];it<xe[Ye]&&(xe[Ye]=it,ke[Ye]=_e),it>oe[Ye]&&(oe[Ye]=it,Se[Ye]=_e)}if(_e=0,oe[1]-xe[1]>oe[0]-xe[0]&&(_e=1),oe[2]-xe[2]>oe[_e]-xe[_e]&&(_e=2),xe[_e]>=oe[_e])Z[0]=0,Z[1]=0,Z[2]=1;else{for(oe=0,xe=ke[_e],Se=Se[_e],ke=[0,0,0],xe=[xe.g[0]-Se.g[0],xe.g[1]-Se.g[1],xe.g[2]-Se.g[2]],Ye=[0,0,0],_e=G.e;_e!==G;_e=_e.e)Ye[0]=_e.g[0]-Se.g[0],Ye[1]=_e.g[1]-Se.g[1],Ye[2]=_e.g[2]-Se.g[2],ke[0]=xe[1]*Ye[2]-xe[2]*Ye[1],ke[1]=xe[2]*Ye[0]-xe[0]*Ye[2],ke[2]=xe[0]*Ye[1]-xe[1]*Ye[0],oe<(it=ke[0]*ke[0]+ke[1]*ke[1]+ke[2]*ke[2])&&(oe=it,Z[0]=ke[0],Z[1]=ke[1],Z[2]=ke[2]);oe<=0&&(Z[0]=Z[1]=Z[2]=0,Z[D(xe)]=1)}G=!0}for(ke=D(Z),_e=this.b.c,oe=(ke+1)%3,Se=(ke+2)%3,ke=0<Z[ke]?1:-1,Z=_e.e;Z!==_e;Z=Z.e)Z.b=Z.g[oe],Z.a=ke*Z.g[Se];if(G){for(Z=0,_e=(G=this.b.a).b;_e!==G;_e=_e.b)if(!((oe=_e.a).f<=0))for(;Z+=(oe.a.b-oe.b.a.b)*(oe.a.a+oe.b.a.a),(oe=oe.e)!==_e.a;);if(Z<0)for(G=(Z=this.b.c).e;G!==Z;G=G.e)G.a=-G.a}for(this.n=!1,_e=(Z=this.b.b).h;_e!==Z;_e=G)G=_e.h,oe=_e.e,n(_e.a,_e.b.a)&&_e.e.e!==_e&&(ge(this,oe,_e),g(_e),oe=(_e=oe).e),oe.e===_e&&(oe!==_e&&(oe!==G&&oe!==G.b||(G=G.h),g(oe)),_e!==G&&_e!==G.b||(G=G.h),g(_e));for(this.e=Z=new Ie,_e=(G=this.b.c).e;_e!==G;_e=_e.e)_e.h=ie(Z,_e);for(function(lt){lt.d=[];for(var vt=0;vt<lt.a;vt++)lt.d[vt]=vt;lt.d.sort(function(dt){return function(gt,Tt){return f(dt[gt],dt[Tt])?1:-1}}(lt.c)),lt.e=!0,function(dt){for(var gt=dt.a;1<=gt;--gt)je(dt,gt);dt.h=!0}(lt.b)}(Z),this.f=new V(this),B(this,-4e150),B(this,4e150);(Z=ee(this.e))!==null;){for(;;){e:if(_e=this.e,_e.a===0)G=Ze(_e.b);else if(G=_e.c[_e.d[_e.a-1]],_e.b.a!==0&&(_e=Ze(_e.b),f(_e,G))){G=_e;break e}if(G===null||!n(G,Z))break;G=ee(this.e),ge(this,Z.c,G.c)}j(this,Z)}for(this.a=this.f.a.a.b.a.a,Z=0;(G=this.f.a.a.b)!==null;)G.h||++Z,k(G);for(this.f=null,(Z=this.e).b=null,Z.d=null,this.e=Z.c=null,_e=(Z=this.b).a.b;_e!==Z.a;_e=G)G=_e.b,(_e=_e.a).e.e===_e&&(F(_e.c,_e),g(_e));if(!this.n){if(Z=this.b,this.m)for(_e=Z.b.h;_e!==Z.b;_e=G)G=_e.h,_e.b.d.c!==_e.d.c?_e.f=_e.d.c?1:-1:g(_e);else for(_e=Z.a.b;_e!==Z.a;_e=G)if(G=_e.b,_e.c){for(_e=_e.a;f(_e.b.a,_e.a);_e=_e.c.b);for(;f(_e.a,_e.b.a);_e=_e.e);for(oe=_e.c.b,Se=void 0;_e.e!==oe;)if(f(_e.b.a,oe.a)){for(;oe.e!==_e&&(f((H=oe.e).b.a,H.a)||m(oe.a,oe.b.a,oe.e.b.a)<=0);)oe=(Se=_(oe.e,oe)).b;oe=oe.c.b}else{for(;oe.e!==_e&&(f((O=_e.c.b).a,O.b.a)||0<=m(_e.b.a,_e.a,_e.c.b.a));)_e=(Se=_(_e,_e.c.b)).b;_e=_e.e}for(;oe.e.e!==_e;)oe=(Se=_(oe.e,oe)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(G=(Z=this.b).a.b;G!==Z.a;G=G.b)if(G.c){for(this.h&&this.h(2,this.c),_e=G.a;this.k&&this.k(_e.a.d,this.c),(_e=_e.e)!==G.a;);this.i&&this.i(this.c)}}else{for(Z=this.b,G=!!this.l,_e=!1,oe=-1,Se=Z.a.d;Se!==Z.a;Se=Se.d)if(Se.c)for(_e||(this.h&&this.h(4,this.c),_e=!0),ke=Se.a;G&&oe!==(xe=ke.b.d.c?0:1)&&(oe=xe,this.l&&this.l(!!oe,this.c)),this.k&&this.k(ke.a.d,this.c),(ke=ke.e)!==Se.a;);_e&&this.i&&this.i(this.c)}if(this.r){for(_e=(Z=this.b).a.b;_e!==Z.a;_e=G)if(G=_e.b,!_e.c){for(Se=(oe=_e.a).e,ke=void 0;Se=(ke=Se).e,(ke.d=null)===ke.b.d&&(ke.c===ke?P(ke.a,null):(ke.a.c=ke.c,S(ke,he(ke))),(xe=ke.b).c===xe?P(xe.a,null):(xe.a.c=xe.c,S(xe,he(xe))),A(ke)),ke!==oe;);oe=_e.d,((_e=_e.b).d=oe).b=_e}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:X,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},X.prototype.gluDeleteTess=X.prototype.x,X.prototype.gluTessProperty=X.prototype.B,X.prototype.gluGetTessProperty=X.prototype.y,X.prototype.gluTessNormal=X.prototype.A,X.prototype.gluTessCallback=X.prototype.z,X.prototype.gluTessVertex=X.prototype.C,X.prototype.gluTessBeginPolygon=X.prototype.u,X.prototype.gluTessBeginContour=X.prototype.t,X.prototype.gluTessEndContour=X.prototype.v,X.prototype.gluTessEndPolygon=X.prototype.w,a!==void 0&&(a.exports=this.libtess)},{}],238:[function(t,a,l){function c(n,f,h,m){for(var p=n[f++],s=1<<p,i=1+s,o=1+i,d=p+1,u=(1<<d)-1,g=0,b=0,_=0,w=n[f++],S=new Int32Array(4096),T=null;;){for(;g<16&&w!==0;)b|=n[f++]<<g,g+=8,w===1?w=n[f++]:--w;if(g<d)break;var L=b&u;if(b>>=d,g-=d,L!=s){if(L==i)break;for(var A=L<o?L:T,P=0,R=A;s<R;)R=S[R]>>8,++P;var D=R;if(m<_+P+(A!==L?1:0))return void console.log("Warning, gif stream longer than expected.");h[_++]=D;var F=_+=P;for(A!==L&&(h[_++]=D),R=A;P--;)R=S[R],h[--F]=255&R,R>>=8;T!==null&&o<4096&&(S[o++]=T<<8|D,u+1<=o&&d<12&&(++d,u=u<<1|1)),T=L}else o=1+i,u=(1<<(d=p+1))-1,T=null}return _!==m&&console.log("Warning, gif stream shorter than expected."),h}try{l.GifWriter=function(n,f,h,m){var p=0,s=(m=m===void 0?{}:m).loop===void 0?null:m.loop,i=m.palette===void 0?null:m.palette;if(f<=0||h<=0||65535<f||65535<h)throw new Error("Width/Height invalid.");function o(T){var L=T.length;if(L<2||256<L||L&L-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return L}n[p++]=71,n[p++]=73,n[p++]=70,n[p++]=56,n[p++]=57,n[p++]=97;var d=0,u=0;if(i!==null){for(var g=o(i);g>>=1;)++d;if(g=1<<d,--d,m.background!==void 0){if(g<=(u=m.background))throw new Error("Background index out of range.");if(u===0)throw new Error("Background index explicitly passed as 0.")}}if(n[p++]=255&f,n[p++]=f>>8&255,n[p++]=255&h,n[p++]=h>>8&255,n[p++]=(i!==null?128:0)|d,n[p++]=u,n[p++]=0,i!==null)for(var b=0,_=i.length;b<_;++b){var w=i[b];n[p++]=w>>16&255,n[p++]=w>>8&255,n[p++]=255&w}if(s!==null){if(s<0||65535<s)throw new Error("Loop count invalid.");n[p++]=33,n[p++]=255,n[p++]=11,n[p++]=78,n[p++]=69,n[p++]=84,n[p++]=83,n[p++]=67,n[p++]=65,n[p++]=80,n[p++]=69,n[p++]=50,n[p++]=46,n[p++]=48,n[p++]=3,n[p++]=1,n[p++]=255&s,n[p++]=s>>8&255,n[p++]=0}var S=!1;this.addFrame=function(T,L,A,P,R,D){if(S===!0&&(--p,S=!1),D=D===void 0?{}:D,T<0||L<0||65535<T||65535<L)throw new Error("x/y invalid.");if(A<=0||P<=0||65535<A||65535<P)throw new Error("Width/Height invalid.");if(R.length<A*P)throw new Error("Not enough pixels for the frame size.");var F=!0,I=D.palette;if(I==null&&(F=!1,I=i),I==null)throw new Error("Must supply either a local or global palette.");for(var k=o(I),U=0;k>>=1;)++U;k=1<<U;var q=D.delay===void 0?0:D.delay,Q=D.disposal===void 0?0:D.disposal;if(Q<0||3<Q)throw new Error("Disposal out of range.");var W=!1,K=0;if(D.transparent!==void 0&&D.transparent!==null&&(W=!0,(K=D.transparent)<0||k<=K))throw new Error("Transparent color index.");if(Q===0&&!W&&q===0||(n[p++]=33,n[p++]=249,n[p++]=4,n[p++]=Q<<2|(W===!0?1:0),n[p++]=255&q,n[p++]=q>>8&255,n[p++]=K,n[p++]=0),n[p++]=44,n[p++]=255&T,n[p++]=T>>8&255,n[p++]=255&L,n[p++]=L>>8&255,n[p++]=255&A,n[p++]=A>>8&255,n[p++]=255&P,n[p++]=P>>8&255,n[p++]=F===!0?128|U-1:0,F===!0)for(var Y=0,se=I.length;Y<se;++Y){var ue=I[Y];n[p++]=ue>>16&255,n[p++]=ue>>8&255,n[p++]=255&ue}return p=function(ge,de,Pe,ae){ge[de++]=Pe;var we=de++,j=1<<Pe,B=j-1,V=1+j,te=1+V,$=Pe+1,X=0,ye=0;function ne(Le){for(;Le<=X;)ge[de++]=255&ye,ye>>=8,X-=8,de===we+256&&(ge[we]=255,we=de++)}function pe(Le){ye|=Le<<X,X+=$,ne(8)}var ve=ae[0]&B,he={};pe(j);for(var Ae=1,Oe=ae.length;Ae<Oe;++Ae){var Ie=ae[Ae]&B,ie=ve<<8|Ie,ee=he[ie];if(ee===void 0){for(ye|=ve<<X,X+=$;8<=X;)ge[de++]=255&ye,ye>>=8,X-=8,de===we+256&&(ge[we]=255,we=de++);te===4096?(pe(j),te=1+V,$=Pe+1,he={}):(1<<$<=te&&++$,he[ie]=te++),ve=Ie}else ve=ee}return pe(ve),pe(V),ne(1),we+1===de?ge[we]=0:(ge[we]=de-we-1,ge[de++]=0),de}(n,p,U<2?2:U,R)},this.end=function(){return S===!1&&(n[p++]=59,S=!0),p},this.getOutputBuffer=function(){return n},this.setOutputBuffer=function(T){n=T},this.getOutputBufferPosition=function(){return p},this.setOutputBufferPosition=function(T){p=T}},l.GifReader=function(n){var f=0;if(n[f++]!==71||n[f++]!==73||n[f++]!==70||n[f++]!==56||(n[f++]+1&253)!=56||n[f++]!==97)throw new Error("Invalid GIF 87a/89a header.");var h=n[f++]|n[f++]<<8,m=n[f++]|n[f++]<<8,p=n[f++],s=p>>7,i=1<<1+(7&p);n[f++],n[f++];var o=null,d=null;s&&(o=f,f+=3*(d=i));var u=!0,g=[],b=0,_=null,w=0,S=null;for(this.width=h,this.height=m;u&&f<n.length;)switch(n[f++]){case 33:switch(n[f++]){case 255:if(n[f]!==11||n[f+1]==78&&n[f+2]==69&&n[f+3]==84&&n[f+4]==83&&n[f+5]==67&&n[f+6]==65&&n[f+7]==80&&n[f+8]==69&&n[f+9]==50&&n[f+10]==46&&n[f+11]==48&&n[f+12]==3&&n[f+13]==1&&n[f+16]==0)f+=14,S=n[f++]|n[f++]<<8,f++;else for(f+=12;;){if(!(0<=(W=n[f++])))throw Error("Invalid block size");if(W===0)break;f+=W}break;case 249:if(n[f++]!==4||n[f+4]!==0)throw new Error("Invalid graphics extension block.");var T=n[f++];b=n[f++]|n[f++]<<8,_=n[f++],(1&T)==0&&(_=null),w=T>>2&7,f++;break;case 254:for(;;){if(!(0<=(W=n[f++])))throw Error("Invalid block size");if(W===0)break;f+=W}break;default:throw new Error("Unknown graphic control label: 0x"+n[f-1].toString(16))}break;case 44:var L=n[f++]|n[f++]<<8,A=n[f++]|n[f++]<<8,P=n[f++]|n[f++]<<8,R=n[f++]|n[f++]<<8,D=n[f++],F=D>>6&1,I=1<<1+(7&D),k=o,U=d,q=!1;D>>7&&(q=!0,k=f,f+=3*(U=I));var Q=f;for(f++;;){var W;if(!(0<=(W=n[f++])))throw Error("Invalid block size");if(W===0)break;f+=W}g.push({x:L,y:A,width:P,height:R,has_local_palette:q,palette_offset:k,palette_size:U,data_offset:Q,data_length:f-Q,transparent_index:_,interlaced:!!F,delay:b,disposal:w});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[f-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return S},this.frameInfo=function(K){if(K<0||K>=g.length)throw new Error("Frame index out of range.");return g[K]},this.decodeAndBlitFrameBGRA=function(K,Y){var se=this.frameInfo(K),ue=se.width*se.height,ge=new Uint8Array(ue);c(n,se.data_offset,ge,ue);var de=se.palette_offset,Pe=se.transparent_index;Pe===null&&(Pe=256);var ae=se.width,we=h-ae,j=ae,B=4*(se.y*h+se.x),V=4*((se.y+se.height)*h+se.x),te=B,$=4*we;se.interlaced===!0&&($+=4*h*7);for(var X=8,ye=0,ne=ge.length;ye<ne;++ye){var pe=ge[ye];if(j===0&&(j=ae,V<=(te+=$)&&($=4*we+4*h*(X-1),te=B+(ae+we)*(X<<1),X>>=1)),pe===Pe)te+=4;else{var ve=n[de+3*pe],he=n[de+3*pe+1],Ae=n[de+3*pe+2];Y[te++]=Ae,Y[te++]=he,Y[te++]=ve,Y[te++]=255}--j}},this.decodeAndBlitFrameRGBA=function(K,Y){var se=this.frameInfo(K),ue=se.width*se.height,ge=new Uint8Array(ue);c(n,se.data_offset,ge,ue);var de=se.palette_offset,Pe=se.transparent_index;Pe===null&&(Pe=256);var ae=se.width,we=h-ae,j=ae,B=4*(se.y*h+se.x),V=4*((se.y+se.height)*h+se.x),te=B,$=4*we;se.interlaced===!0&&($+=4*h*7);for(var X=8,ye=0,ne=ge.length;ye<ne;++ye){var pe=ge[ye];if(j===0&&(j=ae,V<=(te+=$)&&($=4*we+4*h*(X-1),te=B+(ae+we)*(X<<1),X>>=1)),pe===Pe)te+=4;else{var ve=n[de+3*pe],he=n[de+3*pe+1],Ae=n[de+3*pe+2];Y[te++]=ve,Y[te++]=he,Y[te++]=Ae,Y[te++]=255}--j}}}}catch{}},{}],239:[function(t,a,l){(function(c){var n,f;n=this,f=function(h){function m(y){if(this==null)throw TypeError();var x=String(this),M=x.length,E=y?Number(y):0;if(E!=E&&(E=0),!(E<0||M<=E)){var C,N=x.charCodeAt(E);return 55296<=N&&N<=56319&&E+1<M&&56320<=(C=x.charCodeAt(E+1))&&C<=57343?1024*(N-55296)+C-56320+65536:N}}var p;String.prototype.codePointAt||((p=function(){try{var y={},x=Object.defineProperty,M=x(y,y,y)&&x}catch{}return M}())?p(String.prototype,"codePointAt",{value:m,configurable:!0,writable:!0}):String.prototype.codePointAt=m);var s=0,i=-3;function o(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function d(y,x){this.source=y,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=x,this.destLen=0,this.ltree=new o,this.dtree=new o}var u=new o,g=new o,b=new Uint8Array(30),_=new Uint16Array(30),w=new Uint8Array(30),S=new Uint16Array(30),T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),L=new o,A=new Uint8Array(320);function P(y,x,M,E){var C,N;for(C=0;C<M;++C)y[C]=0;for(C=0;C<30-M;++C)y[C+M]=C/M|0;for(N=E,C=0;C<30;++C)x[C]=N,N+=1<<y[C]}var R=new Uint16Array(16);function D(y,x,M,E){var C,N;for(C=0;C<16;++C)y.table[C]=0;for(C=0;C<E;++C)y.table[x[M+C]]++;for(C=N=y.table[0]=0;C<16;++C)R[C]=N,N+=y.table[C];for(C=0;C<E;++C)x[M+C]&&(y.trans[R[x[M+C]]++]=C)}function F(y){y.bitcount--||(y.tag=y.source[y.sourceIndex++],y.bitcount=7);var x=1&y.tag;return y.tag>>>=1,x}function I(y,x,M){if(!x)return M;for(;y.bitcount<24;)y.tag|=y.source[y.sourceIndex++]<<y.bitcount,y.bitcount+=8;var E=y.tag&65535>>>16-x;return y.tag>>>=x,y.bitcount-=x,E+M}function k(y,x){for(;y.bitcount<24;)y.tag|=y.source[y.sourceIndex++]<<y.bitcount,y.bitcount+=8;for(var M=0,E=0,C=0,N=y.tag;E=2*E+(1&N),N>>>=1,++C,M+=x.table[C],0<=(E-=x.table[C]););return y.tag=N,y.bitcount-=C,x.trans[M+E]}function U(y,x,M){var E,C,N,z,J,re;for(E=I(y,5,257),C=I(y,5,1),N=I(y,4,4),z=0;z<19;++z)A[z]=0;for(z=0;z<N;++z){var fe=I(y,3,0);A[T[z]]=fe}for(D(L,A,0,19),J=0;J<E+C;){var Te=k(y,L);switch(Te){case 16:var Re=A[J-1];for(re=I(y,2,3);re;--re)A[J++]=Re;break;case 17:for(re=I(y,3,3);re;--re)A[J++]=0;break;case 18:for(re=I(y,7,11);re;--re)A[J++]=0;break;default:A[J++]=Te}}D(x,A,0,E),D(M,A,E,C)}function q(y,x,M){for(;;){var E,C,N,z,J=k(y,x);if(J===256)return s;if(J<256)y.dest[y.destLen++]=J;else for(E=I(y,b[J-=257],_[J]),C=k(y,M),z=N=y.destLen-I(y,w[C],S[C]);z<N+E;++z)y.dest[y.destLen++]=y.dest[z]}}function Q(y){for(var x,M;8<y.bitcount;)y.sourceIndex--,y.bitcount-=8;if((x=256*(x=y.source[y.sourceIndex+1])+y.source[y.sourceIndex])!==(65535&~(256*y.source[y.sourceIndex+3]+y.source[y.sourceIndex+2])))return i;for(y.sourceIndex+=4,M=x;M;--M)y.dest[y.destLen++]=y.source[y.sourceIndex++];return y.bitcount=0,s}(function(y,x){var M;for(M=0;M<7;++M)y.table[M]=0;for(y.table[7]=24,y.table[8]=152,y.table[9]=112,M=0;M<24;++M)y.trans[M]=256+M;for(M=0;M<144;++M)y.trans[24+M]=M;for(M=0;M<8;++M)y.trans[168+M]=280+M;for(M=0;M<112;++M)y.trans[176+M]=144+M;for(M=0;M<5;++M)x.table[M]=0;for(x.table[5]=32,M=0;M<32;++M)x.trans[M]=M})(u,g),P(b,_,4,3),P(w,S,2,1),b[28]=0,_[28]=258;var W=function(y,x){var M,E,C=new d(y,x);do{switch(M=F(C),I(C,2,0)){case 0:E=Q(C);break;case 1:E=q(C,u,g);break;case 2:U(C,C.ltree,C.dtree),E=q(C,C.ltree,C.dtree);break;default:E=i}if(E!==s)throw new Error("Data error")}while(!M);return C.destLen<C.dest.length?typeof C.dest.slice=="function"?C.dest.slice(0,C.destLen):C.dest.subarray(0,C.destLen):C.dest};function K(y,x,M,E,C){return Math.pow(1-C,3)*y+3*Math.pow(1-C,2)*C*x+3*(1-C)*Math.pow(C,2)*M+Math.pow(C,3)*E}function Y(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function se(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function ue(y){throw new Error(y)}function ge(y,x){y||ue(x)}Y.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Y.prototype.addPoint=function(y,x){typeof y=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=y,this.x2=y),y<this.x1&&(this.x1=y),y>this.x2&&(this.x2=y)),typeof x=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=x,this.y2=x),x<this.y1&&(this.y1=x),x>this.y2&&(this.y2=x))},Y.prototype.addX=function(y){this.addPoint(y,null)},Y.prototype.addY=function(y){this.addPoint(null,y)},Y.prototype.addBezier=function(y,x,M,E,C,N,z,J){var re=[y,x],fe=[M,E],Te=[C,N],Re=[z,J];this.addPoint(y,x),this.addPoint(z,J);for(var le=0;le<=1;le++){var et=6*re[le]-12*fe[le]+6*Te[le],Qe=-3*re[le]+9*fe[le]-9*Te[le]+3*Re[le],We=3*fe[le]-3*re[le];if(Qe!=0){var Ne=Math.pow(et,2)-4*We*Qe;if(!(Ne<0)){var Ge=(-et+Math.sqrt(Ne))/(2*Qe);0<Ge&&Ge<1&&(le===0&&this.addX(K(re[le],fe[le],Te[le],Re[le],Ge)),le===1&&this.addY(K(re[le],fe[le],Te[le],Re[le],Ge)));var ot=(-et-Math.sqrt(Ne))/(2*Qe);0<ot&&ot<1&&(le===0&&this.addX(K(re[le],fe[le],Te[le],Re[le],ot)),le===1&&this.addY(K(re[le],fe[le],Te[le],Re[le],ot)))}}else{if(et==0)continue;var st=-We/et;0<st&&st<1&&(le===0&&this.addX(K(re[le],fe[le],Te[le],Re[le],st)),le===1&&this.addY(K(re[le],fe[le],Te[le],Re[le],st)))}}},Y.prototype.addQuad=function(y,x,M,E,C,N){var z=y+.6666666666666666*(M-y),J=x+2/3*(E-x),re=z+1/3*(C-y),fe=J+1/3*(N-x);this.addBezier(y,x,z,J,re,fe,C,N)},se.prototype.moveTo=function(y,x){this.commands.push({type:"M",x:y,y:x})},se.prototype.lineTo=function(y,x){this.commands.push({type:"L",x:y,y:x})},se.prototype.curveTo=se.prototype.bezierCurveTo=function(y,x,M,E,C,N){this.commands.push({type:"C",x1:y,y1:x,x2:M,y2:E,x:C,y:N})},se.prototype.quadTo=se.prototype.quadraticCurveTo=function(y,x,M,E){this.commands.push({type:"Q",x1:y,y1:x,x:M,y:E})},se.prototype.close=se.prototype.closePath=function(){this.commands.push({type:"Z"})},se.prototype.extend=function(y){if(y.commands)y=y.commands;else if(y instanceof Y){var x=y;return this.moveTo(x.x1,x.y1),this.lineTo(x.x2,x.y1),this.lineTo(x.x2,x.y2),this.lineTo(x.x1,x.y2),void this.close()}Array.prototype.push.apply(this.commands,y)},se.prototype.getBoundingBox=function(){for(var y=new Y,x=0,M=0,E=0,C=0,N=0;N<this.commands.length;N++){var z=this.commands[N];switch(z.type){case"M":y.addPoint(z.x,z.y),x=E=z.x,M=C=z.y;break;case"L":y.addPoint(z.x,z.y),E=z.x,C=z.y;break;case"Q":y.addQuad(E,C,z.x1,z.y1,z.x,z.y),E=z.x,C=z.y;break;case"C":y.addBezier(E,C,z.x1,z.y1,z.x2,z.y2,z.x,z.y),E=z.x,C=z.y;break;case"Z":E=x,C=M;break;default:throw new Error("Unexpected path command "+z.type)}}return y.isEmpty()&&y.addPoint(0,0),y},se.prototype.draw=function(y){y.beginPath();for(var x=0;x<this.commands.length;x+=1){var M=this.commands[x];M.type==="M"?y.moveTo(M.x,M.y):M.type==="L"?y.lineTo(M.x,M.y):M.type==="C"?y.bezierCurveTo(M.x1,M.y1,M.x2,M.y2,M.x,M.y):M.type==="Q"?y.quadraticCurveTo(M.x1,M.y1,M.x,M.y):M.type==="Z"&&y.closePath()}this.fill&&(y.fillStyle=this.fill,y.fill()),this.stroke&&(y.strokeStyle=this.stroke,y.lineWidth=this.strokeWidth,y.stroke())},se.prototype.toPathData=function(y){function x(){for(var N,z=arguments,J="",re=0;re<arguments.length;re+=1){var fe=z[re];0<=fe&&0<re&&(J+=" "),J+=(N=fe,Math.round(N)===N?""+Math.round(N):N.toFixed(y))}return J}y=y!==void 0?y:2;for(var M="",E=0;E<this.commands.length;E+=1){var C=this.commands[E];C.type==="M"?M+="M"+x(C.x,C.y):C.type==="L"?M+="L"+x(C.x,C.y):C.type==="C"?M+="C"+x(C.x1,C.y1,C.x2,C.y2,C.x,C.y):C.type==="Q"?M+="Q"+x(C.x1,C.y1,C.x,C.y):C.type==="Z"&&(M+="Z")}return M},se.prototype.toSVG=function(y){var x='<path d="';return x+=this.toPathData(y),x+='"',this.fill&&this.fill!=="black"&&(this.fill===null?x+=' fill="none"':x+=' fill="'+this.fill+'"'),this.stroke&&(x+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),x+="/>"},se.prototype.toDOMElement=function(y){var x=this.toPathData(y),M=document.createElementNS("http://www.w3.org/2000/svg","path");return M.setAttribute("d",x),M};var de={fail:ue,argument:ge,assert:ge},Pe={},ae={},we={};function j(y){return function(){return y}}ae.BYTE=function(y){return de.argument(0<=y&&y<=255,"Byte value should be between 0 and 255."),[y]},we.BYTE=j(1),ae.CHAR=function(y){return[y.charCodeAt(0)]},we.CHAR=j(1),ae.CHARARRAY=function(y){for(var x=[],M=0;M<y.length;M+=1)x[M]=y.charCodeAt(M);return x},we.CHARARRAY=function(y){return y.length},ae.USHORT=function(y){return[y>>8&255,255&y]},we.USHORT=j(2),ae.SHORT=function(y){return 32768<=y&&(y=-(65536-y)),[y>>8&255,255&y]},we.SHORT=j(2),ae.UINT24=function(y){return[y>>16&255,y>>8&255,255&y]},we.UINT24=j(3),ae.ULONG=function(y){return[y>>24&255,y>>16&255,y>>8&255,255&y]},we.ULONG=j(4),ae.LONG=function(y){return 2147483648<=y&&(y=-(4294967296-y)),[y>>24&255,y>>16&255,y>>8&255,255&y]},we.LONG=j(4),ae.FIXED=ae.ULONG,we.FIXED=we.ULONG,ae.FWORD=ae.SHORT,we.FWORD=we.SHORT,ae.UFWORD=ae.USHORT,we.UFWORD=we.USHORT,ae.LONGDATETIME=function(y){return[0,0,0,0,y>>24&255,y>>16&255,y>>8&255,255&y]},we.LONGDATETIME=j(8),ae.TAG=function(y){return de.argument(y.length===4,"Tag should be exactly 4 ASCII characters."),[y.charCodeAt(0),y.charCodeAt(1),y.charCodeAt(2),y.charCodeAt(3)]},we.TAG=j(4),ae.Card8=ae.BYTE,we.Card8=we.BYTE,ae.Card16=ae.USHORT,we.Card16=we.USHORT,ae.OffSize=ae.BYTE,we.OffSize=we.BYTE,ae.SID=ae.USHORT,we.SID=we.USHORT,ae.NUMBER=function(y){return-107<=y&&y<=107?[y+139]:108<=y&&y<=1131?[247+((y-=108)>>8),255&y]:-1131<=y&&y<=-108?[251+((y=-y-108)>>8),255&y]:-32768<=y&&y<=32767?ae.NUMBER16(y):ae.NUMBER32(y)},we.NUMBER=function(y){return ae.NUMBER(y).length},ae.NUMBER16=function(y){return[28,y>>8&255,255&y]},we.NUMBER16=j(3),ae.NUMBER32=function(y){return[29,y>>24&255,y>>16&255,y>>8&255,255&y]},we.NUMBER32=j(5),ae.REAL=function(y){var x=y.toString(),M=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(x);if(M){var E=parseFloat("1e"+((M[2]?+M[2]:0)+M[1].length));x=(Math.round(y*E)/E).toString()}for(var C="",N=0,z=x.length;N<z;N+=1){var J=x[N];C+=J==="e"?x[++N]==="-"?"c":"b":J==="."?"a":J==="-"?"e":J}for(var re=[30],fe=0,Te=(C+=1&C.length?"f":"ff").length;fe<Te;fe+=2)re.push(parseInt(C.substr(fe,2),16));return re},we.REAL=function(y){return ae.REAL(y).length},ae.NAME=ae.CHARARRAY,we.NAME=we.CHARARRAY,ae.STRING=ae.CHARARRAY,we.STRING=we.CHARARRAY,Pe.UTF8=function(y,x,M){for(var E=[],C=M,N=0;N<C;N++,x+=1)E[N]=y.getUint8(x);return String.fromCharCode.apply(null,E)},Pe.UTF16=function(y,x,M){for(var E=[],C=M/2,N=0;N<C;N++,x+=2)E[N]=y.getUint16(x);return String.fromCharCode.apply(null,E)},ae.UTF16=function(y){for(var x=[],M=0;M<y.length;M+=1){var E=y.charCodeAt(M);x[x.length]=E>>8&255,x[x.length]=255&E}return x},we.UTF16=function(y){return 2*y.length};var B={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};Pe.MACSTRING=function(y,x,M,E){var C=B[E];if(C!==void 0){for(var N="",z=0;z<M;z++){var J=y.getUint8(x+z);N+=J<=127?String.fromCharCode(J):C[127&J]}return N}};var V,te=typeof WeakMap=="function"&&new WeakMap;function $(y){return-128<=y&&y<=127}function X(y,x,M){for(var E=0,C=y.length;x<C&&E<64&&y[x]===0;)++x,++E;return M.push(128|E-1),x}function ye(y,x,M){for(var E=0,C=y.length,N=x;N<C&&E<64;){var z=y[N];if(!$(z)||z===0&&N+1<C&&y[N+1]===0)break;++N,++E}M.push(E-1);for(var J=x;J<N;++J)M.push(y[J]+256&255);return N}function ne(y,x,M){for(var E=0,C=y.length,N=x;N<C&&E<64;){var z=y[N];if(z===0||$(z)&&N+1<C&&$(y[N+1]))break;++N,++E}M.push(64|E-1);for(var J=x;J<N;++J){var re=y[J];M.push(re+65536>>8&255,re+256&255)}return N}ae.MACSTRING=function(y,x){var M=function(z){if(!V)for(var J in V={},B)V[J]=new String(J);var re=V[z];if(re!==void 0){if(te){var fe=te.get(re);if(fe!==void 0)return fe}var Te=B[z];if(Te!==void 0){for(var Re={},le=0;le<Te.length;le++)Re[Te.charCodeAt(le)]=le+128;return te&&te.set(re,Re),Re}}}(x);if(M!==void 0){for(var E=[],C=0;C<y.length;C++){var N=y.charCodeAt(C);if(128<=N&&(N=M[N])===void 0)return;E[C]=N}return E}},we.MACSTRING=function(y,x){var M=ae.MACSTRING(y,x);return M!==void 0?M.length:0},ae.VARDELTAS=function(y){for(var x=0,M=[];x<y.length;){var E=y[x];x=E===0?X(y,x,M):-128<=E&&E<=127?ye(y,x,M):ne(y,x,M)}return M},ae.INDEX=function(y){for(var x=1,M=[x],E=[],C=0;C<y.length;C+=1){var N=ae.OBJECT(y[C]);Array.prototype.push.apply(E,N),x+=N.length,M.push(x)}if(E.length===0)return[0,0];for(var z=[],J=1+Math.floor(Math.log(x)/Math.log(2))/8|0,re=[void 0,ae.BYTE,ae.USHORT,ae.UINT24,ae.ULONG][J],fe=0;fe<M.length;fe+=1){var Te=re(M[fe]);Array.prototype.push.apply(z,Te)}return Array.prototype.concat(ae.Card16(y.length),ae.OffSize(J),z,E)},we.INDEX=function(y){return ae.INDEX(y).length},ae.DICT=function(y){for(var x=[],M=Object.keys(y),E=M.length,C=0;C<E;C+=1){var N=parseInt(M[C],0),z=y[N];x=(x=x.concat(ae.OPERAND(z.value,z.type))).concat(ae.OPERATOR(N))}return x},we.DICT=function(y){return ae.DICT(y).length},ae.OPERATOR=function(y){return y<1200?[y]:[12,y-1200]},ae.OPERAND=function(y,x){var M=[];if(Array.isArray(x))for(var E=0;E<x.length;E+=1)de.argument(y.length===x.length,"Not enough arguments given for type"+x),M=M.concat(ae.OPERAND(y[E],x[E]));else if(x==="SID")M=M.concat(ae.NUMBER(y));else if(x==="offset")M=M.concat(ae.NUMBER32(y));else if(x==="number")M=M.concat(ae.NUMBER(y));else{if(x!=="real")throw new Error("Unknown operand type "+x);M=M.concat(ae.REAL(y))}return M},ae.OP=ae.BYTE,we.OP=we.BYTE;var pe=typeof WeakMap=="function"&&new WeakMap;function ve(y,x,M){for(var E=0;E<x.length;E+=1){var C=x[E];this[C.name]=C.value}if(this.tableName=y,this.fields=x,M)for(var N=Object.keys(M),z=0;z<N.length;z+=1){var J=N[z],re=M[J];this[J]!==void 0&&(this[J]=re)}}function he(y,x,M){M===void 0&&(M=x.length);var E=new Array(x.length+1);E[0]={name:y+"Count",type:"USHORT",value:M};for(var C=0;C<x.length;C++)E[C+1]={name:y+C,type:"USHORT",value:x[C]};return E}function Ae(y,x,M){var E=x.length,C=new Array(E+1);C[0]={name:y+"Count",type:"USHORT",value:E};for(var N=0;N<E;N++)C[N+1]={name:y+N,type:"TABLE",value:M(x[N],N)};return C}function Oe(y,x,M){var E=x.length,C=[];C[0]={name:y+"Count",type:"USHORT",value:E};for(var N=0;N<E;N++)C=C.concat(M(x[N],N));return C}function Ie(y){y.format===1?ve.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(he("glyph",y.glyphs))):de.assert(!1,"Can't create coverage table format 2 yet.")}function ie(y){ve.call(this,"scriptListTable",Oe("scriptRecord",y,function(x,M){var E=x.script,C=E.defaultLangSys;return de.assert(!!C,"Unable to write GSUB: script "+x.tag+" has no default language system."),[{name:"scriptTag"+M,type:"TAG",value:x.tag},{name:"script"+M,type:"TABLE",value:new ve("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ve("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:C.reqFeatureIndex}].concat(he("featureIndex",C.featureIndexes)))}].concat(Oe("langSys",E.langSysRecords,function(N,z){var J=N.langSys;return[{name:"langSysTag"+z,type:"TAG",value:N.tag},{name:"langSys"+z,type:"TABLE",value:new ve("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:J.reqFeatureIndex}].concat(he("featureIndex",J.featureIndexes)))}]})))}]}))}function ee(y){ve.call(this,"featureListTable",Oe("featureRecord",y,function(x,M){var E=x.feature;return[{name:"featureTag"+M,type:"TAG",value:x.tag},{name:"feature"+M,type:"TABLE",value:new ve("featureTable",[{name:"featureParams",type:"USHORT",value:E.featureParams}].concat(he("lookupListIndex",E.lookupListIndexes)))}]}))}function Le(y,x){ve.call(this,"lookupListTable",Ae("lookup",y,function(M){var E=x[M.lookupType];return de.assert(!!E,"Unable to write GSUB lookup type "+M.lookupType+" tables."),new ve("lookupTable",[{name:"lookupType",type:"USHORT",value:M.lookupType},{name:"lookupFlag",type:"USHORT",value:M.lookupFlag}].concat(Ae("subtable",M.subtables,E)))}))}ae.CHARSTRING=function(y){if(pe){var x=pe.get(y);if(x!==void 0)return x}for(var M=[],E=y.length,C=0;C<E;C+=1){var N=y[C];M=M.concat(ae[N.type](N.value))}return pe&&pe.set(y,M),M},we.CHARSTRING=function(y){return ae.CHARSTRING(y).length},ae.OBJECT=function(y){var x=ae[y.type];return de.argument(x!==void 0,"No encoding function for type "+y.type),x(y.value)},we.OBJECT=function(y){var x=we[y.type];return de.argument(x!==void 0,"No sizeOf function for type "+y.type),x(y.value)},ae.TABLE=function(y){for(var x=[],M=y.fields.length,E=[],C=[],N=0;N<M;N+=1){var z=y.fields[N],J=ae[z.type];de.argument(J!==void 0,"No encoding function for field type "+z.type+" ("+z.name+")");var re=y[z.name];re===void 0&&(re=z.value);var fe=J(re);z.type==="TABLE"?(C.push(x.length),x=x.concat([0,0]),E.push(fe)):x=x.concat(fe)}for(var Te=0;Te<E.length;Te+=1){var Re=C[Te],le=x.length;de.argument(le<65536,"Table "+y.tableName+" too big."),x[Re]=le>>8,x[Re+1]=255&le,x=x.concat(E[Te])}return x},we.TABLE=function(y){for(var x=0,M=y.fields.length,E=0;E<M;E+=1){var C=y.fields[E],N=we[C.type];de.argument(N!==void 0,"No sizeOf function for field type "+C.type+" ("+C.name+")");var z=y[C.name];z===void 0&&(z=C.value),x+=N(z),C.type==="TABLE"&&(x+=2)}return x},ae.RECORD=ae.TABLE,we.RECORD=we.TABLE,ae.LITERAL=function(y){return y},we.LITERAL=function(y){return y.length},ve.prototype.encode=function(){return ae.TABLE(this)},ve.prototype.sizeOf=function(){return we.TABLE(this)};var De={Table:ve,Record:ve,Coverage:(Ie.prototype=Object.create(ve.prototype)).constructor=Ie,ScriptList:(ie.prototype=Object.create(ve.prototype)).constructor=ie,FeatureList:(ee.prototype=Object.create(ve.prototype)).constructor=ee,LookupList:(Le.prototype=Object.create(ve.prototype)).constructor=Le,ushortList:he,tableList:Ae,recordList:Oe};function Ze(y,x){return y.getUint8(x)}function Ce(y,x){return y.getUint16(x,!1)}function je(y,x){return y.getUint32(x,!1)}function Ee(y,x){return y.getInt16(x,!1)+y.getUint16(x+2,!1)/65535}var qe={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function be(y,x){this.data=y,this.offset=x,this.relativeOffset=0}be.prototype.parseByte=function(){var y=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,y},be.prototype.parseChar=function(){var y=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,y},be.prototype.parseCard8=be.prototype.parseByte,be.prototype.parseCard16=be.prototype.parseUShort=function(){var y=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,y},be.prototype.parseSID=be.prototype.parseUShort,be.prototype.parseOffset16=be.prototype.parseUShort,be.prototype.parseShort=function(){var y=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,y},be.prototype.parseF2Dot14=function(){var y=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,y},be.prototype.parseOffset32=be.prototype.parseULong=function(){var y=je(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,y},be.prototype.parseFixed=function(){var y=Ee(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,y},be.prototype.parseString=function(y){var x=this.data,M=this.offset+this.relativeOffset,E="";this.relativeOffset+=y;for(var C=0;C<y;C++)E+=String.fromCharCode(x.getUint8(M+C));return E},be.prototype.parseTag=function(){return this.parseString(4)},be.prototype.parseLongDateTime=function(){var y=je(this.data,this.offset+this.relativeOffset+4);return y-=2082844800,this.relativeOffset+=8,y},be.prototype.parseVersion=function(y){var x=Ce(this.data,this.offset+this.relativeOffset),M=Ce(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,y===void 0&&(y=4096),x+M/y/10},be.prototype.skip=function(y,x){x===void 0&&(x=1),this.relativeOffset+=qe[y]*x},be.prototype.parseULongList=function(y){y===void 0&&(y=this.parseULong());for(var x=new Array(y),M=this.data,E=this.offset+this.relativeOffset,C=0;C<y;C++)x[C]=M.getUint32(E),E+=4;return this.relativeOffset+=4*y,x},be.prototype.parseOffset16List=be.prototype.parseUShortList=function(y){y===void 0&&(y=this.parseUShort());for(var x=new Array(y),M=this.data,E=this.offset+this.relativeOffset,C=0;C<y;C++)x[C]=M.getUint16(E),E+=2;return this.relativeOffset+=2*y,x},be.prototype.parseShortList=function(y){for(var x=new Array(y),M=this.data,E=this.offset+this.relativeOffset,C=0;C<y;C++)x[C]=M.getInt16(E),E+=2;return this.relativeOffset+=2*y,x},be.prototype.parseByteList=function(y){for(var x=new Array(y),M=this.data,E=this.offset+this.relativeOffset,C=0;C<y;C++)x[C]=M.getUint8(E++);return this.relativeOffset+=y,x},be.prototype.parseList=function(y,x){x||(x=y,y=this.parseUShort());for(var M=new Array(y),E=0;E<y;E++)M[E]=x.call(this);return M},be.prototype.parseList32=function(y,x){x||(x=y,y=this.parseULong());for(var M=new Array(y),E=0;E<y;E++)M[E]=x.call(this);return M},be.prototype.parseRecordList=function(y,x){x||(x=y,y=this.parseUShort());for(var M=new Array(y),E=Object.keys(x),C=0;C<y;C++){for(var N={},z=0;z<E.length;z++){var J=E[z],re=x[J];N[J]=re.call(this)}M[C]=N}return M},be.prototype.parseRecordList32=function(y,x){x||(x=y,y=this.parseULong());for(var M=new Array(y),E=Object.keys(x),C=0;C<y;C++){for(var N={},z=0;z<E.length;z++){var J=E[z],re=x[J];N[J]=re.call(this)}M[C]=N}return M},be.prototype.parseStruct=function(y){if(typeof y=="function")return y.call(this);for(var x=Object.keys(y),M={},E=0;E<x.length;E++){var C=x[E],N=y[C];M[C]=N.call(this)}return M},be.prototype.parseValueRecord=function(y){if(y===void 0&&(y=this.parseUShort()),y!==0){var x={};return 1&y&&(x.xPlacement=this.parseShort()),2&y&&(x.yPlacement=this.parseShort()),4&y&&(x.xAdvance=this.parseShort()),8&y&&(x.yAdvance=this.parseShort()),16&y&&(x.xPlaDevice=void 0,this.parseShort()),32&y&&(x.yPlaDevice=void 0,this.parseShort()),64&y&&(x.xAdvDevice=void 0,this.parseShort()),128&y&&(x.yAdvDevice=void 0,this.parseShort()),x}},be.prototype.parseValueRecordList=function(){for(var y=this.parseUShort(),x=this.parseUShort(),M=new Array(x),E=0;E<x;E++)M[E]=this.parseValueRecord(y);return M},be.prototype.parsePointer=function(y){var x=this.parseOffset16();if(0<x)return new be(this.data,this.offset+x).parseStruct(y)},be.prototype.parsePointer32=function(y){var x=this.parseOffset32();if(0<x)return new be(this.data,this.offset+x).parseStruct(y)},be.prototype.parseListOfLists=function(y){for(var x=this.parseOffset16List(),M=x.length,E=this.relativeOffset,C=new Array(M),N=0;N<M;N++){var z=x[N];if(z!==0)if(this.relativeOffset=z,y){for(var J=this.parseOffset16List(),re=new Array(J.length),fe=0;fe<J.length;fe++)this.relativeOffset=z+J[fe],re[fe]=y.call(this);C[N]=re}else C[N]=this.parseUShortList();else C[N]=void 0}return this.relativeOffset=E,C},be.prototype.parseCoverage=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort(),M=this.parseUShort();if(x===1)return{format:1,glyphs:this.parseUShortList(M)};if(x!==2)throw new Error("0x"+y.toString(16)+": Coverage format must be 1 or 2.");for(var E=new Array(M),C=0;C<M;C++)E[C]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:E}},be.prototype.parseClassDef=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();if(x===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(x===2)return{format:2,ranges:this.parseRecordList({start:be.uShort,end:be.uShort,classId:be.uShort})};throw new Error("0x"+y.toString(16)+": ClassDef format must be 1 or 2.")},be.list=function(y,x){return function(){return this.parseList(y,x)}},be.list32=function(y,x){return function(){return this.parseList32(y,x)}},be.recordList=function(y,x){return function(){return this.parseRecordList(y,x)}},be.recordList32=function(y,x){return function(){return this.parseRecordList32(y,x)}},be.pointer=function(y){return function(){return this.parsePointer(y)}},be.pointer32=function(y){return function(){return this.parsePointer32(y)}},be.tag=be.prototype.parseTag,be.byte=be.prototype.parseByte,be.uShort=be.offset16=be.prototype.parseUShort,be.uShortList=be.prototype.parseUShortList,be.uLong=be.offset32=be.prototype.parseULong,be.uLongList=be.prototype.parseULongList,be.struct=be.prototype.parseStruct,be.coverage=be.prototype.parseCoverage,be.classDef=be.prototype.parseClassDef;var Xe={reserved:be.uShort,reqFeatureIndex:be.uShort,featureIndexes:be.uShortList};be.prototype.parseScriptList=function(){return this.parsePointer(be.recordList({tag:be.tag,script:be.pointer({defaultLangSys:be.pointer(Xe),langSysRecords:be.recordList({tag:be.tag,langSys:be.pointer(Xe)})})}))||[]},be.prototype.parseFeatureList=function(){return this.parsePointer(be.recordList({tag:be.tag,feature:be.pointer({featureParams:be.offset16,lookupListIndexes:be.uShortList})}))||[]},be.prototype.parseLookupList=function(y){return this.parsePointer(be.list(be.pointer(function(){var x=this.parseUShort();de.argument(1<=x&&x<=9,"GPOS/GSUB lookup type "+x+" unknown.");var M=this.parseUShort(),E=16&M;return{lookupType:x,lookupFlag:M,subtables:this.parseList(be.pointer(y[x])),markFilteringSet:E?this.parseUShort():void 0}})))||[]},be.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var y=this.parseUShort(),x=this.parseUShort();return de.argument(y===1&&x<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:be.offset32,featureTableSubstitutionOffset:be.offset32})})||[]};var O={getByte:Ze,getCard8:Ze,getUShort:Ce,getCard16:Ce,getShort:function(y,x){return y.getInt16(x,!1)},getULong:je,getFixed:Ee,getTag:function(y,x){for(var M="",E=x;E<x+4;E+=1)M+=String.fromCharCode(y.getInt8(E));return M},getOffset:function(y,x,M){for(var E=0,C=0;C<M;C+=1)E<<=8,E+=y.getUint8(x+C);return E},getBytes:function(y,x,M){for(var E=[],C=x;C<M;C+=1)E.push(y.getUint8(C));return E},bytesToString:function(y){for(var x="",M=0;M<y.length;M+=1)x+=String.fromCharCode(y[M]);return x},Parser:be},H={parse:function(y,x){var M={};M.version=O.getUShort(y,x),de.argument(M.version===0,"cmap table version should be 0."),M.numTables=O.getUShort(y,x+2);for(var E=-1,C=M.numTables-1;0<=C;--C){var N=O.getUShort(y,x+4+8*C),z=O.getUShort(y,x+4+8*C+2);if(N===3&&(z===0||z===1||z===10)||N===0&&(z===0||z===1||z===2||z===3||z===4)){E=O.getULong(y,x+4+8*C+4);break}}if(E===-1)throw new Error("No valid cmap sub-tables found.");var J=new O.Parser(y,x+E);if(M.format=J.parseUShort(),M.format===12)(function(re,fe){var Te;fe.parseUShort(),re.length=fe.parseULong(),re.language=fe.parseULong(),re.groupCount=Te=fe.parseULong(),re.glyphIndexMap={};for(var Re=0;Re<Te;Re+=1)for(var le=fe.parseULong(),et=fe.parseULong(),Qe=fe.parseULong(),We=le;We<=et;We+=1)re.glyphIndexMap[We]=Qe,Qe++})(M,J);else{if(M.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+M.format+").");(function(re,fe,Te,Re,le){var et;re.length=fe.parseUShort(),re.language=fe.parseUShort(),re.segCount=et=fe.parseUShort()>>1,fe.skip("uShort",3),re.glyphIndexMap={};for(var Qe=new O.Parser(Te,Re+le+14),We=new O.Parser(Te,Re+le+16+2*et),Ne=new O.Parser(Te,Re+le+16+4*et),Ge=new O.Parser(Te,Re+le+16+6*et),ot=Re+le+16+8*et,st=0;st<et-1;st+=1)for(var Et=void 0,ft=Qe.parseUShort(),mt=We.parseUShort(),Kt=Ne.parseShort(),Rt=Ge.parseUShort(),At=mt;At<=ft;At+=1)Rt!==0?(ot=Ge.offset+Ge.relativeOffset-2,ot+=Rt,ot+=2*(At-mt),(Et=O.getUShort(Te,ot))!==0&&(Et=Et+Kt&65535)):Et=At+Kt&65535,re.glyphIndexMap[At]=Et})(M,J,y,x,E)}return M},make:function(y){var x,M=!0;for(x=y.length-1;0<x;--x)if(65535<y.get(x).unicode){console.log("Adding CMAP format 12 (needed!)"),M=!1;break}var E=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:M?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:M?12:20}];M||(E=E.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),E=E.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var C,N,z,J=new De.Table("cmap",E);for(J.segments=[],x=0;x<y.length;x+=1){for(var re=y.get(x),fe=0;fe<re.unicodes.length;fe+=1)C=J,N=re.unicodes[fe],z=x,C.segments.push({end:N,start:N,delta:-(N-z),offset:0,glyphIndex:z});J.segments=J.segments.sort(function(Et,ft){return Et.start-ft.start})}J.segments.push({end:65535,start:65535,delta:1,offset:0});var Te=J.segments.length,Re=0,le=[],et=[],Qe=[],We=[],Ne=[],Ge=[];for(x=0;x<Te;x+=1){var ot=J.segments[x];ot.end<=65535&&ot.start<=65535?(le=le.concat({name:"end_"+x,type:"USHORT",value:ot.end}),et=et.concat({name:"start_"+x,type:"USHORT",value:ot.start}),Qe=Qe.concat({name:"idDelta_"+x,type:"SHORT",value:ot.delta}),We=We.concat({name:"idRangeOffset_"+x,type:"USHORT",value:ot.offset}),ot.glyphId!==void 0&&(Ne=Ne.concat({name:"glyph_"+x,type:"USHORT",value:ot.glyphId}))):Re+=1,M||ot.glyphIndex===void 0||(Ge=(Ge=(Ge=Ge.concat({name:"cmap12Start_"+x,type:"ULONG",value:ot.start})).concat({name:"cmap12End_"+x,type:"ULONG",value:ot.end})).concat({name:"cmap12Glyph_"+x,type:"ULONG",value:ot.glyphIndex}))}if(J.segCountX2=2*(Te-Re),J.searchRange=2*Math.pow(2,Math.floor(Math.log(Te-Re)/Math.log(2))),J.entrySelector=Math.log(J.searchRange/2)/Math.log(2),J.rangeShift=J.segCountX2-J.searchRange,J.fields=J.fields.concat(le),J.fields.push({name:"reservedPad",type:"USHORT",value:0}),J.fields=J.fields.concat(et),J.fields=J.fields.concat(Qe),J.fields=J.fields.concat(We),J.fields=J.fields.concat(Ne),J.cmap4Length=14+2*le.length+2+2*et.length+2*Qe.length+2*We.length+2*Ne.length,!M){var st=16+4*Ge.length;J.cmap12Offset=20+J.cmap4Length,J.fields=J.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:st},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Ge.length/3}]),J.fields=J.fields.concat(Ge)}return J}},G=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Z=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],oe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],xe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Se(y){this.font=y}function ke(y){this.cmap=y}function _e(y,x){this.encoding=y,this.charset=x}function Ye(y){switch(y.version){case 1:this.names=xe.slice();break;case 2:this.names=new Array(y.numberOfGlyphs);for(var x=0;x<y.numberOfGlyphs;x++)y.glyphNameIndex[x]<xe.length?this.names[x]=xe[y.glyphNameIndex[x]]:this.names[x]=y.names[y.glyphNameIndex[x]-xe.length];break;case 2.5:this.names=new Array(y.numberOfGlyphs);for(var M=0;M<y.numberOfGlyphs;M++)this.names[M]=xe[M+y.glyphNameIndex[M]];break;case 3:default:this.names=[]}}Se.prototype.charToGlyphIndex=function(y){var x=y.codePointAt(0),M=this.font.glyphs;if(M){for(var E=0;E<M.length;E+=1)for(var C=M.get(E),N=0;N<C.unicodes.length;N+=1)if(C.unicodes[N]===x)return E}return null},ke.prototype.charToGlyphIndex=function(y){return this.cmap.glyphIndexMap[y.codePointAt(0)]||0},_e.prototype.charToGlyphIndex=function(y){var x=y.codePointAt(0),M=this.encoding[x];return this.charset.indexOf(M)},Ye.prototype.nameToGlyphIndex=function(y){return this.names.indexOf(y)},Ye.prototype.glyphIndexToName=function(y){return this.names[y]};var it={line:function(y,x,M,E,C){y.beginPath(),y.moveTo(x,M),y.lineTo(E,C),y.stroke()}};function lt(y){this.bindConstructorValues(y)}function vt(y,x,M){Object.defineProperty(y,x,{get:function(){return y.path,y[M]},set:function(E){y[M]=E},enumerable:!0,configurable:!0})}function dt(y,x){if(this.font=y,this.glyphs={},Array.isArray(x))for(var M=0;M<x.length;M++)this.glyphs[M]=x[M];this.length=x&&x.length||0}lt.prototype.bindConstructorValues=function(y){var x,M;this.index=y.index||0,this.name=y.name||null,this.unicode=y.unicode||void 0,this.unicodes=y.unicodes||y.unicode!==void 0?[y.unicode]:[],y.xMin&&(this.xMin=y.xMin),y.yMin&&(this.yMin=y.yMin),y.xMax&&(this.xMax=y.xMax),y.yMax&&(this.yMax=y.yMax),y.advanceWidth&&(this.advanceWidth=y.advanceWidth),Object.defineProperty(this,"path",(x=y.path,M=x||new se,{configurable:!0,get:function(){return typeof M=="function"&&(M=M()),M},set:function(E){M=E}}))},lt.prototype.addUnicode=function(y){this.unicodes.length===0&&(this.unicode=y),this.unicodes.push(y)},lt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},lt.prototype.getPath=function(y,x,M,E,C){var N,z;y=y!==void 0?y:0,x=x!==void 0?x:0,M=M!==void 0?M:72;var J=(E=E||{}).xScale,re=E.yScale;if(E.hinting&&C&&C.hinting&&(z=this.path&&C.hinting.exec(this,M)),z)N=C.hinting.getCommands(z),y=Math.round(y),x=Math.round(x),J=re=1;else{N=this.path.commands;var fe=1/this.path.unitsPerEm*M;J===void 0&&(J=fe),re===void 0&&(re=fe)}for(var Te=new se,Re=0;Re<N.length;Re+=1){var le=N[Re];le.type==="M"?Te.moveTo(y+le.x*J,x+-le.y*re):le.type==="L"?Te.lineTo(y+le.x*J,x+-le.y*re):le.type==="Q"?Te.quadraticCurveTo(y+le.x1*J,x+-le.y1*re,y+le.x*J,x+-le.y*re):le.type==="C"?Te.curveTo(y+le.x1*J,x+-le.y1*re,y+le.x2*J,x+-le.y2*re,y+le.x*J,x+-le.y*re):le.type==="Z"&&Te.closePath()}return Te},lt.prototype.getContours=function(){if(this.points===void 0)return[];for(var y=[],x=[],M=0;M<this.points.length;M+=1){var E=this.points[M];x.push(E),E.lastPointOfContour&&(y.push(x),x=[])}return de.argument(x.length===0,"There are still points left in the current contour."),y},lt.prototype.getMetrics=function(){for(var y=this.path.commands,x=[],M=[],E=0;E<y.length;E+=1){var C=y[E];C.type!=="Z"&&(x.push(C.x),M.push(C.y)),C.type!=="Q"&&C.type!=="C"||(x.push(C.x1),M.push(C.y1)),C.type==="C"&&(x.push(C.x2),M.push(C.y2))}var N={xMin:Math.min.apply(null,x),yMin:Math.min.apply(null,M),xMax:Math.max.apply(null,x),yMax:Math.max.apply(null,M),leftSideBearing:this.leftSideBearing};return isFinite(N.xMin)||(N.xMin=0),isFinite(N.xMax)||(N.xMax=this.advanceWidth),isFinite(N.yMin)||(N.yMin=0),isFinite(N.yMax)||(N.yMax=0),N.rightSideBearing=this.advanceWidth-N.leftSideBearing-(N.xMax-N.xMin),N},lt.prototype.draw=function(y,x,M,E,C){this.getPath(x,M,E,C).draw(y)},lt.prototype.drawPoints=function(y,x,M,E){function C(Re,le,et,Qe){var We=2*Math.PI;y.beginPath();for(var Ne=0;Ne<Re.length;Ne+=1)y.moveTo(le+Re[Ne].x*Qe,et+Re[Ne].y*Qe),y.arc(le+Re[Ne].x*Qe,et+Re[Ne].y*Qe,2,0,We,!1);y.closePath(),y.fill()}x=x!==void 0?x:0,M=M!==void 0?M:0,E=E!==void 0?E:24;for(var N=1/this.path.unitsPerEm*E,z=[],J=[],re=this.path,fe=0;fe<re.commands.length;fe+=1){var Te=re.commands[fe];Te.x!==void 0&&z.push({x:Te.x,y:-Te.y}),Te.x1!==void 0&&J.push({x:Te.x1,y:-Te.y1}),Te.x2!==void 0&&J.push({x:Te.x2,y:-Te.y2})}y.fillStyle="blue",C(z,x,M,N),y.fillStyle="red",C(J,x,M,N)},lt.prototype.drawMetrics=function(y,x,M,E){var C;x=x!==void 0?x:0,M=M!==void 0?M:0,E=E!==void 0?E:24,C=1/this.path.unitsPerEm*E,y.lineWidth=1,y.strokeStyle="black",it.line(y,x,-1e4,x,1e4),it.line(y,-1e4,M,1e4,M);var N=this.xMin||0,z=this.yMin||0,J=this.xMax||0,re=this.yMax||0,fe=this.advanceWidth||0;y.strokeStyle="blue",it.line(y,x+N*C,-1e4,x+N*C,1e4),it.line(y,x+J*C,-1e4,x+J*C,1e4),it.line(y,-1e4,M+-z*C,1e4,M+-z*C),it.line(y,-1e4,M+-re*C,1e4,M+-re*C),y.strokeStyle="green",it.line(y,x+fe*C,-1e4,x+fe*C,1e4)},dt.prototype.get=function(y){return typeof this.glyphs[y]=="function"&&(this.glyphs[y]=this.glyphs[y]()),this.glyphs[y]},dt.prototype.push=function(y,x){this.glyphs[y]=x,this.length++};var gt={GlyphSet:dt,glyphLoader:function(y,x){return new lt({index:x,font:y})},ttfGlyphLoader:function(y,x,M,E,C,N){return function(){var z=new lt({index:x,font:y});return z.path=function(){M(z,E,C);var J=N(y.glyphs,z);return J.unitsPerEm=y.unitsPerEm,J},vt(z,"xMin","_xMin"),vt(z,"xMax","_xMax"),vt(z,"yMin","_yMin"),vt(z,"yMax","_yMax"),z}},cffGlyphLoader:function(y,x,M,E){return function(){var C=new lt({index:x,font:y});return C.path=function(){var N=M(y,C,E);return N.unitsPerEm=y.unitsPerEm,N},C}}};function Tt(y,x){if(y===x)return!0;if(Array.isArray(y)&&Array.isArray(x)){if(y.length!==x.length)return!1;for(var M=0;M<y.length;M+=1)if(!Tt(y[M],x[M]))return!1;return!0}return!1}function Tr(y){return y.length<1240?107:y.length<33900?1131:32768}function dr(y,x,M){var E,C,N=[],z=[],J=O.getCard16(y,x);if(J!==0){var re=O.getByte(y,x+2);E=x+(J+1)*re+2;for(var fe=x+3,Te=0;Te<J+1;Te+=1)N.push(O.getOffset(y,fe,re)),fe+=re;C=E+N[J]}else C=x+2;for(var Re=0;Re<N.length-1;Re+=1){var le=O.getBytes(y,E+N[Re],E+N[Re+1]);M&&(le=M(le)),z.push(le)}return{objects:z,startOffset:x,endOffset:C}}function rn(y,x){if(x===28)return y.parseByte()<<8|y.parseByte();if(x===29)return y.parseByte()<<24|y.parseByte()<<16|y.parseByte()<<8|y.parseByte();if(x===30)return function(M){for(var E="",C=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var N=M.parseByte(),z=N>>4,J=15&N;if(z==15||(E+=C[z],J==15))break;E+=C[J]}return parseFloat(E)}(y);if(32<=x&&x<=246)return x-139;if(247<=x&&x<=250)return 256*(x-247)+y.parseByte()+108;if(251<=x&&x<=254)return 256*-(x-251)-y.parseByte()-108;throw new Error("Invalid b0 "+x)}function kr(y,x,M){x=x!==void 0?x:0;var E=new O.Parser(y,x),C=[],N=[];for(M=M!==void 0?M:y.length;E.relativeOffset<M;){var z=E.parseByte();z<=21?(z===12&&(z=1200+E.parseByte()),C.push([z,N]),N=[]):N.push(rn(E,z))}return function(J){for(var re={},fe=0;fe<J.length;fe+=1){var Te=J[fe][0],Re=J[fe][1],le=void 0;if(le=Re.length===1?Re[0]:Re,re.hasOwnProperty(Te)&&!isNaN(re[Te]))throw new Error("Object "+re+" already has key "+Te);re[Te]=le}return re}(C)}function me(y,x){return x=x<=390?G[x]:y[x-391]}function Ue(y,x,M){for(var E,C={},N=0;N<x.length;N+=1){var z=x[N];if(Array.isArray(z.type)){var J=[];J.length=z.type.length;for(var re=0;re<z.type.length;re++)(E=y[z.op]!==void 0?y[z.op][re]:void 0)===void 0&&(E=z.value!==void 0&&z.value[re]!==void 0?z.value[re]:null),z.type[re]==="SID"&&(E=me(M,E)),J[re]=E;C[z.name]=J}else(E=y[z.op])===void 0&&(E=z.value!==void 0?z.value:null),z.type==="SID"&&(E=me(M,E)),C[z.name]=E}return C}var ze=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Be=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Je(y,x,M,E){return Ue(kr(y,x,M),Be,E)}function yt(y,x,M,E){for(var C,N,z=[],J=0;J<M.length;J+=1){var re=new DataView(new Uint8Array(M[J]).buffer),fe=(N=E,Ue(kr(C=re,0,C.byteLength),ze,N));fe._subrs=[],fe._subrsBias=0;var Te=fe.private[0],Re=fe.private[1];if(Te!==0&&Re!==0){var le=Je(y,Re+x,Te,E);if(fe._defaultWidthX=le.defaultWidthX,fe._nominalWidthX=le.nominalWidthX,le.subrs!==0){var et=dr(y,Re+le.subrs+x);fe._subrs=et.objects,fe._subrsBias=Tr(fe._subrs)}fe._privateDict=le}z.push(fe)}return z}function bt(y,x,M){var E,C,N,z,J,re,fe,Te,Re=new se,le=[],et=0,Qe=!1,We=!1,Ne=0,Ge=0;if(y.isCIDFont){var ot=y.tables.cff.topDict._fdSelect[x.index],st=y.tables.cff.topDict._fdArray[ot];J=st._subrs,re=st._subrsBias,fe=st._defaultWidthX,Te=st._nominalWidthX}else J=y.tables.cff.topDict._subrs,re=y.tables.cff.topDict._subrsBias,fe=y.tables.cff.topDict._defaultWidthX,Te=y.tables.cff.topDict._nominalWidthX;var Et=fe;function ft(Kt,Rt){We&&Re.closePath(),Re.moveTo(Kt,Rt),We=!0}function mt(){le.length%2==0||Qe||(Et=le.shift()+Te),et+=le.length>>1,le.length=0,Qe=!0}return function Kt(Rt){for(var At,Pt,Nt,jt,Xt,Ft,Ot,Yt,Gt,$t,It,rr,Wt=0;Wt<Rt.length;){var qt=Rt[Wt];switch(Wt+=1,qt){case 1:case 3:mt();break;case 4:1<le.length&&!Qe&&(Et=le.shift()+Te,Qe=!0),Ge+=le.pop(),ft(Ne,Ge);break;case 5:for(;0<le.length;)Ne+=le.shift(),Ge+=le.shift(),Re.lineTo(Ne,Ge);break;case 6:for(;0<le.length&&(Ne+=le.shift(),Re.lineTo(Ne,Ge),le.length!==0);)Ge+=le.shift(),Re.lineTo(Ne,Ge);break;case 7:for(;0<le.length&&(Ge+=le.shift(),Re.lineTo(Ne,Ge),le.length!==0);)Ne+=le.shift(),Re.lineTo(Ne,Ge);break;case 8:for(;0<le.length;)E=Ne+le.shift(),C=Ge+le.shift(),N=E+le.shift(),z=C+le.shift(),Ne=N+le.shift(),Ge=z+le.shift(),Re.curveTo(E,C,N,z,Ne,Ge);break;case 10:Xt=le.pop()+re,(Ft=J[Xt])&&Kt(Ft);break;case 11:return;case 12:switch(qt=Rt[Wt],Wt+=1,qt){case 35:E=Ne+le.shift(),C=Ge+le.shift(),N=E+le.shift(),z=C+le.shift(),Ot=N+le.shift(),Yt=z+le.shift(),Gt=Ot+le.shift(),$t=Yt+le.shift(),It=Gt+le.shift(),rr=$t+le.shift(),Ne=It+le.shift(),Ge=rr+le.shift(),le.shift(),Re.curveTo(E,C,N,z,Ot,Yt),Re.curveTo(Gt,$t,It,rr,Ne,Ge);break;case 34:E=Ne+le.shift(),C=Ge,N=E+le.shift(),z=C+le.shift(),Ot=N+le.shift(),Yt=z,Gt=Ot+le.shift(),$t=z,It=Gt+le.shift(),rr=Ge,Ne=It+le.shift(),Re.curveTo(E,C,N,z,Ot,Yt),Re.curveTo(Gt,$t,It,rr,Ne,Ge);break;case 36:E=Ne+le.shift(),C=Ge+le.shift(),N=E+le.shift(),z=C+le.shift(),Ot=N+le.shift(),Yt=z,Gt=Ot+le.shift(),$t=z,It=Gt+le.shift(),rr=$t+le.shift(),Ne=It+le.shift(),Re.curveTo(E,C,N,z,Ot,Yt),Re.curveTo(Gt,$t,It,rr,Ne,Ge);break;case 37:E=Ne+le.shift(),C=Ge+le.shift(),N=E+le.shift(),z=C+le.shift(),Ot=N+le.shift(),Yt=z+le.shift(),Gt=Ot+le.shift(),$t=Yt+le.shift(),It=Gt+le.shift(),rr=$t+le.shift(),Math.abs(It-Ne)>Math.abs(rr-Ge)?Ne=It+le.shift():Ge=rr+le.shift(),Re.curveTo(E,C,N,z,Ot,Yt),Re.curveTo(Gt,$t,It,rr,Ne,Ge);break;default:console.log("Glyph "+x.index+": unknown operator 1200"+qt),le.length=0}break;case 14:0<le.length&&!Qe&&(Et=le.shift()+Te,Qe=!0),We&&(Re.closePath(),We=!1);break;case 18:mt();break;case 19:case 20:mt(),Wt+=et+7>>3;break;case 21:2<le.length&&!Qe&&(Et=le.shift()+Te,Qe=!0),Ge+=le.pop(),ft(Ne+=le.pop(),Ge);break;case 22:1<le.length&&!Qe&&(Et=le.shift()+Te,Qe=!0),ft(Ne+=le.pop(),Ge);break;case 23:mt();break;case 24:for(;2<le.length;)E=Ne+le.shift(),C=Ge+le.shift(),N=E+le.shift(),z=C+le.shift(),Ne=N+le.shift(),Ge=z+le.shift(),Re.curveTo(E,C,N,z,Ne,Ge);Ne+=le.shift(),Ge+=le.shift(),Re.lineTo(Ne,Ge);break;case 25:for(;6<le.length;)Ne+=le.shift(),Ge+=le.shift(),Re.lineTo(Ne,Ge);E=Ne+le.shift(),C=Ge+le.shift(),N=E+le.shift(),z=C+le.shift(),Ne=N+le.shift(),Ge=z+le.shift(),Re.curveTo(E,C,N,z,Ne,Ge);break;case 26:for(le.length%2&&(Ne+=le.shift());0<le.length;)E=Ne,C=Ge+le.shift(),N=E+le.shift(),z=C+le.shift(),Ne=N,Ge=z+le.shift(),Re.curveTo(E,C,N,z,Ne,Ge);break;case 27:for(le.length%2&&(Ge+=le.shift());0<le.length;)E=Ne+le.shift(),C=Ge,N=E+le.shift(),z=C+le.shift(),Ne=N+le.shift(),Ge=z,Re.curveTo(E,C,N,z,Ne,Ge);break;case 28:At=Rt[Wt],Pt=Rt[Wt+1],le.push((At<<24|Pt<<16)>>16),Wt+=2;break;case 29:Xt=le.pop()+y.gsubrsBias,(Ft=y.gsubrs[Xt])&&Kt(Ft);break;case 30:for(;0<le.length&&(E=Ne,C=Ge+le.shift(),N=E+le.shift(),z=C+le.shift(),Ne=N+le.shift(),Ge=z+(le.length===1?le.shift():0),Re.curveTo(E,C,N,z,Ne,Ge),le.length!==0);)E=Ne+le.shift(),C=Ge,N=E+le.shift(),z=C+le.shift(),Ge=z+le.shift(),Ne=N+(le.length===1?le.shift():0),Re.curveTo(E,C,N,z,Ne,Ge);break;case 31:for(;0<le.length&&(E=Ne+le.shift(),C=Ge,N=E+le.shift(),z=C+le.shift(),Ge=z+le.shift(),Ne=N+(le.length===1?le.shift():0),Re.curveTo(E,C,N,z,Ne,Ge),le.length!==0);)E=Ne,C=Ge+le.shift(),N=E+le.shift(),z=C+le.shift(),Ne=N+le.shift(),Ge=z+(le.length===1?le.shift():0),Re.curveTo(E,C,N,z,Ne,Ge);break;default:qt<32?console.log("Glyph "+x.index+": unknown operator "+qt):qt<247?le.push(qt-139):qt<251?(At=Rt[Wt],Wt+=1,le.push(256*(qt-247)+At+108)):qt<255?(At=Rt[Wt],Wt+=1,le.push(256*-(qt-251)-At-108)):(At=Rt[Wt],Pt=Rt[Wt+1],Nt=Rt[Wt+2],jt=Rt[Wt+3],Wt+=4,le.push((At<<24|Pt<<16|Nt<<8|jt)/65536))}}}(M),x.advanceWidth=Et,Re}function xt(y,x){var M,E=G.indexOf(y);return 0<=E&&(M=E),0<=(E=x.indexOf(y))?M=E+G.length:(M=G.length+x.length,x.push(y)),M}function _t(y,x,M){for(var E={},C=0;C<y.length;C+=1){var N=y[C],z=x[N.name];z===void 0||Tt(z,N.value)||(N.type==="SID"&&(z=xt(z,M)),E[N.op]={name:N.name,type:N.type,value:z})}return E}function ce(y,x){var M=new De.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return M.dict=_t(ze,y,x),M}function Fe(y){var x=new De.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return x.topDicts=[{name:"topDict_0",type:"TABLE",value:y}],x}function Ke(y){var x=[],M=y.path;x.push({name:"width",type:"NUMBER",value:y.advanceWidth});for(var E=0,C=0,N=0;N<M.commands.length;N+=1){var z=void 0,J=void 0,re=M.commands[N];if(re.type==="Q"&&(re={type:"C",x:re.x,y:re.y,x1:1/3*E+2/3*re.x1,y1:1/3*C+2/3*re.y1,x2:1/3*re.x+2/3*re.x1,y2:1/3*re.y+2/3*re.y1}),re.type==="M")z=Math.round(re.x-E),J=Math.round(re.y-C),x.push({name:"dx",type:"NUMBER",value:z}),x.push({name:"dy",type:"NUMBER",value:J}),x.push({name:"rmoveto",type:"OP",value:21}),E=Math.round(re.x),C=Math.round(re.y);else if(re.type==="L")z=Math.round(re.x-E),J=Math.round(re.y-C),x.push({name:"dx",type:"NUMBER",value:z}),x.push({name:"dy",type:"NUMBER",value:J}),x.push({name:"rlineto",type:"OP",value:5}),E=Math.round(re.x),C=Math.round(re.y);else if(re.type==="C"){var fe=Math.round(re.x1-E),Te=Math.round(re.y1-C),Re=Math.round(re.x2-re.x1),le=Math.round(re.y2-re.y1);z=Math.round(re.x-re.x2),J=Math.round(re.y-re.y2),x.push({name:"dx1",type:"NUMBER",value:fe}),x.push({name:"dy1",type:"NUMBER",value:Te}),x.push({name:"dx2",type:"NUMBER",value:Re}),x.push({name:"dy2",type:"NUMBER",value:le}),x.push({name:"dx",type:"NUMBER",value:z}),x.push({name:"dy",type:"NUMBER",value:J}),x.push({name:"rrcurveto",type:"OP",value:8}),E=Math.round(re.x),C=Math.round(re.y)}}return x.push({name:"endchar",type:"OP",value:14}),x}var He={parse:function(y,x,M){M.tables.cff={};var E,C,N,z=dr(y,(E=y,C=x,(N={}).formatMajor=O.getCard8(E,C),N.formatMinor=O.getCard8(E,C+1),N.size=O.getCard8(E,C+2),N.offsetSize=O.getCard8(E,C+3),N.startOffset=C,N.endOffset=C+4,N).endOffset,O.bytesToString),J=dr(y,z.endOffset),re=dr(y,J.endOffset,O.bytesToString),fe=dr(y,re.endOffset);M.gsubrs=fe.objects,M.gsubrsBias=Tr(M.gsubrs);var Te=yt(y,x,J.objects,re.objects);if(Te.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+Te.length);var Re=Te[0];if((M.tables.cff.topDict=Re)._privateDict&&(M.defaultWidthX=Re._privateDict.defaultWidthX,M.nominalWidthX=Re._privateDict.nominalWidthX),Re.ros[0]!==void 0&&Re.ros[1]!==void 0&&(M.isCIDFont=!0),M.isCIDFont){var le=Re.fdArray,et=Re.fdSelect;if(le===0||et===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var Qe=yt(y,x,dr(y,le+=x).objects,re.objects);Re._fdArray=Qe,et+=x,Re._fdSelect=function(mt,Kt,Rt,At){var Pt,Nt=[],jt=new O.Parser(mt,Kt),Xt=jt.parseCard8();if(Xt===0)for(var Ft=0;Ft<Rt;Ft++){if(At<=(Pt=jt.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Pt+" (FD count "+At+")");Nt.push(Pt)}else{if(Xt!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Xt);var Ot,Yt=jt.parseCard16(),Gt=jt.parseCard16();if(Gt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Gt);for(var $t=0;$t<Yt;$t++){if(Pt=jt.parseCard8(),Ot=jt.parseCard16(),At<=Pt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Pt+" (FD count "+At+")");if(Rt<Ot)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Ot);for(;Gt<Ot;Gt++)Nt.push(Pt);Gt=Ot}if(Ot!==Rt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Ot)}return Nt}(y,et,M.numGlyphs,Qe.length)}var We=x+Re.private[1],Ne=Je(y,We,Re.private[0],re.objects);if(M.defaultWidthX=Ne.defaultWidthX,M.nominalWidthX=Ne.nominalWidthX,Ne.subrs!==0){var Ge=dr(y,We+Ne.subrs);M.subrs=Ge.objects,M.subrsBias=Tr(M.subrs)}else M.subrs=[],M.subrsBias=0;var ot=dr(y,x+Re.charStrings);M.nGlyphs=ot.objects.length;var st=function(mt,Kt,Rt,At){var Pt,Nt,jt=new O.Parser(mt,Kt);--Rt;var Xt=[".notdef"],Ft=jt.parseCard8();if(Ft===0)for(var Ot=0;Ot<Rt;Ot+=1)Pt=jt.parseSID(),Xt.push(me(At,Pt));else if(Ft===1)for(;Xt.length<=Rt;){Pt=jt.parseSID(),Nt=jt.parseCard8();for(var Yt=0;Yt<=Nt;Yt+=1)Xt.push(me(At,Pt)),Pt+=1}else{if(Ft!==2)throw new Error("Unknown charset format "+Ft);for(;Xt.length<=Rt;){Pt=jt.parseSID(),Nt=jt.parseCard16();for(var Gt=0;Gt<=Nt;Gt+=1)Xt.push(me(At,Pt)),Pt+=1}}return Xt}(y,x+Re.charset,M.nGlyphs,re.objects);Re.encoding===0?M.cffEncoding=new _e(Z,st):Re.encoding===1?M.cffEncoding=new _e(oe,st):M.cffEncoding=function(mt,Kt,Rt){var At,Pt={},Nt=new O.Parser(mt,Kt),jt=Nt.parseCard8();if(jt===0)for(var Xt=Nt.parseCard8(),Ft=0;Ft<Xt;Ft+=1)Pt[At=Nt.parseCard8()]=Ft;else{if(jt!==1)throw new Error("Unknown encoding format "+jt);var Ot=Nt.parseCard8();At=1;for(var Yt=0;Yt<Ot;Yt+=1)for(var Gt=Nt.parseCard8(),$t=Nt.parseCard8(),It=Gt;It<=Gt+$t;It+=1)Pt[It]=At,At+=1}return new _e(Pt,Rt)}(y,x+Re.encoding,st),M.encoding=M.encoding||M.cffEncoding,M.glyphs=new gt.GlyphSet(M);for(var Et=0;Et<M.nGlyphs;Et+=1){var ft=ot.objects[Et];M.glyphs.push(Et,gt.cffGlyphLoader(M,Et,bt,ft))}},make:function(y,x){for(var M,E=new De.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),C=1/x.unitsPerEm,N={version:x.version,fullName:x.fullName,familyName:x.familyName,weight:x.weightName,fontBBox:x.fontBBox||[0,0,0,0],fontMatrix:[C,0,0,C,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},z=[],J=1;J<y.length;J+=1)M=y.get(J),z.push(M.name);var re=[];E.header=new De.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),E.nameIndex=function(Qe){var We=new De.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);We.names=[];for(var Ne=0;Ne<Qe.length;Ne+=1)We.names.push({name:"name_"+Ne,type:"NAME",value:Qe[Ne]});return We}([x.postScriptName]);var fe,Te,Re,le=ce(N,re);E.topDictIndex=Fe(le),E.globalSubrIndex=new De.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),E.charsets=function(Qe,We){for(var Ne=new De.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Ge=0;Ge<Qe.length;Ge+=1){var ot=xt(Qe[Ge],We);Ne.fields.push({name:"glyph_"+Ge,type:"SID",value:ot})}return Ne}(z,re),E.charStringsIndex=function(Qe){for(var We=new De.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),Ne=0;Ne<Qe.length;Ne+=1){var Ge=Qe.get(Ne),ot=Ke(Ge);We.charStrings.push({name:Ge.name,type:"CHARSTRING",value:ot})}return We}(y),E.privateDict=(fe={},Te=re,(Re=new De.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=_t(Be,fe,Te),Re),E.stringIndex=function(Qe){var We=new De.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);We.strings=[];for(var Ne=0;Ne<Qe.length;Ne+=1)We.strings.push({name:"string_"+Ne,type:"STRING",value:Qe[Ne]});return We}(re);var et=E.header.sizeOf()+E.nameIndex.sizeOf()+E.topDictIndex.sizeOf()+E.stringIndex.sizeOf()+E.globalSubrIndex.sizeOf();return N.charset=et,N.encoding=0,N.charStrings=N.charset+E.charsets.sizeOf(),N.private[1]=N.charStrings+E.charStringsIndex.sizeOf(),le=ce(N,re),E.topDictIndex=Fe(le),E}},rt={parse:function(y,x){var M={},E=new O.Parser(y,x);return M.version=E.parseVersion(),M.fontRevision=Math.round(1e3*E.parseFixed())/1e3,M.checkSumAdjustment=E.parseULong(),M.magicNumber=E.parseULong(),de.argument(M.magicNumber===1594834165,"Font header has wrong magic number."),M.flags=E.parseUShort(),M.unitsPerEm=E.parseUShort(),M.created=E.parseLongDateTime(),M.modified=E.parseLongDateTime(),M.xMin=E.parseShort(),M.yMin=E.parseShort(),M.xMax=E.parseShort(),M.yMax=E.parseShort(),M.macStyle=E.parseUShort(),M.lowestRecPPEM=E.parseUShort(),M.fontDirectionHint=E.parseShort(),M.indexToLocFormat=E.parseShort(),M.glyphDataFormat=E.parseShort(),M},make:function(y){var x=Math.round(new Date().getTime()/1e3)+2082844800,M=x;return y.createdTimestamp&&(M=y.createdTimestamp+2082844800),new De.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:M},{name:"modified",type:"LONGDATETIME",value:x},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],y)}},Ve={parse:function(y,x){var M={},E=new O.Parser(y,x);return M.version=E.parseVersion(),M.ascender=E.parseShort(),M.descender=E.parseShort(),M.lineGap=E.parseShort(),M.advanceWidthMax=E.parseUShort(),M.minLeftSideBearing=E.parseShort(),M.minRightSideBearing=E.parseShort(),M.xMaxExtent=E.parseShort(),M.caretSlopeRise=E.parseShort(),M.caretSlopeRun=E.parseShort(),M.caretOffset=E.parseShort(),E.relativeOffset+=8,M.metricDataFormat=E.parseShort(),M.numberOfHMetrics=E.parseUShort(),M},make:function(y){return new De.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],y)}},Mt={parse:function(y,x,M,E,C){for(var N,z,J=new O.Parser(y,x),re=0;re<E;re+=1){re<M&&(N=J.parseUShort(),z=J.parseShort());var fe=C.get(re);fe.advanceWidth=N,fe.leftSideBearing=z}},make:function(y){for(var x=new De.Table("hmtx",[]),M=0;M<y.length;M+=1){var E=y.get(M),C=E.advanceWidth||0,N=E.leftSideBearing||0;x.fields.push({name:"advanceWidth_"+M,type:"USHORT",value:C}),x.fields.push({name:"leftSideBearing_"+M,type:"SHORT",value:N})}return x}},St={make:function(y){for(var x=new De.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:y.length}]),M="",E=12+4*y.length,C=0;C<y.length;++C){var N=M.indexOf(y[C]);N<0&&(N=M.length,M+=y[C]),x.fields.push({name:"offset "+C,type:"USHORT",value:E+N}),x.fields.push({name:"length "+C,type:"USHORT",value:y[C].length})}return x.fields.push({name:"stringPool",type:"CHARARRAY",value:M}),x},parse:function(y,x){var M=new O.Parser(y,x),E=M.parseULong();de.argument(E===1,"Unsupported ltag table version."),M.skip("uLong",1);for(var C=M.parseULong(),N=[],z=0;z<C;z++){for(var J="",re=x+M.parseUShort(),fe=M.parseUShort(),Te=re;Te<re+fe;++Te)J+=String.fromCharCode(y.getInt8(Te));N.push(J)}return N}},ht={parse:function(y,x){var M={},E=new O.Parser(y,x);return M.version=E.parseVersion(),M.numGlyphs=E.parseUShort(),M.version===1&&(M.maxPoints=E.parseUShort(),M.maxContours=E.parseUShort(),M.maxCompositePoints=E.parseUShort(),M.maxCompositeContours=E.parseUShort(),M.maxZones=E.parseUShort(),M.maxTwilightPoints=E.parseUShort(),M.maxStorage=E.parseUShort(),M.maxFunctionDefs=E.parseUShort(),M.maxInstructionDefs=E.parseUShort(),M.maxStackElements=E.parseUShort(),M.maxSizeOfInstructions=E.parseUShort(),M.maxComponentElements=E.parseUShort(),M.maxComponentDepth=E.parseUShort()),M},make:function(y){return new De.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:y}])}},wt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],$e={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Ct={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},ut={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Nr(y,x,M){switch(y){case 0:if(x===65535)return"und";if(M)return M[x];break;case 1:return $e[x];case 3:return ut[x]}}var Fr="utf-16",tr={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Ur={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function nn(y,x,M){switch(y){case 0:return Fr;case 1:return Ur[M]||tr[x];case 3:if(x===1||x===10)return Fr}}function fr(y){var x={};for(var M in y)x[y[M]]=parseInt(M);return x}function ui(y,x,M,E,C,N){return new De.Record("NameRecord",[{name:"platformID",type:"USHORT",value:y},{name:"encodingID",type:"USHORT",value:x},{name:"languageID",type:"USHORT",value:M},{name:"nameID",type:"USHORT",value:E},{name:"length",type:"USHORT",value:C},{name:"offset",type:"USHORT",value:N}])}function Ll(y,x){var M=function(N,z){var J=N.length,re=z.length-J+1;e:for(var fe=0;fe<re;fe++)for(;fe<re;fe++){for(var Te=0;Te<J;Te++)if(z[fe+Te]!==N[Te])continue e;return fe}return-1}(y,x);if(M<0){M=x.length;for(var E=0,C=y.length;E<C;++E)x.push(y[E])}return M}var Cl={parse:function(y,x,M){for(var E={},C=new O.Parser(y,x),N=C.parseUShort(),z=C.parseUShort(),J=C.offset+C.parseUShort(),re=0;re<z;re++){var fe=C.parseUShort(),Te=C.parseUShort(),Re=C.parseUShort(),le=C.parseUShort(),et=wt[le]||le,Qe=C.parseUShort(),We=C.parseUShort(),Ne=Nr(fe,Re,M),Ge=nn(fe,Te,Re);if(Ge!==void 0&&Ne!==void 0){var ot=void 0;if(ot=Ge===Fr?Pe.UTF16(y,J+We,Qe):Pe.MACSTRING(y,J+We,Qe,Ge)){var st=E[et];st===void 0&&(st=E[et]={}),st[Ne]=ot}}}return N===1&&C.parseUShort(),E},make:function(y,x){var M,E=[],C={},N=fr(wt);for(var z in y){var J=N[z];if(J===void 0&&(J=z),M=parseInt(J),isNaN(M))throw new Error('Name table entry "'+z+'" does not exist, see nameTableNames for complete list.');C[M]=y[z],E.push(M)}for(var re=fr($e),fe=fr(ut),Te=[],Re=[],le=0;le<E.length;le++){var et=C[M=E[le]];for(var Qe in et){var We=et[Qe],Ne=1,Ge=re[Qe],ot=Ct[Ge],st=nn(Ne,ot,Ge),Et=ae.MACSTRING(We,st);Et===void 0&&(Ne=0,(Ge=x.indexOf(Qe))<0&&(Ge=x.length,x.push(Qe)),ot=4,Et=ae.UTF16(We));var ft=Ll(Et,Re);Te.push(ui(Ne,ot,Ge,M,Et.length,ft));var mt=fe[Qe];if(mt!==void 0){var Kt=ae.UTF16(We),Rt=Ll(Kt,Re);Te.push(ui(3,1,mt,M,Kt.length,Rt))}}}Te.sort(function(Nt,jt){return Nt.platformID-jt.platformID||Nt.encodingID-jt.encodingID||Nt.languageID-jt.languageID||Nt.nameID-jt.nameID});for(var At=new De.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Te.length},{name:"stringOffset",type:"USHORT",value:6+12*Te.length}]),Pt=0;Pt<Te.length;Pt++)At.fields.push({name:"record_"+Pt,type:"RECORD",value:Te[Pt]});return At.fields.push({name:"strings",type:"LITERAL",value:Re}),At}},Go=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],zo={parse:function(y,x){var M={},E=new O.Parser(y,x);M.version=E.parseUShort(),M.xAvgCharWidth=E.parseShort(),M.usWeightClass=E.parseUShort(),M.usWidthClass=E.parseUShort(),M.fsType=E.parseUShort(),M.ySubscriptXSize=E.parseShort(),M.ySubscriptYSize=E.parseShort(),M.ySubscriptXOffset=E.parseShort(),M.ySubscriptYOffset=E.parseShort(),M.ySuperscriptXSize=E.parseShort(),M.ySuperscriptYSize=E.parseShort(),M.ySuperscriptXOffset=E.parseShort(),M.ySuperscriptYOffset=E.parseShort(),M.yStrikeoutSize=E.parseShort(),M.yStrikeoutPosition=E.parseShort(),M.sFamilyClass=E.parseShort(),M.panose=[];for(var C=0;C<10;C++)M.panose[C]=E.parseByte();return M.ulUnicodeRange1=E.parseULong(),M.ulUnicodeRange2=E.parseULong(),M.ulUnicodeRange3=E.parseULong(),M.ulUnicodeRange4=E.parseULong(),M.achVendID=String.fromCharCode(E.parseByte(),E.parseByte(),E.parseByte(),E.parseByte()),M.fsSelection=E.parseUShort(),M.usFirstCharIndex=E.parseUShort(),M.usLastCharIndex=E.parseUShort(),M.sTypoAscender=E.parseShort(),M.sTypoDescender=E.parseShort(),M.sTypoLineGap=E.parseShort(),M.usWinAscent=E.parseUShort(),M.usWinDescent=E.parseUShort(),1<=M.version&&(M.ulCodePageRange1=E.parseULong(),M.ulCodePageRange2=E.parseULong()),2<=M.version&&(M.sxHeight=E.parseShort(),M.sCapHeight=E.parseShort(),M.usDefaultChar=E.parseUShort(),M.usBreakChar=E.parseUShort(),M.usMaxContent=E.parseUShort()),M},make:function(y){return new De.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],y)},unicodeRanges:Go,getUnicodeRange:function(y){for(var x=0;x<Go.length;x+=1){var M=Go[x];if(y>=M.begin&&y<M.end)return x}return-1}},Rl={parse:function(y,x){var M={},E=new O.Parser(y,x);switch(M.version=E.parseVersion(),M.italicAngle=E.parseFixed(),M.underlinePosition=E.parseShort(),M.underlineThickness=E.parseShort(),M.isFixedPitch=E.parseULong(),M.minMemType42=E.parseULong(),M.maxMemType42=E.parseULong(),M.minMemType1=E.parseULong(),M.maxMemType1=E.parseULong(),M.version){case 1:M.names=xe.slice();break;case 2:M.numberOfGlyphs=E.parseUShort(),M.glyphNameIndex=new Array(M.numberOfGlyphs);for(var C=0;C<M.numberOfGlyphs;C++)M.glyphNameIndex[C]=E.parseUShort();M.names=[];for(var N=0;N<M.numberOfGlyphs;N++)if(M.glyphNameIndex[N]>=xe.length){var z=E.parseChar();M.names.push(E.parseString(z))}break;case 2.5:M.numberOfGlyphs=E.parseUShort(),M.offset=new Array(M.numberOfGlyphs);for(var J=0;J<M.numberOfGlyphs;J++)M.offset[J]=E.parseChar()}return M},make:function(){return new De.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Br=new Array(9);Br[1]=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();return x===1?{substFormat:1,coverage:this.parsePointer(be.coverage),deltaGlyphId:this.parseUShort()}:x===2?{substFormat:2,coverage:this.parsePointer(be.coverage),substitute:this.parseOffset16List()}:void de.assert(!1,"0x"+y.toString(16)+": lookup type 1 format must be 1 or 2.")},Br[2]=function(){var y=this.parseUShort();return de.argument(y===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(be.coverage),sequences:this.parseListOfLists()}},Br[3]=function(){var y=this.parseUShort();return de.argument(y===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(be.coverage),alternateSets:this.parseListOfLists()}},Br[4]=function(){var y=this.parseUShort();return de.argument(y===1,"GSUB ligature table identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(be.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var ci={sequenceIndex:be.uShort,lookupListIndex:be.uShort};Br[5]=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();if(x===1)return{substFormat:x,coverage:this.parsePointer(be.coverage),ruleSets:this.parseListOfLists(function(){var C=this.parseUShort(),N=this.parseUShort();return{input:this.parseUShortList(C-1),lookupRecords:this.parseRecordList(N,ci)}})};if(x===2)return{substFormat:x,coverage:this.parsePointer(be.coverage),classDef:this.parsePointer(be.classDef),classSets:this.parseListOfLists(function(){var C=this.parseUShort(),N=this.parseUShort();return{classes:this.parseUShortList(C-1),lookupRecords:this.parseRecordList(N,ci)}})};if(x===3){var M=this.parseUShort(),E=this.parseUShort();return{substFormat:x,coverages:this.parseList(M,be.pointer(be.coverage)),lookupRecords:this.parseRecordList(E,ci)}}de.assert(!1,"0x"+y.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Br[6]=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();return x===1?{substFormat:1,coverage:this.parsePointer(be.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ci)}})}:x===2?{substFormat:2,coverage:this.parsePointer(be.coverage),backtrackClassDef:this.parsePointer(be.classDef),inputClassDef:this.parsePointer(be.classDef),lookaheadClassDef:this.parsePointer(be.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ci)}})}:x===3?{substFormat:3,backtrackCoverage:this.parseList(be.pointer(be.coverage)),inputCoverage:this.parseList(be.pointer(be.coverage)),lookaheadCoverage:this.parseList(be.pointer(be.coverage)),lookupRecords:this.parseRecordList(ci)}:void de.assert(!1,"0x"+y.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Br[7]=function(){var y=this.parseUShort();de.argument(y===1,"GSUB Extension Substitution subtable identifier-format must be 1");var x=this.parseUShort(),M=new be(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:x,extension:Br[x].call(M)}},Br[8]=function(){var y=this.parseUShort();return de.argument(y===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(be.coverage),backtrackCoverage:this.parseList(be.pointer(be.coverage)),lookaheadCoverage:this.parseList(be.pointer(be.coverage)),substitutes:this.parseUShortList()}};var ks=new Array(9);ks[1]=function(y){return y.substFormat===1?new De.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new De.Coverage(y.coverage)},{name:"deltaGlyphID",type:"USHORT",value:y.deltaGlyphId}]):new De.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new De.Coverage(y.coverage)}].concat(De.ushortList("substitute",y.substitute)))},ks[3]=function(y){return de.assert(y.substFormat===1,"Lookup type 3 substFormat must be 1."),new De.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new De.Coverage(y.coverage)}].concat(De.tableList("altSet",y.alternateSets,function(x){return new De.Table("alternateSetTable",De.ushortList("alternate",x))})))},ks[4]=function(y){return de.assert(y.substFormat===1,"Lookup type 4 substFormat must be 1."),new De.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new De.Coverage(y.coverage)}].concat(De.tableList("ligSet",y.ligatureSets,function(x){return new De.Table("ligatureSetTable",De.tableList("ligature",x,function(M){return new De.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:M.ligGlyph}].concat(De.ushortList("component",M.components,M.components.length+1)))}))})))};var Pl={parse:function(y,x){var M=new be(y,x=x||0),E=M.parseVersion(1);return de.argument(E===1||E===1.1,"Unsupported GSUB table version."),E===1?{version:E,scripts:M.parseScriptList(),features:M.parseFeatureList(),lookups:M.parseLookupList(Br)}:{version:E,scripts:M.parseScriptList(),features:M.parseFeatureList(),lookups:M.parseLookupList(Br),variations:M.parseFeatureVariationsList()}},make:function(y){return new De.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new De.ScriptList(y.scripts)},{name:"features",type:"TABLE",value:new De.FeatureList(y.features)},{name:"lookups",type:"TABLE",value:new De.LookupList(y.lookups,ks)}])}},Dl={parse:function(y,x){var M=new O.Parser(y,x),E=M.parseULong();de.argument(E===1,"Unsupported META table version."),M.parseULong(),M.parseULong();for(var C=M.parseULong(),N={},z=0;z<C;z++){var J=M.parseTag(),re=M.parseULong(),fe=M.parseULong(),Te=Pe.UTF8(y,x+re,fe);N[J]=Te}return N},make:function(y){var x=Object.keys(y).length,M="",E=16+12*x,C=new De.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:E},{name:"numTags",type:"ULONG",value:x}]);for(var N in y){var z=M.length;M+=y[N],C.fields.push({name:"tag "+N,type:"TAG",value:N}),C.fields.push({name:"offset "+N,type:"ULONG",value:E+z}),C.fields.push({name:"length "+N,type:"ULONG",value:y[N].length})}return C.fields.push({name:"stringPool",type:"CHARARRAY",value:M}),C}};function Il(y){return Math.log(y)/Math.log(2)|0}function Vo(y){for(;y.length%4!=0;)y.push(0);for(var x=0,M=0;M<y.length;M+=4)x+=(y[M]<<24)+(y[M+1]<<16)+(y[M+2]<<8)+y[M+3];return x%=Math.pow(2,32)}function jl(y,x,M,E){return new De.Record("Table Record",[{name:"tag",type:"TAG",value:y!==void 0?y:""},{name:"checkSum",type:"ULONG",value:x!==void 0?x:0},{name:"offset",type:"ULONG",value:M!==void 0?M:0},{name:"length",type:"ULONG",value:E!==void 0?E:0}])}function Ol(y){var x=new De.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);x.tables=y,x.numTables=y.length;var M=Math.pow(2,Il(x.numTables));x.searchRange=16*M,x.entrySelector=Il(M),x.rangeShift=16*x.numTables-x.searchRange;for(var E=[],C=[],N=x.sizeOf()+jl().sizeOf()*x.numTables;N%4!=0;)N+=1,C.push({name:"padding",type:"BYTE",value:0});for(var z=0;z<y.length;z+=1){var J=y[z];de.argument(J.tableName.length===4,"Table name"+J.tableName+" is invalid.");var re=J.sizeOf(),fe=jl(J.tableName,Vo(J.encode()),N,re);for(E.push({name:fe.tag+" Table Record",type:"RECORD",value:fe}),C.push({name:J.tableName+" table",type:"RECORD",value:J}),N+=re,de.argument(!isNaN(N),"Something went wrong calculating the offset.");N%4!=0;)N+=1,C.push({name:"padding",type:"BYTE",value:0})}return E.sort(function(Te,Re){return Te.value.tag>Re.value.tag?1:-1}),x.fields=x.fields.concat(E),x.fields=x.fields.concat(C),x}function kl(y,x,M){for(var E=0;E<x.length;E+=1){var C=y.charToGlyphIndex(x[E]);if(0<C)return y.glyphs.get(C).getMetrics()}return M}var ud={make:Ol,fontToTable:function(y){for(var x,M=[],E=[],C=[],N=[],z=[],J=[],re=[],fe=0,Te=0,Re=0,le=0,et=0,Qe=0;Qe<y.glyphs.length;Qe+=1){var We=y.glyphs.get(Qe),Ne=0|We.unicode;if(isNaN(We.advanceWidth))throw new Error("Glyph "+We.name+" ("+Qe+"): advanceWidth is not a number.");(Ne<x||x===void 0)&&0<Ne&&(x=Ne),fe<Ne&&(fe=Ne);var Ge=zo.getUnicodeRange(Ne);if(Ge<32)Te|=1<<Ge;else if(Ge<64)Re|=1<<Ge-32;else if(Ge<96)le|=1<<Ge-64;else{if(!(Ge<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");et|=1<<Ge-96}if(We.name!==".notdef"){var ot=We.getMetrics();M.push(ot.xMin),E.push(ot.yMin),C.push(ot.xMax),N.push(ot.yMax),J.push(ot.leftSideBearing),re.push(ot.rightSideBearing),z.push(We.advanceWidth)}}var st={xMin:Math.min.apply(null,M),yMin:Math.min.apply(null,E),xMax:Math.max.apply(null,C),yMax:Math.max.apply(null,N),advanceWidthMax:Math.max.apply(null,z),advanceWidthAvg:function(fi){for(var fu=0,Jo=0;Jo<fi.length;Jo+=1)fu+=fi[Jo];return fu/fi.length}(z),minLeftSideBearing:Math.min.apply(null,J),maxLeftSideBearing:Math.max.apply(null,J),minRightSideBearing:Math.min.apply(null,re)};st.ascender=y.ascender,st.descender=y.descender;var Et=rt.make({flags:3,unitsPerEm:y.unitsPerEm,xMin:st.xMin,yMin:st.yMin,xMax:st.xMax,yMax:st.yMax,lowestRecPPEM:3,createdTimestamp:y.createdTimestamp}),ft=Ve.make({ascender:st.ascender,descender:st.descender,advanceWidthMax:st.advanceWidthMax,minLeftSideBearing:st.minLeftSideBearing,minRightSideBearing:st.minRightSideBearing,xMaxExtent:st.maxLeftSideBearing+(st.xMax-st.xMin),numberOfHMetrics:y.glyphs.length}),mt=ht.make(y.glyphs.length),Kt=zo.make({xAvgCharWidth:Math.round(st.advanceWidthAvg),usWeightClass:y.tables.os2.usWeightClass,usWidthClass:y.tables.os2.usWidthClass,usFirstCharIndex:x,usLastCharIndex:fe,ulUnicodeRange1:Te,ulUnicodeRange2:Re,ulUnicodeRange3:le,ulUnicodeRange4:et,fsSelection:y.tables.os2.fsSelection,sTypoAscender:st.ascender,sTypoDescender:st.descender,sTypoLineGap:0,usWinAscent:st.yMax,usWinDescent:Math.abs(st.yMin),ulCodePageRange1:1,sxHeight:kl(y,"xyvw",{yMax:Math.round(st.ascender/2)}).yMax,sCapHeight:kl(y,"HIKLEFJMNTZBDPRAGOQSUVWXY",st).yMax,usDefaultChar:y.hasChar(" ")?32:0,usBreakChar:y.hasChar(" ")?32:0}),Rt=Mt.make(y.glyphs),At=H.make(y.glyphs),Pt=y.getEnglishName("fontFamily"),Nt=y.getEnglishName("fontSubfamily"),jt=Pt+" "+Nt,Xt=y.getEnglishName("postScriptName");Xt=Xt||Pt.replace(/\s/g,"")+"-"+Nt;var Ft={};for(var Ot in y.names)Ft[Ot]=y.names[Ot];Ft.uniqueID||(Ft.uniqueID={en:y.getEnglishName("manufacturer")+":"+jt}),Ft.postScriptName||(Ft.postScriptName={en:Xt}),Ft.preferredFamily||(Ft.preferredFamily=y.names.fontFamily),Ft.preferredSubfamily||(Ft.preferredSubfamily=y.names.fontSubfamily);var Yt=[],Gt=Cl.make(Ft,Yt),$t=0<Yt.length?St.make(Yt):void 0,It=Rl.make(),rr=He.make(y.glyphs,{version:y.getEnglishName("version"),fullName:jt,familyName:Pt,weightName:Nt,postScriptName:Xt,unitsPerEm:y.unitsPerEm,fontBBox:[0,st.yMin,st.ascender,st.advanceWidthMax]}),Wt=y.metas&&0<Object.keys(y.metas).length?Dl.make(y.metas):void 0,qt=[Et,ft,mt,Kt,Gt,At,It,rr,Rt];$t&&qt.push($t),y.tables.gsub&&qt.push(Pl.make(y.tables.gsub)),Wt&&qt.push(Wt);for(var Kr=Ol(qt),di=Vo(Kr.encode()),zn=Kr.fields,Cr=!1,Vn=0;Vn<zn.length;Vn+=1)if(zn[Vn].name==="head table"){zn[Vn].value.checkSumAdjustment=2981146554-di,Cr=!0;break}if(!Cr)throw new Error("Could not find head table with checkSum to adjust.");return Kr},computeCheckSum:Vo};function Ho(y,x){for(var M=0,E=y.length-1;M<=E;){var C=M+E>>>1,N=y[C].tag;if(N===x)return C;N<x?M=1+C:E=C-1}return-M-1}function Nl(y,x){for(var M=0,E=y.length-1;M<=E;){var C=M+E>>>1,N=y[C];if(N===x)return C;N<x?M=1+C:E=C-1}return-M-1}function Fl(y,x){for(var M,E=0,C=y.length-1;E<=C;){var N=E+C>>>1,z=(M=y[N]).start;if(z===x)return M;z<x?E=1+N:C=N-1}if(0<E)return x>(M=y[E-1]).end?0:M}function Ns(y,x){this.font=y,this.tableName=x}function Fs(y){Ns.call(this,y,"gpos")}function Yr(y){Ns.call(this,y,"gsub")}function cd(y,x){var M=y.length;if(M!==x.length)return!1;for(var E=0;E<M;E++)if(y[E]!==x[E])return!1;return!0}function Ul(y,x,M){for(var E=y.subtables,C=0;C<E.length;C++){var N=E[C];if(N.substFormat===x)return N}if(M)return E.push(M),M}function Bl(y){for(var x=new ArrayBuffer(y.length),M=new Uint8Array(x),E=0;E<y.length;++E)M[E]=y[E];return x}function hi(y,x){if(!y)throw x}function Gl(y,x,M,E,C){var N;return N=0<(x&E)?(N=y.parseByte(),(x&C)==0&&(N=-N),M+N):0<(x&C)?M:M+y.parseShort()}function hd(y,x,M){var E,C,N=new O.Parser(x,M);if(y.numberOfContours=N.parseShort(),y._xMin=N.parseShort(),y._yMin=N.parseShort(),y._xMax=N.parseShort(),y._yMax=N.parseShort(),0<y.numberOfContours){for(var z=y.endPointIndices=[],J=0;J<y.numberOfContours;J+=1)z.push(N.parseUShort());y.instructionLength=N.parseUShort(),y.instructions=[];for(var re=0;re<y.instructionLength;re+=1)y.instructions.push(N.parseByte());var fe=z[z.length-1]+1;E=[];for(var Te=0;Te<fe;Te+=1)if(C=N.parseByte(),E.push(C),0<(8&C))for(var Re=N.parseByte(),le=0;le<Re;le+=1)E.push(C),Te+=1;if(de.argument(E.length===fe,"Bad flags."),0<z.length){var et,Qe=[];if(0<fe){for(var We=0;We<fe;We+=1)C=E[We],(et={}).onCurve=!!(1&C),et.lastPointOfContour=0<=z.indexOf(We),Qe.push(et);for(var Ne=0,Ge=0;Ge<fe;Ge+=1)C=E[Ge],(et=Qe[Ge]).x=Gl(N,C,Ne,2,16),Ne=et.x;for(var ot=0,st=0;st<fe;st+=1)C=E[st],(et=Qe[st]).y=Gl(N,C,ot,4,32),ot=et.y}y.points=Qe}else y.points=[]}else if(y.numberOfContours===0)y.points=[];else{y.isComposite=!0,y.points=[],y.components=[];for(var Et=!0;Et;){E=N.parseUShort();var ft={glyphIndex:N.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&E)?0<(2&E)?(ft.dx=N.parseShort(),ft.dy=N.parseShort()):ft.matchedPoints=[N.parseUShort(),N.parseUShort()]:0<(2&E)?(ft.dx=N.parseChar(),ft.dy=N.parseChar()):ft.matchedPoints=[N.parseByte(),N.parseByte()],0<(8&E)?ft.xScale=ft.yScale=N.parseF2Dot14():0<(64&E)?(ft.xScale=N.parseF2Dot14(),ft.yScale=N.parseF2Dot14()):0<(128&E)&&(ft.xScale=N.parseF2Dot14(),ft.scale01=N.parseF2Dot14(),ft.scale10=N.parseF2Dot14(),ft.yScale=N.parseF2Dot14()),y.components.push(ft),Et=!!(32&E)}if(256&E){y.instructionLength=N.parseUShort(),y.instructions=[];for(var mt=0;mt<y.instructionLength;mt+=1)y.instructions.push(N.parseByte())}}}function Wo(y,x){for(var M=[],E=0;E<y.length;E+=1){var C=y[E],N={x:x.xScale*C.x+x.scale01*C.y+x.dx,y:x.scale10*C.x+x.yScale*C.y+x.dy,onCurve:C.onCurve,lastPointOfContour:C.lastPointOfContour};M.push(N)}return M}function zl(y){var x=new se;if(!y)return x;for(var M=function(Re){for(var le=[],et=[],Qe=0;Qe<Re.length;Qe+=1){var We=Re[Qe];et.push(We),We.lastPointOfContour&&(le.push(et),et=[])}return de.argument(et.length===0,"There are still points left in the current contour."),le}(y),E=0;E<M.length;++E){var C=M[E],N=null,z=C[C.length-1],J=C[0];if(z.onCurve)x.moveTo(z.x,z.y);else if(J.onCurve)x.moveTo(J.x,J.y);else{var re={x:.5*(z.x+J.x),y:.5*(z.y+J.y)};x.moveTo(re.x,re.y)}for(var fe=0;fe<C.length;++fe)if(N=z,z=J,J=C[(fe+1)%C.length],z.onCurve)x.lineTo(z.x,z.y);else{var Te=J;N.onCurve||(.5*(z.x+N.x),.5*(z.y+N.y)),J.onCurve||(Te={x:.5*(z.x+J.x),y:.5*(z.y+J.y)}),x.quadraticCurveTo(z.x,z.y,Te.x,Te.y)}x.closePath()}return x}function dd(y,x){if(x.isComposite)for(var M=0;M<x.components.length;M+=1){var E=x.components[M],C=y.get(E.glyphIndex);if(C.getPath(),C.points){var N=void 0;if(E.matchedPoints===void 0)N=Wo(C.points,E);else{if(E.matchedPoints[0]>x.points.length-1||E.matchedPoints[1]>C.points.length-1)throw Error("Matched points out of range in "+x.name);var z=x.points[E.matchedPoints[0]],J=C.points[E.matchedPoints[1]],re={xScale:E.xScale,scale01:E.scale01,scale10:E.scale10,yScale:E.yScale,dx:0,dy:0};J=Wo([J],re)[0],re.dx=z.x-J.x,re.dy=z.y-J.y,N=Wo(C.points,re)}x.points=x.points.concat(N)}}return zl(x.points)}(Fs.prototype=Ns.prototype={searchTag:Ho,binSearch:Nl,getTable:function(y){var x=this.font.tables[this.tableName];return!x&&y&&(x=this.font.tables[this.tableName]=this.createDefaultTable()),x},getScriptNames:function(){var y=this.getTable();return y?y.scripts.map(function(x){return x.tag}):[]},getDefaultScriptName:function(){var y=this.getTable();if(y){for(var x=!1,M=0;M<y.scripts.length;M++){var E=y.scripts[M].tag;if(E==="DFLT")return E;E==="latn"&&(x=!0)}return x?"latn":void 0}},getScriptTable:function(y,x){var M=this.getTable(x);if(M){y=y||"DFLT";var E=M.scripts,C=Ho(M.scripts,y);if(0<=C)return E[C].script;if(x){var N={tag:y,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return E.splice(-1-C,0,N),N.script}}},getLangSysTable:function(y,x,M){var E=this.getScriptTable(y,M);if(E){if(!x||x==="dflt"||x==="DFLT")return E.defaultLangSys;var C=Ho(E.langSysRecords,x);if(0<=C)return E.langSysRecords[C].langSys;if(M){var N={tag:x,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return E.langSysRecords.splice(-1-C,0,N),N.langSys}}},getFeatureTable:function(y,x,M,E){var C=this.getLangSysTable(y,x,E);if(C){for(var N,z=C.featureIndexes,J=this.font.tables[this.tableName].features,re=0;re<z.length;re++)if((N=J[z[re]]).tag===M)return N.feature;if(E){var fe=J.length;return de.assert(fe===0||M>=J[fe-1].tag,"Features must be added in alphabetical order."),N={tag:M,feature:{params:0,lookupListIndexes:[]}},J.push(N),z.push(fe),N.feature}}},getLookupTables:function(y,x,M,E,C){var N=this.getFeatureTable(y,x,M,C),z=[];if(N){for(var J,re=N.lookupListIndexes,fe=this.font.tables[this.tableName].lookups,Te=0;Te<re.length;Te++)(J=fe[re[Te]]).lookupType===E&&z.push(J);if(z.length===0&&C){J={lookupType:E,lookupFlag:0,subtables:[],markFilteringSet:void 0};var Re=fe.length;return fe.push(J),re.push(Re),[J]}}return z},getGlyphClass:function(y,x){switch(y.format){case 1:return y.startGlyph<=x&&x<y.startGlyph+y.classes.length?y.classes[x-y.startGlyph]:0;case 2:var M=Fl(y.ranges,x);return M?M.classId:0}},getCoverageIndex:function(y,x){switch(y.format){case 1:var M=Nl(y.glyphs,x);return 0<=M?M:-1;case 2:var E=Fl(y.ranges,x);return E?E.index+x-E.start:-1}},expandCoverage:function(y){if(y.format===1)return y.glyphs;for(var x=[],M=y.ranges,E=0;E<M.length;E++)for(var C=M[E],N=C.start,z=C.end,J=N;J<=z;J++)x.push(J);return x}}).init=function(){var y=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(y)},Fs.prototype.getKerningValue=function(y,x,M){for(var E=0;E<y.length;E++)for(var C=y[E].subtables,N=0;N<C.length;N++){var z=C[N],J=this.getCoverageIndex(z.coverage,x);if(!(J<0))switch(z.posFormat){case 1:for(var re=z.pairSets[J],fe=0;fe<re.length;fe++){var Te=re[fe];if(Te.secondGlyph===M)return Te.value1&&Te.value1.xAdvance||0}break;case 2:var Re=this.getGlyphClass(z.classDef1,x),le=this.getGlyphClass(z.classDef2,M),et=z.classRecords[Re][le];return et.value1&&et.value1.xAdvance||0}}return 0},Fs.prototype.getKerningTables=function(y,x){if(this.font.tables.gpos)return this.getLookupTables(y,x,"kern",2)},(Yr.prototype=Ns.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Yr.prototype.getSingle=function(y,x,M){for(var E=[],C=this.getLookupTables(x,M,y,1),N=0;N<C.length;N++)for(var z=C[N].subtables,J=0;J<z.length;J++){var re=z[J],fe=this.expandCoverage(re.coverage),Te=void 0;if(re.substFormat===1){var Re=re.deltaGlyphId;for(Te=0;Te<fe.length;Te++){var le=fe[Te];E.push({sub:le,by:le+Re})}}else{var et=re.substitute;for(Te=0;Te<fe.length;Te++)E.push({sub:fe[Te],by:et[Te]})}}return E},Yr.prototype.getAlternates=function(y,x,M){for(var E=[],C=this.getLookupTables(x,M,y,3),N=0;N<C.length;N++)for(var z=C[N].subtables,J=0;J<z.length;J++)for(var re=z[J],fe=this.expandCoverage(re.coverage),Te=re.alternateSets,Re=0;Re<fe.length;Re++)E.push({sub:fe[Re],by:Te[Re]});return E},Yr.prototype.getLigatures=function(y,x,M){for(var E=[],C=this.getLookupTables(x,M,y,4),N=0;N<C.length;N++)for(var z=C[N].subtables,J=0;J<z.length;J++)for(var re=z[J],fe=this.expandCoverage(re.coverage),Te=re.ligatureSets,Re=0;Re<fe.length;Re++)for(var le=fe[Re],et=Te[Re],Qe=0;Qe<et.length;Qe++){var We=et[Qe];E.push({sub:[le].concat(We.components),by:We.ligGlyph})}return E},Yr.prototype.addSingle=function(y,x,M,E){var C=Ul(this.getLookupTables(M,E,y,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});de.assert(C.coverage.format===1,"Ligature: unable to modify coverage table format "+C.coverage.format);var N=x.sub,z=this.binSearch(C.coverage.glyphs,N);z<0&&(z=-1-z,C.coverage.glyphs.splice(z,0,N),C.substitute.splice(z,0,0)),C.substitute[z]=x.by},Yr.prototype.addAlternate=function(y,x,M,E){var C=Ul(this.getLookupTables(M,E,y,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});de.assert(C.coverage.format===1,"Ligature: unable to modify coverage table format "+C.coverage.format);var N=x.sub,z=this.binSearch(C.coverage.glyphs,N);z<0&&(z=-1-z,C.coverage.glyphs.splice(z,0,N),C.alternateSets.splice(z,0,0)),C.alternateSets[z]=x.by},Yr.prototype.addLigature=function(y,x,M,E){var C=this.getLookupTables(M,E,y,4,!0)[0],N=C.subtables[0];N||(N={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},C.subtables[0]=N),de.assert(N.coverage.format===1,"Ligature: unable to modify coverage table format "+N.coverage.format);var z=x.sub[0],J=x.sub.slice(1),re={ligGlyph:x.by,components:J},fe=this.binSearch(N.coverage.glyphs,z);if(0<=fe){for(var Te=N.ligatureSets[fe],Re=0;Re<Te.length;Re++)if(cd(Te[Re].components,J))return;Te.push(re)}else fe=-1-fe,N.coverage.glyphs.splice(fe,0,z),N.ligatureSets.splice(fe,0,[re])},Yr.prototype.getFeature=function(y,x,M){if(/ss\d\d/.test(y))return this.getSingle(y,x,M);switch(y){case"aalt":case"salt":return this.getSingle(y,x,M).concat(this.getAlternates(y,x,M));case"dlig":case"liga":case"rlig":return this.getLigatures(y,x,M)}},Yr.prototype.add=function(y,x,M,E){if(/ss\d\d/.test(y))return this.addSingle(y,x,M,E);switch(y){case"aalt":case"salt":return typeof x.by=="number"?this.addSingle(y,x,M,E):this.addAlternate(y,x,M,E);case"dlig":case"liga":case"rlig":return this.addLigature(y,x,M,E)}};var Vl,Gn,Hl,qo,Wl={getPath:zl,parse:function(y,x,M,E){for(var C=new gt.GlyphSet(E),N=0;N<M.length-1;N+=1){var z=M[N];z!==M[N+1]?C.push(N,gt.ttfGlyphLoader(E,N,hd,y,x+z,dd)):C.push(N,gt.glyphLoader(E,N))}return C}};function ql(y){this.font=y,this.getCommands=function(x){return Wl.getPath(x).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function fd(y){return y}function Xl(y){return Math.sign(y)*Math.round(Math.abs(y))}function pd(y){return Math.sign(y)*Math.round(Math.abs(2*y))/2}function md(y){return Math.sign(y)*(Math.round(Math.abs(y)+.5)-.5)}function gd(y){return Math.sign(y)*Math.ceil(Math.abs(y))}function yd(y){return Math.sign(y)*Math.floor(Math.abs(y))}function Yl(y){var x=this.srPeriod,M=this.srPhase,E=1;return y<0&&(y=-y,E=-1),y+=this.srThreshold-M,y=Math.trunc(y/x)*x,(y+=M)<0?M*E:y*E}var Zr={x:1,y:0,axis:"x",distance:function(y,x,M,E){return(M?y.xo:y.x)-(E?x.xo:x.x)},interpolate:function(y,x,M,E){var C,N,z,J,re,fe,Te;if(!E||E===this)return C=y.xo-x.xo,N=y.xo-M.xo,re=x.x-x.xo,fe=M.x-M.xo,(Te=(z=Math.abs(C))+(J=Math.abs(N)))===0?void(y.x=y.xo+(re+fe)/2):void(y.x=y.xo+(re*J+fe*z)/Te);C=E.distance(y,x,!0,!0),N=E.distance(y,M,!0,!0),re=E.distance(x,x,!1,!0),fe=E.distance(M,M,!1,!0),(Te=(z=Math.abs(C))+(J=Math.abs(N)))!==0?Zr.setRelative(y,y,(re*J+fe*z)/Te,E,!0):Zr.setRelative(y,y,(re+fe)/2,E,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(y,x,M,E,C){if(E&&E!==this){var N=C?x.xo:x.x,z=C?x.yo:x.y,J=N+M*E.x,re=z+M*E.y;y.x=J+(y.y-re)/E.normalSlope}else y.x=(C?x.xo:x.x)+M},slope:0,touch:function(y){y.xTouched=!0},touched:function(y){return y.xTouched},untouch:function(y){y.xTouched=!1}},sn={x:0,y:1,axis:"y",distance:function(y,x,M,E){return(M?y.yo:y.y)-(E?x.yo:x.y)},interpolate:function(y,x,M,E){var C,N,z,J,re,fe,Te;if(!E||E===this)return C=y.yo-x.yo,N=y.yo-M.yo,re=x.y-x.yo,fe=M.y-M.yo,(Te=(z=Math.abs(C))+(J=Math.abs(N)))===0?void(y.y=y.yo+(re+fe)/2):void(y.y=y.yo+(re*J+fe*z)/Te);C=E.distance(y,x,!0,!0),N=E.distance(y,M,!0,!0),re=E.distance(x,x,!1,!0),fe=E.distance(M,M,!1,!0),(Te=(z=Math.abs(C))+(J=Math.abs(N)))!==0?sn.setRelative(y,y,(re*J+fe*z)/Te,E,!0):sn.setRelative(y,y,(re+fe)/2,E,!0)},normalSlope:0,setRelative:function(y,x,M,E,C){if(E&&E!==this){var N=C?x.xo:x.x,z=C?x.yo:x.y,J=N+M*E.x,re=z+M*E.y;y.y=re+E.normalSlope*(y.x-J)}else y.y=(C?x.yo:x.y)+M},slope:Number.POSITIVE_INFINITY,touch:function(y){y.yTouched=!0},touched:function(y){return y.yTouched},untouch:function(y){y.yTouched=!1}};function rs(y,x){this.x=y,this.y=x,this.axis=void 0,this.slope=x/y,this.normalSlope=-y/x,Object.freeze(this)}function ns(y,x){var M=Math.sqrt(y*y+x*x);return x/=M,(y/=M)===1&&x===0?Zr:y===0&&x===1?sn:new rs(y,x)}function on(y,x,M,E){this.x=this.xo=Math.round(64*y)/64,this.y=this.yo=Math.round(64*x)/64,this.lastPointOfContour=M,this.onCurve=E,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Zr),Object.freeze(sn),rs.prototype.distance=function(y,x,M,E){return this.x*Zr.distance(y,x,M,E)+this.y*sn.distance(y,x,M,E)},rs.prototype.interpolate=function(y,x,M,E){var C,N,z,J,re,fe,Te;z=E.distance(y,x,!0,!0),J=E.distance(y,M,!0,!0),C=E.distance(x,x,!1,!0),N=E.distance(M,M,!1,!0),(Te=(re=Math.abs(z))+(fe=Math.abs(J)))!==0?this.setRelative(y,y,(C*fe+N*re)/Te,E,!0):this.setRelative(y,y,(C+N)/2,E,!0)},rs.prototype.setRelative=function(y,x,M,E,C){E=E||this;var N=C?x.xo:x.x,z=C?x.yo:x.y,J=N+M*E.x,re=z+M*E.y,fe=E.normalSlope,Te=this.slope,Re=y.x,le=y.y;y.x=(Te*Re-fe*J+re-le)/(Te-fe),y.y=Te*(y.x-Re)+le},rs.prototype.touch=function(y){y.xTouched=!0,y.yTouched=!0},on.prototype.nextTouched=function(y){for(var x=this.nextPointOnContour;!y.touched(x)&&x!==this;)x=x.nextPointOnContour;return x},on.prototype.prevTouched=function(y){for(var x=this.prevPointOnContour;!y.touched(x)&&x!==this;)x=x.prevPointOnContour;return x};var is=Object.freeze(new on(0,0)),vd={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function _n(y,x){switch(this.env=y,this.stack=[],this.prog=x,y){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Zr,this.round=Xl}}function Us(y){for(var x=y.tZone=new Array(y.gZone.length),M=0;M<x.length;M++)x[M]=new on(0,0)}function Zl(y,x){var M,E=y.prog,C=y.ip,N=1;do if((M=E[++C])===88)N++;else if(M===89)N--;else if(M===64)C+=E[C+1]+1;else if(M===65)C+=2*E[C+1]+1;else if(176<=M&&M<=183)C+=M-176+1;else if(184<=M&&M<=191)C+=2*(M-184+1);else if(x&&N===1&&M===27)break;while(0<N);y.ip=C}function Kl(y,x){h.DEBUG&&console.log(x.step,"SVTCA["+y.axis+"]"),x.fv=x.pv=x.dpv=y}function Jl(y,x){h.DEBUG&&console.log(x.step,"SPVTCA["+y.axis+"]"),x.pv=x.dpv=y}function Ql(y,x){h.DEBUG&&console.log(x.step,"SFVTCA["+y.axis+"]"),x.fv=y}function $l(y,x){var M,E,C=x.stack,N=C.pop(),z=C.pop(),J=x.z2[N],re=x.z1[z];h.DEBUG&&console.log("SPVTL["+y+"]",N,z),E=y?(M=J.y-re.y,re.x-J.x):(M=re.x-J.x,re.y-J.y),x.pv=x.dpv=ns(M,E)}function eu(y,x){var M,E,C=x.stack,N=C.pop(),z=C.pop(),J=x.z2[N],re=x.z1[z];h.DEBUG&&console.log("SFVTL["+y+"]",N,z),E=y?(M=J.y-re.y,re.x-J.x):(M=re.x-J.x,re.y-J.y),x.fv=ns(M,E)}function Xo(y){h.DEBUG&&console.log(y.step,"POP[]"),y.stack.pop()}function tu(y,x){var M=x.stack.pop(),E=x.z0[M],C=x.fv,N=x.pv;h.DEBUG&&console.log(x.step,"MDAP["+y+"]",M);var z=N.distance(E,is);y&&(z=x.round(z)),C.setRelative(E,is,z,N),C.touch(E),x.rp0=x.rp1=M}function ru(y,x){var M,E,C,N=x.z2,z=N.length-2;h.DEBUG&&console.log(x.step,"IUP["+y.axis+"]");for(var J=0;J<z;J++)M=N[J],y.touched(M)||(E=M.prevTouched(y))!==M&&(E===(C=M.nextTouched(y))&&y.setRelative(M,M,y.distance(E,E,!1,!0),y,!0),y.interpolate(M,E,C,y))}function nu(y,x){for(var M=x.stack,E=y?x.rp1:x.rp2,C=(y?x.z0:x.z1)[E],N=x.fv,z=x.pv,J=x.loop,re=x.z2;J--;){var fe=M.pop(),Te=re[fe],Re=z.distance(C,C,!1,!0);N.setRelative(Te,Te,Re,z),N.touch(Te),h.DEBUG&&console.log(x.step,(1<x.loop?"loop "+(x.loop-J)+": ":"")+"SHP["+(y?"rp1":"rp2")+"]",fe)}x.loop=1}function iu(y,x){var M=x.stack,E=y?x.rp1:x.rp2,C=(y?x.z0:x.z1)[E],N=x.fv,z=x.pv,J=M.pop(),re=x.z2[x.contours[J]],fe=re;h.DEBUG&&console.log(x.step,"SHC["+y+"]",J);for(var Te=z.distance(C,C,!1,!0);fe!==C&&N.setRelative(fe,fe,Te,z),(fe=fe.nextPointOnContour)!==re;);}function su(y,x){var M,E,C=x.stack,N=y?x.rp1:x.rp2,z=(y?x.z0:x.z1)[N],J=x.fv,re=x.pv,fe=C.pop();switch(h.DEBUG&&console.log(x.step,"SHZ["+y+"]",fe),fe){case 0:M=x.tZone;break;case 1:M=x.gZone;break;default:throw new Error("Invalid zone")}for(var Te=re.distance(z,z,!1,!0),Re=M.length-2,le=0;le<Re;le++)E=M[le],J.setRelative(E,E,Te,re)}function ou(y,x){var M=x.stack,E=M.pop()/64,C=M.pop(),N=x.z1[C],z=x.z0[x.rp0],J=x.fv,re=x.pv;J.setRelative(N,z,E,re),J.touch(N),h.DEBUG&&console.log(x.step,"MSIRP["+y+"]",E,C),x.rp1=x.rp0,x.rp2=C,y&&(x.rp0=C)}function au(y,x){var M=x.stack,E=M.pop(),C=M.pop(),N=x.z0[C],z=x.fv,J=x.pv,re=x.cvt[E];h.DEBUG&&console.log(x.step,"MIAP["+y+"]",E,"(",re,")",C);var fe=J.distance(N,is);y&&(Math.abs(fe-re)<x.cvCutIn&&(fe=re),fe=x.round(fe)),z.setRelative(N,is,fe,J),x.zp0===0&&(N.xo=N.x,N.yo=N.y),z.touch(N),x.rp0=x.rp1=C}function lu(y,x){var M=x.stack,E=M.pop(),C=x.z2[E];h.DEBUG&&console.log(x.step,"GC["+y+"]",E),M.push(64*x.dpv.distance(C,is,y,!1))}function uu(y,x){var M=x.stack,E=M.pop(),C=M.pop(),N=x.z1[E],z=x.z0[C],J=x.dpv.distance(z,N,y,y);h.DEBUG&&console.log(x.step,"MD["+y+"]",E,C,"->",J),x.stack.push(Math.round(64*J))}function Yo(y,x){var M=x.stack,E=M.pop(),C=x.fv,N=x.pv,z=x.ppem,J=x.deltaBase+16*(y-1),re=x.deltaShift,fe=x.z0;h.DEBUG&&console.log(x.step,"DELTAP["+y+"]",E,M);for(var Te=0;Te<E;Te++){var Re=M.pop(),le=M.pop();if(J+((240&le)>>4)===z){var et=(15&le)-8;0<=et&&et++,h.DEBUG&&console.log(x.step,"DELTAPFIX",Re,"by",et*re);var Qe=fe[Re];C.setRelative(Qe,Qe,et*re,N)}}}function Bs(y,x){var M=x.stack,E=M.pop();h.DEBUG&&console.log(x.step,"ROUND[]"),M.push(64*x.round(E/64))}function Zo(y,x){var M=x.stack,E=M.pop(),C=x.ppem,N=x.deltaBase+16*(y-1),z=x.deltaShift;h.DEBUG&&console.log(x.step,"DELTAC["+y+"]",E,M);for(var J=0;J<E;J++){var re=M.pop(),fe=M.pop();if(N+((240&fe)>>4)===C){var Te=(15&fe)-8;0<=Te&&Te++;var Re=Te*z;h.DEBUG&&console.log(x.step,"DELTACFIX",re,"by",Re),x.cvt[re]+=Re}}}function cu(y,x){var M,E,C=x.stack,N=C.pop(),z=C.pop(),J=x.z2[N],re=x.z1[z];h.DEBUG&&console.log(x.step,"SDPVTL["+y+"]",N,z),E=y?(M=J.y-re.y,re.x-J.x):(M=re.x-J.x,re.y-J.y),x.dpv=ns(M,E)}function xn(y,x){var M=x.stack,E=x.prog,C=x.ip;h.DEBUG&&console.log(x.step,"PUSHB["+y+"]");for(var N=0;N<y;N++)M.push(E[++C]);x.ip=C}function wn(y,x){var M=x.ip,E=x.prog,C=x.stack;h.DEBUG&&console.log(x.ip,"PUSHW["+y+"]");for(var N=0;N<y;N++){var z=E[++M]<<8|E[++M];32768&z&&(z=-(1+(65535^z))),C.push(z)}x.ip=M}function ct(y,x,M,E,C,N){var z,J,re,fe,Te=N.stack,Re=y&&Te.pop(),le=Te.pop(),et=N.rp0,Qe=N.z0[et],We=N.z1[le],Ne=N.minDis,Ge=N.fv,ot=N.dpv;re=0<=(J=z=ot.distance(We,Qe,!0,!0))?1:-1,J=Math.abs(J),y&&(fe=N.cvt[Re],E&&Math.abs(J-fe)<N.cvCutIn&&(J=fe)),M&&J<Ne&&(J=Ne),E&&(J=N.round(J)),Ge.setRelative(We,Qe,re*J,ot),Ge.touch(We),h.DEBUG&&console.log(N.step,(y?"MIRP[":"MDRP[")+(x?"M":"m")+(M?">":"_")+(E?"R":"_")+(C===0?"Gr":C===1?"Bl":C===2?"Wh":"")+"]",y?Re+"("+N.cvt[Re]+","+fe+")":"",le,"(d =",z,"->",re*J,")"),N.rp1=N.rp0,N.rp2=le,x&&(N.rp0=le)}ql.prototype.exec=function(y,x){if(typeof x!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var M=this.font,E=this._prepState;if(!E||E.ppem!==x){var C=this._fpgmState;if(!C){_n.prototype=vd,(C=this._fpgmState=new _n("fpgm",M.tables.fpgm)).funcs=[],C.font=M,h.DEBUG&&(console.log("---EXEC FPGM---"),C.step=-1);try{Gn(C)}catch(fe){return console.log("Hinting error in FPGM:"+fe),void(this._errorState=3)}}_n.prototype=C,(E=this._prepState=new _n("prep",M.tables.prep)).ppem=x;var N=M.tables.cvt;if(N)for(var z=E.cvt=new Array(N.length),J=x/M.unitsPerEm,re=0;re<N.length;re++)z[re]=N[re]*J;else E.cvt=[];h.DEBUG&&(console.log("---EXEC PREP---"),E.step=-1);try{Gn(E)}catch(fe){this._errorState<2&&console.log("Hinting error in PREP:"+fe),this._errorState=2}}if(!(1<this._errorState))try{return Hl(y,E)}catch(fe){return this._errorState<1&&(console.log("Hinting error:"+fe),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},Hl=function(y,x){var M,E,C,N=x.ppem/x.font.unitsPerEm,z=N,J=y.components;if(_n.prototype=x,J){var re=x.font;E=[],M=[];for(var fe=0;fe<J.length;fe++){var Te=J[fe],Re=re.glyphs.get(Te.glyphIndex);C=new _n("glyf",Re.instructions),h.DEBUG&&(console.log("---EXEC COMP "+fe+"---"),C.step=-1),qo(Re,C,N,z);for(var le=Math.round(Te.dx*N),et=Math.round(Te.dy*z),Qe=C.gZone,We=C.contours,Ne=0;Ne<Qe.length;Ne++){var Ge=Qe[Ne];Ge.xTouched=Ge.yTouched=!1,Ge.xo=Ge.x=Ge.x+le,Ge.yo=Ge.y=Ge.y+et}var ot=E.length;E.push.apply(E,Qe);for(var st=0;st<We.length;st++)M.push(We[st]+ot)}y.instructions&&!C.inhibitGridFit&&((C=new _n("glyf",y.instructions)).gZone=C.z0=C.z1=C.z2=E,C.contours=M,E.push(new on(0,0),new on(Math.round(y.advanceWidth*N),0)),h.DEBUG&&(console.log("---EXEC COMPOSITE---"),C.step=-1),Gn(C),E.length-=2)}else C=new _n("glyf",y.instructions),h.DEBUG&&(console.log("---EXEC GLYPH---"),C.step=-1),qo(y,C,N,z),E=C.gZone;return E},qo=function(y,x,M,E){for(var C,N,z,J=y.points||[],re=J.length,fe=x.gZone=x.z0=x.z1=x.z2=[],Te=x.contours=[],Re=0;Re<re;Re++)C=J[Re],fe[Re]=new on(C.x*M,C.y*E,C.lastPointOfContour,C.onCurve);for(var le=0;le<re;le++)C=fe[le],N||(N=C,Te.push(le)),C.lastPointOfContour?((C.nextPointOnContour=N).prevPointOnContour=C,N=void 0):(z=fe[le+1],(C.nextPointOnContour=z).prevPointOnContour=C);if(!x.inhibitGridFit){if(h.DEBUG){console.log("PROCESSING GLYPH",x.stack);for(var et=0;et<re;et++)console.log(et,fe[et].x,fe[et].y)}if(fe.push(new on(0,0),new on(Math.round(y.advanceWidth*M),0)),Gn(x),fe.length-=2,h.DEBUG){console.log("FINISHED GLYPH",x.stack);for(var Qe=0;Qe<re;Qe++)console.log(Qe,fe[Qe].x,fe[Qe].y)}}},Gn=function(y){var x=y.prog;if(x){var M,E=x.length;for(y.ip=0;y.ip<E;y.ip++){if(h.DEBUG&&y.step++,!(M=Vl[x[y.ip]]))throw new Error("unknown instruction: 0x"+Number(x[y.ip]).toString(16));M(y)}}},Vl=[Kl.bind(void 0,sn),Kl.bind(void 0,Zr),Jl.bind(void 0,sn),Jl.bind(void 0,Zr),Ql.bind(void 0,sn),Ql.bind(void 0,Zr),$l.bind(void 0,0),$l.bind(void 0,1),eu.bind(void 0,0),eu.bind(void 0,1),function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"SPVFS[]",M,E),y.pv=y.dpv=ns(E,M)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"SPVFS[]",M,E),y.fv=ns(E,M)},function(y){var x=y.stack,M=y.pv;h.DEBUG&&console.log(y.step,"GPV[]"),x.push(16384*M.x),x.push(16384*M.y)},function(y){var x=y.stack,M=y.fv;h.DEBUG&&console.log(y.step,"GFV[]"),x.push(16384*M.x),x.push(16384*M.y)},function(y){y.fv=y.pv,h.DEBUG&&console.log(y.step,"SFVTPV[]")},function(y){var x=y.stack,M=x.pop(),E=x.pop(),C=x.pop(),N=x.pop(),z=x.pop(),J=y.z0,re=y.z1,fe=J[M],Te=J[E],Re=re[C],le=re[N],et=y.z2[z];h.DEBUG&&console.log("ISECT[], ",M,E,C,N,z);var Qe=fe.x,We=fe.y,Ne=Te.x,Ge=Te.y,ot=Re.x,st=Re.y,Et=le.x,ft=le.y,mt=(Qe-Ne)*(st-ft)-(We-Ge)*(ot-Et),Kt=Qe*Ge-We*Ne,Rt=ot*ft-st*Et;et.x=(Kt*(ot-Et)-Rt*(Qe-Ne))/mt,et.y=(Kt*(st-ft)-Rt*(We-Ge))/mt},function(y){y.rp0=y.stack.pop(),h.DEBUG&&console.log(y.step,"SRP0[]",y.rp0)},function(y){y.rp1=y.stack.pop(),h.DEBUG&&console.log(y.step,"SRP1[]",y.rp1)},function(y){y.rp2=y.stack.pop(),h.DEBUG&&console.log(y.step,"SRP2[]",y.rp2)},function(y){var x=y.stack.pop();switch(h.DEBUG&&console.log(y.step,"SZP0[]",x),y.zp0=x){case 0:y.tZone||Us(y),y.z0=y.tZone;break;case 1:y.z0=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var x=y.stack.pop();switch(h.DEBUG&&console.log(y.step,"SZP1[]",x),y.zp1=x){case 0:y.tZone||Us(y),y.z1=y.tZone;break;case 1:y.z1=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var x=y.stack.pop();switch(h.DEBUG&&console.log(y.step,"SZP2[]",x),y.zp2=x){case 0:y.tZone||Us(y),y.z2=y.tZone;break;case 1:y.z2=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var x=y.stack.pop();switch(h.DEBUG&&console.log(y.step,"SZPS[]",x),y.zp0=y.zp1=y.zp2=x,x){case 0:y.tZone||Us(y),y.z0=y.z1=y.z2=y.tZone;break;case 1:y.z0=y.z1=y.z2=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){y.loop=y.stack.pop(),h.DEBUG&&console.log(y.step,"SLOOP[]",y.loop)},function(y){h.DEBUG&&console.log(y.step,"RTG[]"),y.round=Xl},function(y){h.DEBUG&&console.log(y.step,"RTHG[]"),y.round=md},function(y){var x=y.stack.pop();h.DEBUG&&console.log(y.step,"SMD[]",x),y.minDis=x/64},function(y){h.DEBUG&&console.log(y.step,"ELSE[]"),Zl(y,!1)},function(y){var x=y.stack.pop();h.DEBUG&&console.log(y.step,"JMPR[]",x),y.ip+=x-1},function(y){var x=y.stack.pop();h.DEBUG&&console.log(y.step,"SCVTCI[]",x),y.cvCutIn=x/64},void 0,void 0,function(y){var x=y.stack;h.DEBUG&&console.log(y.step,"DUP[]"),x.push(x[x.length-1])},Xo,function(y){h.DEBUG&&console.log(y.step,"CLEAR[]"),y.stack.length=0},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"SWAP[]"),x.push(M),x.push(E)},function(y){var x=y.stack;h.DEBUG&&console.log(y.step,"DEPTH[]"),x.push(x.length)},function(y){var x=y.stack,M=x.pop();h.DEBUG&&console.log(y.step,"CINDEX[]",M),x.push(x[x.length-M])},function(y){var x=y.stack,M=x.pop();h.DEBUG&&console.log(y.step,"MINDEX[]",M),x.push(x.splice(x.length-M,1)[0])},void 0,void 0,void 0,function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"LOOPCALL[]",M,E);var C=y.ip,N=y.prog;y.prog=y.funcs[M];for(var z=0;z<E;z++)Gn(y),h.DEBUG&&console.log(++y.step,z+1<E?"next loopcall":"done loopcall",z);y.ip=C,y.prog=N},function(y){var x=y.stack.pop();h.DEBUG&&console.log(y.step,"CALL[]",x);var M=y.ip,E=y.prog;y.prog=y.funcs[x],Gn(y),y.ip=M,y.prog=E,h.DEBUG&&console.log(++y.step,"returning from",x)},function(y){if(y.env!=="fpgm")throw new Error("FDEF not allowed here");var x=y.stack,M=y.prog,E=y.ip,C=x.pop(),N=E;for(h.DEBUG&&console.log(y.step,"FDEF[]",C);M[++E]!==45;);y.ip=E,y.funcs[C]=M.slice(N+1,E)},void 0,tu.bind(void 0,0),tu.bind(void 0,1),ru.bind(void 0,sn),ru.bind(void 0,Zr),nu.bind(void 0,0),nu.bind(void 0,1),iu.bind(void 0,0),iu.bind(void 0,1),su.bind(void 0,0),su.bind(void 0,1),function(y){for(var x=y.stack,M=y.loop,E=y.fv,C=x.pop()/64,N=y.z2;M--;){var z=x.pop(),J=N[z];h.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-M)+": ":"")+"SHPIX[]",z,C),E.setRelative(J,J,C),E.touch(J)}y.loop=1},function(y){for(var x=y.stack,M=y.rp1,E=y.rp2,C=y.loop,N=y.z0[M],z=y.z1[E],J=y.fv,re=y.dpv,fe=y.z2;C--;){var Te=x.pop(),Re=fe[Te];h.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-C)+": ":"")+"IP[]",Te,M,"<->",E),J.interpolate(Re,N,z,re),J.touch(Re)}y.loop=1},ou.bind(void 0,0),ou.bind(void 0,1),function(y){for(var x=y.stack,M=y.rp0,E=y.z0[M],C=y.loop,N=y.fv,z=y.pv,J=y.z1;C--;){var re=x.pop(),fe=J[re];h.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-C)+": ":"")+"ALIGNRP[]",re),N.setRelative(fe,E,0,z),N.touch(fe)}y.loop=1},function(y){h.DEBUG&&console.log(y.step,"RTDG[]"),y.round=pd},au.bind(void 0,0),au.bind(void 0,1),function(y){var x=y.prog,M=y.ip,E=y.stack,C=x[++M];h.DEBUG&&console.log(y.step,"NPUSHB[]",C);for(var N=0;N<C;N++)E.push(x[++M]);y.ip=M},function(y){var x=y.ip,M=y.prog,E=y.stack,C=M[++x];h.DEBUG&&console.log(y.step,"NPUSHW[]",C);for(var N=0;N<C;N++){var z=M[++x]<<8|M[++x];32768&z&&(z=-(1+(65535^z))),E.push(z)}y.ip=x},function(y){var x=y.stack,M=y.store;M=M||(y.store=[]);var E=x.pop(),C=x.pop();h.DEBUG&&console.log(y.step,"WS",E,C),M[C]=E},function(y){var x=y.stack,M=y.store,E=x.pop();h.DEBUG&&console.log(y.step,"RS",E);var C=M&&M[E]||0;x.push(C)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"WCVTP",M,E),y.cvt[E]=M/64},function(y){var x=y.stack,M=x.pop();h.DEBUG&&console.log(y.step,"RCVT",M),x.push(64*y.cvt[M])},lu.bind(void 0,0),lu.bind(void 0,1),void 0,uu.bind(void 0,0),uu.bind(void 0,1),function(y){h.DEBUG&&console.log(y.step,"MPPEM[]"),y.stack.push(y.ppem)},void 0,function(y){h.DEBUG&&console.log(y.step,"FLIPON[]"),y.autoFlip=!0},void 0,void 0,function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"LT[]",M,E),x.push(E<M?1:0)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"LTEQ[]",M,E),x.push(E<=M?1:0)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"GT[]",M,E),x.push(M<E?1:0)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"GTEQ[]",M,E),x.push(M<=E?1:0)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"EQ[]",M,E),x.push(M===E?1:0)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"NEQ[]",M,E),x.push(M!==E?1:0)},function(y){var x=y.stack,M=x.pop();h.DEBUG&&console.log(y.step,"ODD[]",M),x.push(Math.trunc(M)%2?1:0)},function(y){var x=y.stack,M=x.pop();h.DEBUG&&console.log(y.step,"EVEN[]",M),x.push(Math.trunc(M)%2?0:1)},function(y){var x=y.stack.pop();h.DEBUG&&console.log(y.step,"IF[]",x),x||(Zl(y,!0),h.DEBUG&&console.log(y.step,"EIF[]"))},function(y){h.DEBUG&&console.log(y.step,"EIF[]")},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"AND[]",M,E),x.push(M&&E?1:0)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"OR[]",M,E),x.push(M||E?1:0)},function(y){var x=y.stack,M=x.pop();h.DEBUG&&console.log(y.step,"NOT[]",M),x.push(M?0:1)},Yo.bind(void 0,1),function(y){var x=y.stack.pop();h.DEBUG&&console.log(y.step,"SDB[]",x),y.deltaBase=x},function(y){var x=y.stack.pop();h.DEBUG&&console.log(y.step,"SDS[]",x),y.deltaShift=Math.pow(.5,x)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"ADD[]",M,E),x.push(E+M)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"SUB[]",M,E),x.push(E-M)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"DIV[]",M,E),x.push(64*E/M)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"MUL[]",M,E),x.push(E*M/64)},function(y){var x=y.stack,M=x.pop();h.DEBUG&&console.log(y.step,"ABS[]",M),x.push(Math.abs(M))},function(y){var x=y.stack,M=x.pop();h.DEBUG&&console.log(y.step,"NEG[]",M),x.push(-M)},function(y){var x=y.stack,M=x.pop();h.DEBUG&&console.log(y.step,"FLOOR[]",M),x.push(64*Math.floor(M/64))},function(y){var x=y.stack,M=x.pop();h.DEBUG&&console.log(y.step,"CEILING[]",M),x.push(64*Math.ceil(M/64))},Bs.bind(void 0,0),Bs.bind(void 0,1),Bs.bind(void 0,2),Bs.bind(void 0,3),void 0,void 0,void 0,void 0,function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"WCVTF[]",M,E),y.cvt[E]=M*y.ppem/y.font.unitsPerEm},Yo.bind(void 0,2),Yo.bind(void 0,3),Zo.bind(void 0,1),Zo.bind(void 0,2),Zo.bind(void 0,3),function(y){var x,M=y.stack.pop();switch(h.DEBUG&&console.log(y.step,"SROUND[]",M),y.round=Yl,192&M){case 0:x=.5;break;case 64:x=1;break;case 128:x=2;break;default:throw new Error("invalid SROUND value")}switch(y.srPeriod=x,48&M){case 0:y.srPhase=0;break;case 16:y.srPhase=.25*x;break;case 32:y.srPhase=.5*x;break;case 48:y.srPhase=.75*x;break;default:throw new Error("invalid SROUND value")}M&=15,y.srThreshold=M===0?0:(M/8-.5)*x},function(y){var x,M=y.stack.pop();switch(h.DEBUG&&console.log(y.step,"S45ROUND[]",M),y.round=Yl,192&M){case 0:x=Math.sqrt(2)/2;break;case 64:x=Math.sqrt(2);break;case 128:x=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(y.srPeriod=x,48&M){case 0:y.srPhase=0;break;case 16:y.srPhase=.25*x;break;case 32:y.srPhase=.5*x;break;case 48:y.srPhase=.75*x;break;default:throw new Error("invalid S45ROUND value")}M&=15,y.srThreshold=M===0?0:(M/8-.5)*x},void 0,void 0,function(y){h.DEBUG&&console.log(y.step,"ROFF[]"),y.round=fd},void 0,function(y){h.DEBUG&&console.log(y.step,"RUTG[]"),y.round=gd},function(y){h.DEBUG&&console.log(y.step,"RDTG[]"),y.round=yd},Xo,Xo,void 0,void 0,void 0,void 0,void 0,function(y){var x=y.stack.pop();h.DEBUG&&console.log(y.step,"SCANCTRL[]",x)},cu.bind(void 0,0),cu.bind(void 0,1),function(y){var x=y.stack,M=x.pop(),E=0;h.DEBUG&&console.log(y.step,"GETINFO[]",M),1&M&&(E=35),32&M&&(E|=4096),x.push(E)},void 0,function(y){var x=y.stack,M=x.pop(),E=x.pop(),C=x.pop();h.DEBUG&&console.log(y.step,"ROLL[]"),x.push(E),x.push(M),x.push(C)},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"MAX[]",M,E),x.push(Math.max(E,M))},function(y){var x=y.stack,M=x.pop(),E=x.pop();h.DEBUG&&console.log(y.step,"MIN[]",M,E),x.push(Math.min(E,M))},function(y){var x=y.stack.pop();h.DEBUG&&console.log(y.step,"SCANTYPE[]",x)},function(y){var x=y.stack.pop(),M=y.stack.pop();switch(h.DEBUG&&console.log(y.step,"INSTCTRL[]",x,M),x){case 1:return void(y.inhibitGridFit=!!M);case 2:return void(y.ignoreCvt=!!M);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,xn.bind(void 0,1),xn.bind(void 0,2),xn.bind(void 0,3),xn.bind(void 0,4),xn.bind(void 0,5),xn.bind(void 0,6),xn.bind(void 0,7),xn.bind(void 0,8),wn.bind(void 0,1),wn.bind(void 0,2),wn.bind(void 0,3),wn.bind(void 0,4),wn.bind(void 0,5),wn.bind(void 0,6),wn.bind(void 0,7),wn.bind(void 0,8),ct.bind(void 0,0,0,0,0,0),ct.bind(void 0,0,0,0,0,1),ct.bind(void 0,0,0,0,0,2),ct.bind(void 0,0,0,0,0,3),ct.bind(void 0,0,0,0,1,0),ct.bind(void 0,0,0,0,1,1),ct.bind(void 0,0,0,0,1,2),ct.bind(void 0,0,0,0,1,3),ct.bind(void 0,0,0,1,0,0),ct.bind(void 0,0,0,1,0,1),ct.bind(void 0,0,0,1,0,2),ct.bind(void 0,0,0,1,0,3),ct.bind(void 0,0,0,1,1,0),ct.bind(void 0,0,0,1,1,1),ct.bind(void 0,0,0,1,1,2),ct.bind(void 0,0,0,1,1,3),ct.bind(void 0,0,1,0,0,0),ct.bind(void 0,0,1,0,0,1),ct.bind(void 0,0,1,0,0,2),ct.bind(void 0,0,1,0,0,3),ct.bind(void 0,0,1,0,1,0),ct.bind(void 0,0,1,0,1,1),ct.bind(void 0,0,1,0,1,2),ct.bind(void 0,0,1,0,1,3),ct.bind(void 0,0,1,1,0,0),ct.bind(void 0,0,1,1,0,1),ct.bind(void 0,0,1,1,0,2),ct.bind(void 0,0,1,1,0,3),ct.bind(void 0,0,1,1,1,0),ct.bind(void 0,0,1,1,1,1),ct.bind(void 0,0,1,1,1,2),ct.bind(void 0,0,1,1,1,3),ct.bind(void 0,1,0,0,0,0),ct.bind(void 0,1,0,0,0,1),ct.bind(void 0,1,0,0,0,2),ct.bind(void 0,1,0,0,0,3),ct.bind(void 0,1,0,0,1,0),ct.bind(void 0,1,0,0,1,1),ct.bind(void 0,1,0,0,1,2),ct.bind(void 0,1,0,0,1,3),ct.bind(void 0,1,0,1,0,0),ct.bind(void 0,1,0,1,0,1),ct.bind(void 0,1,0,1,0,2),ct.bind(void 0,1,0,1,0,3),ct.bind(void 0,1,0,1,1,0),ct.bind(void 0,1,0,1,1,1),ct.bind(void 0,1,0,1,1,2),ct.bind(void 0,1,0,1,1,3),ct.bind(void 0,1,1,0,0,0),ct.bind(void 0,1,1,0,0,1),ct.bind(void 0,1,1,0,0,2),ct.bind(void 0,1,1,0,0,3),ct.bind(void 0,1,1,0,1,0),ct.bind(void 0,1,1,0,1,1),ct.bind(void 0,1,1,0,1,2),ct.bind(void 0,1,1,0,1,3),ct.bind(void 0,1,1,1,0,0),ct.bind(void 0,1,1,1,0,1),ct.bind(void 0,1,1,1,0,2),ct.bind(void 0,1,1,1,0,3),ct.bind(void 0,1,1,1,1,0),ct.bind(void 0,1,1,1,1,1),ct.bind(void 0,1,1,1,1,2),ct.bind(void 0,1,1,1,1,3)];var bd=Array.from||function(y){return y.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Ht(y){(y=y||{}).empty||(hi(y.familyName,"When creating a new Font object, familyName is required."),hi(y.styleName,"When creating a new Font object, styleName is required."),hi(y.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),hi(y.ascender,"When creating a new Font object, ascender is required."),hi(y.descender,"When creating a new Font object, descender is required."),hi(y.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:y.familyName||" "},fontSubfamily:{en:y.styleName||" "},fullName:{en:y.fullName||y.familyName+" "+y.styleName},postScriptName:{en:y.postScriptName||(y.familyName+y.styleName).replace(/\s/g,"")},designer:{en:y.designer||" "},designerURL:{en:y.designerURL||" "},manufacturer:{en:y.manufacturer||" "},manufacturerURL:{en:y.manufacturerURL||" "},license:{en:y.license||" "},licenseURL:{en:y.licenseURL||" "},version:{en:y.version||"Version 0.1"},description:{en:y.description||" "},copyright:{en:y.copyright||" "},trademark:{en:y.trademark||" "}},this.unitsPerEm=y.unitsPerEm||1e3,this.ascender=y.ascender,this.descender=y.descender,this.createdTimestamp=y.createdTimestamp,this.tables={os2:{usWeightClass:y.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:y.widthClass||this.usWidthClasses.MEDIUM,fsSelection:y.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new gt.GlyphSet(this,y.glyphs||[]),this.encoding=new Se(this),this.position=new Fs(this),this.substitution=new Yr(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:this.outlinesFormat==="truetype"?this._hinting=new ql(this):void 0}})}function hu(y,x){var M=JSON.stringify(y),E=256;for(var C in x){var N=parseInt(C);if(N&&!(N<256)){if(JSON.stringify(x[C])===M)return N;E<=N&&(E=N+1)}}return x[E]=y,E}function _d(y,x,M,E){for(var C=[{name:"nameID_"+y,type:"USHORT",value:hu(x.name,E)},{name:"flags_"+y,type:"USHORT",value:0}],N=0;N<M.length;++N){var z=M[N].tag;C.push({name:"axis_"+y+" "+z,type:"FIXED",value:x.coordinates[z]<<16})}return C}function xd(y,x,M,E){var C={},N=new O.Parser(y,x);C.name=E[N.parseUShort()]||{},N.skip("uShort",1),C.coordinates={};for(var z=0;z<M.length;++z)C.coordinates[M[z].tag]=N.parseFixed();return C}Ht.prototype.hasChar=function(y){return this.encoding.charToGlyphIndex(y)!==null},Ht.prototype.charToGlyphIndex=function(y){return this.encoding.charToGlyphIndex(y)},Ht.prototype.charToGlyph=function(y){var x=this.charToGlyphIndex(y),M=this.glyphs.get(x);return M=M||this.glyphs.get(0)},Ht.prototype.stringToGlyphs=function(y,x){x=x||this.defaultRenderOptions;for(var M=bd(y),E=[],C=0;C<M.length;C+=1){var N=M[C];E.push(this.charToGlyphIndex(N))}var z=E.length;if(x.features){var J=x.script||this.substitution.getDefaultScriptName(),re=[];x.features.liga&&(re=re.concat(this.substitution.getFeature("liga",J,x.language))),x.features.rlig&&(re=re.concat(this.substitution.getFeature("rlig",J,x.language)));for(var fe=0;fe<z;fe+=1)for(var Te=0;Te<re.length;Te++){for(var Re=re[Te],le=Re.sub,et=le.length,Qe=0;Qe<et&&le[Qe]===E[fe+Qe];)Qe++;Qe===et&&(E.splice(fe,et,Re.by),z=z-et+1)}}for(var We=new Array(z),Ne=this.glyphs.get(0),Ge=0;Ge<z;Ge+=1)We[Ge]=this.glyphs.get(E[Ge])||Ne;return We},Ht.prototype.nameToGlyphIndex=function(y){return this.glyphNames.nameToGlyphIndex(y)},Ht.prototype.nameToGlyph=function(y){var x=this.nameToGlyphIndex(y),M=this.glyphs.get(x);return M=M||this.glyphs.get(0)},Ht.prototype.glyphIndexToName=function(y){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(y):""},Ht.prototype.getKerningValue=function(y,x){y=y.index||y,x=x.index||x;var M=this.position.defaultKerningTables;return M?this.position.getKerningValue(M,y,x):this.kerningPairs[y+","+x]||0},Ht.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Ht.prototype.forEachGlyph=function(y,x,M,E,C,N){x=x!==void 0?x:0,M=M!==void 0?M:0,E=E!==void 0?E:72,C=C||this.defaultRenderOptions;var z,J=1/this.unitsPerEm*E,re=this.stringToGlyphs(y,C);if(C.kerning){var fe=C.script||this.position.getDefaultScriptName();z=this.position.getKerningTables(fe,C.language)}for(var Te=0;Te<re.length;Te+=1){var Re=re[Te];N.call(this,Re,x,M,E,C),Re.advanceWidth&&(x+=Re.advanceWidth*J),C.kerning&&Te<re.length-1&&(x+=(z?this.position.getKerningValue(z,Re.index,re[Te+1].index):this.getKerningValue(Re,re[Te+1]))*J),C.letterSpacing?x+=C.letterSpacing*E:C.tracking&&(x+=C.tracking/1e3*E)}return x},Ht.prototype.getPath=function(y,x,M,E,C){var N=new se;return this.forEachGlyph(y,x,M,E,C,function(z,J,re,fe){var Te=z.getPath(J,re,fe,C,this);N.extend(Te)}),N},Ht.prototype.getPaths=function(y,x,M,E,C){var N=[];return this.forEachGlyph(y,x,M,E,C,function(z,J,re,fe){var Te=z.getPath(J,re,fe,C,this);N.push(Te)}),N},Ht.prototype.getAdvanceWidth=function(y,x,M){return this.forEachGlyph(y,0,0,x,M,function(){})},Ht.prototype.draw=function(y,x,M,E,C,N){this.getPath(x,M,E,C,N).draw(y)},Ht.prototype.drawPoints=function(y,x,M,E,C,N){this.forEachGlyph(x,M,E,C,N,function(z,J,re,fe){z.drawPoints(y,J,re,fe)})},Ht.prototype.drawMetrics=function(y,x,M,E,C,N){this.forEachGlyph(x,M,E,C,N,function(z,J,re,fe){z.drawMetrics(y,J,re,fe)})},Ht.prototype.getEnglishName=function(y){var x=this.names[y];if(x)return x.en},Ht.prototype.validate=function(){var y=this;function x(M){var E=y.getEnglishName(M);E&&E.trim().length}x("fontFamily"),x("weightName"),x("manufacturer"),x("copyright"),x("version"),this.unitsPerEm},Ht.prototype.toTables=function(){return ud.fontToTable(this)},Ht.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Ht.prototype.toArrayBuffer=function(){for(var y=this.toTables().encode(),x=new ArrayBuffer(y.length),M=new Uint8Array(x),E=0;E<y.length;E++)M[E]=y[E];return x},Ht.prototype.download=function(y){var x=this.getEnglishName("fontFamily"),M=this.getEnglishName("fontSubfamily");y=y||x.replace(/\s/g,"")+"-"+M+".otf";var E=this.toArrayBuffer();if(typeof window!="undefined")window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,E.byteLength,function(z){z.root.getFile(y,{create:!0},function(J){J.createWriter(function(re){var fe=new DataView(E),Te=new Blob([fe],{type:"font/opentype"});re.write(Te),re.addEventListener("writeend",function(){location.href=J.toURL()},!1)})})},function(z){throw new Error(z.name+": "+z.message)});else{var C=t("fs"),N=function(z){for(var J=new c(z.byteLength),re=new Uint8Array(z),fe=0;fe<J.length;++fe)J[fe]=re[fe];return J}(E);C.writeFileSync(y,N)}},Ht.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Ht.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Ht.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var wd={make:function(y,x){var M,E,C,N,z=new De.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:y.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:y.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*y.axes.length}]);z.offsetToData=z.sizeOf();for(var J=0;J<y.axes.length;J++)z.fields=z.fields.concat((M=J,E=y.axes[J],C=x,N=hu(E.name,C),[{name:"tag_"+M,type:"TAG",value:E.tag},{name:"minValue_"+M,type:"FIXED",value:E.minValue<<16},{name:"defaultValue_"+M,type:"FIXED",value:E.defaultValue<<16},{name:"maxValue_"+M,type:"FIXED",value:E.maxValue<<16},{name:"flags_"+M,type:"USHORT",value:0},{name:"nameID_"+M,type:"USHORT",value:N}]));for(var re=0;re<y.instances.length;re++)z.fields=z.fields.concat(_d(re,y.instances[re],y.axes,x));return z},parse:function(y,x,M){var E=new O.Parser(y,x),C=E.parseULong();de.argument(C===65536,"Unsupported fvar table version.");var N=E.parseOffset16();E.skip("uShort",1);for(var z,J,re,fe,Te,Re=E.parseUShort(),le=E.parseUShort(),et=E.parseUShort(),Qe=E.parseUShort(),We=[],Ne=0;Ne<Re;Ne++)We.push((z=y,J=x+N+Ne*le,re=M,Te=fe=void 0,fe={},Te=new O.Parser(z,J),fe.tag=Te.parseTag(),fe.minValue=Te.parseFixed(),fe.defaultValue=Te.parseFixed(),fe.maxValue=Te.parseFixed(),Te.skip("uShort",1),fe.name=re[Te.parseUShort()]||{},fe));for(var Ge=[],ot=x+N+Re*le,st=0;st<et;st++)Ge.push(xd(y,ot+st*Qe,We,M));return{axes:We,instances:Ge}}},Gr=new Array(10);Gr[1]=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();return x===1?{posFormat:1,coverage:this.parsePointer(be.coverage),value:this.parseValueRecord()}:x===2?{posFormat:2,coverage:this.parsePointer(be.coverage),values:this.parseValueRecordList()}:void de.assert(!1,"0x"+y.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Gr[2]=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();de.assert(x===1||x===2,"0x"+y.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var M=this.parsePointer(be.coverage),E=this.parseUShort(),C=this.parseUShort();if(x===1)return{posFormat:x,coverage:M,valueFormat1:E,valueFormat2:C,pairSets:this.parseList(be.pointer(be.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(E),value2:this.parseValueRecord(C)}})))};if(x===2){var N=this.parsePointer(be.classDef),z=this.parsePointer(be.classDef),J=this.parseUShort(),re=this.parseUShort();return{posFormat:x,coverage:M,valueFormat1:E,valueFormat2:C,classDef1:N,classDef2:z,class1Count:J,class2Count:re,classRecords:this.parseList(J,be.list(re,function(){return{value1:this.parseValueRecord(E),value2:this.parseValueRecord(C)}}))}}},Gr[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Gr[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Gr[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Gr[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Gr[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Gr[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Gr[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Sd=new Array(10),Md={parse:function(y,x){var M=new be(y,x=x||0),E=M.parseVersion(1);return de.argument(E===1||E===1.1,"Unsupported GPOS table version "+E),E===1?{version:E,scripts:M.parseScriptList(),features:M.parseFeatureList(),lookups:M.parseLookupList(Gr)}:{version:E,scripts:M.parseScriptList(),features:M.parseFeatureList(),lookups:M.parseLookupList(Gr),variations:M.parseFeatureVariationsList()}},make:function(y){return new De.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new De.ScriptList(y.scripts)},{name:"features",type:"TABLE",value:new De.FeatureList(y.features)},{name:"lookups",type:"TABLE",value:new De.LookupList(y.lookups,Sd)}])}},Td={parse:function(y,x){var M=new O.Parser(y,x),E=M.parseUShort();if(E===0)return function(C){var N={};C.skip("uShort");var z=C.parseUShort();de.argument(z===0,"Unsupported kern sub-table version."),C.skip("uShort",2);var J=C.parseUShort();C.skip("uShort",3);for(var re=0;re<J;re+=1){var fe=C.parseUShort(),Te=C.parseUShort(),Re=C.parseShort();N[fe+","+Te]=Re}return N}(M);if(E===1)return function(C){var N={};C.skip("uShort"),1<C.parseULong()&&console.warn("Only the first kern subtable is supported."),C.skip("uLong");var z=255&C.parseUShort();if(C.skip("uShort"),z==0){var J=C.parseUShort();C.skip("uShort",3);for(var re=0;re<J;re+=1){var fe=C.parseUShort(),Te=C.parseUShort(),Re=C.parseShort();N[fe+","+Te]=Re}}return N}(M);throw new Error("Unsupported kern table version ("+E+").")}},Ed={parse:function(y,x,M,E){for(var C=new O.Parser(y,x),N=E?C.parseUShort:C.parseULong,z=[],J=0;J<M+1;J+=1){var re=N.call(C);E&&(re*=2),z.push(re)}return z}};function Ad(y,x){t("fs").readFile(y,function(M,E){if(M)return x(M.message);x(null,Bl(E))})}function Ld(y,x){var M=new XMLHttpRequest;M.open("get",y,!0),M.responseType="arraybuffer",M.onload=function(){return M.response?x(null,M.response):x("Font could not be loaded: "+M.statusText)},M.onerror=function(){x("Font could not be loaded")},M.send()}function du(y,x){for(var M=[],E=12,C=0;C<x;C+=1){var N=O.getTag(y,E),z=O.getULong(y,E+4),J=O.getULong(y,E+8),re=O.getULong(y,E+12);M.push({tag:N,checksum:z,offset:J,length:re,compression:!1}),E+=16}return M}function ir(y,x){if(x.compression!=="WOFF")return{data:y,offset:x.offset};var M=new Uint8Array(y.buffer,x.offset+2,x.compressedLength-2),E=new Uint8Array(x.length);if(W(M,E),E.byteLength!==x.length)throw new Error("Decompression error: "+x.tag+" decompressed length doesn't match recorded length");return{data:new DataView(E.buffer,0),offset:0}}function Ko(y){var x,M,E,C,N,z,J,re,fe,Te,Re,le,et,Qe,We=new Ht({empty:!0}),Ne=new DataView(y,0),Ge=[],ot=O.getTag(Ne,0);if(ot===String.fromCharCode(0,1,0,0)||ot==="true"||ot==="typ1")We.outlinesFormat="truetype",Ge=du(Ne,E=O.getUShort(Ne,4));else if(ot==="OTTO")We.outlinesFormat="cff",Ge=du(Ne,E=O.getUShort(Ne,4));else{if(ot!=="wOFF")throw new Error("Unsupported OpenType signature "+ot);var st=O.getTag(Ne,4);if(st===String.fromCharCode(0,1,0,0))We.outlinesFormat="truetype";else{if(st!=="OTTO")throw new Error("Unsupported OpenType flavor "+ot);We.outlinesFormat="cff"}Ge=function(It,rr){for(var Wt=[],qt=44,Kr=0;Kr<rr;Kr+=1){var di=O.getTag(It,qt),zn=O.getULong(It,qt+4),Cr=O.getULong(It,qt+8),Vn=O.getULong(It,qt+12),fi=void 0;fi=Cr<Vn&&"WOFF",Wt.push({tag:di,offset:zn,compression:fi,compressedLength:Cr,length:Vn}),qt+=20}return Wt}(Ne,E=O.getUShort(Ne,12))}for(var Et=0;Et<E;Et+=1){var ft=Ge[Et],mt=void 0;switch(ft.tag){case"cmap":mt=ir(Ne,ft),We.tables.cmap=H.parse(mt.data,mt.offset),We.encoding=new ke(We.tables.cmap);break;case"cvt ":mt=ir(Ne,ft),Qe=new O.Parser(mt.data,mt.offset),We.tables.cvt=Qe.parseShortList(ft.length/2);break;case"fvar":N=ft;break;case"fpgm":mt=ir(Ne,ft),Qe=new O.Parser(mt.data,mt.offset),We.tables.fpgm=Qe.parseByteList(ft.length);break;case"head":mt=ir(Ne,ft),We.tables.head=rt.parse(mt.data,mt.offset),We.unitsPerEm=We.tables.head.unitsPerEm,x=We.tables.head.indexToLocFormat;break;case"hhea":mt=ir(Ne,ft),We.tables.hhea=Ve.parse(mt.data,mt.offset),We.ascender=We.tables.hhea.ascender,We.descender=We.tables.hhea.descender,We.numberOfHMetrics=We.tables.hhea.numberOfHMetrics;break;case"hmtx":fe=ft;break;case"ltag":mt=ir(Ne,ft),M=St.parse(mt.data,mt.offset);break;case"maxp":mt=ir(Ne,ft),We.tables.maxp=ht.parse(mt.data,mt.offset),We.numGlyphs=We.tables.maxp.numGlyphs;break;case"name":le=ft;break;case"OS/2":mt=ir(Ne,ft),We.tables.os2=zo.parse(mt.data,mt.offset);break;case"post":mt=ir(Ne,ft),We.tables.post=Rl.parse(mt.data,mt.offset),We.glyphNames=new Ye(We.tables.post);break;case"prep":mt=ir(Ne,ft),Qe=new O.Parser(mt.data,mt.offset),We.tables.prep=Qe.parseByteList(ft.length);break;case"glyf":z=ft;break;case"loca":Re=ft;break;case"CFF ":C=ft;break;case"kern":Te=ft;break;case"GPOS":J=ft;break;case"GSUB":re=ft;break;case"meta":et=ft}}var Kt=ir(Ne,le);if(We.tables.name=Cl.parse(Kt.data,Kt.offset,M),We.names=We.tables.name,z&&Re){var Rt=x===0,At=ir(Ne,Re),Pt=Ed.parse(At.data,At.offset,We.numGlyphs,Rt),Nt=ir(Ne,z);We.glyphs=Wl.parse(Nt.data,Nt.offset,Pt,We)}else{if(!C)throw new Error("Font doesn't contain TrueType or CFF outlines.");var jt=ir(Ne,C);He.parse(jt.data,jt.offset,We)}var Xt=ir(Ne,fe);if(Mt.parse(Xt.data,Xt.offset,We.numberOfHMetrics,We.numGlyphs,We.glyphs),function(It){for(var rr,Wt=It.tables.cmap.glyphIndexMap,qt=Object.keys(Wt),Kr=0;Kr<qt.length;Kr+=1){var di=qt[Kr],zn=Wt[di];(rr=It.glyphs.get(zn)).addUnicode(parseInt(di))}for(var Cr=0;Cr<It.glyphs.length;Cr+=1)rr=It.glyphs.get(Cr),It.cffEncoding?It.isCIDFont?rr.name="gid"+Cr:rr.name=It.cffEncoding.charset[Cr]:It.glyphNames.names&&(rr.name=It.glyphNames.glyphIndexToName(Cr))}(We),Te){var Ft=ir(Ne,Te);We.kerningPairs=Td.parse(Ft.data,Ft.offset)}else We.kerningPairs={};if(J){var Ot=ir(Ne,J);We.tables.gpos=Md.parse(Ot.data,Ot.offset),We.position.init()}if(re){var Yt=ir(Ne,re);We.tables.gsub=Pl.parse(Yt.data,Yt.offset)}if(N){var Gt=ir(Ne,N);We.tables.fvar=wd.parse(Gt.data,Gt.offset,We.names)}if(et){var $t=ir(Ne,et);We.tables.meta=Dl.parse($t.data,$t.offset),We.metas=We.tables.meta}return We}h.Font=Ht,h.Glyph=lt,h.Path=se,h.BoundingBox=Y,h._parse=O,h.parse=Ko,h.load=function(y,x){(typeof window=="undefined"?Ad:Ld)(y,function(M,E){if(M)return x(M);var C;try{C=Ko(E)}catch(N){return x(N,null)}return x(null,C)})},h.loadSync=function(y){return Ko(Bl(t("fs").readFileSync(y)))},Object.defineProperty(h,"__esModule",{value:!0})},f(typeof l=="object"&&a!==void 0?l:n.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],240:[function(t,a,l){(function(c){function n(m,p){for(var s=0,i=m.length-1;0<=i;i--){var o=m[i];o==="."?m.splice(i,1):o===".."?(m.splice(i,1),s++):s&&(m.splice(i,1),s--)}if(p)for(;s--;)m.unshift("..");return m}function f(m,p){if(m.filter)return m.filter(p);for(var s=[],i=0;i<m.length;i++)p(m[i],i,m)&&s.push(m[i]);return s}l.resolve=function(){for(var m="",p=!1,s=arguments.length-1;-1<=s&&!p;s--){var i=0<=s?arguments[s]:c.cwd();if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");i&&(m=i+"/"+m,p=i.charAt(0)==="/")}return(p?"/":"")+(m=n(f(m.split("/"),function(o){return!!o}),!p).join("/"))||"."},l.normalize=function(m){var p=l.isAbsolute(m),s=h(m,-1)==="/";return(m=n(f(m.split("/"),function(i){return!!i}),!p).join("/"))||p||(m="."),m&&s&&(m+="/"),(p?"/":"")+m},l.isAbsolute=function(m){return m.charAt(0)==="/"},l.join=function(){var m=Array.prototype.slice.call(arguments,0);return l.normalize(f(m,function(p,s){if(typeof p!="string")throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},l.relative=function(m,p){function s(_){for(var w=0;w<_.length&&_[w]==="";w++);for(var S=_.length-1;0<=S&&_[S]==="";S--);return S<w?[]:_.slice(w,S-w+1)}m=l.resolve(m).substr(1),p=l.resolve(p).substr(1);for(var i=s(m.split("/")),o=s(p.split("/")),d=Math.min(i.length,o.length),u=d,g=0;g<d;g++)if(i[g]!==o[g]){u=g;break}var b=[];for(g=u;g<i.length;g++)b.push("..");return(b=b.concat(o.slice(u))).join("/")},l.sep="/",l.delimiter=":",l.dirname=function(m){if(typeof m!="string"&&(m+=""),m.length===0)return".";for(var p=m.charCodeAt(0),s=p===47,i=-1,o=!0,d=m.length-1;1<=d;--d)if((p=m.charCodeAt(d))===47){if(!o){i=d;break}}else o=!1;return i===-1?s?"/":".":s&&i===1?"/":m.slice(0,i)},l.basename=function(m,p){var s=function(i){typeof i!="string"&&(i+="");var o,d=0,u=-1,g=!0;for(o=i.length-1;0<=o;--o)if(i.charCodeAt(o)===47){if(!g){d=o+1;break}}else u===-1&&(g=!1,u=o+1);return u===-1?"":i.slice(d,u)}(m);return p&&s.substr(-1*p.length)===p&&(s=s.substr(0,s.length-p.length)),s},l.extname=function(m){typeof m!="string"&&(m+="");for(var p=-1,s=0,i=-1,o=!0,d=0,u=m.length-1;0<=u;--u){var g=m.charCodeAt(u);if(g===47){if(o)continue;s=u+1;break}i===-1&&(o=!1,i=u+1),g===46?p===-1?p=u:d!==1&&(d=1):p!==-1&&(d=-1)}return p===-1||i===-1||d===0||d===1&&p===i-1&&p===s+1?"":m.slice(p,i)};var h="ab".substr(-1)==="b"?function(m,p,s){return m.substr(p,s)}:function(m,p,s){return p<0&&(p=m.length+p),m.substr(p,s)}}).call(this,t("_process"))},{_process:241}],241:[function(t,a,l){var c,n,f=a.exports={};function h(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}function p(w){if(c===setTimeout)return setTimeout(w,0);if((c===h||!c)&&setTimeout)return c=setTimeout,setTimeout(w,0);try{return c(w,0)}catch{try{return c.call(null,w,0)}catch{return c.call(this,w,0)}}}(function(){try{c=typeof setTimeout=="function"?setTimeout:h}catch{c=h}try{n=typeof clearTimeout=="function"?clearTimeout:m}catch{n=m}})();var s,i=[],o=!1,d=-1;function u(){o&&s&&(o=!1,s.length?i=s.concat(i):d=-1,i.length&&g())}function g(){if(!o){var w=p(u);o=!0;for(var S=i.length;S;){for(s=i,i=[];++d<S;)s&&s[d].run();d=-1,S=i.length}s=null,o=!1,function(T){if(n===clearTimeout)return clearTimeout(T);if((n===m||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(T);try{n(T)}catch{try{return n.call(null,T)}catch{return n.call(this,T)}}}(w)}}function b(w,S){this.fun=w,this.array=S}function _(){}f.nextTick=function(w){var S=new Array(arguments.length-1);if(1<arguments.length)for(var T=1;T<arguments.length;T++)S[T-1]=arguments[T];i.push(new b(w,S)),i.length!==1||o||p(g)},b.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=_,f.addListener=_,f.once=_,f.off=_,f.removeListener=_,f.removeAllListeners=_,f.emit=_,f.prependListener=_,f.prependOnceListener=_,f.listeners=function(w){return[]},f.binding=function(w){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(w){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],242:[function(t,a,l){(function(c){if(!c.fetch){var n="URLSearchParams"in c,f="Symbol"in c&&"iterator"in Symbol,h="FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),m="FormData"in c,p="ArrayBuffer"in c;if(p)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=function(I){return I&&DataView.prototype.isPrototypeOf(I)},o=ArrayBuffer.isView||function(I){return I&&-1<s.indexOf(Object.prototype.toString.call(I))};w.prototype.append=function(I,k){I=g(I),k=b(k);var U=this.map[I];this.map[I]=U?U+","+k:k},w.prototype.delete=function(I){delete this.map[g(I)]},w.prototype.get=function(I){return I=g(I),this.has(I)?this.map[I]:null},w.prototype.has=function(I){return this.map.hasOwnProperty(g(I))},w.prototype.set=function(I,k){this.map[g(I)]=b(k)},w.prototype.forEach=function(I,k){for(var U in this.map)this.map.hasOwnProperty(U)&&I.call(k,this.map[U],U,this)},w.prototype.keys=function(){var I=[];return this.forEach(function(k,U){I.push(U)}),_(I)},w.prototype.values=function(){var I=[];return this.forEach(function(k){I.push(k)}),_(I)},w.prototype.entries=function(){var I=[];return this.forEach(function(k,U){I.push([U,k])}),_(I)},f&&(w.prototype[Symbol.iterator]=w.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];R.prototype.clone=function(){return new R(this,{body:this._bodyInit})},P.call(R.prototype),P.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},F.error=function(){var I=new F(null,{status:0,statusText:""});return I.type="error",I};var u=[301,302,303,307,308];F.redirect=function(I,k){if(u.indexOf(k)===-1)throw new RangeError("Invalid status code");return new F(null,{status:k,headers:{location:I}})},c.Headers=w,c.Request=R,c.Response=F,c.fetch=function(I,k){return new Promise(function(U,q){var Q=new R(I,k),W=new XMLHttpRequest;W.onload=function(){var K,Y,se={status:W.status,statusText:W.statusText,headers:(K=W.getAllResponseHeaders()||"",Y=new w,K.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(ge){var de=ge.split(":"),Pe=de.shift().trim();if(Pe){var ae=de.join(":").trim();Y.append(Pe,ae)}}),Y)};se.url="responseURL"in W?W.responseURL:se.headers.get("X-Request-URL");var ue="response"in W?W.response:W.responseText;U(new F(ue,se))},W.onerror=function(){q(new TypeError("Network request failed"))},W.ontimeout=function(){q(new TypeError("Network request failed"))},W.open(Q.method,Q.url,!0),Q.credentials==="include"?W.withCredentials=!0:Q.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&h&&(W.responseType="blob"),Q.headers.forEach(function(K,Y){W.setRequestHeader(Y,K)}),W.send(Q._bodyInit===void 0?null:Q._bodyInit)})},c.fetch.polyfill=!0}function g(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(I))throw new TypeError("Invalid character in header field name");return I.toLowerCase()}function b(I){return typeof I!="string"&&(I=String(I)),I}function _(I){var k={next:function(){var U=I.shift();return{done:U===void 0,value:U}}};return f&&(k[Symbol.iterator]=function(){return k}),k}function w(I){this.map={},I instanceof w?I.forEach(function(k,U){this.append(U,k)},this):Array.isArray(I)?I.forEach(function(k){this.append(k[0],k[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(k){this.append(k,I[k])},this)}function S(I){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}function T(I){return new Promise(function(k,U){I.onload=function(){k(I.result)},I.onerror=function(){U(I.error)}})}function L(I){var k=new FileReader,U=T(k);return k.readAsArrayBuffer(I),U}function A(I){if(I.slice)return I.slice(0);var k=new Uint8Array(I.byteLength);return k.set(new Uint8Array(I)),k.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(I){if(this._bodyInit=I)if(typeof I=="string")this._bodyText=I;else if(h&&Blob.prototype.isPrototypeOf(I))this._bodyBlob=I;else if(m&&FormData.prototype.isPrototypeOf(I))this._bodyFormData=I;else if(n&&URLSearchParams.prototype.isPrototypeOf(I))this._bodyText=I.toString();else if(p&&h&&i(I))this._bodyArrayBuffer=A(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p||!ArrayBuffer.prototype.isPrototypeOf(I)&&!o(I))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=A(I)}else this._bodyText="";this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h&&(this.blob=function(){var I=S(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?S(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(L)}),this.text=function(){var I,k,U,q=S(this);if(q)return q;if(this._bodyBlob)return I=this._bodyBlob,k=new FileReader,U=T(k),k.readAsText(I),U;if(this._bodyArrayBuffer)return Promise.resolve(function(Q){for(var W=new Uint8Array(Q),K=new Array(W.length),Y=0;Y<W.length;Y++)K[Y]=String.fromCharCode(W[Y]);return K.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}function R(I,k){var U,q,Q=(k=k||{}).body;if(I instanceof R){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,k.headers||(this.headers=new w(I.headers)),this.method=I.method,this.mode=I.mode,Q||I._bodyInit==null||(Q=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=k.credentials||this.credentials||"omit",!k.headers&&this.headers||(this.headers=new w(k.headers)),this.method=(U=k.method||this.method||"GET",q=U.toUpperCase(),-1<d.indexOf(q)?q:U),this.mode=k.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Q)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Q)}function D(I){var k=new FormData;return I.trim().split("&").forEach(function(U){if(U){var q=U.split("="),Q=q.shift().replace(/\+/g," "),W=q.join("=").replace(/\+/g," ");k.append(decodeURIComponent(Q),decodeURIComponent(W))}}),k}function F(I,k){k=k||{},this.type="default",this.status=k.status===void 0?200:k.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in k?k.statusText:"OK",this.headers=new w(k.headers),this.url=k.url||"",this._initBody(I)}})(typeof self!="undefined"?self:this)},{}],243:[function(t,a,l){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=h(t("../core/main")),f=h(t("../color/color_conversion"));function h(i){return i&&i.__esModule?i:{default:i}}var m=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],p=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];n.default.prototype._rgbColorName=function(i){var o=f.default._rgbaToHSBA(i);return function(d){var u;if(d[0]!==0){d[0]=Math.round(100*d[0]);var g=d[0].toString().split(""),b=g.length-1;g[b]=parseInt(g[b]),g[b]<2.5?g[b]=0:2.5<=g[b]&&g[b]<7.5&&(g[b]=5),g.length===2?(g[0]=parseInt(g[0]),7.5<=g[b]&&(g[b]=0,g[0]=g[0]+1),d[0]=10*g[0]+g[1]):7.5<=g[b]?d[0]=10:d[0]=g[b]}d[2]=d[2]/255;for(var _=d.length-1;1<=_;_--)d[_]<=.25?d[_]=0:.25<d[_]&&d[_]<.75?d[_]=.5:d[_]=1;if(d[0]===0&&d[1]===0&&d[2]===1){for(var w=2;0<=w;w--)c[w]=Math.round(1e4*c[w])/1e4;for(var S=0;S<m.length;S++){if(m[S].h===c[0]&&m[S].s===c[1]&&m[S].b===c[2]){u=m[S].name;break}u="white"}}else for(var T=0;T<p.length;T++)if(p[T].h===d[0]&&p[T].s===d[1]&&p[T].b===d[2]){u=p[T].name;break}return u}([(c=o)[0],o[1],o[2]])};var s=n.default;l.default=s},{"../color/color_conversion":249,"../core/main":264,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],244:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c},f="_Description",h="_fallbackDesc",m="_fallbackTable",p="_Label",s="_labelDesc",i="_labelTable";function o(u){if(u==="label"||u==="fallback")throw new Error("description should not be LABEL or FALLBACK");return u.endsWith(".")||u.endsWith(";")||u.endsWith(",")||u.endsWith("?")||u.endsWith("!")||(u+="."),u}n.default.prototype.describe=function(u,g){if(n.default._validateParameters("describe",arguments),typeof u=="string"){var b=this.canvas.id;u=o(u),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==u&&(this.descriptions.fallback.innerHTML=u):this._describeHTML("fallback",u),g===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==u&&(this.descriptions.label.innerHTML=u):this._describeHTML("label",u))}},n.default.prototype.describeElement=function(u,g,b){if(n.default._validateParameters("describeElement",arguments),typeof g=="string"&&typeof u=="string"){var _=this.canvas.id;g=o(g);var w=function(T){if(T==="label"||T==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return T.endsWith(".")||T.endsWith(";")||T.endsWith(",")?T=T.replace(/.$/,":"):T.endsWith(":")||(T+=":"),T}(u);u=u.replace(/[^a-zA-Z0-9]/g,"");var S='<th scope="row">'.concat(w,"</th><td>").concat(g,"</td>");this.dummyDOM||(this.dummyDOM=document.getElementById(_).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[u]?this.descriptions.fallbackElements[u].innerHTML!==S&&(this.descriptions.fallbackElements[u].innerHTML=S):this._describeElementHTML("fallback",u,S),b===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[u]?this.descriptions.labelElements[u].innerHTML!==S&&(this.descriptions.labelElements[u].innerHTML=S):this._describeElementHTML("label",u,S))}},n.default.prototype._describeHTML=function(u,g){var b=this.canvas.id;if(u==="fallback"){if(this.dummyDOM.querySelector("#".concat(b+f)))this.dummyDOM.querySelector("#"+b+m).insertAdjacentHTML("beforebegin",'<p id="'.concat(b+h,'"></p>'));else{var _='<div id="'.concat(b).concat(f,'" role="region" aria-label="Canvas Description"><p id="').concat(b).concat(h,'"></p></div>');this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",_):this.dummyDOM.querySelector("#".concat(b)).innerHTML=_}return this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(b).concat(h)),void(this.descriptions.fallback.innerHTML=g)}if(u==="label"){if(this.dummyDOM.querySelector("#".concat(b+p)))this.dummyDOM.querySelector("#".concat(b+i))&&this.dummyDOM.querySelector("#".concat(b+i)).insertAdjacentHTML("beforebegin",'<p id="'.concat(b).concat(s,'"></p>'));else{var w='<div id="'.concat(b).concat(p,'" class="p5Label"><p id="').concat(b).concat(s,'"></p></div>');this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",w):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",w)}return this.descriptions.label=this.dummyDOM.querySelector("#"+b+s),void(this.descriptions.label.innerHTML=g)}},n.default.prototype._describeElementHTML=function(u,g,b){var _=this.canvas.id;if(u==="fallback"){if(this.dummyDOM.querySelector("#".concat(_+f)))this.dummyDOM.querySelector("#"+_+m)||this.dummyDOM.querySelector("#"+_+h).insertAdjacentHTML("afterend",'<table id="'.concat(_).concat(m,'"><caption>Canvas elements and their descriptions</caption></table>'));else{var w='<div id="'.concat(_).concat(f,'" role="region" aria-label="Canvas Description"><table id="').concat(_).concat(m,'"><caption>Canvas elements and their descriptions</caption></table></div>');this.dummyDOM.querySelector("#".concat(_,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutput")).insertAdjacentHTML("beforebegin",w):this.dummyDOM.querySelector("#"+_).innerHTML=w}var S=document.createElement("tr");return S.id=_+"_fte_"+g,this.dummyDOM.querySelector("#"+_+m).appendChild(S),this.descriptions.fallbackElements[g]=this.dummyDOM.querySelector("#".concat(_).concat("_fte_").concat(g)),void(this.descriptions.fallbackElements[g].innerHTML=b)}if(u==="label"){if(this.dummyDOM.querySelector("#".concat(_+p)))this.dummyDOM.querySelector("#".concat(_+i))||this.dummyDOM.querySelector("#"+_+s).insertAdjacentHTML("afterend",'<table id="'.concat(_+i,'"></table>'));else{var T='<div id="'.concat(_).concat(p,'" class="p5Label"><table id="').concat(_).concat(i,'"></table></div>');this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",T):this.dummyDOM.querySelector("#"+_).insertAdjacentHTML("afterend",T)}var L=document.createElement("tr");L.id=_+"_lte_"+g,this.dummyDOM.querySelector("#"+_+i).appendChild(L),this.descriptions.labelElements[g]=this.dummyDOM.querySelector("#".concat(_).concat("_lte_").concat(g)),this.descriptions.labelElements[g].innerHTML=b}};var d=n.default;l.default=d},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],245:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.map"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.prototype._updateGridOutput=function(h){if(this.dummyDOM.querySelector("#".concat(h,"_summary"))){var m=this._accessibleOutputs[h],p=function(o,d){var u="",g="",b=0;for(var _ in d){var w=0;for(var S in d[_]){var T='<li id="'.concat(o,"shape").concat(b,'">').concat(d[_][S].color," ").concat(_,",");_==="line"?T+=" location = ".concat(d[_][S].pos,", length = ").concat(d[_][S].length," pixels"):(T+=" location = ".concat(d[_][S].pos),_!=="point"&&(T+=", area = ".concat(d[_][S].area," %")),T+="</li>"),u+=T,w++,b++}g=1<w?"".concat(g," ").concat(w," ").concat(_,"s"):"".concat(g," ").concat(w," ").concat(_)}return{numShapes:[b,g],details:u}}(h,this.ingredients.shapes),s=function(o,d,u,g){var b="".concat(d," canvas, ").concat(u," by ").concat(g," pixels, contains ").concat(o[0]);return b=o[0]===1?"".concat(b," shape: ").concat(o[1]):"".concat(b," shapes: ").concat(o[1]),b}(p.numShapes,this.ingredients.colors.background,this.width,this.height),i=function(o,d){var u=0,g="",b=Array.apply(null,Array(10)).map(function(){});for(var _ in b)b[_]=Array.apply(null,Array(10)).map(function(){});for(var w in d)for(var S in d[w]){var T=void 0;T=w!=="line"?'<a href="#'.concat(o,"shape").concat(u,'">').concat(d[w][S].color," ").concat(w,"</a>"):'<a href="#'.concat(o,"shape").concat(u,'">').concat(d[w][S].color," ").concat(w," midpoint</a>"),b[d[w][S].loc.locY][d[w][S].loc.locX]?b[d[w][S].loc.locY][d[w][S].loc.locX]=b[d[w][S].loc.locY][d[w][S].loc.locX]+"  "+T:b[d[w][S].loc.locY][d[w][S].loc.locX]=T,u++}for(var L in b){var A="<tr>";for(var P in b[L])A+="<td>",b[L][P]!==void 0&&(A+=b[L][P]),A+="</td>";g=g+A+"</tr>"}return g}(h,this.ingredients.shapes);s!==m.summary.innerHTML&&(m.summary.innerHTML=s),i!==m.map.innerHTML&&(m.map.innerHTML=i),p.details!==m.shapeDetails.innerHTML&&(m.shapeDetails.innerHTML=p.details),this._accessibleOutputs[h]=m}};var f=n.default;l.default=f},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],246:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};function f(p,s,i){return p[0]<.4*s?p[1]<.4*i?"top left":p[1]>.6*i?"bottom left":"mid left":p[0]>.6*s?p[1]<.4*i?"top right":p[1]>.6*i?"bottom right":"mid right":p[1]<.4*i?"top middle":p[1]>.6*i?"bottom middle":"middle"}function h(p,s,i){var o=Math.floor(p[0]/s*10),d=Math.floor(p[1]/i*10);return o===10&&--o,d===10&&--d,{locX:o,locY:d}}n.default.prototype.textOutput=function(p){n.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),p===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},n.default.prototype.gridOutput=function(p){n.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),p===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},n.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},n.default.prototype._createOutput=function(p,s){var i,o,d,u=this.canvas.id;this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(u).parentNode);var g="";s==="Fallback"?(i=u+p,o=u+"accessibleOutput",this.dummyDOM.querySelector("#".concat(o))||(this.dummyDOM.querySelector("#".concat(u,"_Description"))?this.dummyDOM.querySelector("#".concat(u,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(o,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(u)).innerHTML='<div id="'.concat(o,'" role="region" aria-label="Canvas Outputs"></div>'))):s==="Label"&&(i=u+p+(g=s),o=u+"accessibleOutput"+s,this.dummyDOM.querySelector("#".concat(o))||(this.dummyDOM.querySelector("#".concat(u,"_Label"))?this.dummyDOM.querySelector("#".concat(u,"_Label")).insertAdjacentHTML("afterend",'<div id="'.concat(o,'"></div>')):this.dummyDOM.querySelector("#".concat(u)).insertAdjacentHTML("afterend",'<div id="'.concat(o,'"></div>')))),this._accessibleOutputs[i]={},p==="textOutput"?(g="#".concat(u,"gridOutput").concat(g),d='<div id="'.concat(i,'">Text Output<div id="').concat(i,'Summary" aria-label="text output summary"><p id="').concat(i,'_summary"></p><ul id="').concat(i,'_list"></ul></div><table id="').concat(i,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("beforebegin",d):this.dummyDOM.querySelector("#".concat(o)).innerHTML=d,this._accessibleOutputs[i].list=this.dummyDOM.querySelector("#".concat(i,"_list"))):p==="gridOutput"&&(g="#".concat(u,"textOutput").concat(g),d='<div id="'.concat(i,'">Grid Output<p id="').concat(i,'_summary" aria-label="grid output summary"><table id="').concat(i,'_map" summary="grid output content"></table><ul id="').concat(i,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("afterend",d):this.dummyDOM.querySelector("#".concat(o)).innerHTML=d,this._accessibleOutputs[i].map=this.dummyDOM.querySelector("#".concat(i,"_map"))),this._accessibleOutputs[i].shapeDetails=this.dummyDOM.querySelector("#".concat(i,"_shapeDetails")),this._accessibleOutputs[i].summary=this.dummyDOM.querySelector("#".concat(i,"_summary"))},n.default.prototype._updateAccsOutput=function(){var p=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(p+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(p+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(p+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(p+"gridOutputLabel"))},n.default.prototype._accsBackground=function(p){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==p&&(this.ingredients.colors.backgroundRGBA=p,this.ingredients.colors.background=this._rgbColorName(p))},n.default.prototype._accsCanvasColors=function(p,s){p==="fill"?this.ingredients.colors.fillRGBA!==s&&(this.ingredients.colors.fillRGBA=s,this.ingredients.colors.fill=this._rgbColorName(s)):p==="stroke"&&this.ingredients.colors.strokeRGBA!==s&&(this.ingredients.colors.strokeRGBA=s,this.ingredients.colors.stroke=this._rgbColorName(s))},n.default.prototype._accsOutput=function(p,s){p==="ellipse"&&s[2]===s[3]?p="circle":p==="rectangle"&&s[2]===s[3]&&(p="square");var i={},o=!0,d=function(_,w){var S,T;return T=_==="rectangle"||_==="ellipse"||_==="arc"||_==="circle"||_==="square"?(S=Math.round(w[0]+w[2]/2),Math.round(w[1]+w[3]/2)):_==="triangle"?(S=(w[0]+w[2]+w[4])/3,(w[1]+w[3]+w[5])/3):_==="quadrilateral"?(S=(w[0]+w[2]+w[4]+w[6])/4,(w[1]+w[3]+w[5]+w[7])/4):_==="line"?(S=(w[0]+w[2])/2,(w[1]+w[3])/2):(S=w[0],w[1]),[S,T]}(p,s);if(p==="line"){i.color=this.ingredients.colors.stroke,i.length=Math.round(this.dist(s[0],s[1],s[2],s[3]));var u=f([s[0],[1]],this.width,this.height),g=f([s[2],[3]],this.width,this.height);i.loc=h(d,this.width,this.height),i.pos=u===g?"at ".concat(u):"from ".concat(u," to ").concat(g)}else p==="point"?i.color=this.ingredients.colors.stroke:(i.color=this.ingredients.colors.fill,i.area=function(_,w,S,T){var L=0;if(_==="arc"){var A=((w[5]-w[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(L=A*w[2]*w[3]/8,w[6]==="open"||w[6]==="chord"){var P=w[0],R=w[1],D=w[0]+w[2]/2*Math.cos(w[4]).toFixed(2),F=w[1]+w[3]/2*Math.sin(w[4]).toFixed(2),I=w[0]+w[2]/2*Math.cos(w[5]).toFixed(2),k=w[1]+w[3]/2*Math.sin(w[5]).toFixed(2),U=Math.abs(P*(F-k)+D*(k-R)+I*(R-F))/2;A>Math.PI?L+=U:L-=U}}else _==="ellipse"||_==="circle"?L=3.14*w[2]/2*w[3]/2:_==="line"||_==="point"?L=0:_==="quadrilateral"?L=Math.abs((w[6]+w[0])*(w[7]-w[1])+(w[0]+w[2])*(w[1]-w[3])+(w[2]+w[4])*(w[3]-w[5])+(w[4]+w[6])*(w[5]-w[7]))/2:_==="rectangle"||_==="square"?L=w[2]*w[3]:_==="triangle"&&(L=Math.abs(w[0]*(w[3]-w[5])+w[2]*(w[5]-w[1])+w[4]*(w[1]-w[3]))/2);return Math.round(100*L/(S*T))}(p,s,this.width,this.height)),i.pos=f(d,this.width,this.height),i.loc=h(d,this.width,this.height);if(this.ingredients.shapes[p]){if(this.ingredients.shapes[p]!==[i]){for(var b in this.ingredients.shapes[p])JSON.stringify(this.ingredients.shapes[p][b])===JSON.stringify(i)&&(o=!1);o===!0&&this.ingredients.shapes[p].push(i)}}else this.ingredients.shapes[p]=[i]};var m=n.default;l.default=m},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":172}],247:[function(t,a,l){t("core-js/modules/es.array.concat"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.prototype._updateTextOutput=function(h){if(this.dummyDOM.querySelector("#".concat(h,"_summary"))){var m=this._accessibleOutputs[h],p=function(o,d){var u="",g=0;for(var b in d)for(var _ in d[b]){var w='<li><a href="#'.concat(o,"shape").concat(g,'">').concat(d[b][_].color," ").concat(b,"</a>");b==="line"?w+=", ".concat(d[b][_].pos,", ").concat(d[b][_].length," pixels long.</li>"):(w+=", at ".concat(d[b][_].pos),b!=="point"&&(w+=", covering ".concat(d[b][_].area,"% of the canvas")),w+=".</li>"),u+=w,g++}return{numShapes:g,listShapes:u}}(h,this.ingredients.shapes),s=function(o,d,u,g){var b="Your output is a, ".concat(u," by ").concat(g," pixels, ").concat(d," canvas containing the following");return b=o===1?"".concat(b," shape:"):"".concat(b," ").concat(o," shapes:"),b}(p.numShapes,this.ingredients.colors.background,this.width,this.height),i=function(o,d){var u="",g=0;for(var b in d)for(var _ in d[b]){var w='<tr id="'.concat(o,"shape").concat(g,'"><th>').concat(d[b][_].color," ").concat(b,"</th>");b==="line"?w+="<td>location = ".concat(d[b][_].pos,"</td><td>length = ").concat(d[b][_].length," pixels</td></tr>"):(w+="<td>location = ".concat(d[b][_].pos,"</td>"),b!=="point"&&(w+="<td> area = ".concat(d[b][_].area,"%</td>")),w+="</tr>"),u+=w,g++}return u}(h,this.ingredients.shapes);s!==m.summary.innerHTML&&(m.summary.innerHTML=s),p.listShapes!==m.list.innerHTML&&(m.list.innerHTML=p.listShapes),i!==m.shapeDetails.innerHTML&&(m.shapeDetails.innerHTML=i),this._accessibleOutputs[h]=m}};var f=n.default;l.default=f},{"../core/main":264,"core-js/modules/es.array.concat":149}],248:[function(t,a,l){var c,n=(c=t("./core/main"))&&c.__esModule?c:{default:c};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),a.exports=n.default},{"./accessibility/color_namer":243,"./accessibility/describe":244,"./accessibility/gridOutput":245,"./accessibility/outputs":246,"./accessibility/textOutput":247,"./color/color_conversion":249,"./color/creating_reading":250,"./color/p5.Color":251,"./color/setting":252,"./core/constants":253,"./core/environment":254,"./core/friendly_errors/fes_core":255,"./core/friendly_errors/file_errors":256,"./core/friendly_errors/sketch_reader":257,"./core/friendly_errors/stacktrace":258,"./core/friendly_errors/validate_params":259,"./core/helpers":260,"./core/init":261,"./core/legacy":263,"./core/main":264,"./core/p5.Element":265,"./core/p5.Graphics":266,"./core/p5.Renderer":267,"./core/p5.Renderer2D":268,"./core/preload":269,"./core/rendering":270,"./core/shape/2d_primitives":271,"./core/shape/attributes":272,"./core/shape/curves":273,"./core/shape/vertex":274,"./core/shim":275,"./core/structure":276,"./core/transform":277,"./data/local_storage.js":278,"./data/p5.TypedDict":279,"./dom/dom":280,"./events/acceleration":281,"./events/keyboard":282,"./events/mouse":283,"./events/touch":284,"./image/filters":285,"./image/image":286,"./image/loading_displaying":287,"./image/p5.Image":288,"./image/pixels":289,"./io/files":290,"./io/p5.Table":291,"./io/p5.TableRow":292,"./io/p5.XML":293,"./math/calculation":294,"./math/math":295,"./math/noise":296,"./math/p5.Vector":297,"./math/random":298,"./math/trigonometry":299,"./typography/attributes":300,"./typography/loading_displaying":301,"./typography/p5.Font":302,"./utilities/array_functions":303,"./utilities/conversion":304,"./utilities/string_functions":305,"./utilities/time_date":306,"./webgl/3d_primitives":307,"./webgl/interaction":308,"./webgl/light":309,"./webgl/loading":310,"./webgl/material":311,"./webgl/p5.Camera":312,"./webgl/p5.Geometry":313,"./webgl/p5.Matrix":314,"./webgl/p5.RenderBuffer":315,"./webgl/p5.RendererGL":318,"./webgl/p5.RendererGL.Immediate":316,"./webgl/p5.RendererGL.Retained":317,"./webgl/p5.Shader":319,"./webgl/p5.Texture":320,"./webgl/text":321}],249:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.ColorConversion={},n.default.ColorConversion._hsbaToHSLA=function(h){var m=h[0],p=h[1],s=h[2],i=(2-p)*s/2;return i!=0&&(i==1?p=0:i<.5?p/=2-p:p=p*s/(2-2*i)),[m,p,i,h[3]]},n.default.ColorConversion._hsbaToRGBA=function(h){var m=6*h[0],p=h[1],s=h[2],i=[];if(p===0)i=[s,s,s,h[3]];else{var o,d,u,g=Math.floor(m),b=s*(1-p),_=s*(1-p*(m-g)),w=s*(1-p*(1+g-m));u=g===1?(o=_,d=s,b):g===2?(o=b,d=s,w):g===3?(o=b,d=_,s):g===4?(o=w,d=b,s):g===5?(o=s,d=b,_):(o=s,d=w,b),i=[o,d,u,h[3]]}return i},n.default.ColorConversion._hslaToHSBA=function(h){var m,p=h[0],s=h[1],i=h[2];return[p,s=2*((m=i<.5?(1+s)*i:i+s-i*s)-i)/m,m,h[3]]},n.default.ColorConversion._hslaToRGBA=function(h){var m=6*h[0],p=h[1],s=h[2],i=[];if(p===0)i=[s,s,s,h[3]];else{var o,d=2*s-(o=s<.5?(1+p)*s:s+p-s*p),u=function(g,b,_){return g<0?g+=6:6<=g&&(g-=6),g<1?b+(_-b)*g:g<3?_:g<4?b+(_-b)*(4-g):b};i=[u(2+m,d,o),u(m,d,o),u(m-2,d,o),h[3]]}return i},n.default.ColorConversion._rgbaToHSBA=function(h){var m,p,s=h[0],i=h[1],o=h[2],d=Math.max(s,i,o),u=d-Math.min(s,i,o);return u==0?p=m=0:(p=u/d,s===d?m=(i-o)/u:i===d?m=2+(o-s)/u:o===d&&(m=4+(s-i)/u),m<0?m+=6:6<=m&&(m-=6)),[m/6,p,d,h[3]]},n.default.ColorConversion._rgbaToHSLA=function(h){var m,p,s=h[0],i=h[1],o=h[2],d=Math.max(s,i,o),u=Math.min(s,i,o),g=d+u,b=d-u;return b==0?p=m=0:(p=g<1?b/g:b/(2-g),s===d?m=(i-o)/b:i===d?m=2+(o-s)/b:o===d&&(m=4+(s-i)/b),m<0?m+=6:6<=m&&(m-=6)),[m/6,p,g/2,h[3]]};var f=n.default.ColorConversion;l.default=f},{"../core/main":264}],250:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}t("core-js/modules/es.array.map"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=m();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),f.default.prototype.alpha=function(s){return f.default._validateParameters("alpha",arguments),this.color(s)._getAlpha()},f.default.prototype.blue=function(s){return f.default._validateParameters("blue",arguments),this.color(s)._getBlue()},f.default.prototype.brightness=function(s){return f.default._validateParameters("brightness",arguments),this.color(s)._getBrightness()},f.default.prototype.color=function(){if(f.default._validateParameters("color",arguments),arguments[0]instanceof f.default.Color)return arguments[0];var s=arguments[0]instanceof Array?arguments[0]:arguments;return new f.default.Color(this,s)},f.default.prototype.green=function(s){return f.default._validateParameters("green",arguments),this.color(s)._getGreen()},f.default.prototype.hue=function(s){return f.default._validateParameters("hue",arguments),this.color(s)._getHue()},f.default.prototype.lerpColor=function(s,i,o){f.default._validateParameters("lerpColor",arguments);var d,u,g,b,_,w,S=this._colorMode,T=this._colorMaxes;if(S===h.RGB)_=s.levels.map(function(L){return L/255}),w=i.levels.map(function(L){return L/255});else if(S===h.HSB)s._getBrightness(),i._getBrightness(),_=s.hsba,w=i.hsba;else{if(S!==h.HSL)throw new Error("".concat(S,"cannot be used for interpolation."));s._getLightness(),i._getLightness(),_=s.hsla,w=i.hsla}return o=Math.max(Math.min(o,1),0),this.lerp===void 0&&(this.lerp=function(L,A,P){return P*(A-L)+L}),d=this.lerp(_[0],w[0],o),u=this.lerp(_[1],w[1],o),g=this.lerp(_[2],w[2],o),b=this.lerp(_[3],w[3],o),d*=T[S][0],u*=T[S][1],g*=T[S][2],b*=T[S][3],this.color(d,u,g,b)},f.default.prototype.lightness=function(s){return f.default._validateParameters("lightness",arguments),this.color(s)._getLightness()},f.default.prototype.red=function(s){return f.default._validateParameters("red",arguments),this.color(s)._getRed()},f.default.prototype.saturation=function(s){return f.default._validateParameters("saturation",arguments),this.color(s)._getSaturation()};var p=f.default;l.default=p},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"./p5.Color":251,"core-js/modules/es.array.map":161}],251:[function(t,a,l){function c(_){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(_)}t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n=p(t("../core/main")),f=function(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var w=m();if(w&&w.has(_))return w.get(_);var S={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in _)if(Object.prototype.hasOwnProperty.call(_,L)){var A=T?Object.getOwnPropertyDescriptor(_,L):null;A&&(A.get||A.set)?Object.defineProperty(S,L,A):S[L]=_[L]}return S.default=_,w&&w.set(_,S),S}(t("../core/constants")),h=p(t("./color_conversion"));function m(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return m=function(){return _},_}function p(_){return _&&_.__esModule?_:{default:_}}n.default.Color=function(_,w){if(this._storeModeAndMaxes(_._colorMode,_._colorMaxes),this.mode!==f.RGB&&this.mode!==f.HSL&&this.mode!==f.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=n.default.Color._parseInputs.apply(this,w),this._calculateLevels(),this},n.default.Color.prototype.toString=function(_){var w=this.levels,S=this._array,T=S[3];switch(_){case"#rrggbb":return"#".concat(w[0]<16?"0".concat(w[0].toString(16)):w[0].toString(16),w[1]<16?"0".concat(w[1].toString(16)):w[1].toString(16),w[2]<16?"0".concat(w[2].toString(16)):w[2].toString(16));case"#rrggbbaa":return"#".concat(w[0]<16?"0".concat(w[0].toString(16)):w[0].toString(16),w[1]<16?"0".concat(w[1].toString(16)):w[1].toString(16),w[2]<16?"0".concat(w[2].toString(16)):w[2].toString(16),w[3]<16?"0".concat(w[3].toString(16)):w[3].toString(16));case"#rgb":return"#".concat(Math.round(15*S[0]).toString(16),Math.round(15*S[1]).toString(16),Math.round(15*S[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*S[0]).toString(16),Math.round(15*S[1]).toString(16),Math.round(15*S[2]).toString(16),Math.round(15*S[3]).toString(16));case"rgb":return"rgb(".concat(w[0],", ",w[1],", ",w[2],")");case"rgb%":return"rgb(".concat((100*S[0]).toPrecision(3),"%, ",(100*S[1]).toPrecision(3),"%, ",(100*S[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*S[0]).toPrecision(3),"%, ",(100*S[1]).toPrecision(3),"%, ",(100*S[2]).toPrecision(3),"%, ",(100*S[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[f.HSB][0],", ",this.hsba[1]*this.maxes[f.HSB][1],", ",this.hsba[2]*this.maxes[f.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[f.HSB][0],", ",this.hsba[1]*this.maxes[f.HSB][1],", ",this.hsba[2]*this.maxes[f.HSB][2],", ",T,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*T).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[f.HSL][0],", ",this.hsla[1]*this.maxes[f.HSL][1],", ",this.hsla[2]*this.maxes[f.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[f.HSL][0],", ",this.hsla[1]*this.maxes[f.HSL][1],", ",this.hsla[2]*this.maxes[f.HSL][2],", ",T,")");case"hsla%":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*T).toPrecision(3),"%)");case"rgba":default:return"rgba(".concat(w[0],",",w[1],",",w[2],",",T,")")}},n.default.Color.prototype.setRed=function(_){this._array[0]=_/this.maxes[f.RGB][0],this._calculateLevels()},n.default.Color.prototype.setGreen=function(_){this._array[1]=_/this.maxes[f.RGB][1],this._calculateLevels()},n.default.Color.prototype.setBlue=function(_){this._array[2]=_/this.maxes[f.RGB][2],this._calculateLevels()},n.default.Color.prototype.setAlpha=function(_){this._array[3]=_/this.maxes[this.mode][3],this._calculateLevels()},n.default.Color.prototype._calculateLevels=function(){for(var _=this._array,w=this.levels=new Array(_.length),S=_.length-1;0<=S;--S)w[S]=Math.round(255*_[S])},n.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},n.default.Color.prototype._storeModeAndMaxes=function(_,w){this.mode=_,this.maxes=w},n.default.Color.prototype._getMode=function(){return this.mode},n.default.Color.prototype._getMaxes=function(){return this.maxes},n.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[f.RGB][2]},n.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[f.HSB][2]},n.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[f.RGB][1]},n.default.Color.prototype._getHue=function(){return this.mode===f.HSB?(this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[f.HSB][0]):(this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[f.HSL][0])},n.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[f.HSL][2]},n.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[f.RGB][0]},n.default.Color.prototype._getSaturation=function(){return this.mode===f.HSB?(this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[f.HSB][1]):(this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[f.HSL][1])};var s={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},i=/\s*/,o=/(\d{1,3})/,d=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,u=new RegExp("".concat(d.source,"%")),g={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",o.source,",",o.source,",",o.source,"\\)$"].join(i.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",u.source,",",u.source,",",u.source,"\\)$"].join(i.source),"i"),RGBA:new RegExp(["^rgba\\(",o.source,",",o.source,",",o.source,",",d.source,"\\)$"].join(i.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",u.source,",",u.source,",",u.source,",",d.source,"\\)$"].join(i.source),"i"),HSL:new RegExp(["^hsl\\(",o.source,",",u.source,",",u.source,"\\)$"].join(i.source),"i"),HSLA:new RegExp(["^hsla\\(",o.source,",",u.source,",",u.source,",",d.source,"\\)$"].join(i.source),"i"),HSB:new RegExp(["^hsb\\(",o.source,",",u.source,",",u.source,"\\)$"].join(i.source),"i"),HSBA:new RegExp(["^hsba\\(",o.source,",",u.source,",",u.source,",",d.source,"\\)$"].join(i.source),"i")};n.default.Color._parseInputs=function(_,w,S,T){var L,A=arguments.length,P=this.mode,R=this.maxes[P],D=[];if(3<=A){for(D[0]=_/R[0],D[1]=w/R[1],D[2]=S/R[2],D[3]=typeof T=="number"?T/R[3]:1,L=D.length-1;0<=L;--L){var F=D[L];F<0?D[L]=0:1<F&&(D[L]=1)}return P===f.HSL?h.default._hslaToRGBA(D):P===f.HSB?h.default._hsbaToRGBA(D):D}if(A===1&&typeof _=="string"){var I=_.trim().toLowerCase();if(s[I])return n.default.Color._parseInputs.call(this,s[I]);if(g.HEX3.test(I))return(D=g.HEX3.exec(I).slice(1).map(function(k){return parseInt(k+k,16)/255}))[3]=1,D;if(g.HEX6.test(I))return(D=g.HEX6.exec(I).slice(1).map(function(k){return parseInt(k,16)/255}))[3]=1,D;if(g.HEX4.test(I))return D=g.HEX4.exec(I).slice(1).map(function(k){return parseInt(k+k,16)/255});if(g.HEX8.test(I))return D=g.HEX8.exec(I).slice(1).map(function(k){return parseInt(k,16)/255});if(g.RGB.test(I))return(D=g.RGB.exec(I).slice(1).map(function(k){return k/255}))[3]=1,D;if(g.RGB_PERCENT.test(I))return(D=g.RGB_PERCENT.exec(I).slice(1).map(function(k){return parseFloat(k)/100}))[3]=1,D;if(g.RGBA.test(I))return D=g.RGBA.exec(I).slice(1).map(function(k,U){return U===3?parseFloat(k):k/255});if(g.RGBA_PERCENT.test(I))return D=g.RGBA_PERCENT.exec(I).slice(1).map(function(k,U){return U===3?parseFloat(k):parseFloat(k)/100});if(g.HSL.test(I)?(D=g.HSL.exec(I).slice(1).map(function(k,U){return U===0?parseInt(k,10)/360:parseInt(k,10)/100}))[3]=1:g.HSLA.test(I)&&(D=g.HSLA.exec(I).slice(1).map(function(k,U){return U===0?parseInt(k,10)/360:U===3?parseFloat(k):parseInt(k,10)/100})),(D=D.map(function(k){return Math.max(Math.min(k,1),0)})).length)return h.default._hslaToRGBA(D);if(g.HSB.test(I)?(D=g.HSB.exec(I).slice(1).map(function(k,U){return U===0?parseInt(k,10)/360:parseInt(k,10)/100}))[3]=1:g.HSBA.test(I)&&(D=g.HSBA.exec(I).slice(1).map(function(k,U){return U===0?parseInt(k,10)/360:U===3?parseFloat(k):parseInt(k,10)/100})),D.length){for(L=D.length-1;0<=L;--L)D[L]=Math.max(Math.min(D[L],1),0);return h.default._hsbaToRGBA(D)}D=[1,1,1,1]}else{if(A!==1&&A!==2||typeof _!="number")throw new Error("".concat(arguments,"is not a valid color representation."));D[0]=_/R[2],D[1]=_/R[2],D[2]=_/R[2],D[3]=typeof w=="number"?w/R[3]:1,D=D.map(function(k){return Math.max(Math.min(k,1),0)})}return D};var b=n.default.Color;l.default=b},{"../core/constants":253,"../core/main":264,"./color_conversion":249,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.trim":193}],252:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}t("core-js/modules/es.array.fill"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=m();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}t("./p5.Color"),f.default.prototype.background=function(){var s;return(s=this._renderer).background.apply(s,arguments),this},f.default.prototype.clear=function(){var s=(arguments.length<=0?void 0:arguments[0])||0,i=(arguments.length<=1?void 0:arguments[1])||0,o=(arguments.length<=2?void 0:arguments[2])||0,d=(arguments.length<=3?void 0:arguments[3])||0;return this._renderer.clear(s,i,o,d),this},f.default.prototype.colorMode=function(s,i,o,d,u){if(f.default._validateParameters("colorMode",arguments),s===h.RGB||s===h.HSB||s===h.HSL){this._colorMode=s;var g=this._colorMaxes[s];arguments.length===2?(g[0]=i,g[1]=i,g[2]=i,g[3]=i):arguments.length===4?(g[0]=i,g[1]=o,g[2]=d):arguments.length===5&&(g[0]=i,g[1]=o,g[2]=d,g[3]=u)}return this},f.default.prototype.fill=function(){var s;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(s=this._renderer).fill.apply(s,arguments),this},f.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},f.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},f.default.prototype.stroke=function(){var s;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(s=this._renderer).stroke.apply(s,arguments),this},f.default.prototype.erase=function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:255;return this._renderer.erase(s,i),this},f.default.prototype.noErase=function(){return this._renderer.noErase(),this};var p=f.default;l.default=p},{"../core/constants":253,"../core/main":264,"./p5.Color":251,"core-js/modules/es.array.fill":151}],253:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.BEZIER=l.QUADRATIC=l.LINEAR=l._CTX_MIDDLE=l._DEFAULT_LEADMULT=l._DEFAULT_TEXT_FILL=l.WORD=l.CHAR=l.BOLDITALIC=l.BOLD=l.ITALIC=l.NORMAL=l.BLUR=l.ERODE=l.DILATE=l.POSTERIZE=l.INVERT=l.OPAQUE=l.GRAY=l.THRESHOLD=l.BURN=l.DODGE=l.SOFT_LIGHT=l.HARD_LIGHT=l.OVERLAY=l.REPLACE=l.SCREEN=l.MULTIPLY=l.EXCLUSION=l.SUBTRACT=l.DIFFERENCE=l.LIGHTEST=l.DARKEST=l.ADD=l.REMOVE=l.BLEND=l.UP_ARROW=l.TAB=l.SHIFT=l.RIGHT_ARROW=l.RETURN=l.OPTION=l.LEFT_ARROW=l.ESCAPE=l.ENTER=l.DOWN_ARROW=l.DELETE=l.CONTROL=l.BACKSPACE=l.ALT=l.AUTO=l.HSL=l.HSB=l.RGB=l.MITER=l.BEVEL=l.ROUND=l.SQUARE=l.PROJECT=l.PIE=l.CHORD=l.OPEN=l.CLOSE=l.TESS=l.QUAD_STRIP=l.QUADS=l.TRIANGLE_STRIP=l.TRIANGLE_FAN=l.TRIANGLES=l.LINE_LOOP=l.LINE_STRIP=l.LINES=l.POINTS=l.BASELINE=l.BOTTOM=l.TOP=l.CENTER=l.LEFT=l.RIGHT=l.RADIUS=l.CORNERS=l.CORNER=l.RAD_TO_DEG=l.DEG_TO_RAD=l.RADIANS=l.DEGREES=l.TWO_PI=l.TAU=l.QUARTER_PI=l.PI=l.HALF_PI=l.WAIT=l.TEXT=l.MOVE=l.HAND=l.CROSS=l.ARROW=l.WEBGL=l.P2D=l.VERSION=void 0,l.FALLBACK=l.LABEL=l.AXES=l.GRID=l._DEFAULT_FILL=l._DEFAULT_STROKE=l.PORTRAIT=l.LANDSCAPE=l.MIRROR=l.CLAMP=l.REPEAT=l.NEAREST=l.IMAGE=l.IMMEDIATE=l.TEXTURE=l.FILL=l.STROKE=l.CURVE=void 0;var c=Math.PI;l.VERSION="1.4.1",l.P2D="p2d",l.WEBGL="webgl",l.ARROW="default",l.CROSS="crosshair",l.HAND="pointer",l.MOVE="move",l.TEXT="text",l.WAIT="wait";var n=c/2;l.HALF_PI=n;var f=c;l.PI=f;var h=c/4;l.QUARTER_PI=h;var m=2*c;l.TAU=m;var p=2*c;l.TWO_PI=p,l.DEGREES="degrees",l.RADIANS="radians";var s=c/180;l.DEG_TO_RAD=s;var i=180/c;l.RAD_TO_DEG=i,l.CORNER="corner",l.CORNERS="corners",l.RADIUS="radius",l.RIGHT="right",l.LEFT="left",l.CENTER="center",l.TOP="top",l.BOTTOM="bottom",l.BASELINE="alphabetic",l.POINTS=0,l.LINES=1,l.LINE_STRIP=3,l.LINE_LOOP=2,l.TRIANGLES=4,l.TRIANGLE_FAN=6,l.TRIANGLE_STRIP=5,l.QUADS="quads",l.QUAD_STRIP="quad_strip",l.TESS="tess",l.CLOSE="close",l.OPEN="open",l.CHORD="chord",l.PIE="pie",l.PROJECT="square",l.SQUARE="butt",l.ROUND="round",l.BEVEL="bevel",l.MITER="miter",l.RGB="rgb",l.HSB="hsb",l.HSL="hsl",l.AUTO="auto",l.ALT=18,l.BACKSPACE=8,l.CONTROL=17,l.DELETE=46,l.DOWN_ARROW=40,l.ENTER=13,l.ESCAPE=27,l.LEFT_ARROW=37,l.OPTION=18,l.RETURN=13,l.RIGHT_ARROW=39,l.SHIFT=16,l.TAB=9,l.UP_ARROW=38,l.BLEND="source-over",l.REMOVE="destination-out",l.ADD="lighter",l.DARKEST="darken",l.LIGHTEST="lighten",l.DIFFERENCE="difference",l.SUBTRACT="subtract",l.EXCLUSION="exclusion",l.MULTIPLY="multiply",l.SCREEN="screen",l.REPLACE="copy",l.OVERLAY="overlay",l.HARD_LIGHT="hard-light",l.SOFT_LIGHT="soft-light",l.DODGE="color-dodge",l.BURN="color-burn",l.THRESHOLD="threshold",l.GRAY="gray",l.OPAQUE="opaque",l.INVERT="invert",l.POSTERIZE="posterize",l.DILATE="dilate",l.ERODE="erode",l.BLUR="blur",l.NORMAL="normal",l.ITALIC="italic",l.BOLD="bold",l.BOLDITALIC="bold italic",l.CHAR="CHAR",l.WORD="WORD",l._DEFAULT_TEXT_FILL="#000000",l._DEFAULT_LEADMULT=1.25,l._CTX_MIDDLE="middle",l.LINEAR="linear",l.QUADRATIC="quadratic",l.BEZIER="bezier",l.CURVE="curve",l.STROKE="stroke",l.FILL="fill",l.TEXTURE="texture",l.IMMEDIATE="immediate",l.IMAGE="image",l.NEAREST="nearest",l.REPEAT="repeat",l.CLAMP="clamp",l.MIRROR="mirror",l.LANDSCAPE="landscape",l.PORTRAIT="portrait",l._DEFAULT_STROKE="#000000",l._DEFAULT_FILL="#FFFFFF",l.GRID="grid",l.AXES="axes",l.LABEL="label",l.FALLBACK="fallback"},{}],254:[function(t,a,l){function c(u){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(u)}t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("./main"))&&n.__esModule?n:{default:n},h=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var g=m();if(g&&g.has(u))return g.get(u);var b={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in u)if(Object.prototype.hasOwnProperty.call(u,w)){var S=_?Object.getOwnPropertyDescriptor(u,w):null;S&&(S.get||S.set)?Object.defineProperty(b,w,S):b[w]=u[w]}return b.default=u,g&&g.set(u,b),b}(t("./constants"));function m(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return m=function(){return u},u}var p=[h.ARROW,h.CROSS,h.HAND,h.MOVE,h.TEXT,h.WAIT];f.default.prototype._frameRate=0,f.default.prototype._lastFrameTime=window.performance.now(),f.default.prototype._targetFrameRate=60;var s=window.print;function i(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function o(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}f.default.prototype.print=function(){var u;arguments.length?(u=console).log.apply(u,arguments):s()},f.default.prototype.frameCount=0,f.default.prototype.deltaTime=0,f.default.prototype.focused=document.hasFocus(),f.default.prototype.cursor=function(u,g,b){var _="auto",w=this._curElement.elt;if(p.includes(u))_=u;else if(typeof u=="string"){var S="";g&&b&&typeof g=="number"&&typeof b=="number"&&(S="".concat(g," ").concat(b)),_=u.substring(0,7)==="http://"||u.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(u)?"url(".concat(u,") ").concat(S,", auto"):u}w.style.cursor=_},f.default.prototype.frameRate=function(u){return f.default._validateParameters("frameRate",arguments),typeof u!="number"||u<0?this._frameRate:(this._setProperty("_targetFrameRate",u),u===0&&this._setProperty("_frameRate",u),this)},f.default.prototype.getFrameRate=function(){return this.frameRate()},f.default.prototype.setFrameRate=function(u){return this.frameRate(u)},f.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},f.default.prototype.displayWidth=screen.width,f.default.prototype.displayHeight=screen.height,f.default.prototype.windowWidth=i(),f.default.prototype.windowHeight=o(),f.default.prototype._onresize=function(u){this._setProperty("windowWidth",i()),this._setProperty("windowHeight",o());var g,b=this._isGlobal?window:this;typeof b.windowResized=="function"&&((g=b.windowResized(u))===void 0||g||u.preventDefault())},f.default.prototype.width=0,f.default.prototype.height=0,f.default.prototype.fullscreen=function(u){if(f.default._validateParameters("fullscreen",arguments),u===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;u?function(g){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},f.default.prototype.pixelDensity=function(u){var g;return f.default._validateParameters("pixelDensity",arguments),typeof u=="number"?(u!==this._pixelDensity&&(this._pixelDensity=u),(g=this).resizeCanvas(this.width,this.height,!0)):g=this._pixelDensity,g},f.default.prototype.displayDensity=function(){return window.devicePixelRatio},f.default.prototype.getURL=function(){return location.href},f.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(u){return u!==""})},f.default.prototype.getURLParams=function(){for(var u,g=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,b={};(u=g.exec(location.search))!=null;)u.index===g.lastIndex&&g.lastIndex++,b[u[1]]=u[2];return b};var d=f.default;l.default=d},{"./constants":253,"./main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.includes":156,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191}],255:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../main"))&&c.__esModule?c:{default:c};t("../internationalization");var f=null,h=null;n.default._friendlyError=n.default._checkForUserDefinedFunctions=n.default._fesErrorMonitor=function(){},f=null;var m="https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";h=function(){function i(d){return Object.getOwnPropertyNames(d).filter(function(u){return u[0]!=="_"&&!(u in o)&&(o[u]=!0)}).map(function(u){var g;return g=typeof d[u]=="function"?"function":u===u.toUpperCase()?"constant":"variable",{name:u,type:g}})}var o={};(f=[].concat(i(n.default.prototype),i(t("../constants")))).sort(function(d,u){return u.name.length-d.name.length})};function p(i,o){o=o||console.log.bind(console),f||h(),f.some(function(d){if(i.message&&i.message.match("\\W?".concat(d.name,"\\W"))!==null){var u=d.type==="function"?"".concat(d.name,"()"):d.name;return o("Did you just try to use p5.js's ".concat(u," ").concat(d.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(m)),!0}})}n.default.prototype._helpForMisusedAtTopLevelCode=p,document.readyState!=="complete"&&(window.addEventListener("error",p,!1),window.addEventListener("load",function(){window.removeEventListener("error",p,!1)}));var s=n.default;l.default=s},{"../constants":253,"../internationalization":262,"../main":264,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":166,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],256:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../main"))&&c.__esModule?c:{default:c};t("../internationalization"),n.default._friendlyFileLoadError=function(){};var f=n.default;l.default=f},{"../internationalization":262,"../main":264}],257:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.flat-map"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.unscopables.flat-map"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n=m(t("../main"));t("../internationalization"),h(t("../constants"));function f(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return f=function(){return s},s}function h(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=f();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}function m(s){return s&&s.__esModule?s:{default:s}}n.default._fesCodeReader=function(){};var p=n.default;l.default=p},{"../constants":253,"../internationalization":262,"../main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.flat-map":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.unscopables.flat-map":165,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],258:[function(t,a,l){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../main"))&&c.__esModule?c:{default:c};function f(){var m=/(^|@)\S+:\d+/,p=/^\s*at .*(\S+:\d+|\(native\))/m,s=/^(eval@)?(\[native code])?$/;return{parse:function(i){return i.stacktrace!==void 0||i["opera#sourceloc"]!==void 0?this.parseOpera(i):i.stack&&i.stack.match(p)?this.parseV8OrIE(i):i.stack?this.parseFFOrSafari(i):void 0},extractLocation:function(i){if(i.indexOf(":")===-1)return[i];var o=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i.replace(/[()]/g,""));return[o[1],o[2]||void 0,o[3]||void 0]},parseV8OrIE:function(i){return i.stack.split(`
`).filter(function(o){return!!o.match(p)},this).map(function(o){-1<o.indexOf("(eval ")&&(o=o.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var d=o.replace(/^\s+/,"").replace(/\(eval code/g,"("),u=d.match(/ (\((.+):(\d+):(\d+)\)$)/),g=(d=u?d.replace(u[0],""):d).split(/\s+/).slice(1),b=this.extractLocation(u?u[1]:g.pop());return{functionName:g.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(b[0])?void 0:b[0],lineNumber:b[1],columnNumber:b[2],source:o}},this)},parseFFOrSafari:function(i){return i.stack.split(`
`).filter(function(o){return!o.match(s)},this).map(function(o){if(-1<o.indexOf(" > eval")&&(o=o.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),o.indexOf("@")===-1&&o.indexOf(":")===-1)return{functionName:o};var d=/((.*".+"[^@]*)?[^@]*)(?:@)/,u=o.match(d),g=u&&u[1]?u[1]:void 0,b=this.extractLocation(o.replace(d,""));return{functionName:g,fileName:b[0],lineNumber:b[1],columnNumber:b[2],source:o}},this)},parseOpera:function(i){return!i.stacktrace||-1<i.message.indexOf(`
`)&&i.message.split(`
`).length>i.stacktrace.split(`
`).length?this.parseOpera9(i):i.stack?this.parseOpera11(i):this.parseOpera10(i)},parseOpera9:function(i){for(var o=/Line (\d+).*script (?:in )?(\S+)/i,d=i.message.split(`
`),u=[],g=2,b=d.length;g<b;g+=2){var _=o.exec(d[g]);_&&u.push({fileName:_[2],lineNumber:_[1],source:d[g]})}return u},parseOpera10:function(i){for(var o=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=i.stacktrace.split(`
`),u=[],g=0,b=d.length;g<b;g+=2){var _=o.exec(d[g]);_&&u.push({functionName:_[3]||void 0,fileName:_[2],lineNumber:_[1],source:d[g]})}return u},parseOpera11:function(i){return i.stack.split(`
`).filter(function(o){return!!o.match(m)&&!o.match(/^Error created at/)},this).map(function(o){var d,u=o.split("@"),g=this.extractLocation(u.pop()),b=u.shift()||"",_=b.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return b.match(/\(([^)]*)\)/)&&(d=b.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{functionName:_,args:d===void 0||d==="[arguments not available]"?void 0:d.split(","),fileName:g[0],lineNumber:g[1],columnNumber:g[2],source:o}},this)}}}n.default._getErrorStackParser=function(){return new f};var h=n.default;l.default=h},{"../main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],259:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../main"))&&c.__esModule?c:{default:c};(function(p){if(!(p&&p.__esModule)&&!(p===null||h(p)!=="object"&&typeof p!="function")){var s=f();if(s&&s.has(p))return s.get(p);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in p)if(Object.prototype.hasOwnProperty.call(p,d)){var u=o?Object.getOwnPropertyDescriptor(p,d):null;u&&(u.get||u.set)?Object.defineProperty(i,d,u):i[d]=p[d]}i.default=p,s&&s.set(p,i)}})(t("../constants")),t("../internationalization");function f(){if(typeof WeakMap!="function")return null;var p=new WeakMap;return f=function(){return p},p}function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(p)}n.default._validateParameters=n.default._clearValidateParamsCache=function(){};var m=n.default;l.default=m},{"../../../docs/parameterData.json":void 0,"../constants":253,"../internationalization":262,"../main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.map":167,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],260:[function(t,a,l){function c(m){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(m)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n=function(m){if(m&&m.__esModule)return m;if(m===null||c(m)!=="object"&&typeof m!="function")return{default:m};var p=f();if(p&&p.has(m))return p.get(m);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in m)if(Object.prototype.hasOwnProperty.call(m,o)){var d=i?Object.getOwnPropertyDescriptor(m,o):null;d&&(d.get||d.set)?Object.defineProperty(s,o,d):s[o]=m[o]}return s.default=m,p&&p.set(m,s),s}(t("./constants"));function f(){if(typeof WeakMap!="function")return null;var m=new WeakMap;return f=function(){return m},m}var h={modeAdjust:function(m,p,s,i,o){return o===n.CORNER?{x:m,y:p,w:s,h:i}:o===n.CORNERS?{x:m,y:p,w:s-m,h:i-p}:o===n.RADIUS?{x:m-s,y:p-i,w:2*s,h:2*i}:o===n.CENTER?{x:m-.5*s,y:p-.5*i,w:s,h:i}:void 0}};l.default=h},{"./constants":253}],261:[function(t,a,l){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};t("./internationalization");var f=Promise.resolve();Promise.all([new Promise(function(h,m){document.readyState==="complete"?h():window.addEventListener("load",h,!1)}),f]).then(function(){window._setupDone===void 0?window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!n.default.instance&&new n.default:console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import")})},{"../core/main":264,"./internationalization":262,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":229}],262:[function(t,a,l){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.setTranslatorLanguage=l.currentTranslatorLanguage=l.availableTranslatorLanguages=l.initialize=l.translator=void 0;var c,n,f=m(t("i18next")),h=m(t("i18next-browser-languagedetector"));function m(o){return o&&o.__esModule?o:{default:o}}function p(o,d){for(var u=0;u<d.length;u++){var g=d[u];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(o,g.key,g)}}var s=function(){function o(g,b){(function(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")})(this,o),this.init(g,b)}var d,u;return d=o,(u=[{key:"fetchWithTimeout",value:function(g,b,_){var w=2<arguments.length&&_!==void 0?_:2e3;return Promise.race([fetch(g,b),new Promise(function(S,T){return setTimeout(function(){return T(new Error("timeout"))},w)})])}},{key:"init",value:function(g,b){var _=1<arguments.length&&b!==void 0?b:{};this.services=g,this.options=_}},{key:"read",value:function(g,b,_){var w=this.options.loadPath;if(g===this.options.fallback)_(null,c[g][b]);else if(n.includes(g)){var S=this.services.interpolator.interpolate(w,{lng:g,ns:b});this.loadUrl(S,_)}else _("Not found",!1)}},{key:"loadUrl",value:function(g,b){this.fetchWithTimeout(g).then(function(_){if(!_.ok)throw new Error("failed loading ".concat(g));return _.json()},function(){throw new Error("failed loading ".concat(g))}).then(function(_){return b(null,_)}).catch(b)}}])&&p(d.prototype,u),o}();s.type="backend";var i=function(o,d){console.debug("p5.js translator called before translations were loaded"),f.default.t(o,d)};l.translator=i,l.initialize=function(){return f.default.use(h.default).use(s).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:c}).then(function(o){l.translator=i=o},function(o){return console.debug("Translations failed to load (".concat(o,")"))})},l.availableTranslatorLanguages=function(){return f.default.languages},l.currentTranslatorLanguage=function(){return f.default.language},l.setTranslatorLanguage=function(o){return f.default.changeLanguage(o||void 0,function(d){return console.debug("Translations failed to load (".concat(d,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":229,i18next:3,"i18next-browser-languagedetector":3}],263:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("./main"))&&c.__esModule?c:{default:c};n.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},n.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},n.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},n.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};var f=n.default;l.default=f},{"./main":264}],264:[function(t,a,l){function c(i){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t("./shim");var n=function(i){if(i&&i.__esModule)return i;if(i===null||c(i)!=="object"&&typeof i!="function")return{default:i};var o=f();if(o&&o.has(i))return o.get(i);var d={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in i)if(Object.prototype.hasOwnProperty.call(i,g)){var b=u?Object.getOwnPropertyDescriptor(i,g):null;b&&(b.get||b.set)?Object.defineProperty(d,g,b):d[g]=i[g]}return d.default=i,o&&o.set(i,d),d}(t("./constants"));function f(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return f=function(){return i},i}function h(i,o){for(var d=0;d<o.length;d++){var u=o[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}var m=function(){function i(u,g,b){var _=this;(function(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")})(this,i),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=g,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var w=Object.getOwnPropertyNames(i.prototype._registeredMethods),S=!0,T=!1,L=void 0;try{for(var A,P=w[Symbol.iterator]();!(S=(A=P.next()).done);S=!0){var R=A.value;this._registeredMethods[R]=i.prototype._registeredMethods[R].slice()}}catch(Y){T=!0,L=Y}finally{try{S||P.return==null||P.return()}finally{if(T)throw L}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){_._userNode&&typeof _._userNode=="string"&&(_._userNode=document.getElementById(_._userNode));var Y=_._isGlobal?window:_;if(Y.preload){var se=document.getElementById(_._loadingScreenId);se||((se=document.createElement("div")).innerHTML="Loading...",se.style.position="absolute",se.id=_._loadingScreenId,(_._userNode||document.body).appendChild(se));var ue=_._preloadMethods;for(var ge in ue){ue[ge]=ue[ge]||i;var de=ue[ge];de!==i.prototype&&de!==i||(_._isGlobal&&(window[ge]=_._wrapPreload(_,ge)),de=_),_._registeredPreloadMethods[ge]=de[ge],de[ge]=_._wrapPreload(de,ge)}Y.preload(),_._runIfPreloadsAreDone()}else _._setup(),_._draw()},this._runIfPreloadsAreDone=function(){var Y=this._isGlobal?window:this;if(Y._preloadCount===0){var se=document.getElementById(Y._loadingScreenId);se&&se.parentNode.removeChild(se),this._setupDone||(this._lastFrameTime=window.performance.now(),Y._setup(),Y._draw())}},this._decrementPreload=function(){var Y=this._isGlobal?window:this;typeof Y.preload=="function"&&(Y._setProperty("_preloadCount",Y._preloadCount-1),Y._runIfPreloadsAreDone())},this._wrapPreload=function(Y,se){var ue=this;return function(){ue._incrementPreload();for(var ge=arguments.length,de=new Array(ge),Pe=0;Pe<ge;Pe++)de[Pe]=arguments[Pe];return ue._registeredPreloadMethods[se].apply(Y,de)}},this._incrementPreload=function(){var Y=this._isGlobal?window:this;Y._setProperty("_preloadCount",Y._preloadCount+1)},this._setup=function(){_.createCanvas(_._defaultCanvasSize.width,_._defaultCanvasSize.height,"p2d");var Y=_._isGlobal?window:_;if(typeof Y.preload=="function")for(var se in _._preloadMethods)Y[se]=_._preloadMethods[se][se],Y[se]&&_&&(Y[se]=Y[se].bind(_));_._millisStart=window.performance.now(),typeof Y.setup=="function"&&Y.setup();var ue=document.getElementsByTagName("canvas"),ge=!0,de=!1,Pe=void 0;try{for(var ae,we=ue[Symbol.iterator]();!(ge=(ae=we.next()).done);ge=!0){var j=ae.value;j.dataset.hidden==="true"&&(j.style.visibility="",delete j.dataset.hidden)}}catch(B){de=!0,Pe=B}finally{try{ge||we.return==null||we.return()}finally{if(de)throw Pe}}_._lastFrameTime=window.performance.now(),_._setupDone=!0,(_._accessibleOutputs.grid||_._accessibleOutputs.text)&&_._updateAccsOutput()},this._draw=function(){var Y=window.performance.now(),se=Y-_._lastFrameTime,ue=1e3/_._targetFrameRate;(!_._loop||ue-5<=se)&&(_.redraw(),_._frameRate=1e3/(Y-_._lastFrameTime),_.deltaTime=Y-_._lastFrameTime,_._setProperty("deltaTime",_.deltaTime),_._lastFrameTime=Y,_._updateMouseCoords!==void 0&&(_._updateMouseCoords(),_._setProperty("movedX",0),_._setProperty("movedY",0))),_._loop&&(_._requestAnimId=window.requestAnimationFrame(_._draw))},this._setProperty=function(Y,se){_[Y]=se,_._isGlobal&&(window[Y]=se)},this.remove=function(){var Y=document.getElementById(_._loadingScreenId);if(Y&&(Y.parentNode.removeChild(Y),_._incrementPreload()),_._curElement){for(var se in _._loop=!1,_._requestAnimId&&window.cancelAnimationFrame(_._requestAnimId),_._events)window.removeEventListener(se,_._events[se]);var ue=!0,ge=!1,de=void 0;try{for(var Pe,ae=_._elements[Symbol.iterator]();!(ue=(Pe=ae.next()).done);ue=!0){var we=Pe.value;for(var j in we.elt&&we.elt.parentNode&&we.elt.parentNode.removeChild(we.elt),we._events)we.elt.removeEventListener(j,we._events[j])}}catch($){ge=!0,de=$}finally{try{ue||ae.return==null||ae.return()}finally{if(ge)throw de}}var B=_;_._registeredMethods.remove.forEach(function($){$!==void 0&&$.call(B)})}if(_._isGlobal){for(var V in i.prototype)try{delete window[V]}catch{window[V]=void 0}for(var te in _)if(_.hasOwnProperty(te))try{delete window[te]}catch{window[te]=void 0}i.instance=null}},this._registeredMethods.init.forEach(function(Y){Y!==void 0&&Y.call(this)},this),this._setupPromisePreloads();var D=this._createFriendlyGlobalFunctionBinder();if(u)u(this),i._checkForUserDefinedFunctions(this);else{for(var F in this._isGlobal=!0,i.instance=this,i.prototype)if(typeof i.prototype[F]=="function"){var I=F.substring(2);this._events.hasOwnProperty(I)||(Math.hasOwnProperty(F)&&Math[F]===i.prototype[F]?D(F,i.prototype[F]):D(F,i.prototype[F].bind(this)))}else D(F,i.prototype[F]);for(var k in this)this.hasOwnProperty(k)&&D(k,this[k])}for(var U in this._events){var q=this["_on".concat(U)];if(q){var Q=q.bind(this);window.addEventListener(U,Q,{passive:!1}),this._events[U]=Q}}function W(){_._setProperty("focused",!0)}function K(){_._setProperty("focused",!1)}window.addEventListener("focus",W),window.addEventListener("blur",K),this.registerMethod("remove",function(){window.removeEventListener("focus",W),window.removeEventListener("blur",K)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var o,d;return o=i,(d=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=n.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(u,g){i.prototype._preloadMethods.hasOwnProperty(u)||(i.prototype._preloadMethods[u]=g)}},{key:"registerMethod",value:function(u,g){var b=this||i.prototype;b._registeredMethods.hasOwnProperty(u)||(b._registeredMethods[u]=[]),b._registeredMethods[u].push(g)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(u){var g=0<arguments.length&&u!==void 0?u:{},b=g.globalObject||window;return g.log||console.log.bind(console),function(_,w){b[_]=w}}}])&&h(o.prototype,d),i}();for(var p in m.instance=null,m.disableFriendlyErrors=!1,n)m.prototype[p]=n[p];m.VERSION=n.VERSION,m.prototype._preloadMethods={loadJSON:m.prototype,loadImage:m.prototype,loadStrings:m.prototype,loadXML:m.prototype,loadBytes:m.prototype,loadTable:m.prototype,loadFont:m.prototype,loadModel:m.prototype,loadShader:m.prototype},m.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},m.prototype._registeredPreloadMethods={};var s=m;l.default=s},{"./constants":253,"./shim":275,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],265:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("./main"))&&c.__esModule?c:{default:c};n.default.Element=function(h,m){this.elt=h,this._pInst=this._pixelsState=m,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},n.default.Element.prototype.parent=function(h){return h===void 0?this.elt.parentNode:(typeof h=="string"?(h[0]==="#"&&(h=h.substring(1)),h=document.getElementById(h)):h instanceof n.default.Element&&(h=h.elt),h.appendChild(this.elt),this)},n.default.Element.prototype.id=function(h){return h===void 0?this.elt.id:(this.elt.id=h,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},n.default.Element.prototype.class=function(h){return h===void 0?this.elt.className:(this.elt.className=h,this)},n.default.Element.prototype.mousePressed=function(h){return n.default.Element._adjustListener("mousedown",function(m){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(m),h.call(this)},this),this},n.default.Element.prototype.doubleClicked=function(h){return n.default.Element._adjustListener("dblclick",h,this),this},n.default.Element.prototype.mouseWheel=function(h){return n.default.Element._adjustListener("wheel",h,this),this},n.default.Element.prototype.mouseReleased=function(h){return n.default.Element._adjustListener("mouseup",h,this),this},n.default.Element.prototype.mouseClicked=function(h){return n.default.Element._adjustListener("click",h,this),this},n.default.Element.prototype.mouseMoved=function(h){return n.default.Element._adjustListener("mousemove",h,this),this},n.default.Element.prototype.mouseOver=function(h){return n.default.Element._adjustListener("mouseover",h,this),this},n.default.Element.prototype.mouseOut=function(h){return n.default.Element._adjustListener("mouseout",h,this),this},n.default.Element.prototype.touchStarted=function(h){return n.default.Element._adjustListener("touchstart",h,this),this},n.default.Element.prototype.touchMoved=function(h){return n.default.Element._adjustListener("touchmove",h,this),this},n.default.Element.prototype.touchEnded=function(h){return n.default.Element._adjustListener("touchend",h,this),this},n.default.Element.prototype.dragOver=function(h){return n.default.Element._adjustListener("dragover",h,this),this},n.default.Element.prototype.dragLeave=function(h){return n.default.Element._adjustListener("dragleave",h,this),this},n.default.Element._adjustListener=function(h,m,p){return m===!1?n.default.Element._detachListener(h,p):n.default.Element._attachListener(h,m,p),this},n.default.Element._attachListener=function(h,m,p){p._events[h]&&n.default.Element._detachListener(h,p);var s=m.bind(p);p.elt.addEventListener(h,s,!1),p._events[h]=s},n.default.Element._detachListener=function(h,m){var p=m._events[h];m.elt.removeEventListener(h,p,!1),m._events[h]=null},n.default.Element.prototype._setProperty=function(h,m){this[h]=m};var f=n.default.Element;l.default=f},{"./main":264}],266:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("./main"))&&n.__esModule?n:{default:n},h=function(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=m();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}(t("./constants"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}f.default.Graphics=function(s,i,o,d){var u=o||h.P2D;this.canvas=document.createElement("canvas");var g=d._userNode||document.body;for(var b in g.appendChild(this.canvas),f.default.Element.call(this,this.canvas,d),f.default.prototype)this[b]||(typeof f.default.prototype[b]=="function"?this[b]=f.default.prototype[b].bind(this):this[b]=f.default.prototype[b]);return f.default.prototype._initializeInstanceVariables.apply(this),this.width=s,this.height=i,this._pixelDensity=d._pixelDensity,u===h.WEBGL?this._renderer=new f.default.RendererGL(this.canvas,this,!1):this._renderer=new f.default.Renderer2D(this.canvas,this,!1),d._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(s,i),this._renderer._applyDefaults(),this},f.default.Graphics.prototype=Object.create(f.default.Element.prototype),f.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},f.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var s=this._pInst._elements.indexOf(this);for(var i in s!==-1&&this._pInst._elements.splice(s,1),this._events)this.elt.removeEventListener(i,this._events[i])};var p=f.default.Graphics;l.default=p},{"./constants":253,"./main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.splice":164}],267:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("./main"))&&c.__esModule?c:{default:c},f=function(i){if(i&&i.__esModule)return i;if(i===null||m(i)!=="object"&&typeof i!="function")return{default:i};var o=h();if(o&&o.has(i))return o.get(i);var d={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in i)if(Object.prototype.hasOwnProperty.call(i,g)){var b=u?Object.getOwnPropertyDescriptor(i,g):null;b&&(b.get||b.set)?Object.defineProperty(d,g,b):d[g]=i[g]}return d.default=i,o&&o.set(i,d),d}(t("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return h=function(){return i},i}function m(i){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function p(i){var o=0,d=0;if(i.offsetParent)for(;o+=i.offsetLeft,d+=i.offsetTop,i=i.offsetParent;);else o+=i.offsetLeft,d+=i.offsetTop;return[o,d]}n.default.Renderer=function(i,o,d){n.default.Element.call(this,i,o),this.canvas=i,this._pixelsState=o,d?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=f.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=f.LEFT,this._textBaseline=f.BASELINE,this._textWrap=f.WORD,this._rectMode=f.CORNER,this._ellipseMode=f.CENTER,this._curveTightness=0,this._imageMode=f.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},n.default.Renderer.prototype=Object.create(n.default.Element.prototype),n.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},n.default.Renderer.prototype.pop=function(i){i.properties&&Object.assign(this,i.properties)},n.default.Renderer.prototype.resize=function(i,o){this.width=i,this.height=o,this.elt.width=i*this._pInst._pixelDensity,this.elt.height=o*this._pInst._pixelDensity,this.elt.style.width="".concat(i,"px"),this.elt.style.height="".concat(o,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},n.default.Renderer.prototype.get=function(i,o,d,u){var g=this._pixelsState,b=g._pixelDensity,_=this.canvas;if(i===void 0&&o===void 0)i=o=0,d=g.width,u=g.height;else if(i*=b,o*=b,d===void 0&&u===void 0)return i<0||o<0||i>=_.width||o>=_.height?[0,0,0,0]:this._getPixel(i,o);var w=new n.default.Image(d,u);return w.canvas.getContext("2d").drawImage(_,i,o,d*b,u*b,0,0,d,u),w},n.default.Renderer.prototype.textLeading=function(i){return typeof i=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",i),this._pInst):this._textLeading},n.default.Renderer.prototype.textSize=function(i){return typeof i=="number"?(this._setProperty("_textSize",i),this._leadingSet||this._setProperty("_textLeading",i*f._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},n.default.Renderer.prototype.textStyle=function(i){return i?(i!==f.NORMAL&&i!==f.ITALIC&&i!==f.BOLD&&i!==f.BOLDITALIC||this._setProperty("_textStyle",i),this._applyTextProperties()):this._textStyle},n.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},n.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},n.default.Renderer.prototype.textAlign=function(i,o){return i!==void 0?(this._setProperty("_textAlign",i),o!==void 0&&this._setProperty("_textBaseline",o),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},n.default.Renderer.prototype.textWrap=function(i){return this._setProperty("_textWrap",i),this._textWrap},n.default.Renderer.prototype.text=function(i,o,d,u,g){var b,_,w,S,T,L,A,P=this._pInst,R=this._textWrap,D=Number.MAX_VALUE;if((this._doFill||this._doStroke)&&i!==void 0){if(typeof i!="string"&&(i=i.toString()),b=(i=i.replace(/(\t)/g,"  ")).split(`
`),u!==void 0){switch(this._rectMode===f.CENTER&&(o-=u/2),this._textAlign){case f.CENTER:o+=u/2;break;case f.RIGHT:o+=u}var F=!1;if(g!==void 0){switch(this._rectMode===f.CENTER&&(d-=g/2),this._textBaseline){case f.BOTTOM:A=d+g,d=Math.max(A,d);break;case f.CENTER:A=d+g/2,d=Math.max(A,d);break;case f.BASELINE:F=!0,this._textBaseline=f.TOP}D=d+g-P.textAscent()}if(R===f.WORD){for(var I=[],k=0;k<b.length;k++){_="",T=b[k].split(" ");for(var U=0;U<T.length;U++)w="".concat(_+T[U])+" ",_=u<(S=this.textWidth(w))&&0<_.length?(I.push(_),"".concat(T[U])+" "):w;I.push(_)}var q=0,Q=P.textAlign().vertical;Q===f.CENTER?q=(I.length-1)*P.textLeading()/2:Q===f.BOTTOM&&(q=(I.length-1)*P.textLeading());for(var W=0;W<b.length;W++){_="",T=b[W].split(" ");for(var K=0;K<T.length;K++)w="".concat(_+T[K])+" ",u<(S=this.textWidth(w))&&0<_.length?(this._renderText(P,_.trim(),o,d-q,D),_="".concat(T[K])+" ",d+=P.textLeading()):_=w;this._renderText(P,_.trim(),o,d-q,D),d+=P.textLeading(),F&&(this._textBaseline=f.BASELINE)}}else{for(var Y=[],se=0;se<b.length;se++){_="",L=b[se].split("");for(var ue=0;ue<L.length;ue++)w="".concat(_+L[ue]),(S=this.textWidth(w))<=u?_+=L[ue]:u<S&&0<_.length&&(Y.push(_),_="".concat(L[ue]))}Y.push(_);var ge=0,de=P.textAlign().vertical;de===f.CENTER?ge=(Y.length-1)*P.textLeading()/2:de===f.BOTTOM&&(ge=(Y.length-1)*P.textLeading());for(var Pe=0;Pe<b.length;Pe++){_="",L=b[Pe].split("");for(var ae=0;ae<L.length;ae++)w="".concat(_+L[ae]),(S=this.textWidth(w))<=u?_+=L[ae]:u<S&&0<_.length&&(this._renderText(P,_.trim(),o,d-ge,D),d+=P.textLeading(),_="".concat(L[ae]))}this._renderText(P,_.trim(),o,d-ge,D),d+=P.textLeading(),F&&(this._textBaseline=f.BASELINE)}}else{var we=0,j=P.textAlign().vertical;j===f.CENTER?we=(b.length-1)*P.textLeading()/2:j===f.BOTTOM&&(we=(b.length-1)*P.textLeading());for(var B=0;B<b.length;B++)this._renderText(P,b[B],o,d-we,D),d+=P.textLeading()}return P}},n.default.Renderer.prototype._applyDefaults=function(){return this},n.default.Renderer.prototype._isOpenType=function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return m(i)==="object"&&i.font&&i.font.supported},n.default.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var i=document.createElement("span");i.style.fontFamily=this._textFont,i.style.fontSize="".concat(this._textSize,"px"),i.innerHTML="ABCjgq|";var o=document.createElement("div");o.style.display="inline-block",o.style.width="1px",o.style.height="0px";var d=document.createElement("div");d.appendChild(i),d.appendChild(o),d.style.height="0px",d.style.overflow="hidden",document.body.appendChild(d),o.style.verticalAlign="baseline";var u=p(o),g=p(i),b=u[1]-g[1];o.style.verticalAlign="bottom",u=p(o),g=p(i);var _=u[1]-g[1]-b;return document.body.removeChild(d),this._setProperty("_textAscent",b),this._setProperty("_textDescent",_),this};var s=n.default.Renderer;l.default=s},{"../core/constants":253,"./main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],268:[function(t,a,l){function c(o){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(o)}t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n=p(t("./main")),f=function(o){if(o&&o.__esModule)return o;if(o===null||c(o)!=="object"&&typeof o!="function")return{default:o};var d=m();if(d&&d.has(o))return d.get(o);var u={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in o)if(Object.prototype.hasOwnProperty.call(o,b)){var _=g?Object.getOwnPropertyDescriptor(o,b):null;_&&(_.get||_.set)?Object.defineProperty(u,b,_):u[b]=o[b]}return u.default=o,d&&d.set(o,u),u}(t("./constants")),h=p(t("../image/filters"));function m(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return m=function(){return o},o}function p(o){return o&&o.__esModule?o:{default:o}}t("./p5.Renderer");var s="rgba(0,0,0,0)";n.default.Renderer2D=function(o,d,u){return n.default.Renderer.call(this,o,d,u),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},n.default.Renderer2D.prototype=Object.create(n.default.Renderer.prototype),n.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=f.BLEND,this._setFill(f._DEFAULT_FILL),this._setStroke(f._DEFAULT_STROKE),this.drawingContext.lineCap=f.ROUND,this.drawingContext.font="normal 12px sans-serif"},n.default.Renderer2D.prototype.resize=function(o,d){n.default.Renderer.prototype.resize.call(this,o,d),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},n.default.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof n.default.Image)this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height);else{var o,d=this._getFill(),u=(o=this._pInst).color.apply(o,arguments);this._pInst._addAccsOutput()&&this._pInst._accsBackground(u.levels);var g=u.toString();this._setFill(g),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(d),this._isErasing&&this._pInst.erase()}this.drawingContext.restore()},n.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},n.default.Renderer2D.prototype.fill=function(){var o,d=(o=this._pInst).color.apply(o,arguments);this._setFill(d.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",d.levels)},n.default.Renderer2D.prototype.stroke=function(){var o,d=(o=this._pInst).color.apply(o,arguments);this._setStroke(d.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",d.levels)},n.default.Renderer2D.prototype.erase=function(o,d){if(!this._isErasing){this._cachedFillStyle=this.drawingContext.fillStyle;var u=this._pInst.color(255,o).toString();this.drawingContext.fillStyle=u,this._cachedStrokeStyle=this.drawingContext.strokeStyle;var g=this._pInst.color(255,d).toString();this.drawingContext.strokeStyle=g;var b=this._cachedBlendMode;this.blendMode(f.REMOVE),this._cachedBlendMode=b,this._isErasing=!0}},n.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},n.default.Renderer2D.prototype.image=function(o,d,u,g,b,_,w,S,T){var L;o.gifProperties&&o._animateGif(this._pInst);try{this._tint&&(n.default.MediaElement&&o instanceof n.default.MediaElement&&o.loadPixels(),o.canvas&&(L=this._getTintedImageCanvas(o))),L=L||o.canvas||o.elt;var A=1;o.width&&0<o.width&&(A=L.width/o.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(L,A*d,A*u,A*g,A*b,_,w,S,T),this._isErasing&&this._pInst.erase()}catch(P){if(P.name!=="NS_ERROR_NOT_AVAILABLE")throw P}},n.default.Renderer2D.prototype._getTintedImageCanvas=function(o){if(!o.canvas)return o;var d=h.default._toPixels(o.canvas),u=document.createElement("canvas");u.width=o.canvas.width,u.height=o.canvas.height;for(var g=u.getContext("2d"),b=g.createImageData(o.canvas.width,o.canvas.height),_=b.data,w=0;w<d.length;w+=4){var S=d[w],T=d[w+1],L=d[w+2],A=d[w+3];_[w]=S*this._tint[0]/255,_[w+1]=T*this._tint[1]/255,_[w+2]=L*this._tint[2]/255,_[w+3]=A*this._tint[3]/255}return g.putImageData(b,0,0),u},n.default.Renderer2D.prototype.blendMode=function(o){if(o===f.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(o!==f.BLEND&&o!==f.REMOVE&&o!==f.DARKEST&&o!==f.LIGHTEST&&o!==f.DIFFERENCE&&o!==f.MULTIPLY&&o!==f.EXCLUSION&&o!==f.SCREEN&&o!==f.REPLACE&&o!==f.OVERLAY&&o!==f.HARD_LIGHT&&o!==f.SOFT_LIGHT&&o!==f.DODGE&&o!==f.BURN&&o!==f.ADD)throw new Error("Mode ".concat(o," not recognized."));this._cachedBlendMode=o,this.drawingContext.globalCompositeOperation=o}},n.default.Renderer2D.prototype.blend=function(){for(var o=this.drawingContext.globalCompositeOperation,d=arguments.length,u=new Array(d),g=0;g<d;g++)u[g]=arguments[g];var b=u[u.length-1],_=Array.prototype.slice.call(u,0,u.length-1);this.drawingContext.globalCompositeOperation=b,n.default.prototype.copy.apply(this,_),this.drawingContext.globalCompositeOperation=o},n.default.Renderer2D.prototype._getPixel=function(o,d){var u;return[(u=this.drawingContext.getImageData(o,d,1,1).data)[0],u[1],u[2],u[3]]},n.default.Renderer2D.prototype.loadPixels=function(){var o=this._pixelsState,d=o._pixelDensity,u=this.width*d,g=this.height*d,b=this.drawingContext.getImageData(0,0,u,g);o._setProperty("imageData",b),o._setProperty("pixels",b.data)},n.default.Renderer2D.prototype.set=function(o,d,u){o=Math.floor(o),d=Math.floor(d);var g=this._pixelsState;if(u instanceof n.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(g._pixelDensity,g._pixelDensity),this.drawingContext.clearRect(o,d,u.width,u.height),this.drawingContext.drawImage(u.canvas,o,d),this.drawingContext.restore();else{var b=0,_=0,w=0,S=0,T=4*(d*g._pixelDensity*(this.width*g._pixelDensity)+o*g._pixelDensity);if(g.imageData||g.loadPixels.call(g),typeof u=="number")T<g.pixels.length&&(w=_=b=u,S=255);else if(u instanceof Array){if(u.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");T<g.pixels.length&&(b=u[0],_=u[1],w=u[2],S=u[3])}else u instanceof n.default.Color&&T<g.pixels.length&&(b=u.levels[0],_=u.levels[1],w=u.levels[2],S=u.levels[3]);for(var L=0;L<g._pixelDensity;L++)for(var A=0;A<g._pixelDensity;A++)T=4*((d*g._pixelDensity+A)*this.width*g._pixelDensity+(o*g._pixelDensity+L)),g.pixels[T]=b,g.pixels[T+1]=_,g.pixels[T+2]=w,g.pixels[T+3]=S}},n.default.Renderer2D.prototype.updatePixels=function(o,d,u,g){var b=this._pixelsState,_=b._pixelDensity;o===void 0&&d===void 0&&u===void 0&&g===void 0&&(d=o=0,u=this.width,g=this.height),o*=_,d*=_,u*=_,g*=_,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=b.imageData),this.drawingContext.putImageData(b.imageData,o,d,0,0,u,g)},n.default.Renderer2D.prototype._acuteArcToBezier=function(o,d){var u=d/2,g=Math.cos(u),b=Math.sin(u),_=1/Math.tan(u),w=o+u,S=Math.cos(w),T=Math.sin(w),L=(4-g)/3,A=b+(g-L)*_;return{ax:Math.cos(o).toFixed(7),ay:Math.sin(o).toFixed(7),bx:(L*S+A*T).toFixed(7),by:(L*T-A*S).toFixed(7),cx:(L*S-A*T).toFixed(7),cy:(L*T+A*S).toFixed(7),dx:Math.cos(o+d).toFixed(7),dy:Math.sin(o+d).toFixed(7)}},n.default.Renderer2D.prototype.arc=function(o,d,u,g,b,_,w){var S=this.drawingContext,T=u/2,L=g/2,A=0,P=[];for(o+=T,d+=L;1e-5<=_-b;)A=Math.min(_-b,f.HALF_PI),P.push(this._acuteArcToBezier(b,A)),b+=A;return this._doFill&&(S.beginPath(),P.forEach(function(R,D){D===0&&S.moveTo(o+R.ax*T,d+R.ay*L),S.bezierCurveTo(o+R.bx*T,d+R.by*L,o+R.cx*T,d+R.cy*L,o+R.dx*T,d+R.dy*L)}),w!==f.PIE&&w!=null||S.lineTo(o,d),S.closePath(),S.fill()),this._doStroke&&(S.beginPath(),P.forEach(function(R,D){D===0&&S.moveTo(o+R.ax*T,d+R.ay*L),S.bezierCurveTo(o+R.bx*T,d+R.by*L,o+R.cx*T,d+R.cy*L,o+R.dx*T,d+R.dy*L)}),w===f.PIE?(S.lineTo(o,d),S.closePath()):w===f.CHORD&&S.closePath(),S.stroke()),this},n.default.Renderer2D.prototype.ellipse=function(o){var d=this.drawingContext,u=this._doFill,g=this._doStroke,b=parseFloat(o[0]),_=parseFloat(o[1]),w=parseFloat(o[2]),S=parseFloat(o[3]);if(u&&!g){if(this._getFill()===s)return this}else if(!u&&g&&this._getStroke()===s)return this;var T=w/2*.5522847498,L=S/2*.5522847498,A=b+w,P=_+S,R=b+w/2,D=_+S/2;d.beginPath(),d.moveTo(b,D),d.bezierCurveTo(b,D-L,R-T,_,R,_),d.bezierCurveTo(R+T,_,A,D-L,A,D),d.bezierCurveTo(A,D+L,R+T,P,R,P),d.bezierCurveTo(R-T,P,b,D+L,b,D),u&&d.fill(),g&&d.stroke()},n.default.Renderer2D.prototype.line=function(o,d,u,g){var b=this.drawingContext;return this._doStroke&&(this._getStroke()===s||(b.beginPath(),b.moveTo(o,d),b.lineTo(u,g),b.stroke())),this},n.default.Renderer2D.prototype.point=function(o,d){var u=this.drawingContext;if(!this._doStroke)return this;if(this._getStroke()===s)return this;var g=this._getStroke(),b=this._getFill();this._setFill(g),u.beginPath(),u.arc(o,d,u.lineWidth/2,0,f.TWO_PI,!1),u.fill(),this._setFill(b)},n.default.Renderer2D.prototype.quad=function(o,d,u,g,b,_,w,S){var T=this.drawingContext,L=this._doFill,A=this._doStroke;if(L&&!A){if(this._getFill()===s)return this}else if(!L&&A&&this._getStroke()===s)return this;return T.beginPath(),T.moveTo(o,d),T.lineTo(u,g),T.lineTo(b,_),T.lineTo(w,S),T.closePath(),L&&T.fill(),A&&T.stroke(),this},n.default.Renderer2D.prototype.rect=function(o){var d=o[0],u=o[1],g=o[2],b=o[3],_=o[4],w=o[5],S=o[6],T=o[7],L=this.drawingContext,A=this._doFill,P=this._doStroke;if(A&&!P){if(this._getFill()===s)return this}else if(!A&&P&&this._getStroke()===s)return this;if(L.beginPath(),_===void 0)L.rect(d,u,g,b);else{w===void 0&&(w=_),S===void 0&&(S=w),T===void 0&&(T=S);var R=Math.abs(g),D=Math.abs(b),F=R/2,I=D/2;R<2*_&&(_=F),D<2*_&&(_=I),R<2*w&&(w=F),D<2*w&&(w=I),R<2*S&&(S=F),D<2*S&&(S=I),R<2*T&&(T=F),D<2*T&&(T=I),L.beginPath(),L.moveTo(d+_,u),L.arcTo(d+g,u,d+g,u+b,w),L.arcTo(d+g,u+b,d,u+b,S),L.arcTo(d,u+b,d,u,T),L.arcTo(d,u,d+g,u,_),L.closePath()}return this._doFill&&L.fill(),this._doStroke&&L.stroke(),this},n.default.Renderer2D.prototype.triangle=function(o){var d=this.drawingContext,u=this._doFill,g=this._doStroke,b=o[0],_=o[1],w=o[2],S=o[3],T=o[4],L=o[5];if(u&&!g){if(this._getFill()===s)return this}else if(!u&&g&&this._getStroke()===s)return this;d.beginPath(),d.moveTo(b,_),d.lineTo(w,S),d.lineTo(T,L),d.closePath(),u&&d.fill(),g&&d.stroke()},n.default.Renderer2D.prototype.endShape=function(o,d,u,g,b,_,w){if(d.length===0)return this;if(!this._doStroke&&!this._doFill)return this;var S,T,L,A=o===f.CLOSE;A&&!_&&d.push(d[0]);var P=d.length;if(!u||w!==f.POLYGON&&w!==null)if(!g||w!==f.POLYGON&&w!==null)if(!b||w!==f.POLYGON&&w!==null)if(w===f.POINTS)for(T=0;T<P;T++)S=d[T],this._doStroke&&this._pInst.stroke(S[6]),this._pInst.point(S[0],S[1]);else if(w===f.LINES)for(T=0;T+1<P;T+=2)S=d[T],this._doStroke&&this._pInst.stroke(d[T+1][6]),this._pInst.line(S[0],S[1],d[T+1][0],d[T+1][1]);else if(w===f.TRIANGLES)for(T=0;T+2<P;T+=3)S=d[T],this.drawingContext.beginPath(),this.drawingContext.moveTo(S[0],S[1]),this.drawingContext.lineTo(d[T+1][0],d[T+1][1]),this.drawingContext.lineTo(d[T+2][0],d[T+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(d[T+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(d[T+2][6]),this.drawingContext.stroke());else if(w===f.TRIANGLE_STRIP)for(T=0;T+1<P;T++)S=d[T],this.drawingContext.beginPath(),this.drawingContext.moveTo(d[T+1][0],d[T+1][1]),this.drawingContext.lineTo(S[0],S[1]),this._doStroke&&this._pInst.stroke(d[T+1][6]),this._doFill&&this._pInst.fill(d[T+1][5]),T+2<P&&(this.drawingContext.lineTo(d[T+2][0],d[T+2][1]),this._doStroke&&this._pInst.stroke(d[T+2][6]),this._doFill&&this._pInst.fill(d[T+2][5])),this._doFillStrokeClose(A);else if(w===f.TRIANGLE_FAN){if(2<P){for(this.drawingContext.beginPath(),T=2;T<P;T++)S=d[T],this.drawingContext.moveTo(d[0][0],d[0][1]),this.drawingContext.lineTo(d[T-1][0],d[T-1][1]),this.drawingContext.lineTo(S[0],S[1]),this.drawingContext.lineTo(d[0][0],d[0][1]),T<P-1&&(this._doFill&&S[5]!==d[T+1][5]||this._doStroke&&S[6]!==d[T+1][6])&&(this._doFill&&(this._pInst.fill(S[5]),this.drawingContext.fill(),this._pInst.fill(d[T+1][5])),this._doStroke&&(this._pInst.stroke(S[6]),this.drawingContext.stroke(),this._pInst.stroke(d[T+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(A)}}else if(w===f.QUADS)for(T=0;T+3<P;T+=4){for(S=d[T],this.drawingContext.beginPath(),this.drawingContext.moveTo(S[0],S[1]),L=1;L<4;L++)this.drawingContext.lineTo(d[T+L][0],d[T+L][1]);this.drawingContext.lineTo(S[0],S[1]),this._doFill&&this._pInst.fill(d[T+3][5]),this._doStroke&&this._pInst.stroke(d[T+3][6]),this._doFillStrokeClose(A)}else if(w===f.QUAD_STRIP){if(3<P)for(T=0;T+1<P;T+=2)S=d[T],this.drawingContext.beginPath(),T+3<P?(this.drawingContext.moveTo(d[T+2][0],d[T+2][1]),this.drawingContext.lineTo(S[0],S[1]),this.drawingContext.lineTo(d[T+1][0],d[T+1][1]),this.drawingContext.lineTo(d[T+3][0],d[T+3][1]),this._doFill&&this._pInst.fill(d[T+3][5]),this._doStroke&&this._pInst.stroke(d[T+3][6])):(this.drawingContext.moveTo(S[0],S[1]),this.drawingContext.lineTo(d[T+1][0],d[T+1][1])),this._doFillStrokeClose(A)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(d[0][0],d[0][1]),T=1;T<P;T++)(S=d[T]).isVert&&(S.moveTo?this.drawingContext.moveTo(S[0],S[1]):this.drawingContext.lineTo(S[0],S[1]));this._doFillStrokeClose(A)}else{for(this.drawingContext.beginPath(),T=0;T<P;T++)d[T].isVert?d[T].moveTo?this.drawingContext.moveTo(d[T][0],d[T][1]):this.drawingContext.lineTo(d[T][0],d[T][1]):this.drawingContext.quadraticCurveTo(d[T][0],d[T][1],d[T][2],d[T][3]);this._doFillStrokeClose(A)}else{for(this.drawingContext.beginPath(),T=0;T<P;T++)d[T].isVert?d[T].moveTo?this.drawingContext.moveTo(d[T][0],d[T][1]):this.drawingContext.lineTo(d[T][0],d[T][1]):this.drawingContext.bezierCurveTo(d[T][0],d[T][1],d[T][2],d[T][3],d[T][4],d[T][5]);this._doFillStrokeClose(A)}else if(3<P){var R=[],D=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(d[1][0],d[1][1]),T=1;T+2<P;T++)S=d[T],R[0]=[S[0],S[1]],R[1]=[S[0]+(D*d[T+1][0]-D*d[T-1][0])/6,S[1]+(D*d[T+1][1]-D*d[T-1][1])/6],R[2]=[d[T+1][0]+(D*d[T][0]-D*d[T+2][0])/6,d[T+1][1]+(D*d[T][1]-D*d[T+2][1])/6],R[3]=[d[T+1][0],d[T+1][1]],this.drawingContext.bezierCurveTo(R[1][0],R[1][1],R[2][0],R[2][1],R[3][0],R[3][1]);A&&this.drawingContext.lineTo(d[T+1][0],d[T+1][1]),this._doFillStrokeClose(A)}return _=b=g=u=!1,A&&d.pop(),this},n.default.Renderer2D.prototype.strokeCap=function(o){return o!==f.ROUND&&o!==f.SQUARE&&o!==f.PROJECT||(this.drawingContext.lineCap=o),this},n.default.Renderer2D.prototype.strokeJoin=function(o){return o!==f.ROUND&&o!==f.BEVEL&&o!==f.MITER||(this.drawingContext.lineJoin=o),this},n.default.Renderer2D.prototype.strokeWeight=function(o){return this.drawingContext.lineWidth=o===void 0||o===0?1e-4:o,this},n.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},n.default.Renderer2D.prototype._setFill=function(o){o!==this._cachedFillStyle&&(this.drawingContext.fillStyle=o,this._cachedFillStyle=o)},n.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},n.default.Renderer2D.prototype._setStroke=function(o){o!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=o,this._cachedStrokeStyle=o)},n.default.Renderer2D.prototype.bezier=function(o,d,u,g,b,_,w,S){return this._pInst.beginShape(),this._pInst.vertex(o,d),this._pInst.bezierVertex(u,g,b,_,w,S),this._pInst.endShape(),this},n.default.Renderer2D.prototype.curve=function(o,d,u,g,b,_,w,S){return this._pInst.beginShape(),this._pInst.curveVertex(o,d),this._pInst.curveVertex(u,g),this._pInst.curveVertex(b,_),this._pInst.curveVertex(w,S),this._pInst.endShape(),this},n.default.Renderer2D.prototype._doFillStrokeClose=function(o){o&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},n.default.Renderer2D.prototype.applyMatrix=function(o,d,u,g,b,_){this.drawingContext.transform(o,d,u,g,b,_)},n.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},n.default.Renderer2D.prototype.rotate=function(o){this.drawingContext.rotate(o)},n.default.Renderer2D.prototype.scale=function(o,d){return this.drawingContext.scale(o,d),this},n.default.Renderer2D.prototype.translate=function(o,d){return o instanceof n.default.Vector&&(d=o.y,o=o.x),this.drawingContext.translate(o,d),this},n.default.Renderer2D.prototype.text=function(o,d,u,g,b){var _;g!==void 0&&this.drawingContext.textBaseline===f.BASELINE&&(_=!0,this.drawingContext.textBaseline=f.TOP);var w=n.default.Renderer.prototype.text.apply(this,arguments);return _&&(this.drawingContext.textBaseline=f.BASELINE),w},n.default.Renderer2D.prototype._renderText=function(o,d,u,g,b){if(!(b<=g))return o.push(),this._isOpenType()?this._textFont._renderPath(d,u,g,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(d,u,g),this._doFill&&(this._fillSet||this._setFill(f._DEFAULT_TEXT_FILL),this.drawingContext.fillText(d,u,g))),o.pop(),o},n.default.Renderer2D.prototype.textWidth=function(o){return this._isOpenType()?this._textFont._textWidth(o,this._textSize):this.drawingContext.measureText(o).width},n.default.Renderer2D.prototype._applyTextProperties=function(){var o,d=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),o=this._textFont,this._isOpenType()&&(o=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(o||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===f.CENTER?this.drawingContext.textBaseline=f._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,d},n.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),n.default.Renderer.prototype.push.apply(this)},n.default.Renderer2D.prototype.pop=function(o){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,n.default.Renderer.prototype.pop.call(this,o)};var i=n.default.Renderer2D;l.default=i},{"../image/filters":285,"./constants":253,"./main":264,"./p5.Renderer":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.number.to-fixed":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182}],269:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var c,n=(c=t("./main"))&&c.__esModule?c:{default:c};n.default.prototype._promisePreloads=[];var f=!(n.default.prototype.registerPromisePreload=function(m){n.default.prototype._promisePreloads.push(m)});n.default.prototype._setupPromisePreloads=function(){var m=!0,p=!1,s=void 0;try{for(var i,o=this._promisePreloads[Symbol.iterator]();!(m=(i=o.next()).done);m=!0){var d=i.value,u=this,g=d.method,b=d.addCallbacks,_=d.legacyPreloadSetup,w=d.target||this,S=w[g].bind(w);if(w===n.default.prototype){if(f)continue;u=null,S=w[g]}w[g]=this._wrapPromisePreload(u,S,b),_&&(w[_.method]=this._legacyPreloadGenerator(u,_,w[g]))}}catch(T){p=!0,s=T}finally{try{m||o.return==null||o.return()}finally{if(p)throw s}}f=!0},n.default.prototype._wrapPromisePreload=function(m,p,s){var i=function(){var o=this;this._incrementPreload();for(var d=null,u=null,g=arguments.length,b=new Array(g),_=0;_<g;_++)b[_]=arguments[_];if(s)for(var w=b.length-1;0<=w&&!u&&typeof b[w]=="function";w--)u=d,d=b.pop();var S=Promise.resolve(p.apply(this,b));return d&&S.then(d),u&&S.catch(u),S.then(function(){return o._decrementPreload()}),S};return m&&(i=i.bind(m)),i};function h(){return{}}n.default.prototype._legacyPreloadGenerator=function(m,p,s){var i=p.createBaseObject||h,o=function(){var d=this;this._incrementPreload();var u=i.apply(this,arguments);return s.apply(this,arguments).then(function(g){Object.assign(u,g),d._decrementPreload()}),u};return m&&(o=o.bind(m)),o}},{"./main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],270:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("./main"))&&c.__esModule?c:{default:c},f=function(i){if(i&&i.__esModule)return i;if(i===null||m(i)!=="object"&&typeof i!="function")return{default:i};var o=h();if(o&&o.has(i))return o.get(i);var d={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in i)if(Object.prototype.hasOwnProperty.call(i,g)){var b=u?Object.getOwnPropertyDescriptor(i,g):null;b&&(b.get||b.set)?Object.defineProperty(d,g,b):d[g]=i[g]}return d.default=i,o&&o.set(i,d),d}(t("./constants"));function h(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return h=function(){return i},i}function m(i){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var p="defaultCanvas0";n.default.prototype.createCanvas=function(i,o,d){n.default._validateParameters("createCanvas",arguments);var u,g=d||f.P2D;if(g===f.WEBGL){if(u=document.getElementById(p)){u.parentNode.removeChild(u);var b=this._renderer;this._elements=this._elements.filter(function(S){return S!==b})}(u=document.createElement("canvas")).id=p,u.classList.add("p5Canvas")}else if(this._defaultGraphicsCreated)u=this.canvas;else{u=document.createElement("canvas");for(var _=0;document.getElementById("defaultCanvas".concat(_));)_++;p="defaultCanvas".concat(_),u.id=p,u.classList.add("p5Canvas")}if(this._setupDone||(u.dataset.hidden=!0,u.style.visibility="hidden"),this._userNode)this._userNode.appendChild(u);else{if(document.getElementsByTagName("main").length===0){var w=document.createElement("main");document.body.appendChild(w)}document.getElementsByTagName("main")[0].appendChild(u)}return g===f.WEBGL?(this._setProperty("_renderer",new n.default.RendererGL(u,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new n.default.Renderer2D(u,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(i,o),this._renderer._applyDefaults(),this._renderer},n.default.prototype.resizeCanvas=function(i,o,d){if(n.default._validateParameters("resizeCanvas",arguments),this._renderer){var u={};for(var g in this.drawingContext){var b=this.drawingContext[g];m(b)!=="object"&&typeof b!="function"&&(u[g]=b)}for(var _ in this._renderer.resize(i,o),this.width=i,this.height=o,u)try{this.drawingContext[_]=u[_]}catch{}d||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},n.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},n.default.prototype.createGraphics=function(i,o,d){return n.default._validateParameters("createGraphics",arguments),new n.default.Graphics(i,o,d,this)},n.default.prototype.blendMode=function(i){n.default._validateParameters("blendMode",arguments),i===f.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),i=f.BLEND),this._renderer.blendMode(i)};var s=n.default;l.default=s},{"../webgl/p5.RendererGL":318,"./constants":253,"./main":264,"./p5.Graphics":266,"./p5.Renderer2D":268,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],271:[function(t,a,l){function c(i){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}t("core-js/modules/es.array.slice"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n=p(t("../main")),f=function(i){if(i&&i.__esModule)return i;if(i===null||c(i)!=="object"&&typeof i!="function")return{default:i};var o=m();if(o&&o.has(i))return o.get(i);var d={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in i)if(Object.prototype.hasOwnProperty.call(i,g)){var b=u?Object.getOwnPropertyDescriptor(i,g):null;b&&(b.get||b.set)?Object.defineProperty(d,g,b):d[g]=i[g]}return d.default=i,o&&o.set(i,d),d}(t("../constants")),h=p(t("../helpers"));function m(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return m=function(){return i},i}function p(i){return i&&i.__esModule?i:{default:i}}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),n.default.prototype._normalizeArcAngles=function(i,o,d,u,g){var b;return i-=f.TWO_PI*Math.floor(i/f.TWO_PI),o-=f.TWO_PI*Math.floor(o/f.TWO_PI),b=Math.min(Math.abs(i-o),f.TWO_PI-Math.abs(i-o)),g&&(i=i<=f.HALF_PI?Math.atan(d/u*Math.tan(i)):i>f.HALF_PI&&i<=3*f.HALF_PI?Math.atan(d/u*Math.tan(i))+f.PI:Math.atan(d/u*Math.tan(i))+f.TWO_PI,o=o<=f.HALF_PI?Math.atan(d/u*Math.tan(o)):o>f.HALF_PI&&o<=3*f.HALF_PI?Math.atan(d/u*Math.tan(o))+f.PI:Math.atan(d/u*Math.tan(o))+f.TWO_PI),o<i&&(o+=f.TWO_PI),{start:i,stop:o,correspondToSamePoint:b<1e-5}},n.default.prototype.arc=function(i,o,d,u,g,b,_,w){if(n.default._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;if(g===b)return this;g=this._toRadians(g),b=this._toRadians(b),d=Math.abs(d),u=Math.abs(u);var S=h.default.modeAdjust(i,o,d,u,this._renderer._ellipseMode),T=this._normalizeArcAngles(g,b,S.w,S.h,!0);return T.correspondToSamePoint?this._renderer.ellipse([S.x,S.y,S.w,S.h,w]):(this._renderer.arc(S.x,S.y,S.w,S.h,T.start,T.stop,_,w),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[S.x,S.y,S.w,S.h,T.start,T.stop,_])),this},n.default.prototype.ellipse=function(i,o,d,u,g){return n.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},n.default.prototype.circle=function(){n.default._validateParameters("circle",arguments);var i=Array.prototype.slice.call(arguments,0,2);return i.push(arguments[2]),i.push(arguments[2]),this._renderEllipse.apply(this,i)},n.default.prototype._renderEllipse=function(i,o,d,u,g){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;d<0&&(d=Math.abs(d)),u===void 0?u=d:u<0&&(u=Math.abs(u));var b=h.default.modeAdjust(i,o,d,u,this._renderer._ellipseMode);return this._renderer.ellipse([b.x,b.y,b.w,b.h,g]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[b.x,b.y,b.w,b.h]),this},n.default.prototype.line=function(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];var u;return n.default._validateParameters("line",o),this._renderer._doStroke&&(u=this._renderer).line.apply(u,o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",o),this},n.default.prototype.point=function(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];var u;return n.default._validateParameters("point",o),this._renderer._doStroke&&(o.length===1&&o[0]instanceof n.default.Vector?this._renderer.point.call(this._renderer,o[0].x,o[0].y,o[0].z):((u=this._renderer).point.apply(u,o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",o))),this},n.default.prototype.quad=function(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];var u;return n.default._validateParameters("quad",o),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&o.length<=12?this._renderer.quad.call(this._renderer,o[0],o[1],0,o[2],o[3],0,o[4],o[5],0,o[6],o[7],0,o[8],o[9]):((u=this._renderer).quad.apply(u,o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",o))),this},n.default.prototype.rect=function(){return n.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},n.default.prototype.square=function(i,o,d,u,g,b,_){return n.default._validateParameters("square",arguments),this._renderRect.call(this,i,o,d,d,u,g,b,_)},n.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var i=h.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),o=[i.x,i.y,i.w,i.h],d=4;d<arguments.length;d++)o[d]=arguments[d];this._renderer.rect(o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[i.x,i.y,i.w,i.h])}return this},n.default.prototype.triangle=function(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];return n.default._validateParameters("triangle",o),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",o),this};var s=n.default;l.default=s},{"../constants":253,"../friendly_errors/fes_core":255,"../friendly_errors/file_errors":256,"../friendly_errors/validate_params":259,"../helpers":260,"../main":264,"core-js/modules/es.array.slice":162}],272:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../main"))&&n.__esModule?n:{default:n},h=function(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=m();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}(t("../constants"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}f.default.prototype.ellipseMode=function(s){return f.default._validateParameters("ellipseMode",arguments),s!==h.CORNER&&s!==h.CORNERS&&s!==h.RADIUS&&s!==h.CENTER||(this._renderer._ellipseMode=s),this},f.default.prototype.noSmooth=function(){return this.setAttributes("antialias",!1),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},f.default.prototype.rectMode=function(s){return f.default._validateParameters("rectMode",arguments),s!==h.CORNER&&s!==h.CORNERS&&s!==h.RADIUS&&s!==h.CENTER||(this._renderer._rectMode=s),this},f.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},f.default.prototype.strokeCap=function(s){return f.default._validateParameters("strokeCap",arguments),s!==h.ROUND&&s!==h.SQUARE&&s!==h.PROJECT||this._renderer.strokeCap(s),this},f.default.prototype.strokeJoin=function(s){return f.default._validateParameters("strokeJoin",arguments),s!==h.ROUND&&s!==h.BEVEL&&s!==h.MITER||this._renderer.strokeJoin(s),this},f.default.prototype.strokeWeight=function(s){return f.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(s),this};var p=f.default;l.default=p},{"../constants":253,"../main":264}],273:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../main"))&&c.__esModule?c:{default:c};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),n.default.prototype.bezier=function(){for(var h,m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];return n.default._validateParameters("bezier",p),(this._renderer._doStroke||this._renderer._doFill)&&(h=this._renderer).bezier.apply(h,p),this},n.default.prototype.bezierDetail=function(h){return n.default._validateParameters("bezierDetail",arguments),this._bezierDetail=h,this},n.default.prototype.bezierPoint=function(h,m,p,s,i){n.default._validateParameters("bezierPoint",arguments);var o=1-i;return Math.pow(o,3)*h+3*Math.pow(o,2)*i*m+3*o*Math.pow(i,2)*p+Math.pow(i,3)*s},n.default.prototype.bezierTangent=function(h,m,p,s,i){n.default._validateParameters("bezierTangent",arguments);var o=1-i;return 3*s*Math.pow(i,2)-3*p*Math.pow(i,2)+6*p*o*i-6*m*o*i+3*m*Math.pow(o,2)-3*h*Math.pow(o,2)},n.default.prototype.curve=function(){for(var h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];var s;return n.default._validateParameters("curve",m),this._renderer._doStroke&&(s=this._renderer).curve.apply(s,m),this},n.default.prototype.curveDetail=function(h){return n.default._validateParameters("curveDetail",arguments),this._curveDetail=h<3?3:h,this},n.default.prototype.curveTightness=function(h){return n.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=h,this},n.default.prototype.curvePoint=function(h,m,p,s,i){n.default._validateParameters("curvePoint",arguments);var o=i*i*i,d=i*i;return h*(-.5*o+d-.5*i)+m*(1.5*o-2.5*d+1)+p*(-1.5*o+2*d+.5*i)+s*(.5*o-.5*d)},n.default.prototype.curveTangent=function(h,m,p,s,i){n.default._validateParameters("curveTangent",arguments);var o=i*i;return h*(-3*o/2+2*i-.5)+m*(9*o/2-5*i)+p*(-9*o/2+4*i+.5)+s*(3*o/2-i)};var f=n.default;l.default=f},{"../friendly_errors/fes_core":255,"../friendly_errors/file_errors":256,"../friendly_errors/validate_params":259,"../main":264}],274:[function(t,a,l){function c(w){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(w)}t("core-js/modules/es.array.slice"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../main"))&&n.__esModule?n:{default:n},h=function(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var S=m();if(S&&S.has(w))return S.get(w);var T={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in w)if(Object.prototype.hasOwnProperty.call(w,A)){var P=L?Object.getOwnPropertyDescriptor(w,A):null;P&&(P.get||P.set)?Object.defineProperty(T,A,P):T[A]=w[A]}return T.default=w,S&&S.set(w,T),T}(t("../constants"));function m(){if(typeof WeakMap!="function")return null;var w=new WeakMap;return m=function(){return w},w}var p=null,s=[],i=[],o=!1,d=!1,u=!1,g=!1,b=!0;f.default.prototype.beginContour=function(){return i=[],g=!0,this},f.default.prototype.beginShape=function(w){var S;return f.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(S=this._renderer).beginShape.apply(S,arguments):(p=w===h.POINTS||w===h.LINES||w===h.TRIANGLES||w===h.TRIANGLE_FAN||w===h.TRIANGLE_STRIP||w===h.QUADS||w===h.QUAD_STRIP?w:null,s=[],i=[]),this},f.default.prototype.bezierVertex=function(){for(var w=arguments.length,S=new Array(w),T=0;T<w;T++)S[T]=arguments[T];var L;if(f.default._validateParameters("bezierVertex",S),this._renderer.isP3D)(L=this._renderer).bezierVertex.apply(L,S);else if(s.length===0)f.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{o=!0;for(var A=[],P=0;P<S.length;P++)A[P]=S[P];A.isVert=!1,g?i.push(A):s.push(A)}return this},f.default.prototype.curveVertex=function(){for(var w=arguments.length,S=new Array(w),T=0;T<w;T++)S[T]=arguments[T];var L;return f.default._validateParameters("curveVertex",S),this._renderer.isP3D?(L=this._renderer).curveVertex.apply(L,S):(d=!0,this.vertex(S[0],S[1])),this},f.default.prototype.endContour=function(){var w=i[0].slice();w.isVert=i[0].isVert,w.moveTo=!1,i.push(w),b&&(s.push(s[0]),b=!1);for(var S=0;S<i.length;S++)s.push(i[S]);return this},f.default.prototype.endShape=function(w){if(f.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(w,d,o,u,g,p);else{if(s.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var S=w===h.CLOSE;S&&!g&&s.push(s[0]),this._renderer.endShape(w,s,d,o,u,g,p),b=!(g=u=o=d=!1),S&&s.pop()}return this},f.default.prototype.quadraticVertex=function(){for(var w=arguments.length,S=new Array(w),T=0;T<w;T++)S[T]=arguments[T];if(f.default._validateParameters("quadraticVertex",S),this._renderer.isP3D){var L;(L=this._renderer).quadraticVertex.apply(L,S)}else{if(this._contourInited){var A={};return A.x=S[0],A.y=S[1],A.x3=S[2],A.y3=S[3],A.type=h.QUADRATIC,this._contourVertices.push(A),this}if(0<s.length){u=!0;for(var P=[],R=0;R<S.length;R++)P[R]=S[R];P.isVert=!1,g?i.push(P):s.push(P)}else f.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},f.default.prototype.vertex=function(w,S,T,L,A){if(this._renderer.isP3D){var P;(P=this._renderer).vertex.apply(P,arguments)}else{var R=[];R.isVert=!0,R[0]=w,R[1]=S,R[2]=0,R[3]=0,R[4]=0,R[5]=this._renderer._getFill(),R[6]=this._renderer._getStroke(),T&&(R.moveTo=T),g?(i.length===0&&(R.moveTo=!0),i.push(R)):s.push(R)}return this},f.default.prototype.normal=function(w,S,T){var L;return this._assert3d("normal"),f.default._validateParameters("normal",arguments),(L=this._renderer).normal.apply(L,arguments),this};var _=f.default;l.default=_},{"../constants":253,"../main":264,"core-js/modules/es.array.slice":162}],275:[function(t,a,l){function c(n){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n,f){window.setTimeout(n,1e3/60)},typeof Uint8ClampedArray=="undefined"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),function(){if(!Object.assign){var n=Object.keys,f=Object.defineProperty,h=typeof Symbol=="function"&&c(Symbol())==="symbol",m=Object.prototype.propertyIsEnumerable,p=function(s){return function(i){return m.call(s,i)}};f(Object,"assign",{value:function(s,i){if(s==null)throw new TypeError("target must be an object");var o,d,u,g,b=Object(s);for(o=1;o<arguments.length;++o)for(d=Object(arguments[o]),g=n(d),h&&Object.getOwnPropertySymbols&&g.push.apply(g,Object.getOwnPropertySymbols(d).filter(p(d))),u=0;u<g.length;++u)b[g[u]]=d[g[u]];return b},configurable:!0,enumerable:!1,writable:!0})}}()},{"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":229}],276:[function(t,a,l){t("core-js/modules/es.array.for-each"),t("core-js/modules/es.object.assign"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("./main"))&&c.__esModule?c:{default:c};n.default.prototype.noLoop=function(){this._loop=!1},n.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},n.default.prototype.isLooping=function(){return this._loop},n.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},n.default.prototype.pop=function(){var h=this._styles.pop();h?(this._renderer.pop(h.renderer),Object.assign(this,h.props)):console.warn("pop() was called without matching push()")},n.default.prototype.redraw=function(h){if(!this._inUserDraw&&this._setupDone){var m=parseInt(h);(isNaN(m)||m<1)&&(m=1);var p=this._isGlobal?window:this;if(typeof p.draw=="function"){p.setup===void 0&&p.scale(p._pixelDensity,p._pixelDensity);for(var s=function(o){o.call(p)},i=0;i<m;i++){p.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),p._renderer.isP3D&&p._renderer._update(),p._setProperty("frameCount",p.frameCount+1),p._registeredMethods.pre.forEach(s),this._inUserDraw=!0;try{p.draw()}finally{this._inUserDraw=!1}p._registeredMethods.post.forEach(s)}}}};var f=n.default;l.default=f},{"./main":264,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":173,"core-js/modules/web.dom-collections.for-each":228}],277:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("./main"))&&c.__esModule?c:{default:c};function f(m){return function(p){if(Array.isArray(p)){for(var s=0,i=new Array(p.length);s<p.length;s++)i[s]=p[s];return i}}(m)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.default.prototype.applyMatrix=function(){var m,p,s=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||s?(m=this._renderer).applyMatrix.apply(m,f(arguments[0])):(p=this._renderer).applyMatrix.apply(p,arguments),this},n.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},n.default.prototype.rotate=function(m,p){return n.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(m),p),this},n.default.prototype.rotateX=function(m){return this._assert3d("rotateX"),n.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(m)),this},n.default.prototype.rotateY=function(m){return this._assert3d("rotateY"),n.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(m)),this},n.default.prototype.rotateZ=function(m){return this._assert3d("rotateZ"),n.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(m)),this},n.default.prototype.scale=function(m,p,s){if(n.default._validateParameters("scale",arguments),m instanceof n.default.Vector){var i=m;m=i.x,p=i.y,s=i.z}else if(m instanceof Array){var o=m;m=o[0],p=o[1],s=o[2]||1}return isNaN(p)?p=s=m:isNaN(s)&&(s=1),this._renderer.scale.call(this._renderer,m,p,s),this},n.default.prototype.shearX=function(m){n.default._validateParameters("shearX",arguments);var p=this._toRadians(m);return this._renderer.applyMatrix(1,0,Math.tan(p),1,0,0),this},n.default.prototype.shearY=function(m){n.default._validateParameters("shearY",arguments);var p=this._toRadians(m);return this._renderer.applyMatrix(1,Math.tan(p),0,1,0,0),this},n.default.prototype.translate=function(m,p,s){return n.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(m,p,s):this._renderer.translate(m,p),this};var h=n.default;l.default=h},{"./main":264,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229}],278:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};function f(m){return function(p){if(Array.isArray(p)){for(var s=0,i=new Array(p.length);s<p.length;s++)i[s]=p[s];return i}}(m)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(m){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(m)}n.default.prototype.storeItem=function(m,p){typeof m!="string"&&console.log("The argument that you passed to storeItem() - ".concat(m," is not a string.")),m.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(m," must not end with 'p5TypeID'.")),p===void 0&&console.log("You cannot store undefined variables using storeItem().");var s=h(p);switch(s){case"number":case"boolean":p=p.toString();break;case"object":p instanceof n.default.Color?s="p5.Color":p instanceof n.default.Vector&&(s="p5.Vector",p=[p.x,p.y,p.z]),p=JSON.stringify(p)}localStorage.setItem(m,p);var i="".concat(m,"p5TypeID");localStorage.setItem(i,s)},n.default.prototype.getItem=function(m){var p=localStorage.getItem(m),s=localStorage.getItem("".concat(m,"p5TypeID"));if(s===void 0)console.log("Unable to determine type of item stored under ".concat(m,"in local storage. Did you save the item with something other than setItem()?"));else if(p!==null)switch(s){case"number":p=parseFloat(p);break;case"boolean":p=p==="true";break;case"object":p=JSON.parse(p);break;case"p5.Color":p=JSON.parse(p),p=this.color.apply(this,f(p.levels));break;case"p5.Vector":p=JSON.parse(p),p=this.createVector.apply(this,f(p))}return p},n.default.prototype.clearStorage=function(){localStorage.clear()},n.default.prototype.removeItem=function(m){typeof m!="string"&&console.log("The argument that you passed to removeItem() - ".concat(m," is not a string.")),localStorage.removeItem(m),localStorage.removeItem("".concat(m,"p5TypeID"))}},{"../core/main":264,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],279:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.string.sub"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.prototype.createStringDict=function(h,m){return n.default._validateParameters("createStringDict",arguments),new n.default.StringDict(h,m)},n.default.prototype.createNumberDict=function(h,m){return n.default._validateParameters("createNumberDict",arguments),new n.default.NumberDict(h,m)},n.default.TypedDict=function(h,m){return h instanceof Object?this.data=h:(this.data={},this.data[h]=m),this},n.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},n.default.TypedDict.prototype.hasKey=function(h){return this.data.hasOwnProperty(h)},n.default.TypedDict.prototype.get=function(h){if(this.data.hasOwnProperty(h))return this.data[h];console.log("".concat(h," does not exist in this Dictionary"))},n.default.TypedDict.prototype.set=function(h,m){this._validate(m)?this.data[h]=m:console.log("Those values dont work for this dictionary type.")},n.default.TypedDict.prototype._addObj=function(h){for(var m in h)this.set(m,h[m])},n.default.TypedDict.prototype.create=function(h,m){h instanceof Object&&m===void 0?this._addObj(h):h!==void 0?this.set(h,m):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},n.default.TypedDict.prototype.clear=function(){this.data={}},n.default.TypedDict.prototype.remove=function(h){if(!this.data.hasOwnProperty(h))throw new Error("".concat(h," does not exist in this Dictionary"));delete this.data[h]},n.default.TypedDict.prototype.print=function(){for(var h in this.data)console.log("key:".concat(h," value:").concat(this.data[h]))},n.default.TypedDict.prototype.saveTable=function(h){var m="";for(var p in this.data)m+="".concat(p,",").concat(this.data[p],`
`);var s=new Blob([m],{type:"text/csv"});n.default.prototype.downloadFile(s,h||"mycsv","csv")},n.default.TypedDict.prototype.saveJSON=function(h,m){n.default.prototype.saveJSON(this.data,h,m)},n.default.TypedDict.prototype._validate=function(h){return!0},n.default.StringDict=function(){for(var h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];n.default.TypedDict.apply(this,m)},n.default.StringDict.prototype=Object.create(n.default.TypedDict.prototype),n.default.StringDict.prototype._validate=function(h){return typeof h=="string"},n.default.NumberDict=function(){for(var h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];n.default.TypedDict.apply(this,m)},n.default.NumberDict.prototype=Object.create(n.default.TypedDict.prototype),n.default.NumberDict.prototype._validate=function(h){return typeof h=="number"},n.default.NumberDict.prototype.add=function(h,m){this.data.hasOwnProperty(h)?this.data[h]+=m:console.log("The key - ".concat(h," does not exist in this dictionary."))},n.default.NumberDict.prototype.sub=function(h,m){this.add(h,-m)},n.default.NumberDict.prototype.mult=function(h,m){this.data.hasOwnProperty(h)?this.data[h]*=m:console.log("The key - ".concat(h," does not exist in this dictionary."))},n.default.NumberDict.prototype.div=function(h,m){this.data.hasOwnProperty(h)?this.data[h]/=m:console.log("The key - ".concat(h," does not exist in this dictionary."))},n.default.NumberDict.prototype._valueTest=function(h){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var m=this.data[Object.keys(this.data)[0]];for(var p in this.data)this.data[p]*h<m*h&&(m=this.data[p]);return m},n.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},n.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},n.default.NumberDict.prototype._keyTest=function(h){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var m=Object.keys(this.data)[0],p=1;p<Object.keys(this.data).length;p++)Object.keys(this.data)[p]*h<m*h&&(m=Object.keys(this.data)[p]);return m},n.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},n.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)};var f=n.default.TypedDict;l.default=f},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],280:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};function f(i){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function h(i,o,d){(o._userNode?o._userNode:document.body).appendChild(i);var u=d?new n.default.MediaElement(i,o):new n.default.Element(i,o);return o._elements.push(u),u}function m(i,o,d,u){var g=document.createElement(o);typeof(d=d||"")=="string"&&(d=[d]);var b=!0,_=!1,w=void 0;try{for(var S,T=d[Symbol.iterator]();!(b=(S=T.next()).done);b=!0){var L=S.value,A=document.createElement("source");A.setAttribute("src",L),g.appendChild(A)}}catch(R){_=!0,w=R}finally{try{b||T.return==null||T.return()}finally{if(_)throw w}}typeof u=="function"&&g.addEventListener("canplaythrough",function R(){u(),g.removeEventListener("canplaythrough",R)});var P=h(g,i,!0);return P.loadedmetadata=!1,g.addEventListener("loadedmetadata",function(){P.width=g.videoWidth,P.height=g.videoHeight,P.elt.width===0&&(P.elt.width=g.videoWidth),P.elt.height===0&&(P.elt.height=g.videoHeight),P.presetPlaybackRate&&(P.elt.playbackRate=P.presetPlaybackRate,delete P.presetPlaybackRate),P.loadedmetadata=!0}),P}n.default.prototype.select=function(i,o){n.default._validateParameters("select",arguments);var d=this._getContainer(o).querySelector(i);return d?this._wrapElement(d):null},n.default.prototype.selectAll=function(i,o){n.default._validateParameters("selectAll",arguments);var d=[],u=this._getContainer(o).querySelectorAll(i);if(u)for(var g=0;g<u.length;g++){var b=this._wrapElement(u[g]);d.push(b)}return d},n.default.prototype._getContainer=function(i){var o=document;return typeof i=="string"?o=document.querySelector(i)||document:i instanceof n.default.Element?o=i.elt:i instanceof HTMLElement&&(o=i),o},n.default.prototype._wrapElement=function(i){var o=Array.prototype.slice.call(i.children);if(i.tagName!=="INPUT"||i.type!=="checkbox")return i.tagName==="VIDEO"||i.tagName==="AUDIO"?new n.default.MediaElement(i,this):i.tagName==="SELECT"?this.createSelect(new n.default.Element(i,this)):0<o.length&&o.every(function(u){return u.tagName==="INPUT"||u.tagName==="LABEL"})?this.createRadio(new n.default.Element(i,this)):new n.default.Element(i,this);var d=new n.default.Element(i,this);return d.checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},d},n.default.prototype.removeElements=function(i){n.default._validateParameters("removeElements",arguments),this._elements.filter(function(o){return!(o.elt instanceof HTMLCanvasElement)}).map(function(o){return o.remove()})},n.default.Element.prototype.changed=function(i){return n.default.Element._adjustListener("change",i,this),this},n.default.Element.prototype.input=function(i){return n.default.Element._adjustListener("input",i,this),this},n.default.prototype.createDiv=function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=document.createElement("div");return o.innerHTML=i,h(o,this)},n.default.prototype.createP=function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=document.createElement("p");return o.innerHTML=i,h(o,this)},n.default.prototype.createSpan=function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=document.createElement("span");return o.innerHTML=i,h(o,this)},n.default.prototype.createImg=function(){n.default._validateParameters("createImg",arguments);var i,o=document.createElement("img"),d=arguments;return 1<d.length&&typeof d[1]=="string"&&(o.alt=d[1]),2<d.length&&typeof d[2]=="string"&&(o.crossOrigin=d[2]),o.src=d[0],i=h(o,this),o.addEventListener("load",function(){i.width=o.offsetWidth||o.width,i.height=o.offsetHeight||o.height;var u=d[d.length-1];typeof u=="function"&&u(i)}),i},n.default.prototype.createA=function(i,o,d){n.default._validateParameters("createA",arguments);var u=document.createElement("a");return u.href=i,u.innerHTML=o,d&&(u.target=d),h(u,this)},n.default.prototype.createSlider=function(i,o,d,u){n.default._validateParameters("createSlider",arguments);var g=document.createElement("input");return g.type="range",g.min=i,g.max=o,u===0?g.step=1e-18:u&&(g.step=u),typeof d=="number"&&(g.value=d),h(g,this)},n.default.prototype.createButton=function(i,o){n.default._validateParameters("createButton",arguments);var d=document.createElement("button");return d.innerHTML=i,o&&(d.value=o),h(d,this)},n.default.prototype.createCheckbox=function(){n.default._validateParameters("createCheckbox",arguments);var i=document.createElement("div"),o=document.createElement("input");o.type="checkbox";var d=document.createElement("label");d.appendChild(o),i.appendChild(d);var u=h(i,this);if(u.checked=function(){var b=u.elt.firstElementChild.getElementsByTagName("input")[0];if(b){if(arguments.length===0)return b.checked;b.checked=!!arguments[0]}return u},this.value=function(b){return u.value=b,this},arguments[0]){u.value(arguments[0]);var g=document.createElement("span");g.innerHTML=arguments[0],d.appendChild(g)}return arguments[1]&&(o.checked=!0),u},n.default.prototype.createSelect=function(){var i;n.default._validateParameters("createSelect",arguments);var o=arguments[0];if(o instanceof n.default.Element&&o.elt instanceof HTMLSelectElement)i=o,this.elt=o.elt;else if(o instanceof HTMLSelectElement)i=h(o,this),this.elt=o;else{var d=document.createElement("select");o&&typeof o=="boolean"&&d.setAttribute("multiple","true"),i=h(d,this),this.elt=d}return i.option=function(u,g){var b;if(u!==void 0){for(var _=0;_<this.elt.length;_+=1)if(this.elt[_].innerHTML===u){b=_;break}if(b!==void 0)g===!1?this.elt.remove(b):this.elt[b].value=g;else{var w=document.createElement("option");w.innerHTML=u,w.value=g===void 0?u:g,this.elt.appendChild(w),this._pInst._elements.push(w)}}},i.selected=function(u){if(u!==void 0){for(var g=0;g<this.elt.length;g+=1)this.elt[g].value.toString()===u.toString()&&(this.elt.selectedIndex=g);return this}if(this.elt.getAttribute("multiple")){var b=[],_=!0,w=!1,S=void 0;try{for(var T,L=this.elt.selectedOptions[Symbol.iterator]();!(_=(T=L.next()).done);_=!0){var A=T.value;b.push(A.value)}}catch(P){w=!0,S=P}finally{try{_||L.return==null||L.return()}finally{if(w)throw S}}return b}return this.elt.value},i.disable=function(u){if(typeof u=="string")for(var g=0;g<this.elt.length;g++)this.elt[g].value.toString()===u&&(this.elt[g].disabled=!0,this.elt[g].selected=!1);else this.elt.disabled=!0;return this},i},n.default.prototype.createRadio=function(){var i,o,d=arguments[0];d instanceof HTMLDivElement||d instanceof HTMLSpanElement?(i=d,typeof arguments[1]=="string"&&(o=arguments[1])):(typeof d=="string"&&(o=d),i=document.createElement("div"));var u=h(this.elt=i,this);u._name=o||"radioOption";function g(_){return _ instanceof HTMLInputElement&&_.type==="radio"}function b(_){return _ instanceof HTMLLabelElement}return u._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(_){return g(_)||b(_)&&g(_.firstElementChild)}).map(function(_){return g(_)?_:_.firstElementChild})},u.option=function(_,w){var S,T,L,A=!0,P=!1,R=void 0;try{for(var D,F=u._getOptionsArray()[Symbol.iterator]();!(A=(D=F.next()).done);A=!0){var I=D.value;if(I.value===_){S=I;break}}}catch(k){P=!0,R=k}finally{try{A||F.return==null||F.return()}finally{if(P)throw R}}return S===void 0&&((S=document.createElement("input")).setAttribute("type","radio"),S.setAttribute("value",_)),S.setAttribute("name",u._name),b(S.parentElement)?T=S.parentElement:(T=document.createElement("label")).insertAdjacentElement("afterbegin",S),T.lastElementChild instanceof HTMLSpanElement?L=T.lastElementChild:(L=document.createElement("span"),S.insertAdjacentElement("afterend",L)),L.innerHTML=w===void 0?_:w,this.elt.appendChild(T),S},u.remove=function(_){var w=!0,S=!1,T=void 0;try{for(var L,A=u._getOptionsArray()[Symbol.iterator]();!(w=(L=A.next()).done);w=!0){var P=L.value;if(P.value===_)return void(b(P.parentElement)?P.parentElement.remove():P.remove())}}catch(R){S=!0,T=R}finally{try{w||A.return==null||A.return()}finally{if(S)throw T}}},u.value=function(){var _="",w=!0,S=!1,T=void 0;try{for(var L,A=u._getOptionsArray()[Symbol.iterator]();!(w=(L=A.next()).done);w=!0){var P=L.value;if(P.checked){_=P.value;break}}}catch(R){S=!0,T=R}finally{try{w||A.return==null||A.return()}finally{if(S)throw T}}return _},u.selected=function(_){var w=null;if(_===void 0){var S=!0,T=!1,L=void 0;try{for(var A,P=u._getOptionsArray()[Symbol.iterator]();!(S=(A=P.next()).done);S=!0){var R=A.value;if(R.checked){w=R;break}}}catch(Q){T=!0,L=Q}finally{try{S||P.return==null||P.return()}finally{if(T)throw L}}}else{var D=!0,F=!1,I=void 0;try{for(var k,U=u._getOptionsArray()[Symbol.iterator]();!(D=(k=U.next()).done);D=!0){var q=k.value;q.value===_&&(q.setAttribute("checked",!0),w=q)}}catch(Q){F=!0,I=Q}finally{try{D||U.return==null||U.return()}finally{if(F)throw I}}}return w},u.disable=function(){var _=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],w=!0,S=!1,T=void 0;try{for(var L,A=u._getOptionsArray()[Symbol.iterator]();!(w=(L=A.next()).done);w=!0)L.value.setAttribute("disabled",_)}catch(P){S=!0,T=P}finally{try{w||A.return==null||A.return()}finally{if(S)throw T}}},u},n.default.prototype.createColorPicker=function(i){n.default._validateParameters("createColorPicker",arguments);var o,d=document.createElement("input");return d.type="color",i?i instanceof n.default.Color?d.value=i.toString("#rrggbb"):(n.default.prototype._colorMode="rgb",n.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},d.value=n.default.prototype.color(i).toString("#rrggbb")):d.value="#000000",(o=h(d,this)).color=function(){return i&&(i.mode&&(n.default.prototype._colorMode=i.mode),i.maxes&&(n.default.prototype._colorMaxes=i.maxes)),n.default.prototype.color(this.elt.value)},o},n.default.prototype.createInput=function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text";n.default._validateParameters("createInput",arguments);var d=document.createElement("input");return d.setAttribute("value",i),d.setAttribute("type",o),h(d,this)},n.default.prototype.createFileInput=function(i){var o=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(n.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob){var d=document.createElement("input");return d.setAttribute("type","file"),o&&d.setAttribute("multiple",!0),d.addEventListener("change",function(u){var g=!0,b=!1,_=void 0;try{for(var w,S=u.target.files[Symbol.iterator]();!(g=(w=S.next()).done);g=!0){var T=w.value;n.default.File._load(T,i)}}catch(L){b=!0,_=L}finally{try{g||S.return==null||S.return()}finally{if(b)throw _}}},!1),h(d,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},n.default.prototype.createVideo=function(i,o){return n.default._validateParameters("createVideo",arguments),m(this,"video",i,o)},n.default.prototype.createAudio=function(i,o){return n.default._validateParameters("createAudio",arguments),m(this,"audio",i,o)},n.default.prototype.VIDEO="video",n.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(i){var o=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return o?new Promise(function(d,u){o.call(navigator,i,d,u)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),n.default.prototype.createCapture=function(){if(n.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var i,o,d=!0,u=!0,g=!0,b=!1,_=void 0;try{for(var w,S=arguments[Symbol.iterator]();!(g=(w=S.next()).done);g=!0){var T=w.value;T===n.default.prototype.VIDEO?u=!1:T===n.default.prototype.AUDIO?d=!1:f(T)==="object"?i=T:typeof T=="function"&&(o=T)}}catch(P){b=!0,_=P}finally{try{g||S.return==null||S.return()}finally{if(b)throw _}}i=i||{video:d,audio:u};var L=document.createElement("video");L.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(i).then(function(P){try{"srcObject"in L?L.srcObject=P:L.src=window.URL.createObjectURL(P)}catch{L.src=P}},console.log);var A=h(L,this,!0);return A.loadedmetadata=!1,L.addEventListener("loadedmetadata",function(){L.play(),L.width?(A.width=L.width,A.height=L.height):(A.width=A.elt.width=L.videoWidth,A.height=A.elt.height=L.videoHeight),A.loadedmetadata=!0,o&&o(L.srcObject)}),A},n.default.prototype.createElement=function(i,o){n.default._validateParameters("createElement",arguments);var d=document.createElement(i);return o!==void 0&&(d.innerHTML=o),h(d,this)},n.default.Element.prototype.addClass=function(i){return this.elt.className?this.hasClass(i)||(this.elt.className=this.elt.className+" "+i):this.elt.className=i,this},n.default.Element.prototype.removeClass=function(i){return this.elt.classList.remove(i),this},n.default.Element.prototype.hasClass=function(i){return this.elt.classList.contains(i)},n.default.Element.prototype.toggleClass=function(i){return this.elt.classList.contains(i)?this.elt.classList.remove(i):this.elt.classList.add(i),this},n.default.Element.prototype.child=function(i){return i===void 0?this.elt.childNodes:(typeof i=="string"?(i[0]==="#"&&(i=i.substring(1)),i=document.getElementById(i)):i instanceof n.default.Element&&(i=i.elt),i instanceof HTMLElement&&this.elt.appendChild(i),this)},n.default.Element.prototype.center=function(i){var o=this.elt.style.display,d=this.elt.style.display==="none",u=this.parent().style.display==="none",g={x:this.elt.offsetLeft,y:this.elt.offsetTop};d&&this.show(),u&&this.parent().show(),this.elt.style.display="block",this.position(0,0);var b=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),_=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return i==="both"||i===void 0?this.position(b/2+this.parent().offsetLeft,_/2+this.parent().offsetTop):i==="horizontal"?this.position(b/2+this.parent().offsetLeft,g.y):i==="vertical"&&this.position(g.x,_/2+this.parent().offsetTop),this.style("display",o),d&&this.hide(),u&&this.parent().hide(),this},n.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},n.default.Element.prototype.position=function(){if(arguments.length===0)return{x:this.elt.offsetLeft,y:this.elt.offsetTop};var i="absolute";return arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"||(i=arguments[2]),this.elt.style.position=i,this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this},n.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var i="";return this.elt.style.transform&&(i=(i=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=i,this},n.default.Element.prototype._rotate=function(){var i="";return this.elt.style.transform&&(i=(i=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=i,this},n.default.Element.prototype.style=function(i,o){if(o instanceof n.default.Color&&(o="rgba("+o.levels[0]+","+o.levels[1]+","+o.levels[2]+","+o.levels[3]/255+")"),o===void 0){if(i.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(i);for(var d=i.split(";"),u=0;u<d.length;u++){var g=d[u].split(":");g[0]&&g[1]&&(this.elt.style[g[0].trim()]=g[1].trim())}}else if(this.elt.style[i]=o,i==="width"||i==="height"||i==="left"||i==="top"){var b=window.getComputedStyle(this.elt).getPropertyValue(i).replace(/\D+/g,"");this[i]=parseInt(b,10)}return this},n.default.Element.prototype.attribute=function(i,o){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return o===void 0?this.elt.getAttribute(i):(this.elt.setAttribute(i,o),this);if(o===void 0)return this.elt.firstChild.getAttribute(i);for(var d=0;d<this.elt.childNodes.length;d++)this.elt.childNodes[d].setAttribute(i,o)},n.default.Element.prototype.removeAttribute=function(i){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var o=0;o<this.elt.childNodes.length;o++)this.elt.childNodes[o].removeAttribute(i);return this.elt.removeAttribute(i),this},n.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},n.default.Element.prototype.show=function(){return this.elt.style.display="block",this},n.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},n.default.Element.prototype.size=function(i,o){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var d=i,u=o,g=n.default.prototype.AUTO;if(d!==g||u!==g){if(d===g?d=o*this.width/this.height:u===g&&(u=i*this.height/this.width),this.elt instanceof HTMLCanvasElement){var b,_={},w=this.elt.getContext("2d");for(b in w)_[b]=w[b];for(b in this.elt.setAttribute("width",d*this._pInst._pixelDensity),this.elt.setAttribute("height",u*this._pInst._pixelDensity),this.elt.style.width=d+"px",this.elt.style.height=u+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),_)this.elt.getContext("2d")[b]=_[b]}else this.elt.style.width=d+"px",this.elt.style.height=u+"px",this.elt.width=d,this.elt.height=u;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},n.default.Element.prototype.remove=function(){if(this instanceof n.default.MediaElement){this.stop();var i=this.elt.srcObject;i!==null&&i.getTracks().forEach(function(u){u.stop()})}var o=this._pInst._elements.indexOf(this);for(var d in o!==-1&&this._pInst._elements.splice(o,1),this._events)this.elt.removeEventListener(d,this._events[d]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},n.default.Element.prototype.drop=function(i,o){if(window.File&&window.FileReader&&window.FileList&&window.Blob){if(!this._dragDisabled){this._dragDisabled=!0;var d=function(u){u.preventDefault()};this.elt.addEventListener("dragover",d),this.elt.addEventListener("dragleave",d)}n.default.Element._attachListener("drop",function(u){u.preventDefault(),typeof o=="function"&&o.call(this,u);for(var g=u.dataTransfer.files,b=0;b<g.length;b++){var _=g[b];n.default.File._load(_,i)}},this)}else console.log("The File APIs are not fully supported in this browser.");return this},n.default.MediaElement=function(i,o){n.default.Element.call(this,i,o);var d=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(d,"src",{get:function(){var u=d.elt.children[0].src,g=d.elt.src===window.location.href?"":d.elt.src;return u===window.location.href?g:u},set:function(u){for(var g=0;g<d.elt.children.length;g++)d.elt.removeChild(d.elt.children[g]);var b=document.createElement("source");b.src=u,i.appendChild(b),d.elt.src=u,d.modified=!0}}),d._onended=function(){},d.elt.onended=function(){d._onended(d)}},n.default.MediaElement.prototype=Object.create(n.default.Element.prototype),n.default.MediaElement.prototype.play=function(){var i,o=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),(i=(1<this.elt.readyState||this.elt.load(),this.elt.play()))&&i.catch&&i.catch(function(d){d.name==="NotAllowedError"?n.default._friendlyAutoplayError(o.src):console.error("Media play method encountered an unexpected error",d)}),this},n.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},n.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},n.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},n.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},n.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var i=this,o=setTimeout(function(){return n.default._friendlyAutoplayError(i.src)},500);this.elt.addEventListener("play",function(){return clearTimeout(o)},{passive:!0,once:!0})},n.default.MediaElement.prototype.autoplay=function(i){var o=this,d=this.elt.getAttribute("autoplay");if(this.elt.setAttribute("autoplay",i),i&&!d){var u=function(){return o._setupAutoplayFailDetection()};this.elt.readyState===4?u():this.elt.addEventListener("canplay",u,{passive:!0,once:!0})}return this},n.default.MediaElement.prototype.volume=function(i){if(i===void 0)return this.elt.volume;this.elt.volume=i},n.default.MediaElement.prototype.speed=function(i){if(i===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=i:this.presetPlaybackRate=i},n.default.MediaElement.prototype.time=function(i){return i===void 0?this.elt.currentTime:(this.elt.currentTime=i,this)},n.default.MediaElement.prototype.duration=function(){return this.elt.duration},n.default.MediaElement.prototype.pixels=[],n.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},n.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),n.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},n.default.MediaElement.prototype.updatePixels=function(i,o,d,u){return this.loadedmetadata&&(this._ensureCanvas(),n.default.Renderer2D.prototype.updatePixels.call(this,i,o,d,u)),this.setModified(!0),this},n.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),n.default.Renderer2D.prototype.get.apply(this,arguments)},n.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),n.default.Renderer2D.prototype._getPixel.apply(this,arguments)},n.default.MediaElement.prototype.set=function(i,o,d){this.loadedmetadata&&(this._ensureCanvas(),n.default.Renderer2D.prototype.set.call(this,i,o,d),this.setModified(!0))},n.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),n.default.prototype.copy.apply(this,arguments)},n.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),n.default.Image.prototype.mask.apply(this,arguments)},n.default.MediaElement.prototype.isModified=function(){return this._modified},n.default.MediaElement.prototype.setModified=function(i){this._modified=i},n.default.MediaElement.prototype.onended=function(i){return this._onended=i,this},n.default.MediaElement.prototype.connect=function(i){var o,d;if(typeof n.default.prototype.getAudioContext=="function")o=n.default.prototype.getAudioContext(),d=n.default.soundOut.input;else try{d=(o=i.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=o.createMediaElementSource(this.elt),this.audioSourceNode.connect(d)),i?i.input?this.audioSourceNode.connect(i.input):this.audioSourceNode.connect(i):this.audioSourceNode.connect(d)},n.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},n.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},n.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function p(i,o,d,u){this.callback=i,this.time=o,this.id=d,this.val=u}n.default.MediaElement.prototype.addCue=function(i,o,d){var u=this._cueIDCounter++,g=new p(o,i,u,d);return this._cues.push(g),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),u},n.default.MediaElement.prototype.removeCue=function(i){for(var o=0;o<this._cues.length;o++)this._cues[o].id===i&&(console.log(i),this._cues.splice(o,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},n.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},n.default.MediaElement.prototype._onTimeUpdate=function(){for(var i=this.time(),o=0;o<this._cues.length;o++){var d=this._cues[o].time,u=this._cues[o].val;this._prevTime<d&&d<=i&&this._cues[o].callback(u)}this._prevTime=i},n.default.File=function(i,o){this.file=i,this._pInst=o;var d=i.type.split("/");this.type=d[0],this.subtype=d[1],this.name=i.name,this.size=i.size,this.data=void 0},n.default.File._createLoader=function(i,o){var d=new FileReader;return d.onload=function(u){var g=new n.default.File(i);if(g.file.type==="application/json")g.data=JSON.parse(u.target.result);else if(g.file.type==="text/xml"){var b=new DOMParser().parseFromString(u.target.result,"text/xml");g.data=new n.default.XML(b.documentElement)}else g.data=u.target.result;o(g)},d},n.default.File._load=function(i,o){if(/^text\//.test(i.type)||i.type==="application/json")n.default.File._createLoader(i,o).readAsText(i);else if(/^(video|audio)\//.test(i.type)){var d=new n.default.File(i);d.data=URL.createObjectURL(i),o(d)}else n.default.File._createLoader(i,o).readAsDataURL(i)};var s=n.default;l.default=s},{"../core/main":264,"core-js/modules/es.array.every":150,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229,"core-js/modules/web.url":231}],281:[function(t,a,l){function c(w){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(w)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var S=m();if(S&&S.has(w))return S.get(w);var T={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in w)if(Object.prototype.hasOwnProperty.call(w,A)){var P=L?Object.getOwnPropertyDescriptor(w,A):null;P&&(P.get||P.set)?Object.defineProperty(T,A,P):T[A]=w[A]}return T.default=w,S&&S.set(w,T),T}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var w=new WeakMap;return m=function(){return w},w}f.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",f.default.prototype.accelerationX=0,f.default.prototype.accelerationY=0,f.default.prototype.accelerationZ=0,f.default.prototype.pAccelerationX=0,f.default.prototype.pAccelerationY=0,f.default.prototype.pAccelerationZ=0,f.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},f.default.prototype.rotationX=0,f.default.prototype.rotationY=0,f.default.prototype.rotationZ=0,f.default.prototype.pRotationX=0,f.default.prototype.pRotationY=0;var p=f.default.prototype.pRotationZ=0,s=0,i=0,o="clockwise",d="clockwise",u="clockwise";f.default.prototype.pRotateDirectionX=void 0,f.default.prototype.pRotateDirectionY=void 0,f.default.prototype.pRotateDirectionZ=void 0,f.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},f.default.prototype.turnAxis=void 0;var g=.5,b=30;f.default.prototype.setMoveThreshold=function(w){f.default._validateParameters("setMoveThreshold",arguments),g=w},f.default.prototype.setShakeThreshold=function(w){f.default._validateParameters("setShakeThreshold",arguments),b=w},f.default.prototype._ondeviceorientation=function(w){this._updatePRotations(),this._angleMode===h.radians&&(w.beta=w.beta*(_PI/180),w.gamma=w.gamma*(_PI/180),w.alpha=w.alpha*(_PI/180)),this._setProperty("rotationX",w.beta),this._setProperty("rotationY",w.gamma),this._setProperty("rotationZ",w.alpha),this._handleMotion()},f.default.prototype._ondevicemotion=function(w){this._updatePAccelerations(),this._setProperty("accelerationX",2*w.acceleration.x),this._setProperty("accelerationY",2*w.acceleration.y),this._setProperty("accelerationZ",2*w.acceleration.z),this._handleMotion()},f.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var w,S,T=this._isGlobal?window:this;if(typeof T.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>g||Math.abs(this.accelerationY-this.pAccelerationY)>g||Math.abs(this.accelerationZ-this.pAccelerationZ)>g)&&T.deviceMoved(),typeof T.deviceTurned=="function"){var L=this.rotationX+180,A=this.pRotationX+180,P=p+180;0<L-A&&L-A<270||L-A<-270?o="clockwise":(L-A<0||270<L-A)&&(o="counter-clockwise"),o!==this.pRotateDirectionX&&(P=L),90<Math.abs(L-P)&&Math.abs(L-P)<270&&(P=L,this._setProperty("turnAxis","X"),T.deviceTurned()),this.pRotateDirectionX=o,p=P-180;var R=this.rotationY+180,D=this.pRotationY+180,F=s+180;0<R-D&&R-D<270||R-D<-270?d="clockwise":(R-D<0||270<R-this.pRotationY)&&(d="counter-clockwise"),d!==this.pRotateDirectionY&&(F=R),90<Math.abs(R-F)&&Math.abs(R-F)<270&&(F=R,this._setProperty("turnAxis","Y"),T.deviceTurned()),this.pRotateDirectionY=d,s=F-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?u="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(u="counter-clockwise"),u!==this.pRotateDirectionZ&&(i=this.rotationZ),90<Math.abs(this.rotationZ-i)&&Math.abs(this.rotationZ-i)<270&&(i=this.rotationZ,this._setProperty("turnAxis","Z"),T.deviceTurned()),this.pRotateDirectionZ=u,this._setProperty("turnAxis",void 0)}typeof T.deviceShaken=="function"&&(this.pAccelerationX!==null&&(w=Math.abs(this.accelerationX-this.pAccelerationX),S=Math.abs(this.accelerationY-this.pAccelerationY)),b<w+S&&T.deviceShaken())};var _=f.default;l.default=_},{"../core/constants":253,"../core/main":264}],282:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.prototype.isKeyPressed=!1,n.default.prototype.keyIsPressed=!1,n.default.prototype.key="",n.default.prototype.keyCode=0,n.default.prototype._onkeydown=function(h){if(!this._downKeys[h.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",h.which),this._downKeys[h.which]=!0,this._setProperty("key",h.key||String.fromCharCode(h.which)||h.which);var m=this._isGlobal?window:this;typeof m.keyPressed=="function"&&!h.charCode&&m.keyPressed(h)===!1&&h.preventDefault()}},n.default.prototype._onkeyup=function(h){this._downKeys[h.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",h.key||String.fromCharCode(h.which)||h.which),this._setProperty("keyCode",h.which);var m=this._isGlobal?window:this;typeof m.keyReleased=="function"&&m.keyReleased(h)===!1&&h.preventDefault()},n.default.prototype._onkeypress=function(h){if(h.which!==this._lastKeyCodeTyped){this._setProperty("_lastKeyCodeTyped",h.which),this._setProperty("key",h.key||String.fromCharCode(h.which)||h.which);var m=this._isGlobal?window:this;typeof m.keyTyped=="function"&&m.keyTyped(h)===!1&&h.preventDefault()}},n.default.prototype._onblur=function(h){this._downKeys={}},n.default.prototype.keyIsDown=function(h){return n.default._validateParameters("keyIsDown",arguments),this._downKeys[h]||!1},n.default.prototype._areDownKeys=function(){for(var h in this._downKeys)if(this._downKeys.hasOwnProperty(h)&&this._downKeys[h]===!0)return!0;return!1};var f=n.default;l.default=f},{"../core/main":264}],283:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=m();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}f.default.prototype.movedX=0,f.default.prototype.movedY=0,f.default.prototype._hasMouseInteracted=!1,f.default.prototype.mouseX=0,f.default.prototype.mouseY=0,f.default.prototype.pmouseX=0,f.default.prototype.pmouseY=0,f.default.prototype.winMouseX=0,f.default.prototype.winMouseY=0,f.default.prototype.pwinMouseX=0,f.default.prototype.pwinMouseY=0,f.default.prototype.mouseButton=0,f.default.prototype.mouseIsPressed=!1,f.default.prototype._updateNextMouseCoords=function(s){if(this._curElement!==null&&(!s.touches||0<s.touches.length)){var i=function(o,d,u,g){g&&!g.clientX&&(g.touches?g=g.touches[0]:g.changedTouches&&(g=g.changedTouches[0]));var b=o.getBoundingClientRect(),_=o.scrollWidth/d||1,w=o.scrollHeight/u||1;return{x:(g.clientX-b.left)/_,y:(g.clientY-b.top)/w,winX:g.clientX,winY:g.clientY,id:g.identifier}}(this._curElement.elt,this.width,this.height,s);this._setProperty("movedX",s.movementX),this._setProperty("movedY",s.movementY),this._setProperty("mouseX",i.x),this._setProperty("mouseY",i.y),this._setProperty("winMouseX",i.winX),this._setProperty("winMouseY",i.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},f.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},f.default.prototype._setMouseButton=function(s){s.button===1?this._setProperty("mouseButton",h.CENTER):s.button===2?this._setProperty("mouseButton",h.RIGHT):this._setProperty("mouseButton",h.LEFT)},f.default.prototype._onmousemove=function(s){var i=this._isGlobal?window:this;this._updateNextMouseCoords(s),this.mouseIsPressed?typeof i.mouseDragged=="function"?i.mouseDragged(s)===!1&&s.preventDefault():typeof i.touchMoved=="function"&&i.touchMoved(s)===!1&&s.preventDefault():typeof i.mouseMoved=="function"&&i.mouseMoved(s)===!1&&s.preventDefault()},f.default.prototype._onmousedown=function(s){var i=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(s),this._updateNextMouseCoords(s),typeof i.mousePressed=="function"?i.mousePressed(s)===!1&&s.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof i.touchStarted=="function"&&i.touchStarted(s)===!1&&s.preventDefault()},f.default.prototype._onmouseup=function(s){var i=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof i.mouseReleased=="function"?i.mouseReleased(s)===!1&&s.preventDefault():typeof i.touchEnded=="function"&&i.touchEnded(s)===!1&&s.preventDefault()},f.default.prototype._ondragend=f.default.prototype._onmouseup,f.default.prototype._ondragover=f.default.prototype._onmousemove,f.default.prototype._onclick=function(s){var i=this._isGlobal?window:this;typeof i.mouseClicked=="function"&&i.mouseClicked(s)===!1&&s.preventDefault()},f.default.prototype._ondblclick=function(s){var i=this._isGlobal?window:this;typeof i.doubleClicked=="function"&&i.doubleClicked(s)===!1&&s.preventDefault()},f.default.prototype._mouseWheelDeltaY=0,f.default.prototype._pmouseWheelDeltaY=0,f.default.prototype._onwheel=function(s){var i=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",s.deltaY),typeof i.mouseWheel=="function"&&(s.delta=s.deltaY,i.mouseWheel(s)===!1&&s.preventDefault())},f.default.prototype.requestPointerLock=function(){var s=this._curElement.elt;return s.requestPointerLock=s.requestPointerLock||s.mozRequestPointerLock,s.requestPointerLock?(s.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},f.default.prototype.exitPointerLock=function(){document.exitPointerLock()};var p=f.default;l.default=p},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],284:[function(t,a,l){t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};function f(m,p,s,i,o){var d=4<arguments.length&&o!==void 0?o:0,u=m.getBoundingClientRect(),g=m.scrollWidth/p||1,b=m.scrollHeight/s||1,_=i.touches[d]||i.changedTouches[d];return{x:(_.clientX-u.left)/g,y:(_.clientY-u.top)/b,winX:_.clientX,winY:_.clientY,id:_.identifier}}n.default.prototype.touches=[],n.default.prototype._updateTouchCoords=function(m){if(this._curElement!==null){for(var p=[],s=0;s<m.touches.length;s++)p[s]=f(this._curElement.elt,this.width,this.height,m,s);this._setProperty("touches",p)}},n.default.prototype._ontouchstart=function(m){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(m),this._updateNextMouseCoords(m),this._updateMouseCoords(),typeof p.touchStarted=="function"?p.touchStarted(m)===!1&&m.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof p.mousePressed=="function"&&p.mousePressed(m)===!1&&m.preventDefault()},n.default.prototype._ontouchmove=function(m){var p=this._isGlobal?window:this;this._updateTouchCoords(m),this._updateNextMouseCoords(m),typeof p.touchMoved=="function"?p.touchMoved(m)===!1&&m.preventDefault():typeof p.mouseDragged=="function"&&p.mouseDragged(m)===!1&&m.preventDefault()},n.default.prototype._ontouchend=function(m){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(m),this._updateNextMouseCoords(m);var p=this._isGlobal?window:this;typeof p.touchEnded=="function"?p.touchEnded(m)===!1&&m.preventDefault():typeof p.mouseReleased=="function"&&p.mouseReleased(m)===!1&&m.preventDefault()};var h=n.default;l.default=h},{"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],285:[function(t,a,l){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n,f,h,m={};function p(i,o){for(var d,u,g,b,_,w,S,T,L,A,P=m._toPixels(i),R=i.width,D=i.height,F=R*D,I=new Int32Array(F),k=0;k<F;k++)I[k]=m._getARGB(P,k);var U,q,Q,W,K=new Int32Array(F),Y=new Int32Array(F),se=new Int32Array(F),ue=new Int32Array(F),ge=0;for(function(Pe){var ae=3.5*Pe|0;if(c!==(ae=ae<1?1:ae<248?ae:248)){n=1+(c=ae)<<1,f=new Int32Array(n),h=new Array(n);for(var we=0;we<n;we++)h[we]=new Int32Array(256);for(var j,B,V,te,$=1,X=ae-1;$<ae;$++){f[ae+$]=f[X]=B=X*X,V=h[ae+$],te=h[X--];for(var ye=0;ye<256;ye++)V[ye]=te[ye]=B*ye}j=f[ae]=ae*ae,V=h[ae];for(var ne=0;ne<256;ne++)V[ne]=j*ne}}(o),q=0;q<D;q++){for(U=0;U<R;U++){if(b=g=u=_=d=0,(w=U-c)<0)A=-w,w=0;else{if(R<=w)break;A=0}for(Q=A;Q<n&&!(R<=w);Q++){var de=I[w+ge];_+=(W=h[Q])[(-16777216&de)>>>24],u+=W[(16711680&de)>>16],g+=W[(65280&de)>>8],b+=W[255&de],d+=f[Q],w++}K[S=ge+U]=_/d,Y[S]=u/d,se[S]=g/d,ue[S]=b/d}ge+=R}for(L=(T=-c)*R,q=ge=0;q<D;q++){for(U=0;U<R;U++){if(b=g=u=_=d=0,T<0)A=S=-T,w=U;else{if(D<=T)break;A=0,S=T,w=U+L}for(Q=A;Q<n&&!(D<=S);Q++)_+=(W=h[Q])[K[w]],u+=W[Y[w]],g+=W[se[w]],b+=W[ue[w]],d+=f[Q],S++,w+=R;I[U+ge]=_/d<<24|u/d<<16|g/d<<8|b/d}ge+=R,L+=R,T++}m._setPixels(P,I)}m._toPixels=function(i){if(i instanceof ImageData)return i.data;if(i.getContext("2d"))return i.getContext("2d").getImageData(0,0,i.width,i.height).data;if(i.getContext("webgl")){var o=i.getContext("webgl"),d=o.drawingBufferWidth*o.drawingBufferHeight*4,u=new Uint8Array(d);return o.readPixels(0,0,i.width,i.height,o.RGBA,o.UNSIGNED_BYTE,u),u}},m._getARGB=function(i,o){var d=4*o;return i[3+d]<<24&4278190080|i[d]<<16&16711680|i[1+d]<<8&65280|255&i[2+d]},m._setPixels=function(i,o){for(var d=0,u=0,g=i.length;u<g;u++)i[(d=4*u)+0]=(16711680&o[u])>>>16,i[d+1]=(65280&o[u])>>>8,i[d+2]=255&o[u],i[d+3]=(4278190080&o[u])>>>24},m._toImageData=function(i){return i instanceof ImageData?i:i.getContext("2d").getImageData(0,0,i.width,i.height)},m._createImageData=function(i,o){return m._tmpCanvas=document.createElement("canvas"),m._tmpCtx=m._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(i,o)},m.apply=function(i,o,d){var u=i.getContext("2d"),g=u.getImageData(0,0,i.width,i.height),b=o(g,d);b instanceof ImageData?u.putImageData(b,0,0,0,0,i.width,i.height):u.putImageData(g,0,0,0,0,i.width,i.height)},m.threshold=function(i,o){var d=m._toPixels(i);o===void 0&&(o=.5);for(var u=Math.floor(255*o),g=0;g<d.length;g+=4){var b=void 0;b=u<=.2126*d[g]+.7152*d[g+1]+.0722*d[g+2]?255:0,d[g]=d[g+1]=d[g+2]=b}},m.gray=function(i){for(var o=m._toPixels(i),d=0;d<o.length;d+=4){var u=.2126*o[d]+.7152*o[d+1]+.0722*o[d+2];o[d]=o[d+1]=o[d+2]=u}},m.opaque=function(i){for(var o=m._toPixels(i),d=0;d<o.length;d+=4)o[d+3]=255;return o},m.invert=function(i){for(var o=m._toPixels(i),d=0;d<o.length;d+=4)o[d]=255-o[d],o[d+1]=255-o[d+1],o[d+2]=255-o[d+2]},m.posterize=function(i,o){var d=m._toPixels(i);if(o<2||255<o)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var u=o-1,g=0;g<d.length;g+=4){var b=d[g],_=d[g+1],w=d[g+2];d[g]=255*(b*o>>8)/u,d[g+1]=255*(_*o>>8)/u,d[g+2]=255*(w*o>>8)/u}},m.dilate=function(i){for(var o,d,u,g,b,_,w,S,T,L,A,P,R,D,F,I,k,U=m._toPixels(i),q=0,Q=U.length?U.length/4:0,W=new Int32Array(Q);q<Q;)for(d=(o=q)+i.width;q<d;)u=g=m._getARGB(U,q),(w=q-1)<o&&(w=q),d<=(_=q+1)&&(_=q),(S=q-i.width)<0&&(S=0),Q<=(T=q+i.width)&&(T=q),P=m._getARGB(U,S),A=m._getARGB(U,w),R=m._getARGB(U,T),(b=77*(u>>16&255)+151*(u>>8&255)+28*(255&u))<(F=77*(A>>16&255)+151*(A>>8&255)+28*(255&A))&&(g=A,b=F),b<(D=77*((L=m._getARGB(U,_))>>16&255)+151*(L>>8&255)+28*(255&L))&&(g=L,b=D),b<(I=77*(P>>16&255)+151*(P>>8&255)+28*(255&P))&&(g=P,b=I),b<(k=77*(R>>16&255)+151*(R>>8&255)+28*(255&R))&&(g=R,b=k),W[q++]=g;m._setPixels(U,W)},m.erode=function(i){for(var o,d,u,g,b,_,w,S,T,L,A,P,R,D,F,I,k,U=m._toPixels(i),q=0,Q=U.length?U.length/4:0,W=new Int32Array(Q);q<Q;)for(d=(o=q)+i.width;q<d;)u=g=m._getARGB(U,q),(w=q-1)<o&&(w=q),d<=(_=q+1)&&(_=q),(S=q-i.width)<0&&(S=0),Q<=(T=q+i.width)&&(T=q),P=m._getARGB(U,S),A=m._getARGB(U,w),R=m._getARGB(U,T),(F=77*(A>>16&255)+151*(A>>8&255)+28*(255&A))<(b=77*(u>>16&255)+151*(u>>8&255)+28*(255&u))&&(g=A,b=F),(D=77*((L=m._getARGB(U,_))>>16&255)+151*(L>>8&255)+28*(255&L))<b&&(g=L,b=D),(I=77*(P>>16&255)+151*(P>>8&255)+28*(255&P))<b&&(g=P,b=I),(k=77*(R>>16&255)+151*(R>>8&255)+28*(255&R))<b&&(g=R,b=k),W[q++]=g;m._setPixels(U,W)},m.blur=function(i,o){p(i,o)};var s=m;l.default=s},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],286:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=f(t("../core/main")),n=f(t("omggif"));function f(p){return p&&p.__esModule?p:{default:p}}function h(p){return function(s){if(Array.isArray(s)){for(var i=0,o=new Array(s.length);i<s.length;i++)o[i]=s[i];return o}}(p)||function(s){if(Symbol.iterator in Object(s)||Object.prototype.toString.call(s)==="[object Arguments]")return Array.from(s)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}c.default.prototype.createImage=function(p,s){return c.default._validateParameters("createImage",arguments),new c.default.Image(p,s)},c.default.prototype.saveCanvas=function(){c.default._validateParameters("saveCanvas",arguments);var p,s,i,o,d=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(p=arguments[0],d.shift()):arguments[0]instanceof c.default.Element?(p=arguments[0].elt,d.shift()):p=this._curElement&&this._curElement.elt,1<=d.length&&(s=d[0]),2<=d.length&&(i=d[1]),i=i||c.default.prototype._checkFileExtension(s,i)[1]||"png"){default:o="image/png";break;case"jpeg":case"jpg":o="image/jpeg"}p.toBlob(function(u){c.default.prototype.downloadFile(u,s,i)},o)},c.default.prototype.saveGif=function(p,s){var i=p.gifProperties,o=i.loopLimit;o===1?o=null:o===null&&(o=0);for(var d=new Uint8Array(p.width*p.height*i.numFrames),u=[],g={},b=0;b<i.numFrames;b++){for(var _=new Set,w=i.frames[b].image.data,S=w.length,T=new Uint32Array(p.width*p.height),L=0,A=0;L<S;L+=4,A++){var P=w[L+0]<<16|w[L+1]<<8|w[L+2]<<0;_.add(P),T[A]=P}var R=h(_).sort().toString();g[R]===void 0?g[R]={freq:1,frames:[b]}:(g[R].freq+=1,g[R].frames.push(b)),u.push(T)}var D=[],F=Object.keys(g).sort(function(we,j){return g[j].freq-g[we].freq}),I=F[0].split(",").map(function(we){return parseInt(we)});D=D.concat(g[I].frames);for(var k=new Set(I),U=1;U<F.length;U++){var q=F[U].split(",").map(function(we){return parseInt(we)}).filter(function(we){return!k.has(we)});if(I.length+q.length<=256){for(var Q=0;Q<q.length;Q++)I.push(q[Q]),k.add(q[Q]);D=D.concat(g[F[U]].frames)}}D=new Set(D);for(var W={},K=0;K<I.length;K++)W[I[K]]||(W[I[K]]=K);for(var Y=1;Y<I.length;)Y<<=1;I.length=Y;for(var se={loop:o,palette:new Uint32Array(I)},ue=new n.default.GifWriter(d,p.width,p.height,se),ge={},de=function(we){for(var j=!D.has(we),B=j?[]:I,V=new Uint8Array(p.width*p.height),te={},$=new Set,X=0;X<u[we].length;X++){var ye=u[we][X];j?(te[ye]===void 0&&(te[ye]=B.length,B.push(ye)),V[X]=te[ye]):V[X]=W[ye],0<we&&u[we-1][X]!==ye&&$.add(ye)}var ne={},pe=B.filter(function(Ie){return!$.has(Ie)});if(0<pe.length){var ve=pe[0],he=j?te[ve]:W[ve];if(0<we){for(var Ae=0;Ae<u[we].length;Ae++)u[we-1][Ae]===u[we][Ae]&&(V[Ae]=he);ne.transparent=he,ge.frameOpts.disposal=1}}if(ne.delay=i.frames[we].delay/10,j){for(var Oe=1;Oe<B.length;)Oe<<=1;B.length=Oe,ne.palette=new Uint32Array(B)}0<we&&ue.addFrame(0,0,p.width,p.height,ge.pixelPaletteIndex,ge.frameOpts),ge={pixelPaletteIndex:V,frameOpts:ne}},Pe=0;Pe<i.numFrames;Pe++)de(Pe);ge.frameOpts.disposal=1,ue.addFrame(0,0,p.width,p.height,ge.pixelPaletteIndex,ge.frameOpts);var ae=new Blob([d.slice(0,ue.end())],{type:"image/gif"});c.default.prototype.downloadFile(ae,s,"gif")},c.default.prototype.saveFrames=function(p,s,i,o,d){c.default._validateParameters("saveFrames",arguments);var u=i||3;u=c.default.prototype.constrain(u,0,15),u*=1e3;var g=o||15;g=c.default.prototype.constrain(g,0,22);var b=0,_=c.default.prototype._makeFrame,w=this._curElement.elt,S=[],T=setInterval(function(){S.push(_(p+b,s,w)),b++},1e3/g);setTimeout(function(){if(clearInterval(T),d)d(S);else{var L=!0,A=!1,P=void 0;try{for(var R,D=S[Symbol.iterator]();!(L=(R=D.next()).done);L=!0){var F=R.value;c.default.prototype.downloadFile(F.imageData,F.filename,F.ext)}}catch(I){A=!0,P=I}finally{try{L||D.return==null||D.return()}finally{if(A)throw P}}}S=[]},u+.01)},c.default.prototype._makeFrame=function(p,s,i){var o,d;if(o=this?this._curElement.elt:i,s)switch(s.toLowerCase()){case"png":d="image/png";break;case"jpeg":case"jpg":d="image/jpeg";break;default:d="image/png"}else s="png",d="image/png";var u=o.toDataURL(d);u=u.replace(d,"image/octet-stream");var g={};return g.imageData=u,g.filename=p,g.ext=s,g};var m=c.default;l.default=m},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,omggif:238}],287:[function(t,a,l){function c(u){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(u)}t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n=i(t("../core/main")),f=i(t("./filters")),h=i(t("../core/helpers")),m=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var g=s();if(g&&g.has(u))return g.get(u);var b={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in u)if(Object.prototype.hasOwnProperty.call(u,w)){var S=_?Object.getOwnPropertyDescriptor(u,w):null;S&&(S.get||S.set)?Object.defineProperty(b,w,S):b[w]=u[w]}return b.default=u,g&&g.set(u,b),b}(t("../core/constants")),p=i(t("omggif"));function s(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return s=function(){return u},u}function i(u){return u&&u.__esModule?u:{default:u}}function o(u,g){return 0<u&&u<g?u:g}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),n.default.prototype.loadImage=function(u,g,b){n.default._validateParameters("loadImage",arguments);var _=new n.default.Image(1,1,this),w=this,S=new Request(u,{method:"GET",mode:"cors"});return fetch(u,S).then(function(T){var L=T.headers.get("content-type");if(L===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),L&&L.includes("image/gif"))T.arrayBuffer().then(function(P){P&&function(R,D,F,I,k){var U=new p.default.GifReader(R);D.width=D.canvas.width=U.width,D.height=D.canvas.height=U.height;var q=[],Q=U.numFrames(),W=new Uint8ClampedArray(D.width*D.height*4);if(1<Q){for(var K=function(ae,we){try{we.decodeAndBlitFrameRGBA(ae,W)}catch(j){n.default._friendlyFileLoadError(8,D.src),typeof I=="function"?I(j):console.error(j)}},Y=0;Y<Q;Y++){var se=U.frameInfo(Y),ue=D.drawingContext.getImageData(0,0,D.width,D.height);W=ue.data.slice(),K(Y,U);var ge=new ImageData(W,D.width,D.height);D.drawingContext.putImageData(ge,0,0);var de=se.delay;de===0&&(de=10),q.push({image:D.drawingContext.getImageData(0,0,D.width,D.height),delay:10*de}),se.disposal===2?D.drawingContext.clearRect(se.x,se.y,se.width,se.height):se.disposal===3&&D.drawingContext.putImageData(ue,0,0,se.x,se.y,se.width,se.height)}var Pe=U.loopCount();Pe===null?Pe=1:Pe===0&&(Pe=null),D.drawingContext.putImageData(q[0].image,0,0),D.gifProperties={displayIndex:0,loopLimit:Pe,loopCount:0,frames:q,numFrames:Q,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof F=="function"&&F(D),k()}(new Uint8Array(P),_,g,b,function(R){w._decrementPreload()}.bind(w))},function(P){typeof b=="function"?b(P):console.error(P)});else{var A=new Image;A.onload=function(){_.width=_.canvas.width=A.width,_.height=_.canvas.height=A.height,_.drawingContext.drawImage(A,0,0),_.modified=!0,typeof g=="function"&&g(_),w._decrementPreload()},A.onerror=function(P){n.default._friendlyFileLoadError(0,A.src),typeof b=="function"?b(P):console.error(P)},u.indexOf("data:image/")!==0&&(A.crossOrigin="Anonymous"),A.src=u}_.modified=!0}).catch(function(T){n.default._friendlyFileLoadError(0,u),typeof b=="function"?b(T):console.error(T)}),_},n.default.prototype.image=function(u,g,b,_,w,S,T,L,A){n.default._validateParameters("image",arguments);var P=u.width,R=u.height;u.elt&&u.elt.videoWidth&&!u.canvas&&(P=u.elt.videoWidth,R=u.elt.videoHeight);var D=g,F=b,I=_||P,k=w||R,U=S||0,q=T||0,Q=L||P,W=A||R;Q=o(Q,P),W=o(W,R);var K=1;u.elt&&!u.canvas&&u.elt.style.width&&(K=u.elt.videoWidth&&!_?u.elt.videoWidth:u.elt.width,K/=parseInt(u.elt.style.width,10)),U*=K,q*=K,W*=K,Q*=K;var Y=h.default.modeAdjust(D,F,I,k,this._renderer._imageMode);this._renderer.image(u,U,q,Q,W,Y.x,Y.y,Y.w,Y.h)},n.default.prototype.tint=function(){for(var u=arguments.length,g=new Array(u),b=0;b<u;b++)g[b]=arguments[b];n.default._validateParameters("tint",g);var _=this.color.apply(this,g);this._renderer._tint=_.levels},n.default.prototype.noTint=function(){this._renderer._tint=null},n.default.prototype._getTintedImageCanvas=function(u){if(!u.canvas)return u;var g=f.default._toPixels(u.canvas),b=document.createElement("canvas");b.width=u.canvas.width,b.height=u.canvas.height;for(var _=b.getContext("2d"),w=_.createImageData(u.canvas.width,u.canvas.height),S=w.data,T=0;T<g.length;T+=4){var L=g[T],A=g[T+1],P=g[T+2],R=g[T+3];S[T]=L*this._renderer._tint[0]/255,S[T+1]=A*this._renderer._tint[1]/255,S[T+2]=P*this._renderer._tint[2]/255,S[T+3]=R*this._renderer._tint[3]/255}return _.putImageData(w,0,0),b},n.default.prototype.imageMode=function(u){n.default._validateParameters("imageMode",arguments),u!==m.CORNER&&u!==m.CORNERS&&u!==m.CENTER||(this._renderer._imageMode=u)};var d=n.default;l.default=d},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/helpers":260,"../core/main":264,"./filters":285,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.includes":185,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,omggif:238}],288:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=f(t("../core/main")),n=f(t("./filters"));function f(m){return m&&m.__esModule?m:{default:m}}c.default.Image=function(m,p){this.width=m,this.height=p,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},c.default.Image.prototype._animateGif=function(m){var p=this.gifProperties,s=m._lastFrameTime;if(p.lastChangeTime===0&&(p.lastChangeTime=s),p.playing){p.timeDisplayed=s-p.lastChangeTime;var i=p.frames[p.displayIndex].delay;if(p.timeDisplayed>=i){var o=Math.floor(p.timeDisplayed/i);if(p.timeDisplayed=0,p.lastChangeTime=s,p.displayIndex+=o,p.loopCount=Math.floor(p.displayIndex/p.numFrames),p.loopLimit!==null&&p.loopCount>=p.loopLimit)p.playing=!1;else{var d=p.displayIndex%p.numFrames;this.drawingContext.putImageData(p.frames[d].image,0,0),p.displayIndex=d,this.setModified(!0)}}}},c.default.Image.prototype._setProperty=function(m,p){this[m]=p,this.setModified(!0)},c.default.Image.prototype.loadPixels=function(){c.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},c.default.Image.prototype.updatePixels=function(m,p,s,i){c.default.Renderer2D.prototype.updatePixels.call(this,m,p,s,i),this.setModified(!0)},c.default.Image.prototype.get=function(m,p,s,i){return c.default._validateParameters("p5.Image.get",arguments),c.default.Renderer2D.prototype.get.apply(this,arguments)},c.default.Image.prototype._getPixel=c.default.Renderer2D.prototype._getPixel,c.default.Image.prototype.set=function(m,p,s){c.default.Renderer2D.prototype.set.call(this,m,p,s),this.setModified(!0)},c.default.Image.prototype.resize=function(m,p){m===0&&p===0?(m=this.canvas.width,p=this.canvas.height):m===0?m=this.canvas.width*p/this.canvas.height:p===0&&(p=this.canvas.height*m/this.canvas.width),m=Math.floor(m),p=Math.floor(p);var s=document.createElement("canvas");if(s.width=m,s.height=p,this.gifProperties)for(var i=this.gifProperties,o=function(g,b){for(var _=0,w=0;w<b.height;w++)for(var S=0;S<b.width;S++){var T=Math.floor(S*g.width/b.width),L=4*(Math.floor(w*g.height/b.height)*g.width+T);b.data[_++]=g.data[L++],b.data[_++]=g.data[L++],b.data[_++]=g.data[L++],b.data[_++]=g.data[L++]}},d=0;d<i.numFrames;d++){var u=this.drawingContext.createImageData(m,p);o(i.frames[d].image,u),i.frames[d].image=u}s.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,s.width,s.height),this.canvas.width=this.width=m,this.canvas.height=this.height=p,this.drawingContext.drawImage(s,0,0,m,p,0,0,m,p),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},c.default.Image.prototype.copy=function(){for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];c.default.prototype.copy.apply(this,p)},c.default.Image.prototype.mask=function(m){m===void 0&&(m=this);var p=this.drawingContext.globalCompositeOperation,s=1;m instanceof c.default.Renderer&&(s=m._pInst._pixelDensity);var i=[m,0,0,s*m.width,s*m.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",c.default.Image.prototype.copy.apply(this,i),this.drawingContext.globalCompositeOperation=p,this.setModified(!0)},c.default.Image.prototype.filter=function(m,p){n.default.apply(this.canvas,n.default[m],p),this.setModified(!0)},c.default.Image.prototype.blend=function(){for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];c.default._validateParameters("p5.Image.blend",arguments),c.default.prototype.blend.apply(this,p),this.setModified(!0)},c.default.Image.prototype.setModified=function(m){this._modified=m},c.default.Image.prototype.isModified=function(){return this._modified},c.default.Image.prototype.save=function(m,p){this.gifProperties?c.default.prototype.saveGif(this,m):c.default.prototype.saveCanvas(this.canvas,m,p)},c.default.Image.prototype.reset=function(){if(this.gifProperties){var m=this.gifProperties;m.playing=!0,m.timeSinceStart=0,m.timeDisplayed=0,m.lastChangeTime=0,m.loopCount=0,m.displayIndex=0,this.drawingContext.putImageData(m.frames[0].image,0,0)}},c.default.Image.prototype.getCurrentFrame=function(){if(this.gifProperties){var m=this.gifProperties;return m.displayIndex%m.numFrames}},c.default.Image.prototype.setFrame=function(m){if(this.gifProperties){var p=this.gifProperties;m<p.numFrames&&0<=m?(p.timeDisplayed=0,p.lastChangeTime=0,p.displayIndex=m,this.drawingContext.putImageData(p.frames[m].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}},c.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},c.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},c.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},c.default.Image.prototype.delay=function(m,p){if(this.gifProperties){var s=this.gifProperties;if(p<s.numFrames&&0<=p)s.frames[p].delay=m;else{var i=!0,o=!1,d=void 0;try{for(var u,g=s.frames[Symbol.iterator]();!(i=(u=g.next()).done);i=!0)u.value.delay=m}catch(b){o=!0,d=b}finally{try{i||g.return==null||g.return()}finally{if(o)throw d}}}}};var h=c.default.Image;l.default=h},{"../core/main":264,"./filters":285,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],289:[function(t,a,l){t("core-js/modules/es.array.filter"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=f(t("../core/main")),n=f(t("./filters"));function f(m){return m&&m.__esModule?m:{default:m}}t("../color/p5.Color"),c.default.prototype.pixels=[],c.default.prototype.blend=function(){for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];var i;c.default._validateParameters("blend",p),this._renderer?(i=this._renderer).blend.apply(i,p):c.default.Renderer2D.prototype.blend.apply(this,p)},c.default.prototype.copy=function(){for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];var i,o,d,u,g,b,_,w,S;if(c.default._validateParameters("copy",p),p.length===9)i=p[0],o=p[1],d=p[2],u=p[3],g=p[4],b=p[5],_=p[6],w=p[7],S=p[8];else{if(p.length!==8)throw new Error("Signature not supported");i=this,o=p[0],d=p[1],u=p[2],g=p[3],b=p[4],_=p[5],w=p[6],S=p[7]}c.default.prototype._copyHelper(this,i,o,d,u,g,b,_,w,S)},c.default.prototype._copyHelper=function(m,p,s,i,o,d,u,g,b,_){p.loadPixels();var w=p.canvas.width/p.width,S=0,T=0;p._renderer&&p._renderer.isP3D&&(S=p.width/2,T=p.height/2),m._renderer&&m._renderer.isP3D?c.default.RendererGL.prototype.image.call(m._renderer,p,s+S,i+T,o,d,u,g,b,_):m.drawingContext.drawImage(p.canvas,w*(s+S),w*(i+T),w*o,w*d,u,g,b,_)},c.default.prototype.filter=function(m,p){c.default._validateParameters("filter",arguments),this.canvas!==void 0?n.default.apply(this.canvas,n.default[m],p):n.default.apply(this.elt,n.default[m],p)},c.default.prototype.get=function(m,p,s,i){var o;return c.default._validateParameters("get",arguments),(o=this._renderer).get.apply(o,arguments)},c.default.prototype.loadPixels=function(){for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];c.default._validateParameters("loadPixels",p),this._renderer.loadPixels()},c.default.prototype.set=function(m,p,s){this._renderer.set(m,p,s)},c.default.prototype.updatePixels=function(m,p,s,i){c.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(m,p,s,i)};var h=c.default;l.default=h},{"../color/p5.Color":251,"../core/main":264,"./filters":285,"core-js/modules/es.array.filter":152}],290:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=h(t("../core/main"));t("whatwg-fetch"),t("es6-promise/auto");var n=h(t("fetch-jsonp")),f=h(t("file-saver"));function h(d){return d&&d.__esModule?d:{default:d}}function m(d){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(d)}function p(d,u){var g={};if((u=u||[])===void 0)for(var b=0;b<d.length;b++)u[b.toString()]=b;for(var _=0;_<u.length;_++){var w=u[_],S=d[_];g[w]=S}return g}function s(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function i(d,u){u&&u!==!0&&u!=="true"||(u="");var g="";return(d=d||"untitled")&&d.includes(".")&&(g=d.split(".").pop()),u&&g!==u&&(g=u,d="".concat(d,".").concat(g)),[d,g]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),c.default.prototype.loadJSON=function(){for(var d=arguments.length,u=new Array(d),g=0;g<d;g++)u[g]=arguments[g];c.default._validateParameters("loadJSON",u);for(var b,_,w,S=u[0],T={},L="json",A=1;A<u.length;A++){var P=u[A];typeof P=="string"?P!=="jsonp"&&P!=="json"||(L=P):typeof P=="function"?b?_=P:b=P:m(P)==="object"&&(P.hasOwnProperty("jsonpCallback")||P.hasOwnProperty("jsonpCallbackFunction"))&&(L="jsonp",w=P)}var R=this;return this.httpDo(S,"GET",w,L,function(D){for(var F in D)T[F]=D[F];b!==void 0&&b(D),R._decrementPreload()},function(D){if(c.default._friendlyFileLoadError(5,S),!_)throw D;_(D)}),T},c.default.prototype.loadStrings=function(){for(var d=arguments.length,u=new Array(d),g=0;g<d;g++)u[g]=arguments[g];c.default._validateParameters("loadStrings",u);for(var b,_,w=[],S=1;S<u.length;S++){var T=u[S];typeof T=="function"&&(b===void 0?b=T:_===void 0&&(_=T))}var L=this;return c.default.prototype.httpDo.call(this,u[0],"GET","text",function(A){for(var P=A.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),R=0,D=P.length;R<D;R+=32768)Array.prototype.push.apply(w,P.slice(R,Math.min(R+32768,D)));b!==void 0&&b(w),L._decrementPreload()},function(A){if(c.default._friendlyFileLoadError(3,A),!_)throw A;_(A)}),w},c.default.prototype.loadTable=function(d){var u,g,b,_=!1,w=d.substring(d.lastIndexOf(".")+1,d.length);w==="csv"?b=",":w==="ssv"?b=";":w==="tsv"&&(b="	");for(var S=1;S<arguments.length;S++)typeof arguments[S]=="function"?u===void 0?u=arguments[S]:g===void 0&&(g=arguments[S]):typeof arguments[S]=="string"&&(arguments[S]==="header"&&(_=!0),arguments[S]==="csv"?b=",":arguments[S]==="ssv"?b=";":arguments[S]==="tsv"&&(b="	"));var T=new c.default.Table,L=this;return this.httpDo(d,"GET","table",function(A){for(var P,R,D={},F=[],I=0,k=null,U=function(){D.currentState=0,D.token=""},q=function(){k.push(D.token),U()},Q=function(){D.currentState=4,F.push(k),k=null};;){if((P=A[I++])==null){if(D.escaped)throw new Error("Unclosed quote in file.");if(k){q(),Q();break}}if(k===null&&(D.escaped=!1,k=[],U()),D.currentState===0){if(P==='"'){D.escaped=!0,D.currentState=1;continue}D.currentState=1}if(D.currentState===1&&D.escaped)if(P==='"')A[I]==='"'?(D.token+='"',I++):(D.escaped=!1,D.currentState=2);else{if(P==="\r")continue;D.token+=P}else P==="\r"?(A[I]===`
`&&I++,q(),Q()):P===`
`?(q(),Q()):P===b?q():D.currentState===1&&(D.token+=P)}if(_)T.columns=F.shift();else for(var W=0;W<F[0].length;W++)T.columns[W]="null";for(var K=0;K<F.length;K++)(F[K].length!==1||F[K][0]!=="undefined"&&F[K][0]!=="")&&((R=new c.default.TableRow).arr=F[K],R.obj=p(F[K],T.columns),T.addRow(R));typeof u=="function"&&u(T),L._decrementPreload()},function(A){c.default._friendlyFileLoadError(2,d),g?g(A):console.error(A)}),T},c.default.prototype.loadXML=function(){for(var d=arguments.length,u=new Array(d),g=0;g<d;g++)u[g]=arguments[g];for(var b,_,w=new c.default.XML,S=1;S<u.length;S++){var T=u[S];typeof T=="function"&&(b===void 0?b=T:_===void 0&&(_=T))}var L=this;return this.httpDo(u[0],"GET","xml",function(A){for(var P in A)w[P]=A[P];b!==void 0&&b(w),L._decrementPreload()},function(A){if(c.default._friendlyFileLoadError(1,A),!_)throw A;_(A)}),w},c.default.prototype.loadBytes=function(d,u,g){var b={},_=this;return this.httpDo(d,"GET","arrayBuffer",function(w){b.bytes=new Uint8Array(w),typeof u=="function"&&u(b),_._decrementPreload()},function(w){if(c.default._friendlyFileLoadError(6,d),!g)throw w;g(w)}),b},c.default.prototype.httpGet=function(){c.default._validateParameters("httpGet",arguments);var d=Array.prototype.slice.call(arguments);return d.splice(1,0,"GET"),c.default.prototype.httpDo.apply(this,d)},c.default.prototype.httpPost=function(){c.default._validateParameters("httpPost",arguments);var d=Array.prototype.slice.call(arguments);return d.splice(1,0,"POST"),c.default.prototype.httpDo.apply(this,d)},c.default.prototype.httpDo=function(){for(var d,u,g,b,_,w={},S=0,T="text/plain",L=arguments.length-1;0<L&&typeof(L<0||arguments.length<=L?void 0:arguments[L])=="function";L--)S++;var A=arguments.length<=0?void 0:arguments[0];if(arguments.length-S==2&&typeof A=="string"&&m(arguments.length<=1?void 0:arguments[1])==="object")b=new Request(A,arguments.length<=1?void 0:arguments[1]),u=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3];else{for(var P,R="GET",D=1;D<arguments.length;D++){var F=D<0||arguments.length<=D?void 0:arguments[D];if(typeof F=="string")F==="GET"||F==="POST"||F==="PUT"||F==="DELETE"?R=F:F==="json"||F==="jsonp"||F==="binary"||F==="arrayBuffer"||F==="xml"||F==="text"||F==="table"?d=F:P=F;else if(typeof F=="number")P=F.toString();else if(m(F)==="object")if(F.hasOwnProperty("jsonpCallback")||F.hasOwnProperty("jsonpCallbackFunction"))for(var I in F)w[I]=F[I];else T=F instanceof c.default.XML?(P=F.serialize(),"application/xml"):(P=JSON.stringify(F),"application/json");else typeof F=="function"&&(u?g=F:u=F)}var k=R==="GET"?new Headers:new Headers({"Content-Type":T});b=new Request(A,{method:R,mode:"cors",body:P,headers:k})}return(_=(_=(d=d||(A.includes("json")?"json":A.includes("xml")?"xml":"text"))==="jsonp"?(0,n.default)(A,w):fetch(b)).then(function(U){if(!U.ok){var q=new Error(U.body);throw q.status=U.status,q.ok=!1,q}var Q=0;switch(d!=="jsonp"&&(Q=U.headers.get("content-length")),Q&&64e6<Q&&c.default._friendlyFileLoadError(7,A),d){case"json":case"jsonp":return U.json();case"binary":return U.blob();case"arrayBuffer":return U.arrayBuffer();case"xml":return U.text().then(function(W){var K=new DOMParser().parseFromString(W,"text/xml");return new c.default.XML(K.documentElement)});default:return U.text()}})).then(u||function(){}),_.catch(g||console.error),_},window.URL=window.URL||window.webkitURL,c.default.prototype._pWriters=[],c.default.prototype.createWriter=function(d,u){var g;for(var b in c.default.prototype._pWriters)if(c.default.prototype._pWriters[b].name===d)return g=new c.default.PrintWriter(d+this.millis(),u),c.default.prototype._pWriters.push(g),g;return g=new c.default.PrintWriter(d,u),c.default.prototype._pWriters.push(g),g},c.default.PrintWriter=function(d,u){var g=this;this.name=d,this.content="",this.write=function(b){this.content+=b},this.print=function(b){this.content+="".concat(b,`
`)},this.clear=function(){this.content=""},this.close=function(){var b=[];for(var _ in b.push(this.content),c.default.prototype.writeFile(b,d,u),c.default.prototype._pWriters)c.default.prototype._pWriters[_].name===this.name&&c.default.prototype._pWriters.splice(_,1);g.clear(),g={}}},c.default.prototype.save=function(d,u,g){var b=arguments,_=this._curElement?this._curElement.elt:this.elt;if(b.length!==0)if(b[0]instanceof c.default.Renderer||b[0]instanceof c.default.Graphics)c.default.prototype.saveCanvas(b[0].elt,b[1],b[2]);else if(b.length===1&&typeof b[0]=="string")c.default.prototype.saveCanvas(_,b[0]);else switch(i(b[1],b[2])[1]){case"json":return void c.default.prototype.saveJSON(b[0],b[1],b[2]);case"txt":return void c.default.prototype.saveStrings(b[0],b[1],b[2]);default:b[0]instanceof Array?c.default.prototype.saveStrings(b[0],b[1],b[2]):b[0]instanceof c.default.Table?c.default.prototype.saveTable(b[0],b[1],b[2]):b[0]instanceof c.default.Image?c.default.prototype.saveCanvas(b[0].canvas,b[1]):b[0]instanceof c.default.SoundFile&&c.default.prototype.saveSound(b[0],b[1],b[2],b[3])}else c.default.prototype.saveCanvas(_)},c.default.prototype.saveJSON=function(d,u,g){var b;c.default._validateParameters("saveJSON",arguments),b=g?JSON.stringify(d):JSON.stringify(d,void 0,2),this.saveStrings(b.split(`
`),u,"json")},c.default.prototype.saveJSONObject=c.default.prototype.saveJSON,c.default.prototype.saveJSONArray=c.default.prototype.saveJSON,c.default.prototype.saveStrings=function(d,u,g,b){c.default._validateParameters("saveStrings",arguments);for(var _=g||"txt",w=this.createWriter(u,_),S=0;S<d.length;S++)b?w.write(d[S]+`\r
`):w.write(d[S]+`
`);w.close(),w.clear()},c.default.prototype.saveTable=function(d,u,g){var b;c.default._validateParameters("saveTable",arguments),b=g===void 0?u.substring(u.lastIndexOf(".")+1,u.length):g;var _=this.createWriter(u,b),w=d.columns,S=",";if(b==="tsv"&&(S="	"),b!=="html"){if(w[0]!=="0"){for(var T=0;T<w.length;T++)T<w.length-1?_.write(w[T]+S):_.write(w[T]);_.write(`
`)}for(var L=0;L<d.rows.length;L++){var A=void 0;for(A=0;A<d.rows[L].arr.length;A++)A<d.rows[L].arr.length-1?b==="csv"&&String(d.rows[L].arr[A]).includes(",")?_.write('"'+d.rows[L].arr[A]+'"'+S):_.write(d.rows[L].arr[A]+S):b==="csv"&&String(d.rows[L].arr[A]).includes(",")?_.write('"'+d.rows[L].arr[A]+'"'):_.write(d.rows[L].arr[A]);_.write(`
`)}}else{if(_.print("<html>"),_.print("<head>"),_.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),_.print("</head>"),_.print("<body>"),_.print("  <table>"),w[0]!=="0"){_.print("    <tr>");for(var P=0;P<w.length;P++){var R=s(w[P]);_.print("      <td>".concat(R)),_.print("      </td>")}_.print("    </tr>")}for(var D=0;D<d.rows.length;D++){_.print("    <tr>");for(var F=0;F<d.columns.length;F++){var I=s(d.rows[D].getString(F));_.print("      <td>".concat(I)),_.print("      </td>")}_.print("    </tr>")}_.print("  </table>"),_.print("</body>"),_.print("</html>")}_.close(),_.clear()},c.default.prototype.writeFile=function(d,u,g){var b="application/octet-stream";c.default.prototype._isSafari()&&(b="text/plain");var _=new Blob(d,{type:b});c.default.prototype.downloadFile(_,u,g)},c.default.prototype.downloadFile=function(d,u,g){var b=i(u,g),_=b[0];if(d instanceof Blob)f.default.saveAs(d,_);else{var w=document.createElement("a");if(w.href=d,w.download=_,w.onclick=function(T){var L;L=T,document.body.removeChild(L.target),T.stopPropagation()},w.style.display="none",document.body.appendChild(w),c.default.prototype._isSafari()){var S=`Hello, Safari user! To download this file...
`;S+=`1. Go to File --> Save As.
`,S+=`2. Choose "Page Source" as the Format.
`,S+='3. Name it with this extension: ."'.concat(b[1],'"'),alert(S)}w.click()}},c.default.prototype._checkFileExtension=i,c.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};var o=c.default;l.default=o},{"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,"core-js/modules/web.url":231,"es6-promise/auto":232,"fetch-jsonp":234,"file-saver":235,"whatwg-fetch":242}],291:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.Table=function(h){this.columns=[],this.rows=[]},n.default.Table.prototype.addRow=function(h){var m=h||new n.default.TableRow;if(m.arr===void 0||m.obj===void 0)throw new Error("invalid TableRow: ".concat(m));return(m.table=this).rows.push(m),m},n.default.Table.prototype.removeRow=function(h){this.rows[h].table=null;var m=this.rows.splice(h+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(m)},n.default.Table.prototype.getRow=function(h){return this.rows[h]},n.default.Table.prototype.getRows=function(){return this.rows},n.default.Table.prototype.findRow=function(h,m){if(typeof m=="string"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[m]===h)return this.rows[p]}else for(var s=0;s<this.rows.length;s++)if(this.rows[s].arr[m]===h)return this.rows[s];return null},n.default.Table.prototype.findRows=function(h,m){var p=[];if(typeof m=="string")for(var s=0;s<this.rows.length;s++)this.rows[s].obj[m]===h&&p.push(this.rows[s]);else for(var i=0;i<this.rows.length;i++)this.rows[i].arr[m]===h&&p.push(this.rows[i]);return p},n.default.Table.prototype.matchRow=function(h,m){if(typeof m=="number"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[m].match(h))return this.rows[p]}else for(var s=0;s<this.rows.length;s++)if(this.rows[s].obj[m].match(h))return this.rows[s];return null},n.default.Table.prototype.matchRows=function(h,m){var p=[];if(typeof m=="number")for(var s=0;s<this.rows.length;s++)this.rows[s].arr[m].match(h)&&p.push(this.rows[s]);else for(var i=0;i<this.rows.length;i++)this.rows[i].obj[m].match(h)&&p.push(this.rows[i]);return p},n.default.Table.prototype.getColumn=function(h){var m=[];if(typeof h=="string")for(var p=0;p<this.rows.length;p++)m.push(this.rows[p].obj[h]);else for(var s=0;s<this.rows.length;s++)m.push(this.rows[s].arr[h]);return m},n.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},n.default.Table.prototype.addColumn=function(h){var m=h||null;this.columns.push(m)},n.default.Table.prototype.getColumnCount=function(){return this.columns.length},n.default.Table.prototype.getRowCount=function(){return this.rows.length},n.default.Table.prototype.removeTokens=function(h,m){for(var p=[],s=0;s<h.length;s++)p.push(h.charAt(s).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var i=new RegExp(p.join("|"),"g");if(m===void 0)for(var o=0;o<this.columns.length;o++)for(var d=0;d<this.rows.length;d++){var u=this.rows[d].arr[o];u=u.replace(i,""),this.rows[d].arr[o]=u,this.rows[d].obj[this.columns[o]]=u}else if(typeof m=="string")for(var g=0;g<this.rows.length;g++){var b=this.rows[g].obj[m];b=b.replace(i,""),this.rows[g].obj[m]=b;var _=this.columns.indexOf(m);this.rows[g].arr[_]=b}else for(var w=0;w<this.rows.length;w++){var S=this.rows[w].arr[m];S=S.replace(i,""),this.rows[w].arr[m]=S,this.rows[w].obj[this.columns[m]]=S}},n.default.Table.prototype.trim=function(h){var m=new RegExp(" ","g");if(h===void 0)for(var p=0;p<this.columns.length;p++)for(var s=0;s<this.rows.length;s++){var i=this.rows[s].arr[p];i=i.replace(m,""),this.rows[s].arr[p]=i,this.rows[s].obj[this.columns[p]]=i}else if(typeof h=="string")for(var o=0;o<this.rows.length;o++){var d=this.rows[o].obj[h];d=d.replace(m,""),this.rows[o].obj[h]=d;var u=this.columns.indexOf(h);this.rows[o].arr[u]=d}else for(var g=0;g<this.rows.length;g++){var b=this.rows[g].arr[h];b=b.replace(m,""),this.rows[g].arr[h]=b,this.rows[g].obj[this.columns[h]]=b}},n.default.Table.prototype.removeColumn=function(h){var m,p;typeof h=="string"?(m=h,p=this.columns.indexOf(h)):(p=h,m=this.columns[h]);var s=this.columns.splice(p+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(s);for(var i=0;i<this.rows.length;i++){var o=this.rows[i].arr,d=o.splice(p+1,o.length);o.pop(),this.rows[i].arr=o.concat(d),delete this.rows[i].obj[m]}},n.default.Table.prototype.set=function(h,m,p){this.rows[h].set(m,p)},n.default.Table.prototype.setNum=function(h,m,p){this.rows[h].setNum(m,p)},n.default.Table.prototype.setString=function(h,m,p){this.rows[h].setString(m,p)},n.default.Table.prototype.get=function(h,m){return this.rows[h].get(m)},n.default.Table.prototype.getNum=function(h,m){return this.rows[h].getNum(m)},n.default.Table.prototype.getString=function(h,m){return this.rows[h].getString(m)},n.default.Table.prototype.getObject=function(h){for(var m,p={},s=0;s<this.rows.length;s++)if(m=this.rows[s].obj,typeof h=="string"){if(!(0<=this.columns.indexOf(h)))throw new Error('This table has no column named "'.concat(h,'"'));p[m[h]]=m}else p[s]=this.rows[s].obj;return p},n.default.Table.prototype.getArray=function(){for(var h=[],m=0;m<this.rows.length;m++)h.push(this.rows[m].arr);return h};var f=n.default;l.default=f},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],292:[function(t,a,l){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.TableRow=function(h,m){var p=[],s={};h&&(m=m||",",p=h.split(m));for(var i=0;i<p.length;i++){var o=i,d=p[i];s[o]=d}this.arr=p,this.obj=s,this.table=null},n.default.TableRow.prototype.set=function(h,m){if(typeof h=="string"){var p=this.table.columns.indexOf(h);if(!(0<=p))throw new Error('This table has no column named "'.concat(h,'"'));this.obj[h]=m,this.arr[p]=m}else{if(!(h<this.table.columns.length))throw new Error("Column #".concat(h," is out of the range of this table"));this.arr[h]=m;var s=this.table.columns[h];this.obj[s]=m}},n.default.TableRow.prototype.setNum=function(h,m){var p=parseFloat(m);this.set(h,p)},n.default.TableRow.prototype.setString=function(h,m){var p=m.toString();this.set(h,p)},n.default.TableRow.prototype.get=function(h){return typeof h=="string"?this.obj[h]:this.arr[h]},n.default.TableRow.prototype.getNum=function(h){var m;if((m=parseFloat(typeof h=="string"?this.obj[h]:this.arr[h])).toString()==="NaN")throw"Error: ".concat(this.obj[h]," is NaN (Not a Number)");return m},n.default.TableRow.prototype.getString=function(h){return typeof h=="string"?this.obj[h].toString():this.arr[h].toString()};var f=n.default;l.default=f},{"../core/main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],293:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};function f(m){for(var p=[],s=0;s<m.length;s++)p.push(new n.default.XML(m[s]));return p}n.default.XML=function(m){if(m)this.DOM=m;else{var p=document.implementation.createDocument(null,"doc");this.DOM=p.createElement("root")}},n.default.XML.prototype.getParent=function(){return new n.default.XML(this.DOM.parentElement)},n.default.XML.prototype.getName=function(){return this.DOM.tagName},n.default.XML.prototype.setName=function(m){var p=this.DOM.innerHTML,s=this.DOM.attributes,i=document.implementation.createDocument(null,"default").createElement(m);i.innerHTML=p;for(var o=0;o<s.length;o++)i.setAttribute(s[o].nodeName,s.nodeValue);this.DOM=i},n.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},n.default.XML.prototype.listChildren=function(){for(var m=[],p=0;p<this.DOM.childNodes.length;p++)m.push(this.DOM.childNodes[p].nodeName);return m},n.default.XML.prototype.getChildren=function(m){return f(m?this.DOM.getElementsByTagName(m):this.DOM.children)},n.default.XML.prototype.getChild=function(m){if(typeof m!="string")return new n.default.XML(this.DOM.children[m]);var p=!0,s=!1,i=void 0;try{for(var o,d=this.DOM.children[Symbol.iterator]();!(p=(o=d.next()).done);p=!0){var u=o.value;if(u.tagName===m)return new n.default.XML(u)}}catch(g){s=!0,i=g}finally{try{p||d.return==null||d.return()}finally{if(s)throw i}}},n.default.XML.prototype.addChild=function(m){m instanceof n.default.XML&&this.DOM.appendChild(m.DOM)},n.default.XML.prototype.removeChild=function(m){var p=-1;if(typeof m=="string"){for(var s=0;s<this.DOM.children.length;s++)if(this.DOM.children[s].tagName===m){p=s;break}}else p=m;p!==-1&&this.DOM.removeChild(this.DOM.children[p])},n.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},n.default.XML.prototype.listAttributes=function(){var m=[],p=!0,s=!1,i=void 0;try{for(var o,d=this.DOM.attributes[Symbol.iterator]();!(p=(o=d.next()).done);p=!0){var u=o.value;m.push(u.nodeName)}}catch(g){s=!0,i=g}finally{try{p||d.return==null||d.return()}finally{if(s)throw i}}return m},n.default.XML.prototype.hasAttribute=function(m){var p={},s=!0,i=!1,o=void 0;try{for(var d,u=this.DOM.attributes[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){var g=d.value;p[g.nodeName]=g.nodeValue}}catch(b){i=!0,o=b}finally{try{s||u.return==null||u.return()}finally{if(i)throw o}}return!!p[m]},n.default.XML.prototype.getNum=function(m,p){var s={},i=!0,o=!1,d=void 0;try{for(var u,g=this.DOM.attributes[Symbol.iterator]();!(i=(u=g.next()).done);i=!0){var b=u.value;s[b.nodeName]=b.nodeValue}}catch(_){o=!0,d=_}finally{try{i||g.return==null||g.return()}finally{if(o)throw d}}return Number(s[m])||p||0},n.default.XML.prototype.getString=function(m,p){var s={},i=!0,o=!1,d=void 0;try{for(var u,g=this.DOM.attributes[Symbol.iterator]();!(i=(u=g.next()).done);i=!0){var b=u.value;s[b.nodeName]=b.nodeValue}}catch(_){o=!0,d=_}finally{try{i||g.return==null||g.return()}finally{if(o)throw d}}return s[m]?String(s[m]):p||null},n.default.XML.prototype.setAttribute=function(m,p){this.DOM.setAttribute(m,p)},n.default.XML.prototype.getContent=function(m){return this.DOM.textContent.replace(/\s\s+/g,",")||m||null},n.default.XML.prototype.setContent=function(m){this.DOM.children.length||(this.DOM.textContent=m)},n.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)};var h=n.default;l.default=h},{"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],294:[function(t,a,l){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.string.includes"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};function f(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var m=arguments.length,p=[],s=0,i=0;i<m;i++){var o=arguments[i];if((o=+o)===1/0||o===-1/0)return 1/0;s<(o=Math.abs(o))&&(s=o),p[i]=o}s===0&&(s=1);for(var d=0,u=0,g=0;g<m;g++){var b=p[g]/s,_=b*b-u,w=d+_;u=w-d-_,d=w}return Math.sqrt(d)*s}n.default.prototype.abs=Math.abs,n.default.prototype.ceil=Math.ceil,n.default.prototype.constrain=function(m,p,s){return n.default._validateParameters("constrain",arguments),Math.max(Math.min(m,s),p)},n.default.prototype.dist=function(){for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];return n.default._validateParameters("dist",p),p.length===4?f(p[2]-p[0],p[3]-p[1]):p.length===6?f(p[3]-p[0],p[4]-p[1],p[5]-p[2]):void 0},n.default.prototype.exp=Math.exp,n.default.prototype.floor=Math.floor,n.default.prototype.lerp=function(m,p,s){return n.default._validateParameters("lerp",arguments),s*(p-m)+m},n.default.prototype.log=Math.log,n.default.prototype.mag=function(m,p){return n.default._validateParameters("mag",arguments),f(m,p)},n.default.prototype.map=function(m,p,s,i,o,d){n.default._validateParameters("map",arguments);var u=(m-p)/(s-p)*(o-i)+i;return d?i<o?this.constrain(u,i,o):this.constrain(u,o,i):u},n.default.prototype.max=function(){for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];return p[0]instanceof Array?Math.max.apply(null,p[0]):Math.max.apply(null,p)},n.default.prototype.min=function(){for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];return p[0]instanceof Array?Math.min.apply(null,p[0]):Math.min.apply(null,p)},n.default.prototype.norm=function(m,p,s){return n.default._validateParameters("norm",arguments),this.map(m,p,s,0,1)},n.default.prototype.pow=Math.pow,n.default.prototype.round=function(m,p){if(!p)return Math.round(m);var s=Math.pow(10,p);return Math.round(m*s)/s},n.default.prototype.sq=function(m){return m*m},n.default.prototype.sqrt=Math.sqrt,n.default.prototype.fract=function(m){n.default._validateParameters("fract",arguments);var p=0,s=Number(m);if(isNaN(s)||Math.abs(s)===1/0)return s;if(s<0&&(s=-s,p=1),!String(s).includes(".")||String(s).includes("e"))return s<1?Math.abs(p-s):0;var i=String(s);return i=Number("0"+i.slice(i.indexOf("."))),Math.abs(p-i)};var h=n.default;l.default=h},{"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":168,"core-js/modules/es.number.constructor":170,"core-js/modules/es.string.includes":185}],295:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};function f(p,s,i){return(f=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(o,d,u){var g=[null];g.push.apply(g,d);var b=new(Function.bind.apply(o,g));return u&&h(b,u.prototype),b}).apply(null,arguments)}function h(p,s){return(h=Object.setPrototypeOf||function(i,o){return i.__proto__=o,i})(p,s)}n.default.prototype.createVector=function(p,s,i){return this instanceof n.default?f(n.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new n.default.Vector(p,s,i)};var m=n.default;l.default=m},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],296:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};function f(o){return .5*(1-Math.cos(o*Math.PI))}var h,m=4095,p=4,s=.5;n.default.prototype.noise=function(o){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(h==null){h=new Array(4096);for(var g=0;g<4096;g++)h[g]=Math.random()}o<0&&(o=-o),d<0&&(d=-d),u<0&&(u=-u);for(var b,_,w,S,T,L=Math.floor(o),A=Math.floor(d),P=Math.floor(u),R=o-L,D=d-A,F=u-P,I=0,k=.5,U=0;U<p;U++){var q=L+(A<<4)+(P<<8);b=f(R),_=f(D),w=h[q&m],w+=b*(h[q+1&m]-w),S=h[q+16&m],w+=_*((S+=b*(h[q+16+1&m]-S))-w),S=h[(q+=256)&m],S+=b*(h[q+1&m]-S),T=h[q+16&m],S+=_*((T+=b*(h[q+16+1&m]-T))-S),I+=(w+=f(F)*(S-w))*k,k*=s,L<<=1,A<<=1,P<<=1,1<=(R*=2)&&(L++,R--),1<=(D*=2)&&(A++,D--),1<=(F*=2)&&(P++,F--)}return I},n.default.prototype.noiseDetail=function(o,d){0<o&&(p=o),0<d&&(s=d)},n.default.prototype.noiseSeed=function(o){var d,u,g,b=(g=4294967296,{setSeed:function(w){u=d=(w==null?Math.random()*g:w)>>>0},getSeed:function(){return d},rand:function(){return(u=(1664525*u+1013904223)%g)/g}});b.setSeed(o),h=new Array(4096);for(var _=0;_<4096;_++)h[_]=b.rand()};var i=n.default;l.default=i},{"../core/main":264}],297:[function(t,a,l){function c(o){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(o)}t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.sub"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(o){if(o&&o.__esModule)return o;if(o===null||c(o)!=="object"&&typeof o!="function")return{default:o};var d=m();if(d&&d.has(o))return d.get(o);var u={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in o)if(Object.prototype.hasOwnProperty.call(o,b)){var _=g?Object.getOwnPropertyDescriptor(o,b):null;_&&(_.get||_.set)?Object.defineProperty(u,b,_):u[b]=o[b]}return u.default=o,d&&d.set(o,u),u}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return m=function(){return o},o}f.default.Vector=function(o,d,u,g,b){var _,w,S;S={}.toString.call(o)==="[object Function]"?(this.isPInst=!0,this._fromRadians=o,this._toRadians=d,_=u||0,w=g||0,b||0):(_=o||0,w=d||0,u||0),this.x=_,this.y=w,this.z=S},f.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},f.default.Vector.prototype.set=function(o,d,u){return o instanceof f.default.Vector?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):o instanceof Array?(this.x=o[0]||0,this.y=o[1]||0,this.z=o[2]||0):(this.x=o||0,this.y=d||0,this.z=u||0),this},f.default.Vector.prototype.copy=function(){return this.isPInst?new f.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new f.default.Vector(this.x,this.y,this.z)},f.default.Vector.prototype.add=function(o,d,u){return o instanceof f.default.Vector?(this.x+=o.x||0,this.y+=o.y||0,this.z+=o.z||0):o instanceof Array?(this.x+=o[0]||0,this.y+=o[1]||0,this.z+=o[2]||0):(this.x+=o||0,this.y+=d||0,this.z+=u||0),this};function p(o,d){return o!==0&&(this.x=this.x%o),d!==0&&(this.y=this.y%d),this}function s(o,d,u){return o!==0&&(this.x=this.x%o),d!==0&&(this.y=this.y%d),u!==0&&(this.z=this.z%u),this}f.default.Vector.prototype.rem=function(o,d,u){if(o instanceof f.default.Vector){if(Number.isFinite(o.x)&&Number.isFinite(o.y)&&Number.isFinite(o.z)){var g=parseFloat(o.x),b=parseFloat(o.y),_=parseFloat(o.z);return s.call(this,g,b,_)}}else if(o instanceof Array){if(o.every(function(T){return Number.isFinite(T)})){if(o.length===2)return p.call(this,o[0],o[1]);if(o.length===3)return s.call(this,o[0],o[1],o[2])}}else if(arguments.length===1){if(Number.isFinite(o)&&o!==0)return this.x=this.x%o,this.y=this.y%o,this.z=this.z%o,this}else if(arguments.length===2){var w=Array.prototype.slice.call(arguments);if(w.every(function(T){return Number.isFinite(T)})&&w.length===2)return p.call(this,w[0],w[1])}else if(arguments.length===3){var S=Array.prototype.slice.call(arguments);if(S.every(function(T){return Number.isFinite(T)})&&S.length===3)return s.call(this,S[0],S[1],S[2])}},f.default.Vector.prototype.sub=function(o,d,u){return o instanceof f.default.Vector?(this.x-=o.x||0,this.y-=o.y||0,this.z-=o.z||0):o instanceof Array?(this.x-=o[0]||0,this.y-=o[1]||0,this.z-=o[2]||0):(this.x-=o||0,this.y-=d||0,this.z-=u||0),this},f.default.Vector.prototype.mult=function(o,d,u){if(o instanceof f.default.Vector)return Number.isFinite(o.x)&&Number.isFinite(o.y)&&Number.isFinite(o.z)&&typeof o.x=="number"&&typeof o.y=="number"&&typeof o.z=="number"?(this.x*=o.x,this.y*=o.y,this.z*=o.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"),this;if(o instanceof Array)return o.every(function(b){return Number.isFinite(b)})&&o.every(function(b){return typeof b=="number"})?o.length===1?(this.x*=o[0],this.y*=o[0],this.z*=o[0]):o.length===2?(this.x*=o[0],this.y*=o[1]):o.length===3&&(this.x*=o[0],this.y*=o[1],this.z*=o[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"),this;var g=Array.prototype.slice.call(arguments);return g.every(function(b){return Number.isFinite(b)})&&g.every(function(b){return typeof b=="number"})?(arguments.length===1&&(this.x*=o,this.y*=o,this.z*=o),arguments.length===2&&(this.x*=o,this.y*=d),arguments.length===3&&(this.x*=o,this.y*=d,this.z*=u)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},f.default.Vector.prototype.div=function(o,d,u){if(o instanceof f.default.Vector){if(Number.isFinite(o.x)&&Number.isFinite(o.y)&&Number.isFinite(o.z)&&typeof o.x=="number"&&typeof o.y=="number"&&typeof o.z=="number"){if(o.x===0||o.y===0||o.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=o.x,this.y/=o.y,this.z/=o.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}if(o instanceof Array){if(o.every(function(b){return Number.isFinite(b)})&&o.every(function(b){return typeof b=="number"})){if(o.some(function(b){return b===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;o.length===1?(this.x/=o[0],this.y/=o[0],this.z/=o[0]):o.length===2?(this.x/=o[0],this.y/=o[1]):o.length===3&&(this.x/=o[0],this.y/=o[1],this.z/=o[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}var g=Array.prototype.slice.call(arguments);if(g.every(function(b){return Number.isFinite(b)})&&g.every(function(b){return typeof b=="number"})){if(g.some(function(b){return b===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=o,this.y/=o,this.z/=o),arguments.length===2&&(this.x/=o,this.y/=d),arguments.length===3&&(this.x/=o,this.y/=d,this.z/=u)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},f.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},f.default.Vector.prototype.magSq=function(){var o=this.x,d=this.y,u=this.z;return o*o+d*d+u*u},f.default.Vector.prototype.dot=function(o,d,u){return o instanceof f.default.Vector?this.dot(o.x,o.y,o.z):this.x*(o||0)+this.y*(d||0)+this.z*(u||0)},f.default.Vector.prototype.cross=function(o){var d=this.y*o.z-this.z*o.y,u=this.z*o.x-this.x*o.z,g=this.x*o.y-this.y*o.x;return this.isPInst?new f.default.Vector(this._fromRadians,this._toRadians,d,u,g):new f.default.Vector(d,u,g)},f.default.Vector.prototype.dist=function(o){return o.copy().sub(this).mag()},f.default.Vector.prototype.normalize=function(){var o=this.mag();return o!==0&&this.mult(1/o),this},f.default.Vector.prototype.limit=function(o){var d=this.magSq();return o*o<d&&this.div(Math.sqrt(d)).mult(o),this},f.default.Vector.prototype.setMag=function(o){return this.normalize().mult(o)},f.default.Vector.prototype.heading=function(){var o=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(o):o},f.default.Vector.prototype.setHeading=function(o){var d=this.mag();return this.x=d*Math.cos(o),this.y=d*Math.sin(o),this},f.default.Vector.prototype.rotate=function(o){var d=this.heading()+o;this.isPInst&&(d=this._toRadians(d));var u=this.mag();return this.x=Math.cos(d)*u,this.y=Math.sin(d)*u,this},f.default.Vector.prototype.angleBetween=function(o){var d,u=this.dot(o)/(this.mag()*o.mag());return d=Math.acos(Math.min(1,Math.max(-1,u))),d*=Math.sign(this.cross(o).z||1),this.isPInst&&(d=this._fromRadians(d)),d},f.default.Vector.prototype.lerp=function(o,d,u,g){return o instanceof f.default.Vector?this.lerp(o.x,o.y,o.z,d):(this.x+=(o-this.x)*g||0,this.y+=(d-this.y)*g||0,this.z+=(u-this.z)*g||0,this)},f.default.Vector.prototype.reflect=function(o){return o.normalize(),this.sub(o.mult(2*this.dot(o)))},f.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},f.default.Vector.prototype.equals=function(o,d,u){var g,b,_;return _=o instanceof f.default.Vector?(g=o.x||0,b=o.y||0,o.z||0):o instanceof Array?(g=o[0]||0,b=o[1]||0,o[2]||0):(g=o||0,b=d||0,u||0),this.x===g&&this.y===b&&this.z===_},f.default.Vector.fromAngle=function(o,d){return d===void 0&&(d=1),new f.default.Vector(d*Math.cos(o),d*Math.sin(o),0)},f.default.Vector.fromAngles=function(o,d,u){u===void 0&&(u=1);var g=Math.cos(d),b=Math.sin(d),_=Math.cos(o),w=Math.sin(o);return new f.default.Vector(u*w*b,-u*_,u*w*g)},f.default.Vector.random2D=function(){return this.fromAngle(Math.random()*h.TWO_PI)},f.default.Vector.random3D=function(){var o=Math.random()*h.TWO_PI,d=2*Math.random()-1,u=Math.sqrt(1-d*d),g=u*Math.cos(o),b=u*Math.sin(o);return new f.default.Vector(g,b,d)},f.default.Vector.add=function(o,d,u){return u?u.set(o):(u=o.copy(),arguments.length===3&&f.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),u.add(d),u},f.default.Vector.rem=function(o,d){if(o instanceof f.default.Vector&&d instanceof f.default.Vector){var u=o.copy();return u.rem(d),u}},f.default.Vector.sub=function(o,d,u){return u?u.set(o):(u=o.copy(),arguments.length===3&&f.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),u.sub(d),u},f.default.Vector.mult=function(o,d,u){return u?u.set(o):(u=o.copy(),arguments.length===3&&f.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),u.mult(d),u},f.default.Vector.rotate=function(o,d,u){return arguments.length===2?u=o.copy():(u instanceof f.default.Vector||f.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),u.set(o)),u.rotate(d),u},f.default.Vector.div=function(o,d,u){return u?u.set(o):(u=o.copy(),arguments.length===3&&f.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),u.div(d),u},f.default.Vector.dot=function(o,d){return o.dot(d)},f.default.Vector.cross=function(o,d){return o.cross(d)},f.default.Vector.dist=function(o,d){return o.dist(d)},f.default.Vector.lerp=function(o,d,u,g){return g?g.set(o):(g=o.copy(),arguments.length===4&&f.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),g.lerp(d,u),g},f.default.Vector.mag=function(o){var d=o.x,u=o.y,g=o.z,b=d*d+u*u+g*g;return Math.sqrt(b)},f.default.Vector.normalize=function(o,d){return arguments.length<2?d=o.copy():(d instanceof f.default.Vector||f.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),d.set(o)),d.normalize()};var i=f.default.Vector;l.default=i},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":150,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":169,"core-js/modules/es.number.constructor":170,"core-js/modules/es.number.is-finite":171,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.sub":192}],298:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c},f="_lcg_random_state",h=4294967296,m=0;n.default.prototype._lcg=function(s){return this[s]=(1664525*this[s]+1013904223)%h,this[s]/h},n.default.prototype._lcgSetSeed=function(s,i){this[s]=(i==null?Math.random()*h:i)>>>0},n.default.prototype.randomSeed=function(s){this._lcgSetSeed(f,s),this._gaussian_previous=!1},n.default.prototype.random=function(s,i){var o;if(n.default._validateParameters("random",arguments),o=this[f]!=null?this._lcg(f):Math.random(),s===void 0)return o;if(i===void 0)return s instanceof Array?s[Math.floor(o*s.length)]:o*s;if(i<s){var d=s;s=i,i=d}return o*(i-s)+s},n.default.prototype.randomGaussian=function(s){var i,o,d,u,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)i=m,this._gaussian_previous=!1;else{for(;1<=(u=(o=this.random(2)-1)*o+(d=this.random(2)-1)*d););i=o*(u=Math.sqrt(-2*Math.log(u)/u)),m=d*u,this._gaussian_previous=!0}return i*g+(s||0)};var p=n.default;l.default=p},{"../core/main":264}],299:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=m();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}f.default.prototype._angleMode=h.RADIANS,f.default.prototype.acos=function(s){return this._fromRadians(Math.acos(s))},f.default.prototype.asin=function(s){return this._fromRadians(Math.asin(s))},f.default.prototype.atan=function(s){return this._fromRadians(Math.atan(s))},f.default.prototype.atan2=function(s,i){return this._fromRadians(Math.atan2(s,i))},f.default.prototype.cos=function(s){return Math.cos(this._toRadians(s))},f.default.prototype.sin=function(s){return Math.sin(this._toRadians(s))},f.default.prototype.tan=function(s){return Math.tan(this._toRadians(s))},f.default.prototype.degrees=function(s){return s*h.RAD_TO_DEG},f.default.prototype.radians=function(s){return s*h.DEG_TO_RAD},f.default.prototype.angleMode=function(s){s!==h.DEGREES&&s!==h.RADIANS||(this._angleMode=s)},f.default.prototype._toRadians=function(s){return this._angleMode===h.DEGREES?s*h.DEG_TO_RAD:s},f.default.prototype._toDegrees=function(s){return this._angleMode===h.RADIANS?s*h.RAD_TO_DEG:s},f.default.prototype._fromRadians=function(s){return this._angleMode===h.DEGREES?s*h.RAD_TO_DEG:s};var p=f.default;l.default=p},{"../core/constants":253,"../core/main":264}],300:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.prototype.textAlign=function(h,m){var p;return n.default._validateParameters("textAlign",arguments),(p=this._renderer).textAlign.apply(p,arguments)},n.default.prototype.textLeading=function(h){var m;return n.default._validateParameters("textLeading",arguments),(m=this._renderer).textLeading.apply(m,arguments)},n.default.prototype.textSize=function(h){var m;return n.default._validateParameters("textSize",arguments),(m=this._renderer).textSize.apply(m,arguments)},n.default.prototype.textStyle=function(h){var m;return n.default._validateParameters("textStyle",arguments),(m=this._renderer).textStyle.apply(m,arguments)},n.default.prototype.textWidth=function(){for(var h,m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];return p[0]+="",n.default._validateParameters("textWidth",p),p[0].length===0?0:(h=this._renderer).textWidth.apply(h,p)},n.default.prototype.textAscent=function(){for(var h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return n.default._validateParameters("textAscent",m),this._renderer.textAscent()},n.default.prototype.textDescent=function(){for(var h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return n.default._validateParameters("textDescent",m),this._renderer.textDescent()},n.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},n.default.prototype.textWrap=function(h){if(h!=="WORD"&&h!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(h)};var f=n.default;l.default=f},{"../core/main":264}],301:[function(t,a,l){function c(o){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(o)}t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=s(t("../core/constants")),m=s(t("opentype.js"));function p(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return p=function(){return o},o}function s(o){if(o&&o.__esModule)return o;if(o===null||c(o)!=="object"&&typeof o!="function")return{default:o};var d=p();if(d&&d.has(o))return d.get(o);var u={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in o)if(Object.prototype.hasOwnProperty.call(o,b)){var _=g?Object.getOwnPropertyDescriptor(o,b):null;_&&(_.get||_.set)?Object.defineProperty(u,b,_):u[b]=o[b]}return u.default=o,d&&d.set(o,u),u}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),f.default.prototype.loadFont=function(o,d,u){f.default._validateParameters("loadFont",arguments);var g=new f.default.Font(this),b=this;return m.load(o,function(_,w){if(_)return f.default._friendlyFileLoadError(4,o),u!==void 0?u(_):void console.error(_,o);g.font=w,d!==void 0&&d(g),b._decrementPreload();var S,T,L=o.split("\\").pop().split("/").pop(),A=L.lastIndexOf("."),P=A<1?null:L.substr(A+1);["ttf","otf","woff","woff2"].includes(P)&&(S=L.substr(0,A),(T=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(S,`;
src: url(`).concat(o,`);
}
`))),document.head.appendChild(T))}),g},f.default.prototype.text=function(o,d,u,g,b){var _;return f.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(_=this._renderer).text.apply(_,arguments):this},f.default.prototype.textFont=function(o,d){if(f.default._validateParameters("textFont",arguments),arguments.length){if(!o)throw new Error("null font passed to textFont");return this._renderer._setProperty("_textFont",o),d&&(this._renderer._setProperty("_textSize",d),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",d*h._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this._renderer._textFont};var i=f.default;l.default=i},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.split":191,"opentype.js":239}],302:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c},f=function(R){if(R&&R.__esModule)return R;if(R===null||m(R)!=="object"&&typeof R!="function")return{default:R};var D=h();if(D&&D.has(R))return D.get(R);var F={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in R)if(Object.prototype.hasOwnProperty.call(R,k)){var U=I?Object.getOwnPropertyDescriptor(R,k):null;U&&(U.get||U.set)?Object.defineProperty(F,k,U):F[k]=R[k]}return F.default=R,D&&D.set(R,F),F}(t("../core/constants"));function h(){if(typeof WeakMap!="function")return null;var R=new WeakMap;return h=function(){return R},R}function m(R){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(R)}function p(R,D){for(var F=function(Q,W){if(m(Q)!=="object")Q=W;else for(var K in W)Q[K]===void 0&&(Q[K]=W[K]);return Q}(D,{sampleFactor:.1,simplifyThreshold:0}),I=b(R,0,1),k=I/(I*F.sampleFactor),U=[],q=0;q<I;q+=k)U.push(b(R,q));return F.simplifyThreshold&&function(Q){for(var W=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,K=0,Y=Q.length-1;3<Q.length&&0<=Y;--Y)d(o(Q,Y-1),o(Q,Y),o(Q,Y+1),W)&&(Q.splice(Y%Q.length,1),K++)}(U,F.simplifyThreshold),U}function s(R){for(var D,F=[],I=0;I<R.length;I++)R[I].type==="M"&&(D&&F.push(D),D=[]),D.push(i(R[I]));return F.push(D),F}function i(R){var D=[R.type];return R.type==="M"||R.type==="L"?D.push(R.x,R.y):R.type==="C"?D.push(R.x1,R.y1,R.x2,R.y2,R.x,R.y):R.type==="Q"&&D.push(R.x1,R.y1,R.x,R.y),D}function o(R,D){var F=R.length;return R[D<0?D%F+F:D%F]}function d(R,D,F,I){if(!I)return k=R,q=F,((U=D)[0]-k[0])*(q[1]-k[1])-(q[0]-k[0])*(U[1]-k[1])==0;var k,U,q;d.tmpPoint1===void 0&&(d.tmpPoint1=[],d.tmpPoint2=[]);var Q=d.tmpPoint1,W=d.tmpPoint2;Q.x=D.x-R.x,Q.y=D.y-R.y,W.x=F.x-D.x,W.y=F.y-D.y;var K=Q.x*W.x+Q.y*W.y,Y=Math.sqrt(Q.x*Q.x+Q.y*Q.y),se=Math.sqrt(W.x*W.x+W.y*W.y);return Math.acos(K/(Y*se))<I}function u(R,D,F,I,k,U,q,Q,W){var K=1-W,Y=Math.pow(K,3),se=Math.pow(K,2),ue=W*W,ge=ue*W,de=Y*R+3*se*W*F+3*K*W*W*k+ge*q,Pe=Y*D+3*se*W*I+3*K*W*W*U+ge*Q,ae=R+2*W*(F-R)+ue*(k-2*F+R),we=D+2*W*(I-D)+ue*(U-2*I+D),j=F+2*W*(k-F)+ue*(q-2*k+F),B=I+2*W*(U-I)+ue*(Q-2*U+I),V=K*R+W*F,te=K*D+W*I,$=K*k+W*q,X=K*U+W*Q,ye=90-180*Math.atan2(ae-j,we-B)/Math.PI;return(j<ae||we<B)&&(ye+=180),{x:de,y:Pe,m:{x:ae,y:we},n:{x:j,y:B},start:{x:V,y:te},end:{x:$,y:X},alpha:ye}}function g(R,D,F,I,k,U,q,Q,W){return W==null?L(R,D,F,I,k,U,q,Q):u(R,D,F,I,k,U,q,Q,function(K,Y,se,ue,ge,de,Pe,ae,we){if(!(we<0||L(K,Y,se,ue,ge,de,Pe,ae)<we)){var j,B=.5,V=1-B;for(j=L(K,Y,se,ue,ge,de,Pe,ae,V);.01<Math.abs(j-we);)j=L(K,Y,se,ue,ge,de,Pe,ae,V+=(j<we?1:-1)*(B/=2));return V}}(R,D,F,I,k,U,q,Q,W))}function b(R,D,F){for(var I,k,U,q,Q,W=0,K=0,Y=(R=function(se,ue){function ge(Oe,Ie,ie){var ee,Le;if(!Oe)return["C",Ie.x,Ie.y,Ie.x,Ie.y,Ie.x,Ie.y];switch(Oe[0]in{T:1,Q:1}||(Ie.qx=Ie.qy=null),Oe[0]){case"M":Ie.X=Oe[1],Ie.Y=Oe[2];break;case"A":Oe=["C"].concat(function De(Ze,Ce,je,Ee,qe,be,Xe,O,H,G){var Z=Math.PI,oe=120*Z/180,xe,Se,ke,_e,Ye=Z/180*(+qe||0),it=[],lt,vt=function(ht,wt,$e){var Ct=ht*Math.cos($e)-wt*Math.sin($e),ut=ht*Math.sin($e)+wt*Math.cos($e);return{x:Ct,y:ut}};if(G)xe=G[0],Se=G[1],ke=G[2],_e=G[3];else{lt=vt(Ze,Ce,-Ye),Ze=lt.x,Ce=lt.y,lt=vt(O,H,-Ye),O=lt.x,H=lt.y;var dt=(Ze-O)/2,gt=(Ce-H)/2,Tt=dt*dt/(je*je)+gt*gt/(Ee*Ee);1<Tt&&(Tt=Math.sqrt(Tt),je*=Tt,Ee*=Tt);var Tr=je*je,dr=Ee*Ee,rn=(be===Xe?-1:1)*Math.sqrt(Math.abs((Tr*dr-Tr*gt*gt-dr*dt*dt)/(Tr*gt*gt+dr*dt*dt)));ke=rn*je*gt/Ee+(Ze+O)/2,_e=rn*-Ee*dt/je+(Ce+H)/2,xe=Math.asin(((Ce-_e)/Ee).toFixed(9)),Se=Math.asin(((H-_e)/Ee).toFixed(9)),(xe=Ze<ke?Z-xe:xe)<0&&(xe=2*Z+xe),(Se=O<ke?Z-Se:Se)<0&&(Se=2*Z+Se),Xe&&Se<xe&&(xe-=2*Z),!Xe&&xe<Se&&(Se-=2*Z)}var kr=Se-xe;if(Math.abs(kr)>oe){var me=Se,Ue=O,ze=H;Se=xe+oe*(Xe&&xe<Se?1:-1),O=ke+je*Math.cos(Se),H=_e+Ee*Math.sin(Se),it=De(O,H,je,Ee,qe,0,Xe,Ue,ze,[Se,me,ke,_e])}kr=Se-xe;var Be=Math.cos(xe),Je=Math.sin(xe),yt=Math.cos(Se),bt=Math.sin(Se),xt=Math.tan(kr/4),_t=4/3*je*xt,ce=4/3*Ee*xt,Fe=[Ze,Ce],Ke=[Ze+_t*Je,Ce-ce*Be],He=[O+_t*bt,H-ce*yt],rt=[O,H];Ke[0]=2*Fe[0]-Ke[0],Ke[1]=2*Fe[1]-Ke[1];{if(G)return[Ke,He,rt].concat(it);it=[Ke,He,rt].concat(it).join().split(",");for(var Ve=[],Mt=0,St=it.length;Mt<St;Mt++)Ve[Mt]=Mt%2?vt(it[Mt-1],it[Mt],Ye).y:vt(it[Mt],it[Mt+1],Ye).x;return Ve}}.apply(0,[Ie.x,Ie.y].concat(Oe.slice(1))));break;case"S":Le=ie==="C"||ie==="S"?(ee=2*Ie.x-Ie.bx,2*Ie.y-Ie.by):(ee=Ie.x,Ie.y),Oe=["C",ee,Le].concat(Oe.slice(1));break;case"T":ie==="Q"||ie==="T"?(Ie.qx=2*Ie.x-Ie.qx,Ie.qy=2*Ie.y-Ie.qy):(Ie.qx=Ie.x,Ie.qy=Ie.y),Oe=["C"].concat(T(Ie.x,Ie.y,Ie.qx,Ie.qy,Oe[1],Oe[2]));break;case"Q":Ie.qx=Oe[1],Ie.qy=Oe[2],Oe=["C"].concat(T(Ie.x,Ie.y,Oe[1],Oe[2],Oe[3],Oe[4]));break;case"L":Oe=["C"].concat(S(Ie.x,Ie.y,Oe[1],Oe[2]));break;case"H":Oe=["C"].concat(S(Ie.x,Ie.y,Oe[1],Ie.y));break;case"V":Oe=["C"].concat(S(Ie.x,Ie.y,Ie.x,Oe[1]));break;case"Z":Oe=["C"].concat(S(Ie.x,Ie.y,Ie.X,Ie.Y))}return Oe}function de(Oe,Ie){if(7<Oe[Ie].length){Oe[Ie].shift();for(var ie=Oe[Ie];ie.length;)te[Ie]="A",j&&($[Ie]="A"),Oe.splice(Ie++,0,["C"].concat(ie.splice(0,6)));Oe.splice(Ie,1),ae=Math.max(we.length,j&&j.length||0)}}function Pe(Oe,Ie,ie,ee,Le){Oe&&Ie&&Oe[Le][0]==="M"&&Ie[Le][0]!=="M"&&(Ie.splice(Le,0,["M",ee.x,ee.y]),ie.bx=0,ie.by=0,ie.x=Oe[Le][1],ie.y=Oe[Le][2],ae=Math.max(we.length,j&&j.length||0))}var ae,we=_(se),j=ue&&_(ue),B={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},V={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},te=[],$=[],X="",ye="";ae=Math.max(we.length,j&&j.length||0);for(var ne=0;ne<ae;ne++){we[ne]&&(X=we[ne][0]),X!=="C"&&(te[ne]=X,ne&&(ye=te[ne-1])),we[ne]=ge(we[ne],B,ye),te[ne]!=="A"&&X==="C"&&(te[ne]="C"),de(we,ne),j&&(j[ne]&&(X=j[ne][0]),X!=="C"&&($[ne]=X,ne&&(ye=$[ne-1])),j[ne]=ge(j[ne],V,ye),$[ne]!=="A"&&X==="C"&&($[ne]="C"),de(j,ne)),Pe(we,j,B,V,ne),Pe(j,we,V,B,ne);var pe=we[ne],ve=j&&j[ne],he=pe.length,Ae=j&&ve.length;B.x=pe[he-2],B.y=pe[he-1],B.bx=parseFloat(pe[he-4])||B.x,B.by=parseFloat(pe[he-3])||B.y,V.bx=j&&(parseFloat(ve[Ae-4])||V.x),V.by=j&&(parseFloat(ve[Ae-3])||V.y),V.x=j&&ve[Ae-2],V.y=j&&ve[Ae-1]}return j?[we,j]:we}(R)).length;K<Y;K++){if((U=R[K])[0]==="M")I=+U[1],k=+U[2];else{if(D<W+(q=g(I,k,U[1],U[2],U[3],U[4],U[5],U[6]))&&!F)return{x:(Q=g(I,k,U[1],U[2],U[3],U[4],U[5],U[6],D-W)).x,y:Q.y,alpha:Q.alpha};W+=q,I=+U[5],k=+U[6]}U.shift()+U}return(Q=F?W:u(I,k,U[0],U[1],U[2],U[3],U[4],U[5],1)).alpha&&(Q={x:Q.x,y:Q.y,alpha:Q.alpha}),Q}function _(R){var D,F=[],I=0,k=0,U=0,q=0,Q=0;if(!R)return F;R[0][0]==="M"&&(U=I=+R[0][1],q=k=+R[0][2],Q++,F[0]=["M",I,k]);for(var W,K,Y=R.length===3&&R[0][0]==="M"&&R[1][0].toUpperCase()==="R"&&R[2][0].toUpperCase()==="Z",se=Q,ue=R.length;se<ue;se++){if(F.push(W=[]),(K=R[se])[0]!==String.prototype.toUpperCase.call(K[0]))switch(W[0]=String.prototype.toUpperCase.call(K[0]),W[0]){case"A":W[1]=K[1],W[2]=K[2],W[3]=K[3],W[4]=K[4],W[5]=K[5],W[6]=+(K[6]+I),W[7]=+(K[7]+k);break;case"V":W[1]=+K[1]+k;break;case"H":W[1]=+K[1]+I;break;case"R":for(var ge=2,de=(D=[I,k].concat(K.slice(1))).length;ge<de;ge++)D[ge]=+D[ge]+I,D[++ge]=+D[ge]+k;F.pop(),F=F.concat(w(D,Y));break;case"M":U=+K[1]+I,q=+K[2]+k;break;default:for(var Pe=1,ae=K.length;Pe<ae;Pe++)W[Pe]=+K[Pe]+(Pe%2?I:k)}else if(K[0]==="R")D=[I,k].concat(K.slice(1)),F.pop(),F=F.concat(w(D,Y)),W=["R"].concat(K.slice(-2));else for(var we=0,j=K.length;we<j;we++)W[we]=K[we];switch(W[0]){case"Z":I=U,k=q;break;case"H":I=W[1];break;case"V":k=W[1];break;case"M":U=W[W.length-2],q=W[W.length-1];break;default:I=W[W.length-2],k=W[W.length-1]}}return F}function w(R,D){for(var F=[],I=0,k=R.length;I<k-2*!D;I+=2){var U=[{x:+R[I-2],y:+R[I-1]},{x:+R[I],y:+R[I+1]},{x:+R[I+2],y:+R[I+3]},{x:+R[I+4],y:+R[I+5]}];D?I?k-4===I?U[3]={x:+R[0],y:+R[1]}:k-2===I&&(U[2]={x:+R[0],y:+R[1]},U[3]={x:+R[2],y:+R[3]}):U[0]={x:+R[k-2],y:+R[k-1]}:k-4===I?U[3]=U[2]:I||(U[0]={x:+R[I],y:+R[I+1]}),F.push(["C",(-U[0].x+6*U[1].x+U[2].x)/6,(-U[0].y+6*U[1].y+U[2].y)/6,(U[1].x+6*U[2].x-U[3].x)/6,(U[1].y+6*U[2].y-U[3].y)/6,U[2].x,U[2].y])}return F}function S(R,D,F,I){return[R,D,F,I,F,I]}function T(R,D,F,I,k,U){return[1/3*R+2/3*F,1/3*D+2/3*I,1/3*k+2/3*F,1/3*U+2/3*I,k,U]}function L(R,D,F,I,k,U,q,Q,W){W==null&&(W=1);for(var K=(W=1<W?1:W<0?0:W)/2,Y=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],se=0,ue=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ge=0;ge<12;ge++){var de=K*Y[ge]+K,Pe=A(de,R,F,k,q),ae=A(de,D,I,U,Q),we=Pe*Pe+ae*ae;se+=ue[ge]*Math.sqrt(we)}return K*se}function A(R,D,F,I,k){return R*(R*(-3*D+9*F-9*I+3*k)+6*D-12*F+6*I)-3*D+3*F}n.default.Font=function(R){this.parent=R,this.cache={},this.font=void 0},n.default.Font.prototype.textBounds=function(R){var D,F=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,k=3<arguments.length?arguments[3]:void 0,U=4<arguments.length?arguments[4]:void 0,q=U&&U.renderer&&U.renderer._pInst||this.parent,Q=q._renderer.drawingContext;if(Q.textAlign||f.LEFT,Q.textBaseline||f.BASELINE,k=k||q._renderer._textSize,!D){var W,K,Y=[],se=[],ue=[];ue[0]=[];var ge=[],de=this._scale(k),Pe=q._renderer.textLeading(),ae=0;this.font.forEachGlyph(R,F,I,k,U,function(te,$,X,ye){var ne=te.getMetrics();te.index===0||te.index===10?ue[ae+=1]=[]:(ue[ae].push($+ne.xMin*de),ue[ae].push($+ne.xMax*de),ge.push(X+ae*Pe+-ne.yMin*de),ge.push(X+ae*Pe+-ne.yMax*de))}),0<ue[ae].length&&(Y[ae]=Math.min.apply(null,ue[ae]),se[ae]=Math.max.apply(null,ue[ae]));for(var we=0,j=0;j<=ae;j++){Y[j]=Math.min.apply(null,ue[j]),se[j]=Math.max.apply(null,ue[j]);var B=se[j]-Y[j];we<B&&(we=B)}var V=Math.min.apply(null,Y);D={x:V,y:W=Math.min.apply(null,ge),h:Math.max.apply(null,ge)-W,w:we,advance:V-F},K=this._handleAlignment(q._renderer,R,D.x,D.y,D.w+D.advance),D.x=K.x,D.y=K.y}return D},n.default.Font.prototype.textToPoints=function(R,D,F,I,k){var U,q=0,Q=[],W=this._getGlyphs(R);I=I||this.parent._renderer._textSize;for(var K=0;K<W.length;K++){if(!(W[U=K].name&&W[U].name==="space"||R.length===W.length&&R[U]===" "))for(var Y=s(W[K].getPath(D,F,I).commands),se=0;se<Y.length;se++)for(var ue=p(Y[se],k),ge=0;ge<ue.length;ge++)ue[ge].x+=q,Q.push(ue[ge]);q+=W[K].advanceWidth*this._scale(I)}return Q},n.default.Font.prototype._getGlyphs=function(R){return this.font.stringToGlyphs(R)},n.default.Font.prototype._getPath=function(R,D,F,I){var k=(I&&I.renderer&&I.renderer._pInst||this.parent)._renderer,U=this._handleAlignment(k,R,D,F);return this.font.getPath(R,U.x,U.y,k._textSize,I)},n.default.Font.prototype._getPathData=function(R,D,F,I){var k=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,D,F,I):m(D)==="object"&&(I=D),I&&typeof I.decimals=="number"&&(k=I.decimals),R.toPathData(k)},n.default.Font.prototype._getSVG=function(R,D,F,I){var k=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,D,F,I):m(D)==="object"&&(I=D),I&&(typeof I.decimals=="number"&&(k=I.decimals),typeof I.strokeWidth=="number"&&(R.strokeWidth=I.strokeWidth),I.fill!==void 0&&(R.fill=I.fill),I.stroke!==void 0&&(R.stroke=I.stroke)),R.toSVG(k)},n.default.Font.prototype._renderPath=function(R,D,F,I){var k,U=I&&I.renderer||this.parent._renderer,q=U.drawingContext;k=m(R)==="object"&&R.commands?R.commands:this._getPath(R,D,F,I).commands,q.beginPath();var Q=!0,W=!1,K=void 0;try{for(var Y,se=k[Symbol.iterator]();!(Q=(Y=se.next()).done);Q=!0){var ue=Y.value;ue.type==="M"?q.moveTo(ue.x,ue.y):ue.type==="L"?q.lineTo(ue.x,ue.y):ue.type==="C"?q.bezierCurveTo(ue.x1,ue.y1,ue.x2,ue.y2,ue.x,ue.y):ue.type==="Q"?q.quadraticCurveTo(ue.x1,ue.y1,ue.x,ue.y):ue.type==="Z"&&q.closePath()}}catch(ge){W=!0,K=ge}finally{try{Q||se.return==null||se.return()}finally{if(W)throw K}}return U._doStroke&&U._strokeSet&&q.stroke(),U._doFill&&(U._fillSet||U._setFill(f._DEFAULT_TEXT_FILL),q.fill()),this},n.default.Font.prototype._textWidth=function(R,D){return this.font.getAdvanceWidth(R,D)},n.default.Font.prototype._textAscent=function(R){return this.font.ascender*this._scale(R)},n.default.Font.prototype._textDescent=function(R){return-this.font.descender*this._scale(R)},n.default.Font.prototype._scale=function(R){return 1/this.font.unitsPerEm*(R||this.parent._renderer._textSize)},n.default.Font.prototype._handleAlignment=function(R,D,F,I,k){var U=R._textSize;switch(k===void 0&&(k=this._textWidth(D,U)),R._textAlign){case f.CENTER:F-=k/2;break;case f.RIGHT:F-=k}switch(R._textBaseline){case f.TOP:I+=this._textAscent(U);break;case f.CENTER:I+=this._textAscent(U)/2;break;case f.BOTTOM:I-=this._textDescent(U)}return{x:F,y:I}};var P=n.default;l.default=P},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.number.to-fixed":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],303:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.prototype.append=function(h,m){return h.push(m),h},n.default.prototype.arrayCopy=function(h,m,p,s,i){var o,d;h=i!==void 0?(d=Math.min(i,h.length),o=s,h.slice(m,d+m)):(d=p!==void 0?(d=p,Math.min(d,h.length)):h.length,o=0,p=m,h.slice(0,d)),Array.prototype.splice.apply(p,[o,d].concat(h))},n.default.prototype.concat=function(h,m){return h.concat(m)},n.default.prototype.reverse=function(h){return h.reverse()},n.default.prototype.shorten=function(h){return h.pop(),h},n.default.prototype.shuffle=function(h,m){for(var p,s,i=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(h),o=(h=m||i?h:h.slice()).length;1<o;)p=this.random(0,1)*o|0,s=h[--o],h[o]=h[p],h[p]=s;return h},n.default.prototype.sort=function(h,m){var p=m?h.slice(0,Math.min(m,h.length)):h,s=m?h.slice(Math.min(m,h.length)):[];return(p=typeof p[0]=="string"?p.sort():p.sort(function(i,o){return i-o})).concat(s)},n.default.prototype.splice=function(h,m,p){return Array.prototype.splice.apply(h,[p,0].concat(m)),h},n.default.prototype.subset=function(h,m,p){return p!==void 0?h.slice(m,m+p):h.slice(m,h.length)};var f=n.default;l.default=f},{"../core/main":264,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],304:[function(t,a,l){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.prototype.float=function(h){return h instanceof Array?h.map(parseFloat):parseFloat(h)},n.default.prototype.int=function(h){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return h===1/0||h==="Infinity"?1/0:h===-1/0||h==="-Infinity"?-1/0:typeof h=="string"?parseInt(h,m):typeof h=="number"?0|h:typeof h=="boolean"?h?1:0:h instanceof Array?h.map(function(p){return n.default.prototype.int(p,m)}):void 0},n.default.prototype.str=function(h){return h instanceof Array?h.map(n.default.prototype.str):String(h)},n.default.prototype.boolean=function(h){return typeof h=="number"?h!==0:typeof h=="string"?h.toLowerCase()==="true":typeof h=="boolean"?h:h instanceof Array?h.map(n.default.prototype.boolean):void 0},n.default.prototype.byte=function(h){var m=n.default.prototype.int(h,10);return typeof m=="number"?(m+128)%256-128:m instanceof Array?m.map(n.default.prototype.byte):void 0},n.default.prototype.char=function(h){return typeof h!="number"||isNaN(h)?h instanceof Array?h.map(n.default.prototype.char):typeof h=="string"?n.default.prototype.char(parseInt(h,10)):void 0:String.fromCharCode(h)},n.default.prototype.unchar=function(h){return typeof h=="string"&&h.length===1?h.charCodeAt(0):h instanceof Array?h.map(n.default.prototype.unchar):void 0},n.default.prototype.hex=function(h,m){if(m=m==null?m=8:m,h instanceof Array)return h.map(function(s){return n.default.prototype.hex(s,m)});if(h===1/0||h===-1/0)return(h===1/0?"F":"0").repeat(m);if(typeof h=="number"){h<0&&(h=4294967295+h+1);for(var p=Number(h).toString(16).toUpperCase();p.length<m;)p="0".concat(p);return p.length>=m&&(p=p.substring(p.length-m,p.length)),p}},n.default.prototype.unhex=function(h){return h instanceof Array?h.map(n.default.prototype.unhex):parseInt("0x".concat(h),16)};var f=n.default;l.default=f},{"../core/main":264,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],305:[function(t,a,l){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};function f(i,o,d){var u=i<0,g=u?i.toString().substring(1):i.toString(),b=g.indexOf("."),_=b!==-1?g.substring(0,b):g,w=b!==-1?g.substring(b+1):"",S=u?"-":"";if(d!==void 0){var T="";(b!==-1||0<d-w.length)&&(T="."),w.length>d&&(w=w.substring(0,d));for(var L=0;L<o-_.length;L++)S+="0";S+=_,S+=T,S+=w;for(var A=0;A<d-w.length;A++)S+="0";return S}for(var P=0;P<Math.max(o-_.length,0);P++)S+="0";return S+=g}function h(i,o){var d=(i=i.toString()).indexOf("."),u=d!==-1?i.substring(d):"",g=d!==-1?i.substring(0,d):i;if(g=g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),o===0)u="";else if(o!==void 0)if(o>u.length)for(var b=o-(u+=d===-1?".":"").length+1,_=0;_<b;_++)u+="0";else u=u.substring(0,o+1);return g+u}function m(i){return 0<parseFloat(i)?"+".concat(i.toString()):i.toString()}function p(i){return 0<=parseFloat(i)?" ".concat(i.toString()):i.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),n.default.prototype.join=function(i,o){return n.default._validateParameters("join",arguments),i.join(o)},n.default.prototype.match=function(i,o){return n.default._validateParameters("match",arguments),i.match(o)},n.default.prototype.matchAll=function(i,o){n.default._validateParameters("matchAll",arguments);for(var d=new RegExp(o,"g"),u=d.exec(i),g=[];u!==null;)g.push(u),u=d.exec(i);return g},n.default.prototype.nf=function(i,o,d){return n.default._validateParameters("nf",arguments),i instanceof Array?i.map(function(u){return f(u,o,d)}):Object.prototype.toString.call(i)==="[object Arguments]"?i.length===3?this.nf(i[0],i[1],i[2]):i.length===2?this.nf(i[0],i[1]):this.nf(i[0]):f(i,o,d)},n.default.prototype.nfc=function(i,o){return n.default._validateParameters("nfc",arguments),i instanceof Array?i.map(function(d){return h(d,o)}):h(i,o)},n.default.prototype.nfp=function(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];n.default._validateParameters("nfp",o);var u=n.default.prototype.nf.apply(this,o);return u instanceof Array?u.map(m):m(u)},n.default.prototype.nfs=function(){for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];n.default._validateParameters("nfs",o);var u=n.default.prototype.nf.apply(this,o);return u instanceof Array?u.map(p):p(u)},n.default.prototype.split=function(i,o){return n.default._validateParameters("split",arguments),i.split(o)},n.default.prototype.splitTokens=function(i,o){var d;if(n.default._validateParameters("splitTokens",arguments),o!==void 0){var u=o,g=/\]/g.exec(u),b=/\[/g.exec(u);d=b&&g?(u=u.slice(0,g.index)+u.slice(g.index+1),b=/\[/g.exec(u),u=u.slice(0,b.index)+u.slice(b.index+1),new RegExp("[\\[".concat(u,"\\]]"),"g")):g?(u=u.slice(0,g.index)+u.slice(g.index+1),new RegExp("[".concat(u,"\\]]"),"g")):b?(u=u.slice(0,b.index)+u.slice(b.index+1),new RegExp("[".concat(u,"\\[]"),"g")):new RegExp("[".concat(u,"]"),"g")}else d=/\s/g;return i.split(d).filter(function(_){return _})},n.default.prototype.trim=function(i){return n.default._validateParameters("trim",arguments),i instanceof Array?i.map(this.trim):i.trim()};var s=n.default;l.default=s},{"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],306:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.prototype.day=function(){return new Date().getDate()},n.default.prototype.hour=function(){return new Date().getHours()},n.default.prototype.minute=function(){return new Date().getMinutes()},n.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},n.default.prototype.month=function(){return new Date().getMonth()+1},n.default.prototype.second=function(){return new Date().getSeconds()},n.default.prototype.year=function(){return new Date().getFullYear()};var f=n.default;l.default=f},{"../core/main":264}],307:[function(t,a,l){function c(i){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}t("core-js/modules/es.array.concat"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n};t("./p5.Geometry");var h=function(i){if(i&&i.__esModule)return i;if(i===null||c(i)!=="object"&&typeof i!="function")return{default:i};var o=m();if(o&&o.has(i))return o.get(i);var d={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in i)if(Object.prototype.hasOwnProperty.call(i,g)){var b=u?Object.getOwnPropertyDescriptor(i,g):null;b&&(b.get||b.set)?Object.defineProperty(d,g,b):d[g]=i[g]}return d.default=i,o&&o.set(i,d),d}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return m=function(){return i},i}f.default.prototype.plane=function(i,o,d,u){this._assert3d("plane"),f.default._validateParameters("plane",arguments),i===void 0&&(i=50),o===void 0&&(o=i),d===void 0&&(d=1),u===void 0&&(u=1);var g="plane|".concat(d,"|").concat(u);if(!this._renderer.geometryInHash(g)){var b=new f.default.Geometry(d,u,function(){for(var _,w,S,T=0;T<=this.detailY;T++){w=T/this.detailY;for(var L=0;L<=this.detailX;L++)_=L/this.detailX,S=new f.default.Vector(_-.5,w-.5,0),this.vertices.push(S),this.uvs.push(_,w)}});b.computeFaces().computeNormals(),d<=1&&u<=1?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(g,b)}return this._renderer.drawBuffersScaled(g,i,o,1),this},f.default.prototype.box=function(i,o,d,u,g){this._assert3d("box"),f.default._validateParameters("box",arguments),i===void 0&&(i=50),o===void 0&&(o=i),d===void 0&&(d=o);var b=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;u===void 0&&(u=b?1:4),g===void 0&&(g=b?1:4);var _="box|".concat(u,"|").concat(g);if(!this._renderer.geometryInHash(_)){var w=new f.default.Geometry(u,g,function(){var S=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var T=0;T<S.length;T++){for(var L=S[T],A=4*T,P=0;P<4;P++){var R=L[P],D=new f.default.Vector((2*(1&R)-1)/2,((2&R)-1)/2,((4&R)/2-1)/2);this.vertices.push(D),this.uvs.push(1&P,(2&P)/2)}this.faces.push([A,1+A,2+A]),this.faces.push([2+A,1+A,3+A])}});w.computeNormals(),u<=4&&g<=4?w._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(_,w)}return this._renderer.drawBuffersScaled(_,i,o,d),this},f.default.prototype.sphere=function(i,o,d){return this._assert3d("sphere"),f.default._validateParameters("sphere",arguments),i===void 0&&(i=50),o===void 0&&(o=24),d===void 0&&(d=16),this.ellipsoid(i,i,i,o,d),this};function p(i,o,d,u,g,b,_){i=i<=0?1:i,o=o<0?0:o,d=d<=0?i:d,u=u<3?3:u;var w,S,T,L=(b=b===void 0||b)?-2:0,A=(g=g<1?1:g)+((_=_===void 0?o!==0:_)?2:0),P=Math.atan2(i-o,d),R=Math.sin(P),D=Math.cos(P);for(w=L;w<=A;++w){var F=w/g,I=d*F,k=void 0;for(k=w<0?(F=I=0,i):g<w?(I=d,F=1,o):i+(o-i)*F,w!==-2&&w!==g+2||(k=0),I-=d/2,S=0;S<u;++S){var U=S/(u-1),q=2*Math.PI*U,Q=Math.sin(q),W=Math.cos(q);this.vertices.push(new f.default.Vector(Q*k,I,W*k));var K=void 0;K=w<0?new f.default.Vector(0,-1,0):g<w&&o?new f.default.Vector(0,1,0):new f.default.Vector(Q*D,R,W*D),this.vertexNormals.push(K),this.uvs.push(U,F)}}var Y=0;if(b){for(T=0;T<u;++T){var se=(T+1)%u;this.faces.push([Y+T,Y+u+se,Y+u+T])}Y+=2*u}for(w=0;w<g;++w){for(S=0;S<u;++S){var ue=(S+1)%u;this.faces.push([Y+S,Y+ue,Y+u+ue]),this.faces.push([Y+S,Y+u+ue,Y+u+S])}Y+=u}if(_)for(Y+=u,S=0;S<u;++S)this.faces.push([Y+S,Y+(S+1)%u,Y+u])}f.default.prototype.cylinder=function(i,o,d,u,g,b){this._assert3d("cylinder"),f.default._validateParameters("cylinder",arguments),i===void 0&&(i=50),o===void 0&&(o=i),d===void 0&&(d=24),u===void 0&&(u=1),b===void 0&&(b=!0),g===void 0&&(g=!0);var _="cylinder|".concat(d,"|").concat(u,"|").concat(g,"|").concat(b);if(!this._renderer.geometryInHash(_)){var w=new f.default.Geometry(d,u);p.call(w,1,1,1,d,u,g,b),d<=24&&u<=16?w._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(_,w)}return this._renderer.drawBuffersScaled(_,i,o,i),this},f.default.prototype.cone=function(i,o,d,u,g){this._assert3d("cone"),f.default._validateParameters("cone",arguments),i===void 0&&(i=50),o===void 0&&(o=i),d===void 0&&(d=24),u===void 0&&(u=1),g===void 0&&(g=!0);var b="cone|".concat(d,"|").concat(u,"|").concat(g);if(!this._renderer.geometryInHash(b)){var _=new f.default.Geometry(d,u);p.call(_,1,0,1,d,u,g,!1),d<=24&&u<=16?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,_)}return this._renderer.drawBuffersScaled(b,i,o,i),this},f.default.prototype.ellipsoid=function(i,o,d,u,g){this._assert3d("ellipsoid"),f.default._validateParameters("ellipsoid",arguments),i===void 0&&(i=50),o===void 0&&(o=i),d===void 0&&(d=i),u===void 0&&(u=24),g===void 0&&(g=16);var b="ellipsoid|".concat(u,"|").concat(g);if(!this._renderer.geometryInHash(b)){var _=new f.default.Geometry(u,g,function(){for(var w=0;w<=this.detailY;w++)for(var S=w/this.detailY,T=Math.PI*S-Math.PI/2,L=Math.cos(T),A=Math.sin(T),P=0;P<=this.detailX;P++){var R=P/this.detailX,D=2*Math.PI*R,F=Math.cos(D),I=Math.sin(D),k=new f.default.Vector(L*I,A,L*F);this.vertices.push(k),this.vertexNormals.push(k),this.uvs.push(R,S)}});_.computeFaces(),u<=24&&g<=24?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(b,_)}return this._renderer.drawBuffersScaled(b,i,o,d),this},f.default.prototype.torus=function(i,o,d,u){if(this._assert3d("torus"),f.default._validateParameters("torus",arguments),i===void 0)i=50;else if(!i)return;if(o===void 0)o=10;else if(!o)return;d===void 0&&(d=24),u===void 0&&(u=16);var g=(o/i).toPrecision(4),b="torus|".concat(g,"|").concat(d,"|").concat(u);if(!this._renderer.geometryInHash(b)){var _=new f.default.Geometry(d,u,function(){for(var w=0;w<=this.detailY;w++)for(var S=w/this.detailY,T=2*Math.PI*S,L=Math.cos(T),A=Math.sin(T),P=1+g*L,R=0;R<=this.detailX;R++){var D=R/this.detailX,F=2*Math.PI*D,I=Math.cos(F),k=Math.sin(F),U=new f.default.Vector(P*I,P*k,g*A),q=new f.default.Vector(L*I,L*k,A);this.vertices.push(U),this.vertexNormals.push(q),this.uvs.push(D,S)}});_.computeFaces(),d<=24&&u<=16?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,_)}return this._renderer.drawBuffersScaled(b,i,i,i),this},f.default.RendererGL.prototype.point=function(i,o,d){d===void 0&&(d=0);var u=[];return u.push(new f.default.Vector(i,o,d)),this._drawPoints(u,this.immediateMode.buffers.point),this},f.default.RendererGL.prototype.triangle=function(i){var o=i[0],d=i[1],u=i[2],g=i[3],b=i[4],_=i[5];if(!this.geometryInHash("tri")){var w=new f.default.Geometry(1,1,function(){var L=[];L.push(new f.default.Vector(0,0,0)),L.push(new f.default.Vector(0,1,0)),L.push(new f.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=L,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]});w._makeTriangleEdges()._edgesToVertices(),w.computeNormals(),this.createBuffers("tri",w)}var S=this.uMVMatrix.copy();try{var T=new f.default.Matrix([u-o,g-d,0,0,b-o,_-d,0,0,0,0,1,0,o,d,0,1]).mult(this.uMVMatrix);this.uMVMatrix=T,this.drawBuffers("tri")}finally{this.uMVMatrix=S}return this},f.default.RendererGL.prototype.ellipse=function(i){this.arc(i[0],i[1],i[2],i[3],0,h.TWO_PI,h.OPEN,i[4])},f.default.RendererGL.prototype.arc=function(i){var o,d,u=i,g=arguments[1],b=arguments[2],_=arguments[3],w=arguments[4],S=arguments[5],T=arguments[6],L=arguments[7]||25;if(d=Math.abs(S-w)>=h.TWO_PI?"".concat(o="ellipse","|").concat(L,"|"):"".concat(o="arc","|").concat(w,"|").concat(S,"|").concat(T,"|").concat(L,"|"),!this.geometryInHash(d)){var A=new f.default.Geometry(L,1,function(){if(this.strokeIndices=[],w.toFixed(10)!==S.toFixed(10)){T!==h.PIE&&T!==void 0||(this.vertices.push(new f.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var R=0;R<=L;R++){var D=(S-w)*(R/L)+w,F=.5+Math.cos(D)/2,I=.5+Math.sin(D)/2;this.vertices.push(new f.default.Vector(F,I,0)),this.uvs.push([F,I]),R<L-1&&(this.faces.push([0,R+1,R+2]),this.strokeIndices.push([R+1,R+2]))}switch(T){case h.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case h.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case h.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}});A.computeNormals(),L<=50?A._makeTriangleEdges()._edgesToVertices(A):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(o," with more than 50 detail")),this.createBuffers(d,A)}var P=this.uMVMatrix.copy();try{this.uMVMatrix.translate([u,g,0]),this.uMVMatrix.scale(b,_,1),this.drawBuffers(d)}finally{this.uMVMatrix=P}return this},f.default.RendererGL.prototype.rect=function(i){var o=this._pInst._glAttributes.perPixelLighting,d=i[0],u=i[1],g=i[2],b=i[3],_=i[4]||(o?1:24),w=i[5]||(o?1:16),S="rect|".concat(_,"|").concat(w);if(!this.geometryInHash(S)){var T=new f.default.Geometry(_,w,function(){for(var A=0;A<=this.detailY;A++)for(var P=A/this.detailY,R=0;R<=this.detailX;R++){var D=R/this.detailX,F=new f.default.Vector(D,P,0);this.vertices.push(F),this.uvs.push(D,P)}0<_&&0<w&&(this.strokeIndices=[[0,_],[_,(_+1)*(w+1)-1],[(_+1)*(w+1)-1,(_+1)*w],[(_+1)*w,0]])});T.computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(S,T)}var L=this.uMVMatrix.copy();try{this.uMVMatrix.translate([d,u,0]),this.uMVMatrix.scale(g,b,1),this.drawBuffers(S)}finally{this.uMVMatrix=L}return this},f.default.RendererGL.prototype.quad=function(i,o,d,u,g,b,_,w,S,T,L,A,P,R){P===void 0&&(P=2),R===void 0&&(R=2);var D="quad|".concat(i,"|").concat(o,"|").concat(d,"|").concat(u,"|").concat(g,"|").concat(b,"|").concat(_,"|").concat(w,"|").concat(S,"|").concat(T,"|").concat(L,"|").concat(A,"|").concat(P,"|").concat(R);if(!this.geometryInHash(D)){var F=new f.default.Geometry(P,R,function(){for(var K=1/(this.detailX-1),Y=1/(this.detailY-1),se=0;se<this.detailY;se++)for(var ue=0;ue<this.detailX;ue++){var ge=ue*K,de=se*Y,Pe=(1-ge)*((1-de)*i+de*T)+ge*((1-de)*u+de*_),ae=(1-ge)*((1-de)*o+de*L)+ge*((1-de)*g+de*w),we=(1-ge)*((1-de)*d+de*A)+ge*((1-de)*b+de*S);this.vertices.push(new f.default.Vector(Pe,ae,we)),this.uvs.push([ge,de])}});F.faces=[];for(var I=0;I<R-1;I++)for(var k=0;k<P-1;k++){var U=k+I*P,q=k+1+I*P,Q=k+1+(I+1)*P,W=k+(I+1)*P;F.faces.push([U,q,Q]),F.faces.push([U,Q,W])}F.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(D,F)}return this.drawBuffers(D),this},f.default.RendererGL.prototype.bezier=function(i,o,d,u,g,b,_,w,S,T,L,A){arguments.length===8&&(L=w,T=_,w=b,_=g,g=u,u=d,d=b=S=A=0);var P=this._pInst._bezierDetail||20;this.beginShape();for(var R=0;R<=P;R++){var D=Math.pow(1-R/P,3),F=R/P*3*Math.pow(1-R/P,2),I=3*Math.pow(R/P,2)*(1-R/P),k=Math.pow(R/P,3);this.vertex(i*D+u*F+_*I+T*k,o*D+g*F+w*I+L*k,d*D+b*F+S*I+A*k)}return this.endShape(),this},f.default.RendererGL.prototype.curve=function(i,o,d,u,g,b,_,w,S,T,L,A){arguments.length===8&&(T=_,L=w,_=g,w=u,g=u=d,d=b=S=A=0);var P=this._pInst._curveDetail;this.beginShape();for(var R=0;R<=P;R++){var D=.5*Math.pow(R/P,3),F=.5*Math.pow(R/P,2),I=R/P*.5,k=D*(3*u-i-3*_+T)+F*(2*i-5*u+4*_-T)+I*(-i+_)+2*u*.5,U=D*(3*g-o-3*w+L)+F*(2*o-5*g+4*w-L)+I*(-o+w)+2*g*.5,q=D*(3*b-d-3*S+A)+F*(2*d-5*b+4*S-A)+I*(-d+S)+2*b*.5;this.vertex(k,U,q)}return this.endShape(),this},f.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(h.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(h.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},f.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var i,o,d,u,g,b=[],_=[],w=[],S=arguments.length;if((i=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var T=1/this._lutBezierDetail,L=0,A=1,P=0;L<1;){if(i=parseFloat(L.toFixed(6)),this._lookUpTableBezier[P]=this._bezierCoefficients(i),A.toFixed(6)===T.toFixed(6)){i=parseFloat(A.toFixed(6))+parseFloat(L.toFixed(6)),++P,this._lookUpTableBezier[P]=this._bezierCoefficients(i);break}L+=T,A-=T,++P}}var R=this._lookUpTableBezier.length;if(S===6){for(this.isBezier=!0,b=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],_=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],g=0;g<R;g++)o=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],d=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],this.vertex(o,d);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(S===9){for(this.isBezier=!0,b=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],_=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],w=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],g=0;g<R;g++)o=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],d=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],u=w[0]*this._lookUpTableBezier[g][0]+w[1]*this._lookUpTableBezier[g][1]+w[2]*this._lookUpTableBezier[g][2]+w[3]*this._lookUpTableBezier[g][3],this.vertex(o,d,u);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},f.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var i,o,d,u,g,b=[],_=[],w=[],S=arguments.length;if((i=0)===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var T=1/this._lutQuadraticDetail,L=0,A=1,P=0;L<1;){if(i=parseFloat(L.toFixed(6)),this._lookUpTableQuadratic[P]=this._quadraticCoefficients(i),A.toFixed(6)===T.toFixed(6)){i=parseFloat(A.toFixed(6))+parseFloat(L.toFixed(6)),++P,this._lookUpTableQuadratic[P]=this._quadraticCoefficients(i);break}L+=T,A-=T,++P}}var R=this._lookUpTableQuadratic.length;if(S===4){for(this.isQuadratic=!0,b=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],_=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],g=0;g<R;g++)o=b[0]*this._lookUpTableQuadratic[g][0]+b[1]*this._lookUpTableQuadratic[g][1]+b[2]*this._lookUpTableQuadratic[g][2],d=_[0]*this._lookUpTableQuadratic[g][0]+_[1]*this._lookUpTableQuadratic[g][1]+_[2]*this._lookUpTableQuadratic[g][2],this.vertex(o,d);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(S===6){for(this.isQuadratic=!0,b=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],_=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],w=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],g=0;g<R;g++)o=b[0]*this._lookUpTableQuadratic[g][0]+b[1]*this._lookUpTableQuadratic[g][1]+b[2]*this._lookUpTableQuadratic[g][2],d=_[0]*this._lookUpTableQuadratic[g][0]+_[1]*this._lookUpTableQuadratic[g][1]+_[2]*this._lookUpTableQuadratic[g][2],u=w[0]*this._lookUpTableQuadratic[g][0]+w[1]*this._lookUpTableQuadratic[g][1]+w[2]*this._lookUpTableQuadratic[g][2],this.vertex(o,d,u);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},f.default.RendererGL.prototype.curveVertex=function(){var i,o,d,u,g,b=[],_=[],w=[],S=arguments.length;if((i=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var T=1/this._lutBezierDetail,L=0,A=1,P=0;L<1;){if(i=parseFloat(L.toFixed(6)),this._lookUpTableBezier[P]=this._bezierCoefficients(i),A.toFixed(6)===T.toFixed(6)){i=parseFloat(A.toFixed(6))+parseFloat(L.toFixed(6)),++P,this._lookUpTableBezier[P]=this._bezierCoefficients(i);break}L+=T,A-=T,++P}}var R=this._lookUpTableBezier.length;if(S===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,b=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),_=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),g=0;g<R;g++)o=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],d=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],this.vertex(o,d);for(g=0;g<S;g++)this.immediateMode._curveVertex.shift()}}else if(S===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,b=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),_=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),g=0;g<R;g++)o=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],d=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],u=w[0]*this._lookUpTableBezier[g][0]+w[1]*this._lookUpTableBezier[g][1]+w[2]*this._lookUpTableBezier[g][2]+w[3]*this._lookUpTableBezier[g][3],this.vertex(o,d,u);for(g=0;g<S;g++)this.immediateMode._curveVertex.shift()}},f.default.RendererGL.prototype.image=function(i,o,d,u,g,b,_,w,S){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(i),this._pInst.textureMode(h.NORMAL);var T=0;o<=i.width&&(T=o/i.width);var L=1;o+u<=i.width&&(L=(o+u)/i.width);var A=0;d<=i.height&&(A=d/i.height);var P=1;d+g<=i.height&&(P=(d+g)/i.height),this.beginShape(),this.vertex(b,_,0,T,A),this.vertex(b+w,_,0,L,A),this.vertex(b+w,_+S,0,L,P),this.vertex(b,_+S,0,T,P),this.endShape(h.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(h.REMOVE)};var s=f.default;l.default=s},{"../core/constants":253,"../core/main":264,"./p5.Geometry":313,"core-js/modules/es.array.concat":149,"core-js/modules/es.number.to-fixed":172}],308:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=m();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}f.default.prototype.orbitControl=function(s,i,o){if(this._assert3d("orbitControl"),f.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY){var d=this._renderer._curCamera;s===void 0&&(s=1),i===void 0&&(i=s),o===void 0&&(o=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var u=this.height<this.width?this.height:this.width;if(this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,o*u):this._renderer._curCamera._orbit(0,0,-o*u)),this.mouseIsPressed){if(this.mouseButton===this.LEFT){var g=-s*(this.mouseX-this.pmouseX)/u,b=i*(this.mouseY-this.pmouseY)/u;this._renderer._curCamera._orbit(g,b,0)}else if(this.mouseButton===this.RIGHT){var _=d._getLocalAxes(),w=Math.sqrt(_.x[0]*_.x[0]+_.x[2]*_.x[2]);w!==0&&(_.x[0]/=w,_.x[2]/=w);var S=Math.sqrt(_.y[0]*_.y[0]+_.y[2]*_.y[2]);S!==0&&(_.y[0]/=S,_.y[2]/=S);var T=-1*s*(this.mouseX-this.pmouseX),L=-1*i*(this.mouseY-this.pmouseY);d.setPosition(d.eyeX+T*_.x[0]+L*_.z[0],d.eyeY,d.eyeZ+T*_.x[2]+L*_.z[2])}}return this}},f.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];f.default._validateParameters("debugMode",i);for(var d=this._registeredMethods.post.length-1;0<=d;d--)this._registeredMethods.post[d].toString()!==this._grid().toString()&&this._registeredMethods.post[d].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(d,1);i[0]===h.GRID?this.registerMethod("post",this._grid.call(this,i[1],i[2],i[3],i[4],i[5])):i[0]===h.AXES?this.registerMethod("post",this._axesIcon.call(this,i[1],i[2],i[3],i[4])):(this.registerMethod("post",this._grid.call(this,i[0],i[1],i[2],i[3],i[4])),this.registerMethod("post",this._axesIcon.call(this,i[5],i[6],i[7],i[8])))},f.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var s=this._registeredMethods.post.length-1;0<=s;s--)this._registeredMethods.post[s].toString()!==this._grid().toString()&&this._registeredMethods.post[s].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(s,1)},f.default.prototype._grid=function(s,i,o,d,u){s===void 0&&(s=this.width/2),i===void 0&&(i=Math.round(s/30)<4?4:Math.round(s/30)),o===void 0&&(o=0),d===void 0&&(d=0),u===void 0&&(u=0);var g=s/i,b=s/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var _=0;_<=i;_++)this.beginShape(this.LINES),this.vertex(-b+o,d,_*g-b+u),this.vertex(+b+o,d,_*g-b+u),this.endShape();for(var w=0;w<=i;w++)this.beginShape(this.LINES),this.vertex(w*g-b+o,d,-b+u),this.vertex(w*g-b+o,d,+b+u),this.endShape();this.pop()}},f.default.prototype._axesIcon=function(s,i,o,d){return s===void 0&&(s=40<this.width/20?this.width/20:40),i===void 0&&(i=-this.width/4),o===void 0&&(o=i),d===void 0&&(d=i),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(i,o,d),this.vertex(i+s,o,d),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(i,o,d),this.vertex(i,o+s,d),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(i,o,d),this.vertex(i,o,d+s),this.endShape(),this.pop()}};var p=f.default;l.default=p},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182}],309:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=m();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}f.default.prototype.ambientLight=function(s,i,o,d){this._assert3d("ambientLight"),f.default._validateParameters("ambientLight",arguments);var u=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(u._array[0],u._array[1],u._array[2]),this._renderer._enableLighting=!0,this},f.default.prototype.specularColor=function(s,i,o){this._assert3d("specularColor"),f.default._validateParameters("specularColor",arguments);var d=this.color.apply(this,arguments);return this._renderer.specularColors=[d._array[0],d._array[1],d._array[2]],this},f.default.prototype.directionalLight=function(s,i,o,d,u,g){var b,_,w,S;this._assert3d("directionalLight"),f.default._validateParameters("directionalLight",arguments),b=s instanceof f.default.Color?s:this.color(s,i,o);var T=arguments[arguments.length-1];S=typeof T=="number"?(_=arguments[arguments.length-3],w=arguments[arguments.length-2],arguments[arguments.length-1]):(_=T.x,w=T.y,T.z);var L=Math.sqrt(_*_+w*w+S*S);return this._renderer.directionalLightDirections.push(_/L,w/L,S/L),this._renderer.directionalLightDiffuseColors.push(b._array[0],b._array[1],b._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},f.default.prototype.pointLight=function(s,i,o,d,u,g){var b,_,w,S;this._assert3d("pointLight"),f.default._validateParameters("pointLight",arguments),b=s instanceof f.default.Color?s:this.color(s,i,o);var T=arguments[arguments.length-1];return S=typeof T=="number"?(_=arguments[arguments.length-3],w=arguments[arguments.length-2],arguments[arguments.length-1]):(_=T.x,w=T.y,T.z),this._renderer.pointLightPositions.push(_,w,S),this._renderer.pointLightDiffuseColors.push(b._array[0],b._array[1],b._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},f.default.prototype.lights=function(){if(this._assert3d("lights"),this._colorMode===h.RGB)this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1);else{var s=this._colorMaxes[this._colorMode][2];this.ambientLight(0,0,s),this.directionalLight(0,0,s,0,0,-1)}return this},f.default.prototype.lightFalloff=function(s,i,o){return this._assert3d("lightFalloff"),f.default._validateParameters("lightFalloff",arguments),s<0&&(s=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),i<0&&(i=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),o<0&&(o=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),s===0&&i===0&&o===0&&(s=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=s,this._renderer.linearAttenuation=i,this._renderer.quadraticAttenuation=o,this},f.default.prototype.spotLight=function(s,i,o,d,u,g,b,_,w,S,T){var L,A,P;this._assert3d("spotLight"),f.default._validateParameters("spotLight",arguments);var R=arguments.length;switch(R){case 11:case 10:L=this.color(s,i,o),A=new f.default.Vector(d,u,g),P=new f.default.Vector(b,_,w);break;case 9:s instanceof f.default.Color?(L=s,A=new f.default.Vector(i,o,d),P=new f.default.Vector(u,g,b),S=_,T=w):d instanceof f.default.Vector?(L=this.color(s,i,o),A=d,P=new f.default.Vector(u,g,b),S=_,T=w):b instanceof f.default.Vector?(L=this.color(s,i,o),A=new f.default.Vector(d,u,g),P=b,S=_,T=w):(L=this.color(s,i,o),A=new f.default.Vector(d,u,g),P=new f.default.Vector(b,_,w));break;case 8:S=(P=s instanceof f.default.Color?(L=s,A=new f.default.Vector(i,o,d),new f.default.Vector(u,g,b)):d instanceof f.default.Vector?(L=this.color(s,i,o),A=d,new f.default.Vector(u,g,b)):(L=this.color(s,i,o),A=new f.default.Vector(d,u,g),b),_);break;case 7:s instanceof f.default.Color&&i instanceof f.default.Vector?(L=s,A=i,P=new f.default.Vector(o,d,u),S=g,T=b):s instanceof f.default.Color&&u instanceof f.default.Vector?(L=s,A=new f.default.Vector(i,o,d),P=u,S=g,T=b):d instanceof f.default.Vector&&u instanceof f.default.Vector?(L=this.color(s,i,o),A=d,P=u,S=g,T=b):P=s instanceof f.default.Color?(L=s,A=new f.default.Vector(i,o,d),new f.default.Vector(u,g,b)):d instanceof f.default.Vector?(L=this.color(s,i,o),A=d,new f.default.Vector(u,g,b)):(L=this.color(s,i,o),A=new f.default.Vector(d,u,g),b);break;case 6:d instanceof f.default.Vector&&u instanceof f.default.Vector?(L=this.color(s,i,o),A=d,P=u,S=g):s instanceof f.default.Color&&u instanceof f.default.Vector?(L=s,A=new f.default.Vector(i,o,d),P=u,S=g):s instanceof f.default.Color&&i instanceof f.default.Vector&&(L=s,A=i,P=new f.default.Vector(o,d,u),S=g);break;case 5:s instanceof f.default.Color&&i instanceof f.default.Vector&&o instanceof f.default.Vector?(L=s,A=i,P=o,S=d,T=u):d instanceof f.default.Vector&&u instanceof f.default.Vector?(L=this.color(s,i,o),A=d,P=u):s instanceof f.default.Color&&u instanceof f.default.Vector?(L=s,A=new f.default.Vector(i,o,d),P=u):s instanceof f.default.Color&&i instanceof f.default.Vector&&(L=s,A=i,P=new f.default.Vector(o,d,u));break;case 4:L=s,A=i,P=o,S=d;break;case 3:L=s,A=i,P=o;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(R<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(L._array[0],L._array[1],L._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(A.x,A.y,A.z),P.normalize(),this._renderer.spotLightDirections.push(P.x,P.y,P.z),S===void 0&&(S=Math.PI/3),T!==void 0&&T<1?(T=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):T===void 0&&(T=100),S=this._renderer._pInst._toRadians(S),this._renderer.spotLightAngle.push(Math.cos(S)),this._renderer.spotLightConc.push(T),this._renderer._enableLighting=!0,this},f.default.prototype.noLights=function(){return this._assert3d("noLights"),f.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var p=f.default;l.default=p},{"../core/constants":253,"../core/main":264}],310:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};function f(m,p,s){for(var i=0,o=m.length;i<o;i++)if(m[i]!==p.getUint8(s+i,!1))return!1;return!0}t("./p5.Geometry"),n.default.prototype.loadModel=function(m){var p,s,i;n.default._validateParameters("loadModel",arguments);var o=m.slice(-4);typeof arguments[1]=="boolean"?(p=arguments[1],s=arguments[2],i=arguments[3],arguments[4]!==void 0&&(o=arguments[4])):(p=!1,s=arguments[1],i=arguments[2],arguments[3]!==void 0&&(o=arguments[3]));var d=new n.default.Geometry;d.gid="".concat(m,"|").concat(p);var u=this;return o.match(/\.stl$/i)?this.httpDo(m,"GET","arrayBuffer",function(g){(function(b,_){if(function(T){for(var L=new DataView(T),A=[115,111,108,105,100],P=0;P<5;P++)if(f(A,L,P))return!1;return!0}(_))(function(T,L){for(var A,P,R,D,F,I,k,U=new DataView(L),q=U.getUint32(80,!0),Q=!1,W=0;W<70;W++)U.getUint32(W,!1)===1129270351&&U.getUint8(W+4)===82&&U.getUint8(W+5)===61&&(Q=!0,D=[],F=U.getUint8(W+6)/255,I=U.getUint8(W+7)/255,k=U.getUint8(W+8)/255);for(var K=0;K<q;K++){var Y=84+50*K,se=U.getFloat32(Y,!0),ue=U.getFloat32(4+Y,!0),ge=U.getFloat32(8+Y,!0);if(Q){var de=U.getUint16(48+Y,!0);R=(32768&de)==0?(A=(31&de)/31,P=(de>>5&31)/31,(de>>10&31)/31):(A=F,P=I,k)}for(var Pe=new n.default.Vector(se,ue,ge),ae=1;ae<=3;ae++){var we=Y+12*ae,j=new n.default.Vector(U.getFloat32(we,!0),U.getFloat32(4+we,!0),U.getFloat32(8+we,!0));T.vertices.push(j),T.vertexNormals.push(Pe),Q&&D.push(A,P,R)}T.faces.push([3*K,3*K+1,3*K+2]),T.uvs.push([0,0],[0,0],[0,0])}})(b,_);else{var w=new DataView(_);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");var S=new TextDecoder("utf-8").decode(w).split(`
`);(function(T,L){for(var A,P,R="",D=[],F=0;F<L.length;++F){for(var I=L[F].trim(),k=I.split(" "),U=0;U<k.length;++U)k[U]===""&&k.splice(U,1);if(k.length!==0)switch(R){case"":if(k[0]!=="solid")return console.error(I),console.error('Invalid state "'.concat(k[0],'", should be "solid"'));R="solid";break;case"solid":if(k[0]!=="facet"||k[1]!=="normal")return console.error(I),console.error('Invalid state "'.concat(k[0],'", should be "facet normal"'));A=new n.default.Vector(parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4])),T.vertexNormals.push(A,A,A),R="facet normal";break;case"facet normal":if(k[0]!=="outer"||k[1]!=="loop")return console.error(I),console.error('Invalid state "'.concat(k[0],'", should be "outer loop"'));R="vertex";break;case"vertex":if(k[0]==="vertex")P=new n.default.Vector(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])),T.vertices.push(P),T.uvs.push([0,0]),D.push(T.vertices.indexOf(P));else{if(k[0]!=="endloop")return console.error(I),console.error('Invalid state "'.concat(k[0],'", should be "vertex" or "endloop"'));T.faces.push(D),D=[],R="endloop"}break;case"endloop":if(k[0]!=="endfacet")return console.error(I),console.error('Invalid state "'.concat(k[0],'", should be "endfacet"'));R="endfacet";break;case"endfacet":if(k[0]!=="endsolid"){if(k[0]!=="facet"||k[1]!=="normal")return console.error(I),console.error('Invalid state "'.concat(k[0],'", should be "endsolid" or "facet normal"'));A=new n.default.Vector(parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4])),T.vertexNormals.push(A,A,A),R="facet normal"}break;default:console.error('Invalid state "'.concat(R,'"'))}}})(b,S)}})(d,g),p&&d.normalize(),u._decrementPreload(),typeof s=="function"&&s(d)},i):o.match(/\.obj$/i)?this.loadStrings(m,function(g){(function(b,_){for(var w={v:[],vt:[],vn:[]},S={},T=0;T<_.length;++T){var L=_[T].trim().split(/\b\s+/);if(0<L.length){if(L[0]==="v"||L[0]==="vn"){var A=new n.default.Vector(parseFloat(L[1]),parseFloat(L[2]),parseFloat(L[3]));w[L[0]].push(A)}else if(L[0]==="vt"){var P=[parseFloat(L[1]),1-parseFloat(L[2])];w[L[0]].push(P)}else if(L[0]==="f")for(var R=3;R<L.length;++R){for(var D=[],F=[1,R-1,R],I=0;I<F.length;++I){var k=L[F[I]],U=0;if(S[k]!==void 0)U=S[k];else{for(var q=k.split("/"),Q=0;Q<q.length;Q++)q[Q]=parseInt(q[Q])-1;U=S[k]=b.vertices.length,b.vertices.push(w.v[q[0]].copy()),w.vt[q[1]]?b.uvs.push(w.vt[q[1]].slice()):b.uvs.push([0,0]),w.vn[q[2]]&&b.vertexNormals.push(w.vn[q[2]].copy())}D.push(U)}D[0]!==D[1]&&D[0]!==D[2]&&D[1]!==D[2]&&b.faces.push(D)}}}b.vertexNormals.length===0&&b.computeNormals()})(d,g),p&&d.normalize(),u._decrementPreload(),typeof s=="function"&&s(d)},i):(n.default._friendlyFileLoadError(3,m),i?i():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),d},n.default.prototype.model=function(m){this._assert3d("model"),n.default._validateParameters("model",arguments),0<m.vertices.length&&(this._renderer.geometryInHash(m.gid)||(m._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(m.gid,m)),this._renderer.drawBuffers(m.gid))};var h=n.default;l.default=h},{"../core/main":264,"./p5.Geometry":313,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],311:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}t("core-js/modules/es.array.join"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=m();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}t("./p5.Texture"),f.default.prototype.loadShader=function(s,i,o,d){f.default._validateParameters("loadShader",arguments),d=d||console.error;function u(){b._decrementPreload(),o&&o(g)}var g=new f.default.Shader,b=this,_=!1,w=!1;return this.loadStrings(s,function(S){g._vertSrc=S.join(`
`),w=!0,_&&u()},d),this.loadStrings(i,function(S){g._fragSrc=S.join(`
`),_=!0,w&&u()},d),g},f.default.prototype.createShader=function(s,i){return this._assert3d("createShader"),f.default._validateParameters("createShader",arguments),new f.default.Shader(this._renderer,s,i)},f.default.prototype.shader=function(s){return this._assert3d("shader"),f.default._validateParameters("shader",arguments),s._renderer===void 0&&(s._renderer=this._renderer),s.init(),s.isStrokeShader()?this._renderer.userStrokeShader=s:(this._renderer.userFillShader=s,this._renderer._useNormalMaterial=!1),this},f.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},f.default.prototype.texture=function(s){return this._assert3d("texture"),f.default._validateParameters("texture",arguments),s.gifProperties&&s._animateGif(this),this._renderer.drawMode=h.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=s,this._renderer._setProperty("_doFill",!0),this},f.default.prototype.textureMode=function(s){s!==h.IMAGE&&s!==h.NORMAL?console.warn("You tried to set ".concat(s," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=s},f.default.prototype.textureWrap=function(s){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:s;this._renderer.textureWrapX=s,this._renderer.textureWrapY=i;for(var o=this._renderer.textures,d=0;d<o.length;d++)o[d].setWrapMode(s,i)},f.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return f.default._validateParameters("normalMaterial",i),this._renderer.drawMode=h.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},f.default.prototype.ambientMaterial=function(s,i,o){this._assert3d("ambientMaterial"),f.default._validateParameters("ambientMaterial",arguments);var d=f.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=d._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},f.default.prototype.emissiveMaterial=function(s,i,o,d){this._assert3d("emissiveMaterial"),f.default._validateParameters("emissiveMaterial",arguments);var u=f.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=u._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},f.default.prototype.specularMaterial=function(s,i,o,d){this._assert3d("specularMaterial"),f.default._validateParameters("specularMaterial",arguments);var u=f.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=u._array,this._renderer._useSpecularMaterial=!0,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},f.default.prototype.shininess=function(s){return this._assert3d("shininess"),f.default._validateParameters("shininess",arguments),s<1&&(s=1),this._renderer._useShininess=s,this},f.default.RendererGL.prototype._applyColorBlend=function(s){var i=this.GL,o=this.drawMode===h.TEXTURE||s[s.length-1]<1||this._isErasing;return o!==this._isBlending&&(o||this.curBlendMode!==h.BLEND&&this.curBlendMode!==h.ADD?i.enable(i.BLEND):i.disable(i.BLEND),i.depthMask(!0),this._isBlending=o),this._applyBlendMode(),s},f.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var s=this.GL;switch(this.curBlendMode){case h.BLEND:case h.ADD:s.blendEquation(s.FUNC_ADD),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA);break;case h.REMOVE:s.blendEquation(s.FUNC_REVERSE_SUBTRACT),s.blendFunc(s.SRC_ALPHA,s.DST_ALPHA);break;case h.MULTIPLY:s.blendEquationSeparate(s.FUNC_ADD,s.FUNC_ADD),s.blendFuncSeparate(s.ZERO,s.SRC_COLOR,s.ONE,s.ONE);break;case h.SCREEN:s.blendEquationSeparate(s.FUNC_ADD,s.FUNC_ADD),s.blendFuncSeparate(s.ONE_MINUS_DST_COLOR,s.ONE,s.ONE,s.ONE);break;case h.EXCLUSION:s.blendEquationSeparate(s.FUNC_ADD,s.FUNC_ADD),s.blendFuncSeparate(s.ONE_MINUS_DST_COLOR,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE);break;case h.REPLACE:s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO);break;case h.SUBTRACT:s.blendEquationSeparate(s.FUNC_REVERSE_SUBTRACT,s.FUNC_ADD),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE,s.ONE,s.ONE);break;case h.DARKEST:this.blendExt?(s.blendEquationSeparate(this.blendExt.MIN_EXT,s.FUNC_ADD),s.blendFuncSeparate(s.ONE,s.ONE,s.ONE,s.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case h.LIGHTEST:this.blendExt?(s.blendEquationSeparate(this.blendExt.MAX_EXT,s.FUNC_ADD),s.blendFuncSeparate(s.ONE,s.ONE,s.ONE,s.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var p=f.default;l.default=p},{"../core/constants":253,"../core/main":264,"./p5.Texture":320,"core-js/modules/es.array.join":159}],312:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.prototype.camera=function(){var h;this._assert3d("camera");for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];return n.default._validateParameters("camera",p),(h=this._renderer._curCamera).camera.apply(h,p),this},n.default.prototype.perspective=function(){var h;this._assert3d("perspective");for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];return n.default._validateParameters("perspective",p),(h=this._renderer._curCamera).perspective.apply(h,p),this},n.default.prototype.ortho=function(){var h;this._assert3d("ortho");for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];return n.default._validateParameters("ortho",p),(h=this._renderer._curCamera).ortho.apply(h,p),this},n.default.prototype.frustum=function(){var h;this._assert3d("frustum");for(var m=arguments.length,p=new Array(m),s=0;s<m;s++)p[s]=arguments[s];return n.default._validateParameters("frustum",p),(h=this._renderer._curCamera).frustum.apply(h,p),this},n.default.prototype.createCamera=function(){this._assert3d("createCamera");var h=new n.default.Camera(this._renderer);return h._computeCameraDefaultSettings(),h._setDefaultCamera(),this._renderer._curCamera=h},n.default.Camera=function(h){this._renderer=h,this.cameraType="default",this.cameraMatrix=new n.default.Matrix,this.projMatrix=new n.default.Matrix},n.default.Camera.prototype.perspective=function(h,m,p,s){this.cameraType=0<arguments.length?"custom":"default",h===void 0?(h=this.defaultCameraFOV,this.cameraFOV=h):this.cameraFOV=this._renderer._pInst._toRadians(h),m===void 0&&(m=this.defaultAspectRatio),p===void 0&&(p=this.defaultCameraNear),s===void 0&&(s=this.defaultCameraFar),p<=1e-4&&(p=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),s<p&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=m,this.cameraNear=p,this.cameraFar=s,this.projMatrix=n.default.Matrix.identity();var i=1/Math.tan(this.cameraFOV/2),o=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(i/m,0,0,0,0,-i,0,0,0,0,(s+p)*o,-1,0,0,2*s*p*o,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},n.default.Camera.prototype.ortho=function(h,m,p,s,i,o){h===void 0&&(h=-this._renderer.width/2),m===void 0&&(m=this._renderer.width/2),p===void 0&&(p=-this._renderer.height/2),s===void 0&&(s=this._renderer.height/2),i===void 0&&(i=0),o===void 0&&(o=Math.max(this._renderer.width,this._renderer.height));var d=m-h,u=s-p,g=o-i,b=2/d,_=2/u,w=-2/g,S=-(m+h)/d,T=-(s+p)/u,L=-(o+i)/g;this.projMatrix=n.default.Matrix.identity(),this.projMatrix.set(b,0,0,0,0,-_,0,0,0,0,w,0,S,T,L,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},n.default.Camera.prototype.frustum=function(h,m,p,s,i,o){h===void 0&&(h=-this._renderer.width/2),m===void 0&&(m=this._renderer.width/2),p===void 0&&(p=-this._renderer.height/2),s===void 0&&(s=this._renderer.height/2),i===void 0&&(i=0),o===void 0&&(o=Math.max(this._renderer.width,this._renderer.height));var d=m-h,u=s-p,g=o-i,b=2*i/d,_=2*i/u,w=-2*o*i/g,S=(m+h)/d,T=(s+p)/u,L=-(o+i)/g;this.projMatrix=n.default.Matrix.identity(),this.projMatrix.set(b,0,0,0,0,_,0,0,S,T,L,-1,0,0,w,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},n.default.Camera.prototype._rotateView=function(h,m,p,s){var i=this.centerX,o=this.centerY,d=this.centerZ;i-=this.eyeX,o-=this.eyeY,d-=this.eyeZ;var u=n.default.Matrix.identity(this._renderer._pInst);u.rotate(this._renderer._pInst._toRadians(h),m,p,s);var g=[i*u.mat4[0]+o*u.mat4[4]+d*u.mat4[8],i*u.mat4[1]+o*u.mat4[5]+d*u.mat4[9],i*u.mat4[2]+o*u.mat4[6]+d*u.mat4[10]];g[0]+=this.eyeX,g[1]+=this.eyeY,g[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,g[0],g[1],g[2],this.upX,this.upY,this.upZ)},n.default.Camera.prototype.pan=function(h){var m=this._getLocalAxes();this._rotateView(h,m.y[0],m.y[1],m.y[2])},n.default.Camera.prototype.tilt=function(h){var m=this._getLocalAxes();this._rotateView(h,m.x[0],m.x[1],m.x[2])},n.default.Camera.prototype.lookAt=function(h,m,p){this.camera(this.eyeX,this.eyeY,this.eyeZ,h,m,p,this.upX,this.upY,this.upZ)},n.default.Camera.prototype.camera=function(h,m,p,s,i,o,d,u,g){h===void 0&&(h=this.defaultEyeX,m=this.defaultEyeY,p=this.defaultEyeZ,s=h,i=m,u=1,g=d=o=0),this.eyeX=h,this.eyeY=m,this.eyeZ=p,s!==void 0&&(this.centerX=s,this.centerY=i,this.centerZ=o),d!==void 0&&(this.upX=d,this.upY=u,this.upZ=g);var b=this._getLocalAxes();this.cameraMatrix.set(b.x[0],b.y[0],b.z[0],0,b.x[1],b.y[1],b.z[1],0,b.x[2],b.y[2],b.z[2],0,0,0,0,1);var _=-h,w=-m,S=-p;return this.cameraMatrix.translate([_,w,S]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},n.default.Camera.prototype.move=function(h,m,p){var s=this._getLocalAxes(),i=[s.x[0]*h,s.x[1]*h,s.x[2]*h],o=[s.y[0]*m,s.y[1]*m,s.y[2]*m],d=[s.z[0]*p,s.z[1]*p,s.z[2]*p];this.camera(this.eyeX+i[0]+o[0]+d[0],this.eyeY+i[1]+o[1]+d[1],this.eyeZ+i[2]+o[2]+d[2],this.centerX+i[0]+o[0]+d[0],this.centerY+i[1]+o[1]+d[1],this.centerZ+i[2]+o[2]+d[2],0,1,0)},n.default.Camera.prototype.setPosition=function(h,m,p){var s=h-this.eyeX,i=m-this.eyeY,o=p-this.eyeZ;this.camera(h,m,p,this.centerX+s,this.centerY+i,this.centerZ+o,0,1,0)},n.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},n.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},n.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},n.default.Camera.prototype.copy=function(){var h=new n.default.Camera(this._renderer);return h.cameraFOV=this.cameraFOV,h.aspectRatio=this.aspectRatio,h.eyeX=this.eyeX,h.eyeY=this.eyeY,h.eyeZ=this.eyeZ,h.centerX=this.centerX,h.centerY=this.centerY,h.centerZ=this.centerZ,h.cameraNear=this.cameraNear,h.cameraFar=this.cameraFar,h.cameraType=this.cameraType,h.cameraMatrix=this.cameraMatrix.copy(),h.projMatrix=this.projMatrix.copy(),h},n.default.Camera.prototype._getLocalAxes=function(){var h=this.eyeX-this.centerX,m=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,s=Math.sqrt(h*h+m*m+p*p);s!==0&&(h/=s,m/=s,p/=s);var i=this.upX,o=this.upY,d=this.upZ,u=o*p-d*m,g=-i*p+d*h,b=i*m-o*h;i=m*b-p*g,o=-h*b+p*u,d=h*g-m*u;var _=Math.sqrt(u*u+g*g+b*b);_!==0&&(u/=_,g/=_,b/=_);var w=Math.sqrt(i*i+o*o+d*d);return w!==0&&(i/=w,o/=w,d/=w),{x:[u,g,b],y:[i,o,d],z:[h,m,p]}},n.default.Camera.prototype._orbit=function(h,m,p){var s=this.eyeX-this.centerX,i=this.eyeY-this.centerY,o=this.eyeZ-this.centerZ,d=Math.sqrt(s*s+i*i+o*o),u=Math.atan2(s,o),g=Math.acos(Math.max(-1,Math.min(1,i/d)));u+=h,(d+=p)<0&&(d=.1),(g+=m)>Math.PI?g=Math.PI:g<=0&&(g=.001);var b=Math.sin(g)*d*Math.sin(u),_=Math.cos(g)*d,w=Math.sin(g)*d*Math.cos(u);this.camera(b+this.centerX,_+this.centerY,w+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},n.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},n.default.prototype.setCamera=function(h){this._renderer._curCamera=h,this._renderer.uPMatrix.set(h.projMatrix.mat4[0],h.projMatrix.mat4[1],h.projMatrix.mat4[2],h.projMatrix.mat4[3],h.projMatrix.mat4[4],h.projMatrix.mat4[5],h.projMatrix.mat4[6],h.projMatrix.mat4[7],h.projMatrix.mat4[8],h.projMatrix.mat4[9],h.projMatrix.mat4[10],h.projMatrix.mat4[11],h.projMatrix.mat4[12],h.projMatrix.mat4[13],h.projMatrix.mat4[14],h.projMatrix.mat4[15])};var f=n.default.Camera;l.default=f},{"../core/main":264}],313:[function(t,a,l){t("core-js/modules/es.string.sub"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.Geometry=function(h,m,p){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=h!==void 0?h:1,this.detailY=m!==void 0?m:1,this.dirtyFlags={},p instanceof Function&&p.call(this),this},n.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},n.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var h,m,p,s,i=this.detailX+1,o=0;o<this.detailY;o++)for(var d=0;d<this.detailX;d++)m=(h=o*i+d)+1,p=(o+1)*i+d+1,s=(o+1)*i+d,this.faces.push([h,m,s]),this.faces.push([s,m,p]);return this},n.default.Geometry.prototype._getFaceNormal=function(h){var m=this.faces[h],p=this.vertices[m[0]],s=this.vertices[m[1]],i=this.vertices[m[2]],o=n.default.Vector.sub(s,p),d=n.default.Vector.sub(i,p),u=n.default.Vector.cross(o,d),g=n.default.Vector.mag(u),b=g/(n.default.Vector.mag(o)*n.default.Vector.mag(d));return b===0||isNaN(b)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),u):(1<b&&(b=1),u.mult(Math.asin(b)/g))},n.default.Geometry.prototype.computeNormals=function(){var h,m=this.vertexNormals,p=this.vertices,s=this.faces;for(h=m.length=0;h<p.length;++h)m.push(new n.default.Vector);for(var i=0;i<s.length;++i)for(var o=s[i],d=this._getFaceNormal(i),u=0;u<3;++u)m[o[u]].add(d);for(h=0;h<p.length;++h)m[h].normalize();return this},n.default.Geometry.prototype.averageNormals=function(){for(var h=0;h<=this.detailY;h++){var m=this.detailX+1,p=n.default.Vector.add(this.vertexNormals[h*m],this.vertexNormals[h*m+this.detailX]);p=n.default.Vector.div(p,2),this.vertexNormals[h*m]=p,this.vertexNormals[h*m+this.detailX]=p}return this},n.default.Geometry.prototype.averagePoleNormals=function(){for(var h=new n.default.Vector(0,0,0),m=0;m<this.detailX;m++)h.add(this.vertexNormals[m]);h=n.default.Vector.div(h,this.detailX);for(var p=0;p<this.detailX;p++)this.vertexNormals[p]=h;h=new n.default.Vector(0,0,0);for(var s=this.vertices.length-1;s>this.vertices.length-1-this.detailX;s--)h.add(this.vertexNormals[s]);h=n.default.Vector.div(h,this.detailX);for(var i=this.vertices.length-1;i>this.vertices.length-1-this.detailX;i--)this.vertexNormals[i]=h;return this},n.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var h=0,m=this.strokeIndices.length;h<m;h++)this.edges.push(this.strokeIndices[h]);else for(var p=0;p<this.faces.length;p++)this.edges.push([this.faces[p][0],this.faces[p][1]]),this.edges.push([this.faces[p][1],this.faces[p][2]]),this.edges.push([this.faces[p][2],this.faces[p][0]]);return this},n.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var h=this.lineNormals.length=0;h<this.edges.length;h++){var m=this.vertices[this.edges[h][0]],p=this.vertices[this.edges[h][1]],s=p.copy().sub(m).normalize(),i=m.array(),o=m.array(),d=p.array(),u=p.array(),g=s.array(),b=s.array();g.push(1),b.push(-1),this.lineNormals.push(g,b,g,g,b,b),this.lineVertices.push(i,o,d,d,o,u)}return this},n.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var h=this.vertices[0].copy(),m=this.vertices[0].copy(),p=0;p<this.vertices.length;p++)h.x=Math.max(h.x,this.vertices[p].x),m.x=Math.min(m.x,this.vertices[p].x),h.y=Math.max(h.y,this.vertices[p].y),m.y=Math.min(m.y,this.vertices[p].y),h.z=Math.max(h.z,this.vertices[p].z),m.z=Math.min(m.z,this.vertices[p].z);for(var s=n.default.Vector.lerp(h,m,.5),i=n.default.Vector.sub(h,m),o=200/Math.max(Math.max(i.x,i.y),i.z),d=0;d<this.vertices.length;d++)this.vertices[d].sub(s),this.vertices[d].mult(o)}return this};var f=n.default.Geometry;l.default=f},{"../core/main":264,"core-js/modules/es.string.sub":192}],314:[function(t,a,l){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c},f=Array,h=function(p){return p instanceof Array};typeof Float32Array!="undefined"&&(f=Float32Array,h=function(p){return p instanceof Array||p instanceof Float32Array}),n.default.Matrix=function(){for(var p=new Array(arguments.length),s=0;s<p.length;++s)p[s]=arguments[s];return p.length&&p[p.length-1]instanceof n.default&&(this.p5=p[p.length-1]),p[0]==="mat3"?this.mat3=Array.isArray(p[1])?p[1]:new f([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(p[0])?p[0]:new f([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},n.default.Matrix.prototype.set=function(p){return p instanceof n.default.Matrix?this.mat4=p.mat4:h(p)?this.mat4=p:arguments.length===16&&(this.mat4[0]=p,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},n.default.Matrix.prototype.get=function(){return new n.default.Matrix(this.mat4,this.p5)},n.default.Matrix.prototype.copy=function(){var p=new n.default.Matrix(this.p5);return p.mat4[0]=this.mat4[0],p.mat4[1]=this.mat4[1],p.mat4[2]=this.mat4[2],p.mat4[3]=this.mat4[3],p.mat4[4]=this.mat4[4],p.mat4[5]=this.mat4[5],p.mat4[6]=this.mat4[6],p.mat4[7]=this.mat4[7],p.mat4[8]=this.mat4[8],p.mat4[9]=this.mat4[9],p.mat4[10]=this.mat4[10],p.mat4[11]=this.mat4[11],p.mat4[12]=this.mat4[12],p.mat4[13]=this.mat4[13],p.mat4[14]=this.mat4[14],p.mat4[15]=this.mat4[15],p},n.default.Matrix.identity=function(p){return new n.default.Matrix(p)},n.default.Matrix.prototype.transpose=function(p){var s,i,o,d,u,g;return p instanceof n.default.Matrix?(s=p.mat4[1],i=p.mat4[2],o=p.mat4[3],d=p.mat4[6],u=p.mat4[7],g=p.mat4[11],this.mat4[0]=p.mat4[0],this.mat4[1]=p.mat4[4],this.mat4[2]=p.mat4[8],this.mat4[3]=p.mat4[12],this.mat4[4]=s,this.mat4[5]=p.mat4[5],this.mat4[6]=p.mat4[9],this.mat4[7]=p.mat4[13],this.mat4[8]=i,this.mat4[9]=d,this.mat4[10]=p.mat4[10],this.mat4[11]=p.mat4[14],this.mat4[12]=o,this.mat4[13]=u,this.mat4[14]=g,this.mat4[15]=p.mat4[15]):h(p)&&(s=p[1],i=p[2],o=p[3],d=p[6],u=p[7],g=p[11],this.mat4[0]=p[0],this.mat4[1]=p[4],this.mat4[2]=p[8],this.mat4[3]=p[12],this.mat4[4]=s,this.mat4[5]=p[5],this.mat4[6]=p[9],this.mat4[7]=p[13],this.mat4[8]=i,this.mat4[9]=d,this.mat4[10]=p[10],this.mat4[11]=p[14],this.mat4[12]=o,this.mat4[13]=u,this.mat4[14]=g,this.mat4[15]=p[15]),this},n.default.Matrix.prototype.invert=function(p){var s,i,o,d,u,g,b,_,w,S,T,L,A,P,R,D;p instanceof n.default.Matrix?(s=p.mat4[0],i=p.mat4[1],o=p.mat4[2],d=p.mat4[3],u=p.mat4[4],g=p.mat4[5],b=p.mat4[6],_=p.mat4[7],w=p.mat4[8],S=p.mat4[9],T=p.mat4[10],L=p.mat4[11],A=p.mat4[12],P=p.mat4[13],R=p.mat4[14],D=p.mat4[15]):h(p)&&(s=p[0],i=p[1],o=p[2],d=p[3],u=p[4],g=p[5],b=p[6],_=p[7],w=p[8],S=p[9],T=p[10],L=p[11],A=p[12],P=p[13],R=p[14],D=p[15]);var F=s*g-i*u,I=s*b-o*u,k=s*_-d*u,U=i*b-o*g,q=i*_-d*g,Q=o*_-d*b,W=w*P-S*A,K=w*R-T*A,Y=w*D-L*A,se=S*R-T*P,ue=S*D-L*P,ge=T*D-L*R,de=F*ge-I*ue+k*se+U*Y-q*K+Q*W;return de?(de=1/de,this.mat4[0]=(g*ge-b*ue+_*se)*de,this.mat4[1]=(o*ue-i*ge-d*se)*de,this.mat4[2]=(P*Q-R*q+D*U)*de,this.mat4[3]=(T*q-S*Q-L*U)*de,this.mat4[4]=(b*Y-u*ge-_*K)*de,this.mat4[5]=(s*ge-o*Y+d*K)*de,this.mat4[6]=(R*k-A*Q-D*I)*de,this.mat4[7]=(w*Q-T*k+L*I)*de,this.mat4[8]=(u*ue-g*Y+_*W)*de,this.mat4[9]=(i*Y-s*ue-d*W)*de,this.mat4[10]=(A*q-P*k+D*F)*de,this.mat4[11]=(S*k-w*q-L*F)*de,this.mat4[12]=(g*K-u*se-b*W)*de,this.mat4[13]=(s*se-i*K+o*W)*de,this.mat4[14]=(P*I-A*U-R*F)*de,this.mat4[15]=(w*U-S*I+T*F)*de,this):null},n.default.Matrix.prototype.invert3x3=function(){var p=this.mat3[0],s=this.mat3[1],i=this.mat3[2],o=this.mat3[3],d=this.mat3[4],u=this.mat3[5],g=this.mat3[6],b=this.mat3[7],_=this.mat3[8],w=_*d-u*b,S=-_*o+u*g,T=b*o-d*g,L=p*w+s*S+i*T;return L?(L=1/L,this.mat3[0]=w*L,this.mat3[1]=(-_*s+i*b)*L,this.mat3[2]=(u*s-i*d)*L,this.mat3[3]=S*L,this.mat3[4]=(_*p-i*g)*L,this.mat3[5]=(-u*p+i*o)*L,this.mat3[6]=T*L,this.mat3[7]=(-b*p+s*g)*L,this.mat3[8]=(d*p-s*o)*L,this):null},n.default.Matrix.prototype.transpose3x3=function(p){var s=p[1],i=p[2],o=p[5];return this.mat3[1]=p[3],this.mat3[2]=p[6],this.mat3[3]=s,this.mat3[5]=p[7],this.mat3[6]=i,this.mat3[7]=o,this},n.default.Matrix.prototype.inverseTranspose=function(p){this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=p.mat4[0],this.mat3[1]=p.mat4[1],this.mat3[2]=p.mat4[2],this.mat3[3]=p.mat4[4],this.mat3[4]=p.mat4[5],this.mat3[5]=p.mat4[6],this.mat3[6]=p.mat4[8],this.mat3[7]=p.mat4[9],this.mat3[8]=p.mat4[10]);var s=this.invert3x3();if(s)s.transpose3x3(this.mat3);else for(var i=0;i<9;i++)this.mat3[i]=0;return this},n.default.Matrix.prototype.determinant=function(){var p=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],s=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],i=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],o=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],d=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],u=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],g=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],b=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],_=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],w=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],S=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return p*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-s*S+i*w+o*_-d*b+u*g},n.default.Matrix.prototype.mult=function(p){var s;if(p===this||p===this.mat4)s=this.copy().mat4;else if(p instanceof n.default.Matrix)s=p.mat4;else if(h(p))s=p;else{if(arguments.length!==16)return;s=arguments}var i=this.mat4[0],o=this.mat4[1],d=this.mat4[2],u=this.mat4[3];return this.mat4[0]=i*s[0]+o*s[4]+d*s[8]+u*s[12],this.mat4[1]=i*s[1]+o*s[5]+d*s[9]+u*s[13],this.mat4[2]=i*s[2]+o*s[6]+d*s[10]+u*s[14],this.mat4[3]=i*s[3]+o*s[7]+d*s[11]+u*s[15],i=this.mat4[4],o=this.mat4[5],d=this.mat4[6],u=this.mat4[7],this.mat4[4]=i*s[0]+o*s[4]+d*s[8]+u*s[12],this.mat4[5]=i*s[1]+o*s[5]+d*s[9]+u*s[13],this.mat4[6]=i*s[2]+o*s[6]+d*s[10]+u*s[14],this.mat4[7]=i*s[3]+o*s[7]+d*s[11]+u*s[15],i=this.mat4[8],o=this.mat4[9],d=this.mat4[10],u=this.mat4[11],this.mat4[8]=i*s[0]+o*s[4]+d*s[8]+u*s[12],this.mat4[9]=i*s[1]+o*s[5]+d*s[9]+u*s[13],this.mat4[10]=i*s[2]+o*s[6]+d*s[10]+u*s[14],this.mat4[11]=i*s[3]+o*s[7]+d*s[11]+u*s[15],i=this.mat4[12],o=this.mat4[13],d=this.mat4[14],u=this.mat4[15],this.mat4[12]=i*s[0]+o*s[4]+d*s[8]+u*s[12],this.mat4[13]=i*s[1]+o*s[5]+d*s[9]+u*s[13],this.mat4[14]=i*s[2]+o*s[6]+d*s[10]+u*s[14],this.mat4[15]=i*s[3]+o*s[7]+d*s[11]+u*s[15],this},n.default.Matrix.prototype.apply=function(p){var s;if(p===this||p===this.mat4)s=this.copy().mat4;else if(p instanceof n.default.Matrix)s=p.mat4;else if(h(p))s=p;else{if(arguments.length!==16)return;s=arguments}var i=this.mat4,o=i[0],d=i[4],u=i[8],g=i[12];i[0]=s[0]*o+s[1]*d+s[2]*u+s[3]*g,i[4]=s[4]*o+s[5]*d+s[6]*u+s[7]*g,i[8]=s[8]*o+s[9]*d+s[10]*u+s[11]*g,i[12]=s[12]*o+s[13]*d+s[14]*u+s[15]*g;var b=i[1],_=i[5],w=i[9],S=i[13];i[1]=s[0]*b+s[1]*_+s[2]*w+s[3]*S,i[5]=s[4]*b+s[5]*_+s[6]*w+s[7]*S,i[9]=s[8]*b+s[9]*_+s[10]*w+s[11]*S,i[13]=s[12]*b+s[13]*_+s[14]*w+s[15]*S;var T=i[2],L=i[6],A=i[10],P=i[14];i[2]=s[0]*T+s[1]*L+s[2]*A+s[3]*P,i[6]=s[4]*T+s[5]*L+s[6]*A+s[7]*P,i[10]=s[8]*T+s[9]*L+s[10]*A+s[11]*P,i[14]=s[12]*T+s[13]*L+s[14]*A+s[15]*P;var R=i[3],D=i[7],F=i[11],I=i[15];return i[3]=s[0]*R+s[1]*D+s[2]*F+s[3]*I,i[7]=s[4]*R+s[5]*D+s[6]*F+s[7]*I,i[11]=s[8]*R+s[9]*D+s[10]*F+s[11]*I,i[15]=s[12]*R+s[13]*D+s[14]*F+s[15]*I,this},n.default.Matrix.prototype.scale=function(p,s,i){return p instanceof n.default.Vector?(s=p.y,i=p.z,p=p.x):p instanceof Array&&(s=p[1],i=p[2],p=p[0]),this.mat4[0]*=p,this.mat4[1]*=p,this.mat4[2]*=p,this.mat4[3]*=p,this.mat4[4]*=s,this.mat4[5]*=s,this.mat4[6]*=s,this.mat4[7]*=s,this.mat4[8]*=i,this.mat4[9]*=i,this.mat4[10]*=i,this.mat4[11]*=i,this},n.default.Matrix.prototype.rotate=function(p,s,i,o){s instanceof n.default.Vector?(i=s.y,o=s.z,s=s.x):s instanceof Array&&(i=s[1],o=s[2],s=s[0]);var d=Math.sqrt(s*s+i*i+o*o);s*=1/d,i*=1/d,o*=1/d;var u=this.mat4[0],g=this.mat4[1],b=this.mat4[2],_=this.mat4[3],w=this.mat4[4],S=this.mat4[5],T=this.mat4[6],L=this.mat4[7],A=this.mat4[8],P=this.mat4[9],R=this.mat4[10],D=this.mat4[11],F=Math.sin(p),I=Math.cos(p),k=1-I,U=s*s*k+I,q=i*s*k+o*F,Q=o*s*k-i*F,W=s*i*k-o*F,K=i*i*k+I,Y=o*i*k+s*F,se=s*o*k+i*F,ue=i*o*k-s*F,ge=o*o*k+I;return this.mat4[0]=u*U+w*q+A*Q,this.mat4[1]=g*U+S*q+P*Q,this.mat4[2]=b*U+T*q+R*Q,this.mat4[3]=_*U+L*q+D*Q,this.mat4[4]=u*W+w*K+A*Y,this.mat4[5]=g*W+S*K+P*Y,this.mat4[6]=b*W+T*K+R*Y,this.mat4[7]=_*W+L*K+D*Y,this.mat4[8]=u*se+w*ue+A*ge,this.mat4[9]=g*se+S*ue+P*ge,this.mat4[10]=b*se+T*ue+R*ge,this.mat4[11]=_*se+L*ue+D*ge,this},n.default.Matrix.prototype.translate=function(p){var s=p[0],i=p[1],o=p[2]||0;this.mat4[12]+=this.mat4[0]*s+this.mat4[4]*i+this.mat4[8]*o,this.mat4[13]+=this.mat4[1]*s+this.mat4[5]*i+this.mat4[9]*o,this.mat4[14]+=this.mat4[2]*s+this.mat4[6]*i+this.mat4[10]*o,this.mat4[15]+=this.mat4[3]*s+this.mat4[7]*i+this.mat4[11]*o},n.default.Matrix.prototype.rotateX=function(p){this.rotate(p,1,0,0)},n.default.Matrix.prototype.rotateY=function(p){this.rotate(p,0,1,0)},n.default.Matrix.prototype.rotateZ=function(p){this.rotate(p,0,0,1)},n.default.Matrix.prototype.perspective=function(p,s,i,o){var d=1/Math.tan(p/2),u=1/(i-o);return this.mat4[0]=d/s,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=d,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(o+i)*u,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*o*i*u,this.mat4[15]=0,this},n.default.Matrix.prototype.ortho=function(p,s,i,o,d,u){var g=1/(p-s),b=1/(i-o),_=1/(d-u);return this.mat4[0]=-2*g,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*b,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*_,this.mat4[11]=0,this.mat4[12]=(p+s)*g,this.mat4[13]=(o+i)*b,this.mat4[14]=(u+d)*_,this.mat4[15]=1,this};var m=n.default.Matrix;l.default=m},{"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],315:[function(t,a,l){t("core-js/modules/es.array.map"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.RenderBuffer=function(h,m,p,s,i,o){this.size=h,this.src=m,this.dst=p,this.attr=s,this._renderer=i,this.map=o},n.default.RenderBuffer.prototype._prepareBuffer=function(h,m){var p,s=m.attributes,i=this._renderer.GL;p=h.model?h.model:h;var o=s[this.attr];if(o){var d=h[this.dst],u=p[this.src];if(0<u.length){var g=!d;if(g&&(h[this.dst]=d=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,d),g||p.dirtyFlags[this.src]!==!1){var b=this.map,_=b?b(u):u;this._renderer._bindBuffer(d,i.ARRAY_BUFFER,_),p.dirtyFlags[this.src]=!1}m.enableAttrib(o,this.size)}}};var f=n.default.RenderBuffer;l.default=f},{"../core/main":264,"core-js/modules/es.array.map":161}],316:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=m();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}t("./p5.RenderBuffer"),f.default.RendererGL.prototype.beginShape=function(s){return this.immediateMode.shapeMode=s!==void 0?s:h.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this},f.default.RendererGL.prototype.vertex=function(s,i){var o,d,u;o=d=u=0,arguments.length===3?o=arguments[2]:arguments.length===4?(d=arguments[2],u=arguments[3]):arguments.length===5&&(o=arguments[2],d=arguments[3],u=arguments[4]);var g=new f.default.Vector(s,i,o);this.immediateMode.geometry.vertices.push(g),this.immediateMode.geometry.vertexNormals.push(this._currentNormal);var b=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.geometry.vertexColors.push(b[0],b[1],b[2],b[3]),this.textureMode===h.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(d/=this._tex.width,u/=this._tex.height):this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(d,u),this.immediateMode._bezierVertex[0]=s,this.immediateMode._bezierVertex[1]=i,this.immediateMode._bezierVertex[2]=o,this.immediateMode._quadraticVertex[0]=s,this.immediateMode._quadraticVertex[1]=i,this.immediateMode._quadraticVertex[2]=o,this},f.default.RendererGL.prototype.normal=function(s,i,o){return s instanceof f.default.Vector?this._currentNormal=s:this._currentNormal=new f.default.Vector(s,i,o),this},f.default.RendererGL.prototype.endShape=function(s,i,o,d,u,g){return this.immediateMode.shapeMode===h.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},f.default.RendererGL.prototype._processVertices=function(s){if(this.immediateMode.geometry.vertices.length!==0){var i=this._doStroke&&this.drawMode!==h.TEXTURE,o=s===h.CLOSE;i&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,o),this.immediateMode.geometry._edgesToVertices());var d=this.immediateMode.shapeMode===h.TESS;(this.isBezier||this.isQuadratic||this.isCurve||d)&&this.immediateMode.shapeMode!==h.LINES&&this._tesselateShape()}},f.default.RendererGL.prototype._calculateEdges=function(s,i,o){var d=[],u=0;switch(s){case h.TRIANGLE_STRIP:for(u=0;u<i.length-2;u++)d.push([u,u+1]),d.push([u,u+2]);d.push([u,u+1]);break;case h.TRIANGLES:for(u=0;u<i.length-2;u+=3)d.push([u,u+1]),d.push([u+1,u+2]),d.push([u+2,u]);break;case h.LINES:for(u=0;u<i.length-1;u+=2)d.push([u,u+1]);break;default:for(u=0;u<i.length-1;u++)d.push([u,u+1])}return o&&d.push([i.length-1,0]),d},f.default.RendererGL.prototype._tesselateShape=function(){this.immediateMode.shapeMode=h.TRIANGLES;var s=[new Float32Array(this._vToNArray(this.immediateMode.geometry.vertices))],i=this._triangulate(s);this.immediateMode.geometry.vertices=[];for(var o=0,d=i.length;o<d;o+=3)this.vertex(i[o],i[o+1],i[o+2])},f.default.RendererGL.prototype._drawImmediateFill=function(){var s=this.GL,i=this._getImmediateFillShader();this._setFillUniforms(i);var o=!0,d=!1,u=void 0;try{for(var g,b=this.immediateMode.buffers.fill[Symbol.iterator]();!(o=(g=b.next()).done);o=!0)g.value._prepareBuffer(this.immediateMode.geometry,i)}catch(_){d=!0,u=_}finally{try{o||b.return==null||b.return()}finally{if(d)throw u}}this.immediateMode.shapeMode!==h.LINE_STRIP&&this.immediateMode.shapeMode!==h.LINES||(this.immediateMode.shapeMode=h.TRIANGLE_FAN),this._applyColorBlend(this.curFillColor),s.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),i.unbindShader()},f.default.RendererGL.prototype._drawImmediateStroke=function(){var s=this.GL,i=this._getImmediateStrokeShader();this._setStrokeUniforms(i);var o=!0,d=!1,u=void 0;try{for(var g,b=this.immediateMode.buffers.stroke[Symbol.iterator]();!(o=(g=b.next()).done);o=!0)g.value._prepareBuffer(this.immediateMode.geometry,i)}catch(_){d=!0,u=_}finally{try{o||b.return==null||b.return()}finally{if(d)throw u}}this._applyColorBlend(this.curStrokeColor),s.drawArrays(s.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),i.unbindShader()};var p=f.default.RendererGL;l.default=p},{"../core/constants":253,"../core/main":264,"./p5.RenderBuffer":315,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/web.dom-collections.iterator":229}],317:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};t("./p5.RendererGL"),t("./p5.RenderBuffer");var f=0;n.default.RendererGL.prototype._initBufferDefaults=function(m){if(this._freeBuffers(m),1e3<++f){var p=Object.keys(this.retainedMode.geometry)[0];delete this.retainedMode.geometry[p],f--}return this.retainedMode.geometry[m]={}},n.default.RendererGL.prototype._freeBuffers=function(m){var p=this.retainedMode.geometry[m];if(p){delete this.retainedMode.geometry[m],f--;var s=this.GL;p.indexBuffer&&s.deleteBuffer(p.indexBuffer),i(this.retainedMode.buffers.stroke),i(this.retainedMode.buffers.fill)}function i(o){var d=!0,u=!1,g=void 0;try{for(var b,_=o[Symbol.iterator]();!(d=(b=_.next()).done);d=!0){var w=b.value;p[w.dst]&&(s.deleteBuffer(p[w.dst]),p[w.dst]=null)}}catch(S){u=!0,g=S}finally{try{d||_.return==null||_.return()}finally{if(u)throw g}}}},n.default.RendererGL.prototype.createBuffers=function(m,p){var s=this.GL,i=this._initBufferDefaults(m);i.model=p;var o=i.indexBuffer;if(p.faces.length){o=o||(i.indexBuffer=s.createBuffer());var d=n.default.RendererGL.prototype._flatten(p.faces),u=d.some(function(b){return 65535<b}),g=u?Uint32Array:Uint16Array;this._bindBuffer(o,s.ELEMENT_ARRAY_BUFFER,d,g),i.indexBufferType=u?s.UNSIGNED_INT:s.UNSIGNED_SHORT,i.vertexCount=3*p.faces.length}else o&&(s.deleteBuffer(o),i.indexBuffer=null),i.vertexCount=p.vertices?p.vertices.length:0;return i.lineVertexCount=p.lineVertices?p.lineVertices.length:0,i},n.default.RendererGL.prototype.drawBuffers=function(m){var p=this.GL,s=this.retainedMode.geometry[m];if(this._doStroke&&0<s.lineVertexCount){var i=this._getRetainedStrokeShader();this._setStrokeUniforms(i);var o=!0,d=!1,u=void 0;try{for(var g,b=this.retainedMode.buffers.stroke[Symbol.iterator]();!(o=(g=b.next()).done);o=!0)g.value._prepareBuffer(s,i)}catch(P){d=!0,u=P}finally{try{o||b.return==null||b.return()}finally{if(d)throw u}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(p.TRIANGLES,m),i.unbindShader()}if(this._doFill){var _=this._getRetainedFillShader();this._setFillUniforms(_);var w=!0,S=!1,T=void 0;try{for(var L,A=this.retainedMode.buffers.fill[Symbol.iterator]();!(w=(L=A.next()).done);w=!0)L.value._prepareBuffer(s,_)}catch(P){S=!0,T=P}finally{try{w||A.return==null||A.return()}finally{if(S)throw T}}s.indexBuffer&&this._bindBuffer(s.indexBuffer,p.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(p.TRIANGLES,m),_.unbindShader()}return this},n.default.RendererGL.prototype.drawBuffersScaled=function(m,p,s,i){var o=this.uMVMatrix.copy();try{this.uMVMatrix.scale(p,s,i),this.drawBuffers(m)}finally{this.uMVMatrix=o}},n.default.RendererGL.prototype._drawArrays=function(m,p){return this.GL.drawArrays(m,0,this.retainedMode.geometry[p].lineVertexCount),this},n.default.RendererGL.prototype._drawElements=function(m,p){var s=this.retainedMode.geometry[p],i=this.GL;if(s.indexBuffer){if(s.indexBufferType===i.UNSIGNED_INT&&!i.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");i.drawElements(i.TRIANGLES,s.vertexCount,s.indexBufferType,0)}else i.drawArrays(m||i.TRIANGLES,0,s.vertexCount)},n.default.RendererGL.prototype._drawPoints=function(m,p){var s=this.GL,i=this._getImmediatePointShader();this._setPointUniforms(i),this._bindBuffer(p,s.ARRAY_BUFFER,this._vToNArray(m),Float32Array,s.STATIC_DRAW),i.enableAttrib(i.attributes.aPosition,3),s.drawArrays(s.Points,0,m.length),i.unbindShader()};var h=n.default.RendererGL;l.default=h},{"../core/main":264,"./p5.RenderBuffer":315,"./p5.RendererGL":318,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":229}],318:[function(t,a,l){function c(u){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.float64-array"),t("core-js/modules/es.typed-array.int16-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n=p(t("../core/main")),f=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var g=m();if(g&&g.has(u))return g.get(u);var b={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in u)if(Object.prototype.hasOwnProperty.call(u,w)){var S=_?Object.getOwnPropertyDescriptor(u,w):null;S&&(S.get||S.set)?Object.defineProperty(b,w,S):b[w]=u[w]}return b.default=u,g&&g.set(u,b),b}(t("../core/constants")),h=p(t("libtess"));t("./p5.Shader"),t("./p5.Camera"),t("../core/p5.Renderer"),t("./p5.Matrix"),t("path");function m(){if(typeof WeakMap!="function")return null;var u=new WeakMap;return m=function(){return u},u}function p(u){return u&&u.__esModule?u:{default:u}}function s(u){return function(g){if(Array.isArray(g)){for(var b=0,_=new Array(g.length);b<g.length;b++)_[b]=g[b];return _}}(u)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`,o={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vColor;
}`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
uniform vec4 uMaterialColor;
void main(void) {
  gl_FragColor = uMaterialColor;
}`,lightVert:i+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;
  }
}`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
}
`,phongFrag:i+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * (diffuse + vAmbientColor) + specular;
  }
}`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = uMaterialColor;
  gl_FragColor.a *= saturate(max(antialias, cover));
}`,lineVert:`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform vec4 uViewport;
uniform int uPerspective;

attribute vec4 aPosition;
attribute vec4 aDirection;
  
void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posq.xyz = posq.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 q = uProjectionMatrix * posq;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);

  // flip tangent to normal (it's already normalized)
  vec2 normal = vec2(-tangent.y, tangent.x);

  float thickness = aDirection.w * uStrokeWeight;
  vec2 offset = normal * thickness / 2.0;

  vec2 curPerspScale;

  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
}
`,lineFrag:`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;

void main() {
  gl_FragColor = uMaterialColor;
}`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
	float mask = 0.0;

	// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

	mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

	// if strokeWeight is 1 or less lets just draw a square
	// this prevents weird artifacting from carving circles when our points are really small
	// if strokeWeight is larger than 1, we just use it as is

	mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

	// throw away the borders of the mask
    // otherwise we get weird alpha blending issues

	if(mask > 0.98){
      discard;
  	}

  	gl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;
}`};n.default.RendererGL=function(u,g,b,_){return n.default.Renderer.call(this,u,g,b),this._setAttributeDefaults(g),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=f.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=f.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new n.default.Matrix,this.uPMatrix=new n.default.Matrix,this.uNMatrix=new n.default.Matrix("mat3"),this._currentNormal=new n.default.Vector(0,0,1),this._curCamera=new n.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new n.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new n.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new n.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new n.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new n.default.Geometry,shapeMode:f.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new n.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new n.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new n.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new n.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=f.IMAGE,this.textureWrapX=f.CLAMP,this.textureWrapY=f.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},n.default.RendererGL.prototype=Object.create(n.default.Renderer.prototype),n.default.RendererGL.prototype._setAttributeDefaults=function(u){var g={alpha:!1,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};u._glAttributes===null?u._glAttributes=g:u._glAttributes=Object.assign(g,u._glAttributes)},n.default.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var u=this.drawingContext;u.enable(u.DEPTH_TEST),u.depthFunc(u.LEQUAL),u.viewport(0,0,u.drawingBufferWidth,u.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(g){throw g}},n.default.RendererGL.prototype._resetContext=function(u,g){var b=this.width,_=this.height,w=this.canvas.id,S=this._pInst instanceof n.default.Graphics;if(S){var T=this._pInst;T.canvas.parentNode.removeChild(T.canvas),T.canvas=document.createElement("canvas"),(T._pInst._userNode||document.body).appendChild(T.canvas),n.default.Element.call(T,T.canvas,T._pInst),T.width=b,T.height=_}else{var L=this.canvas;L&&L.parentNode.removeChild(L),(L=document.createElement("canvas")).id=w,this._pInst._userNode?this._pInst._userNode.appendChild(L):document.body.appendChild(L),this._pInst.canvas=L}var A=new n.default.RendererGL(this._pInst.canvas,this._pInst,!S);this._pInst._setProperty("_renderer",A),A.resize(b,_),A._applyDefaults(),S||this._pInst._elements.push(A),typeof g=="function"&&setTimeout(function(){g.apply(window._renderer,u)},0)},n.default.prototype.setAttributes=function(u,g){if(this._glAttributes!==void 0){var b=!0;if(g!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[u]!==g&&(this._glAttributes[u]=g,b=!1)):u instanceof Object&&this._glAttributes!==u&&(this._glAttributes=u,b=!1),this._renderer.isP3D&&!b){if(!this._setupDone){for(var _ in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(_))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}else console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.")},n.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},n.default.RendererGL.prototype.background=function(){var u,g=(u=this._pInst).color.apply(u,arguments),b=g.levels[0]/255,_=g.levels[1]/255,w=g.levels[2]/255,S=g.levels[3]/255;this.GL.clearColor(b,_,w,S),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},n.default.RendererGL.prototype.fill=function(u,g,b,_){var w=n.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=w._array,this.drawMode=f.FILL,this._useNormalMaterial=!1,this._tex=null},n.default.RendererGL.prototype.stroke=function(u,g,b,_){arguments[3]=255;var w=n.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=w._array},n.default.RendererGL.prototype.strokeCap=function(u){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},n.default.RendererGL.prototype.strokeJoin=function(u){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},n.default.RendererGL.prototype.filter=function(u){console.error("filter() does not work in WEBGL mode")},n.default.RendererGL.prototype.blendMode=function(u){u===f.DARKEST||u===f.LIGHTEST||u===f.ADD||u===f.BLEND||u===f.SUBTRACT||u===f.SCREEN||u===f.EXCLUSION||u===f.REPLACE||u===f.MULTIPLY||u===f.REMOVE?this.curBlendMode=u:u!==f.BURN&&u!==f.OVERLAY&&u!==f.HARD_LIGHT&&u!==f.SOFT_LIGHT&&u!==f.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},n.default.RendererGL.prototype.erase=function(u,g){this._isErasing||(this._applyBlendMode(f.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,u/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,g/255])},n.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},n.default.RendererGL.prototype.strokeWeight=function(u){this.curStrokeWeight!==u&&(this.pointSize=u,this.curStrokeWeight=u)},n.default.RendererGL.prototype._getPixel=function(u,g){var b;return b=new Uint8Array(4),this.drawingContext.readPixels(u,g,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,b),[b[0],b[1],b[2],b[3]]},n.default.RendererGL.prototype.loadPixels=function(){var u=this._pixelsState;if(this._pInst._glAttributes.preserveDrawingBuffer===!0){var g=u.pixels,b=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4;g instanceof Uint8Array&&g.length===b||(g=new Uint8Array(b),this._pixelsState._setProperty("pixels",g));var _=this._pInst._pixelDensity;this.GL.readPixels(0,0,this.width*_,this.height*_,this.GL.RGBA,this.GL.UNSIGNED_BYTE,g)}else console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.")},n.default.RendererGL.prototype.geometryInHash=function(u){return this.retainedMode.geometry[u]!==void 0},n.default.RendererGL.prototype.resize=function(u,g){n.default.Renderer.prototype.resize.call(this,u,g),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var b=this._pixelsState;b.pixels!==void 0&&b._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},n.default.RendererGL.prototype.clear=function(){var u=(arguments.length<=0?void 0:arguments[0])||0,g=(arguments.length<=1?void 0:arguments[1])||0,b=(arguments.length<=2?void 0:arguments[2])||0,_=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(u,g,b,_),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},n.default.RendererGL.prototype.applyMatrix=function(u,g,b,_,w,S){arguments.length===16?n.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([u,g,0,0,b,_,0,0,0,0,1,0,w,S,0,1])},n.default.RendererGL.prototype.translate=function(u,g,b){return u instanceof n.default.Vector&&(b=u.z,g=u.y,u=u.x),this.uMVMatrix.translate([u,g,b]),this},n.default.RendererGL.prototype.scale=function(u,g,b){return this.uMVMatrix.scale(u,g,b),this},n.default.RendererGL.prototype.rotate=function(u,g){return g===void 0?this.rotateZ(u):(n.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},n.default.RendererGL.prototype.rotateX=function(u){return this.rotate(u,1,0,0),this},n.default.RendererGL.prototype.rotateY=function(u){return this.rotate(u,0,1,0),this},n.default.RendererGL.prototype.rotateZ=function(u){return this.rotate(u,0,0,1),this},n.default.RendererGL.prototype.push=function(){var u=n.default.Renderer.prototype.push.apply(this),g=u.properties;return g.uMVMatrix=this.uMVMatrix.copy(),g.uPMatrix=this.uPMatrix.copy(),g._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),g.ambientLightColors=this.ambientLightColors.slice(),g.specularColors=this.specularColors.slice(),g.directionalLightDirections=this.directionalLightDirections.slice(),g.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),g.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),g.pointLightPositions=this.pointLightPositions.slice(),g.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),g.pointLightSpecularColors=this.pointLightSpecularColors.slice(),g.spotLightPositions=this.spotLightPositions.slice(),g.spotLightDirections=this.spotLightDirections.slice(),g.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),g.spotLightSpecularColors=this.spotLightSpecularColors.slice(),g.spotLightAngle=this.spotLightAngle.slice(),g.spotLightConc=this.spotLightConc.slice(),g.userFillShader=this.userFillShader,g.userStrokeShader=this.userStrokeShader,g.userPointShader=this.userPointShader,g.pointSize=this.pointSize,g.curStrokeWeight=this.curStrokeWeight,g.curStrokeColor=this.curStrokeColor,g.curFillColor=this.curFillColor,g._useSpecularMaterial=this._useSpecularMaterial,g._useEmissiveMaterial=this._useEmissiveMaterial,g._useShininess=this._useShininess,g.constantAttenuation=this.constantAttenuation,g.linearAttenuation=this.linearAttenuation,g.quadraticAttenuation=this.quadraticAttenuation,g._enableLighting=this._enableLighting,g._useNormalMaterial=this._useNormalMaterial,g._tex=this._tex,g.drawMode=this.drawMode,g._currentNormal=this._currentNormal,u},n.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=n.default.Matrix.identity(this._pInst),this},n.default.RendererGL.prototype._getImmediateStrokeShader=function(){var u=this.userStrokeShader;return u&&u.isStrokeShader()?u:this._getLineShader()},n.default.RendererGL.prototype._getRetainedStrokeShader=n.default.RendererGL.prototype._getImmediateStrokeShader,n.default.RendererGL.prototype._getImmediateFillShader=function(){var u=this.userFillShader;if(this._useNormalMaterial&&(!u||!u.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!u||!u.isLightShader())return this._getLightShader()}else if(this._tex){if(!u||!u.isTextureShader())return this._getLightShader()}else if(!u)return this._getImmediateModeShader();return u},n.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var u=this.userFillShader;if(this._enableLighting){if(!u||!u.isLightShader())return this._getLightShader()}else if(this._tex){if(!u||!u.isTextureShader())return this._getLightShader()}else if(!u)return this._getColorShader();return u},n.default.RendererGL.prototype._getImmediatePointShader=function(){var u=this.userPointShader;return u&&u.isPointShader()?u:this._getPointShader()},n.default.RendererGL.prototype._getRetainedLineShader=n.default.RendererGL.prototype._getImmediateLineShader,n.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new n.default.Shader(this,o.phongVert,o.phongFrag):this._defaultLightShader=new n.default.Shader(this,o.lightVert,o.lightTextureFrag)),this._defaultLightShader},n.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new n.default.Shader(this,o.immediateVert,o.vertexColorFrag)),this._defaultImmediateModeShader},n.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new n.default.Shader(this,o.normalVert,o.normalFrag)),this._defaultNormalShader},n.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new n.default.Shader(this,o.normalVert,o.basicFrag)),this._defaultColorShader},n.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new n.default.Shader(this,o.pointVert,o.pointFrag)),this._defaultPointShader},n.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new n.default.Shader(this,o.lineVert,o.lineFrag)),this._defaultLineShader},n.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new n.default.Shader(this,o.fontVert,o.fontFrag)),this._defaultFontShader},n.default.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var u=new n.default.Image(1,1);u.set(0,0,255),this._emptyTexture=new n.default.Texture(this,u)}return this._emptyTexture},n.default.RendererGL.prototype.getTexture=function(u){var g=this.textures,b=!0,_=!1,w=void 0;try{for(var S,T=g[Symbol.iterator]();!(b=(S=T.next()).done);b=!0){var L=S.value;if(L.src===u)return L}}catch(P){_=!0,w=P}finally{try{b||T.return==null||T.return()}finally{if(_)throw w}}var A=new n.default.Texture(this,u);return g.push(A),A},n.default.RendererGL.prototype._setStrokeUniforms=function(u){u.bindShader(),u.setUniform("uMaterialColor",this.curStrokeColor),u.setUniform("uStrokeWeight",this.curStrokeWeight)},n.default.RendererGL.prototype._setFillUniforms=function(u){u.bindShader(),u.setUniform("uMaterialColor",this.curFillColor),u.setUniform("isTexture",!!this._tex),this._tex&&u.setUniform("uSampler",this._tex),u.setUniform("uTint",this._tint),u.setUniform("uSpecular",this._useSpecularMaterial),u.setUniform("uEmissive",this._useEmissiveMaterial),u.setUniform("uShininess",this._useShininess),u.setUniform("uUseLighting",this._enableLighting);var g=this.pointLightDiffuseColors.length/3;u.setUniform("uPointLightCount",g),u.setUniform("uPointLightLocation",this.pointLightPositions),u.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),u.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors);var b=this.directionalLightDiffuseColors.length/3;u.setUniform("uDirectionalLightCount",b),u.setUniform("uLightingDirection",this.directionalLightDirections),u.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),u.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors);var _=this.ambientLightColors.length/3;u.setUniform("uAmbientLightCount",_),u.setUniform("uAmbientColor",this.ambientLightColors);var w=this.spotLightDiffuseColors.length/3;u.setUniform("uSpotLightCount",w),u.setUniform("uSpotLightAngle",this.spotLightAngle),u.setUniform("uSpotLightConc",this.spotLightConc),u.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),u.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),u.setUniform("uSpotLightLocation",this.spotLightPositions),u.setUniform("uSpotLightDirection",this.spotLightDirections),u.setUniform("uConstantAttenuation",this.constantAttenuation),u.setUniform("uLinearAttenuation",this.linearAttenuation),u.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),u.bindTextures()},n.default.RendererGL.prototype._setPointUniforms=function(u){u.bindShader(),u.setUniform("uMaterialColor",this.curStrokeColor),u.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},n.default.RendererGL.prototype._bindBuffer=function(u,g,b,_,w){if(g=g||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(g,u),b!==void 0){var S=new(_||Float32Array)(b);this.GL.bufferData(g,S,w||this.GL.STATIC_DRAW)}},n.default.RendererGL.prototype._arraysEqual=function(u,g){var b=u.length;if(b!==g.length)return!1;for(var _=0;_<b;_++)if(u[_]!==g[_])return!1;return!0},n.default.RendererGL.prototype._isTypedArray=function(u){return u instanceof Uint32Array},n.default.RendererGL.prototype._flatten=function(u){if(u.length===0)return[];if(2e4<u.length){var g,b=Object.prototype.toString,_=[],w=u.slice();for(g=w.pop();b.call(g)==="[object Array]"?w.push.apply(w,s(g)):_.push(g),w.length&&(g=w.pop())!==void 0;);return _.reverse(),_}var S;return(S=[]).concat.apply(S,s(u))},n.default.RendererGL.prototype._vToNArray=function(u){var g=[],b=!0,_=!1,w=void 0;try{for(var S,T=u[Symbol.iterator]();!(b=(S=T.next()).done);b=!0){var L=S.value;g.push(L.x,L.y,L.z)}}catch(A){_=!0,w=A}finally{try{b||T.return==null||T.return()}finally{if(_)throw w}}return g},n.default.prototype._assert3d=function(u){if(!this._renderer.isP3D)throw new Error("".concat(u,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},n.default.RendererGL.prototype._initTessy=function(){var u=new h.default.GluTesselator;return u.gluTessCallback(h.default.gluEnum.GLU_TESS_VERTEX_DATA,function(g,b){b[b.length]=g[0],b[b.length]=g[1],b[b.length]=g[2]}),u.gluTessCallback(h.default.gluEnum.GLU_TESS_BEGIN,function(g){g!==h.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(g))}),u.gluTessCallback(h.default.gluEnum.GLU_TESS_ERROR,function(g){console.log("error callback"),console.log("error number: ".concat(g))}),u.gluTessCallback(h.default.gluEnum.GLU_TESS_COMBINE,function(g,b,_){return[g[0],g[1],g[2]]}),u.gluTessCallback(h.default.gluEnum.GLU_TESS_EDGE_FLAG,function(g){}),u},n.default.RendererGL.prototype._triangulate=function(u){this._tessy.gluTessNormal(0,0,1);var g=[];this._tessy.gluTessBeginPolygon(g);for(var b=0;b<u.length;b++){this._tessy.gluTessBeginContour();for(var _=u[b],w=0;w<_.length;w+=3){var S=[_[w],_[w+1],_[w+2]];this._tessy.gluTessVertex(S,S)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),g},n.default.RendererGL.prototype._bezierCoefficients=function(u){var g=u*u,b=1-u,_=b*b;return[_*b,3*_*u,3*b*g,g*u]},n.default.RendererGL.prototype._quadraticCoefficients=function(u){var g=1-u;return[g*g,2*g*u,u*u]},n.default.RendererGL.prototype._bezierToCatmull=function(u){return[u[1],u[1]+(u[2]-u[0])/this._curveTightness,u[2]-(u[3]-u[1])/this._curveTightness,u[2]]};var d=n.default.RendererGL;l.default=d},{"../core/constants":253,"../core/main":264,"../core/p5.Renderer":267,"./p5.Camera":312,"./p5.Matrix":314,"./p5.Shader":319,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,libtess:237,path:240}],319:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c,n=(c=t("../core/main"))&&c.__esModule?c:{default:c};n.default.Shader=function(h,m,p){this._renderer=h,this._vertSrc=m,this._fragSrc=p,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},n.default.Shader.prototype.init=function(){if(this._glProgram===0){var h=this._renderer.GL;if(this._vertShader=h.createShader(h.VERTEX_SHADER),h.shaderSource(this._vertShader,this._vertSrc),h.compileShader(this._vertShader),!h.getShaderParameter(this._vertShader,h.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(h.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=h.createShader(h.FRAGMENT_SHADER),h.shaderSource(this._fragShader,this._fragSrc),h.compileShader(this._fragShader),!h.getShaderParameter(this._fragShader,h.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(h.getShaderInfoLog(this._fragShader))),null;this._glProgram=h.createProgram(),h.attachShader(this._glProgram,this._vertShader),h.attachShader(this._glProgram,this._fragShader),h.linkProgram(this._glProgram),h.getProgramParameter(this._glProgram,h.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(h.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},n.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var h=this._renderer.GL,m=h.getProgramParameter(this._glProgram,h.ACTIVE_ATTRIBUTES),p=0;p<m;++p){var s=h.getActiveAttrib(this._glProgram,p),i=s.name,o=h.getAttribLocation(this._glProgram,i),d={};d.name=i,d.location=o,d.index=p,d.type=s.type,d.size=s.size,this.attributes[i]=d}this._loadedAttributes=!0}},n.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var h=this._renderer.GL,m=h.getProgramParameter(this._glProgram,h.ACTIVE_UNIFORMS),p=0,s=0;s<m;++s){var i=h.getActiveUniform(this._glProgram,s),o={};o.location=h.getUniformLocation(this._glProgram,i.name),o.size=i.size;var d=i.name;1<i.size&&(d=d.substring(0,d.indexOf("[0]"))),o.name=d,o.type=i.type,o._cachedData=void 0,o.type===h.SAMPLER_2D&&(o.samplerIndex=p,p++,this.samplers.push(o)),o.isArray=1<i.size||o.type===h.FLOAT_MAT3||o.type===h.FLOAT_MAT4||o.type===h.FLOAT_VEC2||o.type===h.FLOAT_VEC3||o.type===h.FLOAT_VEC4||o.type===h.INT_VEC2||o.type===h.INT_VEC4||o.type===h.INT_VEC3,this.uniforms[d]=o}this._loadedUniforms=!0}},n.default.Shader.prototype.compile=function(){},n.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},n.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},n.default.Shader.prototype.bindTextures=function(){var h=this._renderer.GL,m=!0,p=!1,s=void 0;try{for(var i,o=this.samplers[Symbol.iterator]();!(m=(i=o.next()).done);m=!0){var d=i.value,u=d.texture;u===void 0&&(u=this._renderer._getEmptyTexture()),h.activeTexture(h.TEXTURE0+d.samplerIndex),u.bindTexture(),u.update(),h.uniform1i(d.location,d.samplerIndex)}}catch(g){p=!0,s=g}finally{try{m||o.return==null||o.return()}finally{if(p)throw s}}},n.default.Shader.prototype.updateTextures=function(){var h=!0,m=!1,p=void 0;try{for(var s,i=this.samplers[Symbol.iterator]();!(h=(s=i.next()).done);h=!0){var o=s.value.texture;o&&o.update()}}catch(d){m=!0,p=d}finally{try{h||i.return==null||i.return()}finally{if(m)throw p}}},n.default.Shader.prototype.unbindTextures=function(){},n.default.Shader.prototype._setMatrixUniforms=function(){var h=this._renderer._curCamera.cameraMatrix,m=this._renderer.uPMatrix,p=this._renderer.uMVMatrix,s=p.copy();s.mult(m),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",h.mat4),this.setUniform("uProjectionMatrix",m.mat4),this.setUniform("uModelViewMatrix",p.mat4),this.setUniform("uModelViewProjectionMatrix",s.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},n.default.Shader.prototype.useProgram=function(){var h=this._renderer.GL;return this._renderer._curShader!==this&&(h.useProgram(this._glProgram),this._renderer._curShader=this),this},n.default.Shader.prototype.setUniform=function(h,m){var p=this.uniforms[h];if(p){var s=this._renderer.GL;if(p.isArray){if(p._cachedData&&this._renderer._arraysEqual(p._cachedData,m))return;p._cachedData=m.slice(0)}else{if(p._cachedData&&p._cachedData===m)return;Array.isArray(m)?p._cachedData=m.slice(0):p._cachedData=m}var i=p.location;switch(this.useProgram(),p.type){case s.BOOL:m===!0?s.uniform1i(i,1):s.uniform1i(i,0);break;case s.INT:1<p.size?m.length&&s.uniform1iv(i,m):s.uniform1i(i,m);break;case s.FLOAT:1<p.size?m.length&&s.uniform1fv(i,m):s.uniform1f(i,m);break;case s.FLOAT_MAT3:s.uniformMatrix3fv(i,!1,m);break;case s.FLOAT_MAT4:s.uniformMatrix4fv(i,!1,m);break;case s.FLOAT_VEC2:1<p.size?m.length&&s.uniform2fv(i,m):s.uniform2f(i,m[0],m[1]);break;case s.FLOAT_VEC3:1<p.size?m.length&&s.uniform3fv(i,m):s.uniform3f(i,m[0],m[1],m[2]);break;case s.FLOAT_VEC4:1<p.size?m.length&&s.uniform4fv(i,m):s.uniform4f(i,m[0],m[1],m[2],m[3]);break;case s.INT_VEC2:1<p.size?m.length&&s.uniform2iv(i,m):s.uniform2i(i,m[0],m[1]);break;case s.INT_VEC3:1<p.size?m.length&&s.uniform3iv(i,m):s.uniform3i(i,m[0],m[1],m[2]);break;case s.INT_VEC4:1<p.size?m.length&&s.uniform4iv(i,m):s.uniform4i(i,m[0],m[1],m[2],m[3]);break;case s.SAMPLER_2D:s.activeTexture(s.TEXTURE0+p.samplerIndex),p.texture=m instanceof n.default.Texture?m:this._renderer.getTexture(m),s.uniform1i(i,p.samplerIndex)}return this}},n.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},n.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},n.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},n.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},n.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},n.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},n.default.Shader.prototype.enableAttrib=function(h,m,p,s,i,o){if(h){var d=h.location;if(d!==-1){var u=this._renderer.GL;h.enabled||(u.enableVertexAttribArray(d),h.enabled=!0),this._renderer.GL.vertexAttribPointer(d,m,p||u.FLOAT,s||!1,i||0,o||0)}}return this};var f=n.default.Shader;l.default=f},{"../core/main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],320:[function(t,a,l){function c(s){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(s){if(s&&s.__esModule)return s;if(s===null||c(s)!=="object"&&typeof s!="function")return{default:s};var i=m();if(i&&i.has(s))return i.get(s);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var g=d?Object.getOwnPropertyDescriptor(s,u):null;g&&(g.get||g.set)?Object.defineProperty(o,u,g):o[u]=s[u]}return o.default=s,i&&i.set(s,o),o}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return m=function(){return s},s}f.default.Texture=function(s,i,o){this._renderer=s;var d=this._renderer.GL;(o=o||{}).dataType===d.FLOAT&&(d.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),d.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=i,this.glTex=void 0,this.glTarget=d.TEXTURE_2D,this.glFormat=o.format||d.RGBA,this.mipmaps=!1,this.glMinFilter=o.minFilter||d.LINEAR,this.glMagFilter=o.magFilter||d.LINEAR,this.glWrapS=o.wrapS||d.CLAMP_TO_EDGE,this.glWrapT=o.wrapT||d.CLAMP_TO_EDGE,this.glDataType=o.dataType||d.UNSIGNED_BYTE,this.isSrcMediaElement=f.default.MediaElement!==void 0&&i instanceof f.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=f.default.Element!==void 0&&i instanceof f.default.Element&&!(i instanceof f.default.Graphics),this.isSrcP5Image=i instanceof f.default.Image,this.isSrcP5Graphics=i instanceof f.default.Graphics,this.isImageData=typeof ImageData!="undefined"&&i instanceof ImageData;var u=this._getTextureDataFromSource();return this.width=u.width,this.height=u.height,this.init(u),this},f.default.Texture.prototype._getTextureDataFromSource=function(){var s;return this.isSrcP5Image?s=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcHTMLElement?s=this.src.elt:this.isImageData&&(s=this.src),s},f.default.Texture.prototype.init=function(s){var i=this._renderer.GL;if(this.glTex=i.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,this.glMagFilter),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata){var o=new Uint8Array([1,1,1,1]);i.texImage2D(this.glTarget,0,i.RGBA,1,1,0,this.glFormat,this.glDataType,o)}else i.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,s)},f.default.Texture.prototype.update=function(){var s=this.src;if(s.width===0||s.height===0)return!1;var i=this._getTextureDataFromSource(),o=!1,d=this._renderer.GL;return i.width!==this.width||i.height!==this.height?(o=!0,this.width=i.width,this.height=i.height,this.isSrcP5Image?s.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&s.setModified(!0)):this.isSrcP5Image?s.isModified()&&(o=!0,s.setModified(!1)):this.isSrcMediaElement?s.isModified()?(o=!0,s.setModified(!1)):s.loadedmetadata&&this._videoPrevUpdateTime!==s.time()&&(this._videoPrevUpdateTime=s.time(),o=!0):this.isImageData?s._dirty&&(o=!(s._dirty=!1)):o=!0,o&&(this.bindTexture(),d.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,i)),o},f.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},f.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},f.default.Texture.prototype.setInterpolation=function(s,i){var o=this._renderer.GL;s===h.NEAREST?this.glMinFilter=o.NEAREST:this.glMinFilter=o.LINEAR,i===h.NEAREST?this.glMagFilter=o.NEAREST:this.glMagFilter=o.LINEAR,this.bindTexture(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,this.glMinFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},f.default.Texture.prototype.setWrapMode=function(s,i){function o(b){return(b&b-1)==0}var d=this._renderer.GL,u=o(this.width),g=o(this.height);s===h.REPEAT?u&&g?this.glWrapS=d.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=d.CLAMP_TO_EDGE):s===h.MIRROR?u&&g?this.glWrapS=d.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=d.CLAMP_TO_EDGE):this.glWrapS=d.CLAMP_TO_EDGE,i===h.REPEAT?u&&g?this.glWrapT=d.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=d.CLAMP_TO_EDGE):i===h.MIRROR?u&&g?this.glWrapT=d.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=d.CLAMP_TO_EDGE):this.glWrapT=d.CLAMP_TO_EDGE,this.bindTexture(),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,this.glWrapS),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var p=f.default.Texture;l.default=p},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],321:[function(t,a,l){function c(d){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(d)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var n,f=(n=t("../core/main"))&&n.__esModule?n:{default:n},h=function(d){if(d&&d.__esModule)return d;if(d===null||c(d)!=="object"&&typeof d!="function")return{default:d};var u=m();if(u&&u.has(d))return u.get(d);var g={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in d)if(Object.prototype.hasOwnProperty.call(d,_)){var w=b?Object.getOwnPropertyDescriptor(d,_):null;w&&(w.get||w.set)?Object.defineProperty(g,_,w):g[_]=d[_]}return g.default=d,u&&u.set(d,g),g}(t("../core/constants"));function m(){if(typeof WeakMap!="function")return null;var d=new WeakMap;return m=function(){return d},d}t("./p5.Shader"),t("./p5.RendererGL.Retained"),f.default.RendererGL.prototype._applyTextProperties=function(){},f.default.RendererGL.prototype.textWidth=function(d){return this._isOpenType()?this._textFont._textWidth(d,this._textSize):0};function p(d,u){this.width=d,this.height=u,this.infos=[],this.findImage=function(g){var b,_,w=this.width*this.height;if(w<g)throw new Error("font is too complex to render in 3D");for(var S=this.infos.length-1;0<=S;--S){var T=this.infos[S];if(T.index+g<w){_=(b=T).imageData;break}}if(!b){try{_=new ImageData(this.width,this.height)}catch{var L=document.getElementsByTagName("canvas")[0],A=!L;L||((L=document.createElement("canvas")).style.display="none",document.body.appendChild(L));var P=L.getContext("2d");P&&(_=P.createImageData(this.width,this.height)),A&&document.body.removeChild(L)}b={index:0,imageData:_},this.infos.push(b)}var R=b.index;return b.index+=g,_._dirty=!0,{imageData:_,index:R}}}function s(d,u,g,b,_){var w=d.imageData.data,S=4*d.index++;w[S++]=u,w[S++]=g,w[S++]=b,w[S++]=_}function i(d){this.font=d,this.strokeImageInfos=new p(64,64),this.colDimImageInfos=new p(64,64),this.rowDimImageInfos=new p(64,64),this.colCellImageInfos=new p(64,64),this.rowCellImageInfos=new p(64,64),this.glyphInfos={},this.getGlyphInfo=function(u){var g=this.glyphInfos[u.index];if(g)return g;var b,_=u.getBoundingBox(),w=_.x1,S=_.y1,T=_.x2-w,L=_.y2-S,A=u.path.commands;if(T==0||L==0||!A.length)return this.glyphInfos[u.index]={};var P,R,D,F,I=[],k=[],U=[];for(b=8;0<=b;--b)U.push([]);for(b=8;0<=b;--b)k.push([]);function q(Ie,ie,ee){var Le=I.length;function De(H,G,Z){for(var oe=H.length;0<oe--;){var xe=H[oe];xe<G&&(G=xe),Z<xe&&(Z=xe)}return{min:G,max:Z}}I.push(ee);for(var Ze=De(Ie,1,0),Ce=Math.max(Math.floor(9*Ze.min),0),je=Math.min(Math.ceil(9*Ze.max),9),Ee=Ce;Ee<je;++Ee)U[Ee].push(Le);for(var qe=De(ie,1,0),be=Math.max(Math.floor(9*qe.min),0),Xe=Math.min(Math.ceil(9*qe.max),9),O=be;O<Xe;++O)k[O].push(Le)}function Q(Ie){return(ie=(Le=255)*Ie)<(ee=0)?ee:Le<ie?Le:ie;var ie,ee,Le}function W(Ie,ie,ee,Le){this.p0=Ie,this.c0=ie,this.c1=ee,this.p1=Le,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return f.default.Vector.sub(f.default.Vector.sub(this.p1,this.p0),f.default.Vector.mult(f.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(De){var Ze=f.default.Vector.lerp(this.p0,this.c0,De),Ce=f.default.Vector.lerp(this.c0,this.c1,De),je=f.default.Vector.lerp(Ze,Ce,De);this.c1=f.default.Vector.lerp(this.c1,this.p1,De),this.c0=f.default.Vector.lerp(Ce,this.c1,De);var Ee=f.default.Vector.lerp(je,this.c0,De),qe=new W(this.p0,Ze,je,Ee);return this.p0=Ee,qe},this.splitInflections=function(){var De=f.default.Vector.sub(this.c0,this.p0),Ze=f.default.Vector.sub(f.default.Vector.sub(this.c1,this.c0),De),Ce=f.default.Vector.sub(f.default.Vector.sub(f.default.Vector.sub(this.p1,this.c1),De),f.default.Vector.mult(Ze,2)),je=[],Ee=Ze.x*Ce.y-Ze.y*Ce.x;if(Ee!==0){var qe=De.x*Ce.y-De.y*Ce.x,be=De.x*Ze.y-De.y*Ze.x,Xe=qe*qe-4*Ee*be;if(0<=Xe){Ee<0&&(Ee=-Ee,qe=-qe,be=-be);var O=Math.sqrt(Xe),H=(-qe-O)/(2*Ee),G=(-qe+O)/(2*Ee);0<H&&H<1&&(je.push(this.split(H)),G=1-(1-G)/(1-H)),0<G&&G<1&&je.push(this.split(G))}}return je.push(this),je}}function K(Ie,ie,ee,Le,De,Ze,Ce,je){var Ee=new W(new f.default.Vector(Ie,ie),new f.default.Vector(ee,Le),new f.default.Vector(De,Ze),new f.default.Vector(Ce,je)).splitInflections(),qe=[],be=30/o,Xe=!0,O=!1,H=void 0;try{for(var G,Z=Ee[Symbol.iterator]();!(Xe=(G=Z.next()).done);Xe=!0){for(var oe=G.value,xe=[],Se=void 0;!(.125<=(Se=be/oe.quadError()));){var ke=Math.pow(Se,.3333333333333333),_e=oe.split(ke),Ye=oe.split(1-ke/(1-ke));qe.push(_e),xe.push(oe),oe=Ye}Se<1&&qe.push(oe.split(.5)),qe.push(oe),Array.prototype.push.apply(qe,xe.reverse())}}catch(it){O=!0,H=it}finally{try{Xe||Z.return==null||Z.return()}finally{if(O)throw H}}return qe}function Y(Ie,ie,ee,Le){q([Ie,ee],[ie,Le],{x:Ie,y:ie,cx:(Ie+ee)/2,cy:(ie+Le)/2})}function se(Ie,ie,ee,Le){return Math.abs(ee-Ie)<1e-5&&Math.abs(Le-ie)<1e-5}var ue=!0,ge=!1,de=void 0;try{for(var Pe,ae=A[Symbol.iterator]();!(ue=(Pe=ae.next()).done);ue=!0){var we=Pe.value,j=(we.x-w)/T,B=(we.y-S)/L;if(!se(P,R,j,B)){switch(we.type){case"M":D=j,F=B;break;case"L":Y(P,R,j,B);break;case"Q":var V=(we.x1-w)/T,te=(we.y1-S)/L;q([P,j,V],[R,B,te],{x:P,y:R,cx:V,cy:te});break;case"Z":se(P,R,D,F)?I.push({x:P,y:R}):(Y(P,R,D,F),I.push({x:D,y:F}));break;case"C":for(var $=K(P,R,(we.x1-w)/T,(we.y1-S)/L,(we.x2-w)/T,(we.y2-S)/L,j,B),X=0;X<$.length;X++){var ye=$[X].toQuadratic();q([ye.x,ye.x1,ye.cx],[ye.y,ye.y1,ye.cy],ye)}break;default:throw new Error("unknown command type: ".concat(we.type))}P=j,R=B}}}catch(Ie){ge=!0,de=Ie}finally{try{ue||ae.return==null||ae.return()}finally{if(ge)throw de}}for(var ne=I.length,pe=this.strokeImageInfos.findImage(ne),ve=pe.index,he=0;he<ne;++he){var Ae=I[he];s(pe,Q(Ae.x),Q(Ae.y),Q(Ae.cx),Q(Ae.cy))}function Oe(Ie,ie,ee){for(var Le=Ie.length,De=ie.findImage(Le),Ze=De.index,Ce=0,je=0;je<Le;++je)Ce+=Ie[je].length;for(var Ee=ee.findImage(Ce),qe=0;qe<Le;++qe){var be=Ie[qe],Xe=be.length,O=Ee.index;s(De,O>>7,127&O,Xe>>7,127&Xe);for(var H=0;H<Xe;++H){var G=be[H]+ve;s(Ee,G>>7,127&G,0,0)}}return{cellImageInfo:Ee,dimOffset:Ze,dimImageInfo:De}}return(g=this.glyphInfos[u.index]={glyph:u,uGlyphRect:[_.x1,-_.y1,_.x2,-_.y2],strokeImageInfo:pe,strokes:I,colInfo:Oe(U,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Oe(k,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[g.colInfo.dimOffset,g.rowInfo.dimOffset],g}}var o=Math.sqrt(3);f.default.RendererGL.prototype._renderText=function(d,u,g,b,_){if(this._textFont&&typeof this._textFont!="string"){if(!(_<=b)&&this._doFill){if(!this._isOpenType())return console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported"),d;d.push();var w=this._doStroke,S=this.drawMode;this._doStroke=!1,this.drawMode=h.TEXTURE;var T=this._textFont.font,L=this._textFont._fontInfo;L=L||(this._textFont._fontInfo=new i(T));var A=this._textFont._handleAlignment(this,u,g,b),P=this._textSize/T.unitsPerEm;this.translate(A.x,A.y,0),this.scale(P,P,1);var R=this.GL,D=!this._defaultFontShader,F=this._getFontShader();F.init(),F.bindShader(),D&&(F.setUniform("uGridImageSize",[64,64]),F.setUniform("uCellsImageSize",[64,64]),F.setUniform("uStrokeImageSize",[64,64]),F.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor);var I=this.retainedMode.geometry.glyph;if(!I){var k=this._textGeom=new f.default.Geometry(1,1,function(){for(var $=0;$<=1;$++)for(var X=0;X<=1;X++)this.vertices.push(new f.default.Vector(X,$,0)),this.uvs.push(X,$)});k.computeFaces().computeNormals(),I=this.createBuffers("glyph",k)}var U=!0,q=!1,Q=void 0;try{for(var W,K=this.retainedMode.buffers.text[Symbol.iterator]();!(U=(W=K.next()).done);U=!0)W.value._prepareBuffer(I,F)}catch($){q=!0,Q=$}finally{try{U||K.return==null||K.return()}finally{if(q)throw Q}}this._bindBuffer(I.indexBuffer,R.ELEMENT_ARRAY_BUFFER),F.setUniform("uMaterialColor",this.curFillColor);try{var Y=0,se=null,ue=T.stringToGlyphs(u),ge=!0,de=!1,Pe=void 0;try{for(var ae,we=ue[Symbol.iterator]();!(ge=(ae=we.next()).done);ge=!0){var j=ae.value;se&&(Y+=T.getKerningValue(se,j));var B=L.getGlyphInfo(j);if(B.uGlyphRect){var V=B.rowInfo,te=B.colInfo;F.setUniform("uSamplerStrokes",B.strokeImageInfo.imageData),F.setUniform("uSamplerRowStrokes",V.cellImageInfo.imageData),F.setUniform("uSamplerRows",V.dimImageInfo.imageData),F.setUniform("uSamplerColStrokes",te.cellImageInfo.imageData),F.setUniform("uSamplerCols",te.dimImageInfo.imageData),F.setUniform("uGridOffset",B.uGridOffset),F.setUniform("uGlyphRect",B.uGlyphRect),F.setUniform("uGlyphOffset",Y),F.bindTextures(),R.drawElements(R.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}Y+=j.advanceWidth,se=j}}catch($){de=!0,Pe=$}finally{try{ge||we.return==null||we.return()}finally{if(de)throw Pe}}}finally{F.unbindShader(),this._doStroke=w,this.drawMode=S,d.pop()}return d}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":253,"../core/main":264,"./p5.RendererGL.Retained":317,"./p5.Shader":319,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}]},{},[248])(248)})})(th);var Pd=Rd(th.exports);/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const tl="140",Dd=0,pu=1,Id=2,rh=1,jd=2,ms=3,Ui=0,qr=1,$n=2,nh=1,jn=0,Ni=1,mu=2,gu=3,yu=4,Od=5,Di=100,kd=101,Nd=102,vu=103,bu=104,Fd=200,Ud=201,Bd=202,Gd=203,ih=204,sh=205,zd=206,Vd=207,Hd=208,Wd=209,qd=210,Xd=0,Yd=1,Zd=2,Fa=3,Kd=4,Jd=5,Qd=6,$d=7,Lo=0,ef=1,tf=2,yn=0,rf=1,nf=2,sf=3,of=4,af=5,oh=300,Bi=301,Gi=302,Ua=303,Ba=304,Co=306,zi=1e3,Pr=1001,Mo=1002,ur=1003,Ga=1004,za=1005,vr=1006,ah=1007,Yi=1008,ei=1009,lf=1010,uf=1011,xs=1012,cf=1013,wo=1014,Dn=1015,ws=1016,hf=1017,df=1018,Fi=1020,ff=1021,pf=1022,Dr=1023,mf=1024,gf=1025,Jn=1026,Vi=1027,yf=1028,vf=1029,bf=1030,_f=1031,xf=1033,Qo=33776,$o=33777,ea=33778,ta=33779,_u=35840,xu=35841,wu=35842,Su=35843,wf=36196,Mu=37492,Tu=37496,Eu=37808,Au=37809,Lu=37810,Cu=37811,Ru=37812,Pu=37813,Du=37814,Iu=37815,ju=37816,Ou=37817,ku=37818,Nu=37819,Fu=37820,Uu=37821,Bu=36492,Sf=2200,Mf=2201,Tf=2202,Ss=2300,Hi=2301,ra=2302,Ii=2400,ji=2401,To=2402,rl=2500,lh=2501,Ef=0,Af=1,uh=2,Fn=3e3,kt=3001,Lf=3200,Cf=3201,ni=0,Rf=1,pn="srgb",Kn="srgb-linear",na=7680,Pf=519,Ms=35044,Eo=35048,Gu="300 es",Va=1035;class ii{addEventListener(e,r){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[e]===void 0&&(t[e]=[]),t[e].indexOf(r)===-1&&t[e].push(r)}hasEventListener(e,r){if(this._listeners===void 0)return!1;const t=this._listeners;return t[e]!==void 0&&t[e].indexOf(r)!==-1}removeEventListener(e,r){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const l=a.indexOf(r);l!==-1&&a.splice(l,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const a=t.slice(0);for(let l=0,c=a.length;l<c;l++)a[l].call(this,e);e.target=null}}}const pr=[];for(let v=0;v<256;v++)pr[v]=(v<16?"0":"")+v.toString(16);let zu=1234567;const ys=Math.PI/180,Ts=180/Math.PI;function Ir(){const v=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,t=Math.random()*4294967295|0;return(pr[v&255]+pr[v>>8&255]+pr[v>>16&255]+pr[v>>24&255]+"-"+pr[e&255]+pr[e>>8&255]+"-"+pr[e>>16&15|64]+pr[e>>24&255]+"-"+pr[r&63|128]+pr[r>>8&255]+"-"+pr[r>>16&255]+pr[r>>24&255]+pr[t&255]+pr[t>>8&255]+pr[t>>16&255]+pr[t>>24&255]).toLowerCase()}function mr(v,e,r){return Math.max(e,Math.min(r,v))}function nl(v,e){return(v%e+e)%e}function Df(v,e,r,t,a){return t+(v-e)*(a-t)/(r-e)}function If(v,e,r){return v!==e?(r-v)/(e-v):0}function vs(v,e,r){return(1-r)*v+r*e}function jf(v,e,r,t){return vs(v,e,1-Math.exp(-r*t))}function Of(v,e=1){return e-Math.abs(nl(v,e*2)-e)}function kf(v,e,r){return v<=e?0:v>=r?1:(v=(v-e)/(r-e),v*v*(3-2*v))}function Nf(v,e,r){return v<=e?0:v>=r?1:(v=(v-e)/(r-e),v*v*v*(v*(v*6-15)+10))}function Ff(v,e){return v+Math.floor(Math.random()*(e-v+1))}function Uf(v,e){return v+Math.random()*(e-v)}function Bf(v){return v*(.5-Math.random())}function Gf(v){v!==void 0&&(zu=v);let e=zu+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function zf(v){return v*ys}function Vf(v){return v*Ts}function Ha(v){return(v&v-1)===0&&v!==0}function ch(v){return Math.pow(2,Math.ceil(Math.log(v)/Math.LN2))}function Ao(v){return Math.pow(2,Math.floor(Math.log(v)/Math.LN2))}function Hf(v,e,r,t,a){const l=Math.cos,c=Math.sin,n=l(r/2),f=c(r/2),h=l((e+t)/2),m=c((e+t)/2),p=l((e-t)/2),s=c((e-t)/2),i=l((t-e)/2),o=c((t-e)/2);switch(a){case"XYX":v.set(n*m,f*p,f*s,n*h);break;case"YZY":v.set(f*s,n*m,f*p,n*h);break;case"ZXZ":v.set(f*p,f*s,n*m,n*h);break;case"XZX":v.set(n*m,f*o,f*i,n*h);break;case"YXY":v.set(f*i,n*m,f*o,n*h);break;case"ZYZ":v.set(f*o,f*i,n*m,n*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function Wf(v,e){switch(e.constructor){case Float32Array:return v;case Uint16Array:return v/65535;case Uint8Array:return v/255;case Int16Array:return Math.max(v/32767,-1);case Int8Array:return Math.max(v/127,-1);default:throw new Error("Invalid component type.")}}function qf(v,e){switch(e.constructor){case Float32Array:return v;case Uint16Array:return Math.round(v*65535);case Uint8Array:return Math.round(v*255);case Int16Array:return Math.round(v*32767);case Int8Array:return Math.round(v*127);default:throw new Error("Invalid component type.")}}var Xf=Object.freeze({__proto__:null,DEG2RAD:ys,RAD2DEG:Ts,generateUUID:Ir,clamp:mr,euclideanModulo:nl,mapLinear:Df,inverseLerp:If,lerp:vs,damp:jf,pingpong:Of,smoothstep:kf,smootherstep:Nf,randInt:Ff,randFloat:Uf,randFloatSpread:Bf,seededRandom:Gf,degToRad:zf,radToDeg:Vf,isPowerOfTwo:Ha,ceilPowerOfTwo:ch,floorPowerOfTwo:Ao,setQuaternionFromProperEuler:Hf,normalize:qf,denormalize:Wf});class tt{constructor(e=0,r=0){this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,r){return r!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,r)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e,r){return r!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,r)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const r=this.x,t=this.y,a=e.elements;return this.x=a[0]*r+a[3]*t+a[6],this.y=a[1]*r+a[4]*t+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this}clampLength(e,r){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(r,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,t=this.y-e.y;return r*r+t*t}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,t){return this.x=e.x+(r.x-e.x)*t,this.y=e.y+(r.y-e.y)*t,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r,t){return t!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){const t=Math.cos(r),a=Math.sin(r),l=this.x-e.x,c=this.y-e.y;return this.x=l*t-c*a+e.x,this.y=l*a+c*t+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}tt.prototype.isVector2=!0;class gr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,r,t,a,l,c,n,f,h){const m=this.elements;return m[0]=e,m[1]=a,m[2]=n,m[3]=r,m[4]=l,m[5]=f,m[6]=t,m[7]=c,m[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const r=this.elements,t=e.elements;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],this}extractBasis(e,r,t){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),t.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const t=e.elements,a=r.elements,l=this.elements,c=t[0],n=t[3],f=t[6],h=t[1],m=t[4],p=t[7],s=t[2],i=t[5],o=t[8],d=a[0],u=a[3],g=a[6],b=a[1],_=a[4],w=a[7],S=a[2],T=a[5],L=a[8];return l[0]=c*d+n*b+f*S,l[3]=c*u+n*_+f*T,l[6]=c*g+n*w+f*L,l[1]=h*d+m*b+p*S,l[4]=h*u+m*_+p*T,l[7]=h*g+m*w+p*L,l[2]=s*d+i*b+o*S,l[5]=s*u+i*_+o*T,l[8]=s*g+i*w+o*L,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){const e=this.elements,r=e[0],t=e[1],a=e[2],l=e[3],c=e[4],n=e[5],f=e[6],h=e[7],m=e[8];return r*c*m-r*n*h-t*l*m+t*n*f+a*l*h-a*c*f}invert(){const e=this.elements,r=e[0],t=e[1],a=e[2],l=e[3],c=e[4],n=e[5],f=e[6],h=e[7],m=e[8],p=m*c-n*h,s=n*f-m*l,i=h*l-c*f,o=r*p+t*s+a*i;if(o===0)return this.set(0,0,0,0,0,0,0,0,0);const d=1/o;return e[0]=p*d,e[1]=(a*h-m*t)*d,e[2]=(n*t-a*c)*d,e[3]=s*d,e[4]=(m*r-a*f)*d,e[5]=(a*l-n*r)*d,e[6]=i*d,e[7]=(t*f-h*r)*d,e[8]=(c*r-t*l)*d,this}transpose(){let e;const r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,t,a,l,c,n){const f=Math.cos(l),h=Math.sin(l);return this.set(t*f,t*h,-t*(f*c+h*n)+c+e,-a*h,a*f,-a*(-h*c+f*n)+n+r,0,0,1),this}scale(e,r){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=r,t[4]*=r,t[7]*=r,this}rotate(e){const r=Math.cos(e),t=Math.sin(e),a=this.elements,l=a[0],c=a[3],n=a[6],f=a[1],h=a[4],m=a[7];return a[0]=r*l+t*f,a[3]=r*c+t*h,a[6]=r*n+t*m,a[1]=-t*l+r*f,a[4]=-t*c+r*h,a[7]=-t*n+r*m,this}translate(e,r){const t=this.elements;return t[0]+=e*t[2],t[3]+=e*t[5],t[6]+=e*t[8],t[1]+=r*t[2],t[4]+=r*t[5],t[7]+=r*t[8],this}equals(e){const r=this.elements,t=e.elements;for(let a=0;a<9;a++)if(r[a]!==t[a])return!1;return!0}fromArray(e,r=0){for(let t=0;t<9;t++)this.elements[t]=e[t+r];return this}toArray(e=[],r=0){const t=this.elements;return e[r]=t[0],e[r+1]=t[1],e[r+2]=t[2],e[r+3]=t[3],e[r+4]=t[4],e[r+5]=t[5],e[r+6]=t[6],e[r+7]=t[7],e[r+8]=t[8],e}clone(){return new this.constructor().fromArray(this.elements)}}gr.prototype.isMatrix3=!0;function hh(v){for(let e=v.length-1;e>=0;--e)if(v[e]>65535)return!0;return!1}function Es(v){return document.createElementNS("http://www.w3.org/1999/xhtml",v)}function Qn(v){return v<.04045?v*.0773993808:Math.pow(v*.9478672986+.0521327014,2.4)}function So(v){return v<.0031308?v*12.92:1.055*Math.pow(v,.41666)-.055}const ia={[pn]:{[Kn]:Qn},[Kn]:{[pn]:So}},zr={legacyMode:!0,get workingColorSpace(){return Kn},set workingColorSpace(v){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(v,e,r){if(this.legacyMode||e===r||!e||!r)return v;if(ia[e]&&ia[e][r]!==void 0){const t=ia[e][r];return v.r=t(v.r),v.g=t(v.g),v.b=t(v.b),v}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(v,e){return this.convert(v,this.workingColorSpace,e)},toWorkingColorSpace:function(v,e){return this.convert(v,e,this.workingColorSpace)}},dh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},lr={r:0,g:0,b:0},Vr={h:0,s:0,l:0},Vs={h:0,s:0,l:0};function sa(v,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?v+(e-v)*6*r:r<1/2?e:r<2/3?v+(e-v)*6*(2/3-r):v}function Hs(v,e){return e.r=v.r,e.g=v.g,e.b=v.b,e}class at{constructor(e,r,t){return r===void 0&&t===void 0?this.set(e):this.setRGB(e,r,t)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,r=pn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,zr.toWorkingColorSpace(this,r),this}setRGB(e,r,t,a=Kn){return this.r=e,this.g=r,this.b=t,zr.toWorkingColorSpace(this,a),this}setHSL(e,r,t,a=Kn){if(e=nl(e,1),r=mr(r,0,1),t=mr(t,0,1),r===0)this.r=this.g=this.b=t;else{const l=t<=.5?t*(1+r):t+r-t*r,c=2*t-l;this.r=sa(c,l,e+1/3),this.g=sa(c,l,e),this.b=sa(c,l,e-1/3)}return zr.toWorkingColorSpace(this,a),this}setStyle(e,r=pn){function t(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let l;const c=a[1],n=a[2];switch(c){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(l[1],10))/255,this.g=Math.min(255,parseInt(l[2],10))/255,this.b=Math.min(255,parseInt(l[3],10))/255,zr.toWorkingColorSpace(this,r),t(l[4]),this;if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(l[1],10))/100,this.g=Math.min(100,parseInt(l[2],10))/100,this.b=Math.min(100,parseInt(l[3],10))/100,zr.toWorkingColorSpace(this,r),t(l[4]),this;break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n)){const f=parseFloat(l[1])/360,h=parseInt(l[2],10)/100,m=parseInt(l[3],10)/100;return t(l[4]),this.setHSL(f,h,m,r)}break}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const l=a[1],c=l.length;if(c===3)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,zr.toWorkingColorSpace(this,r),this;if(c===6)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,zr.toWorkingColorSpace(this,r),this}return e&&e.length>0?this.setColorName(e,r):this}setColorName(e,r=pn){const t=dh[e.toLowerCase()];return t!==void 0?this.setHex(t,r):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Qn(e.r),this.g=Qn(e.g),this.b=Qn(e.b),this}copyLinearToSRGB(e){return this.r=So(e.r),this.g=So(e.g),this.b=So(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=pn){return zr.fromWorkingColorSpace(Hs(this,lr),e),mr(lr.r*255,0,255)<<16^mr(lr.g*255,0,255)<<8^mr(lr.b*255,0,255)<<0}getHexString(e=pn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,r=Kn){zr.fromWorkingColorSpace(Hs(this,lr),r);const t=lr.r,a=lr.g,l=lr.b,c=Math.max(t,a,l),n=Math.min(t,a,l);let f,h;const m=(n+c)/2;if(n===c)f=0,h=0;else{const p=c-n;switch(h=m<=.5?p/(c+n):p/(2-c-n),c){case t:f=(a-l)/p+(a<l?6:0);break;case a:f=(l-t)/p+2;break;case l:f=(t-a)/p+4;break}f/=6}return e.h=f,e.s=h,e.l=m,e}getRGB(e,r=Kn){return zr.fromWorkingColorSpace(Hs(this,lr),r),e.r=lr.r,e.g=lr.g,e.b=lr.b,e}getStyle(e=pn){return zr.fromWorkingColorSpace(Hs(this,lr),e),e!==pn?`color(${e} ${lr.r} ${lr.g} ${lr.b})`:`rgb(${lr.r*255|0},${lr.g*255|0},${lr.b*255|0})`}offsetHSL(e,r,t){return this.getHSL(Vr),Vr.h+=e,Vr.s+=r,Vr.l+=t,this.setHSL(Vr.h,Vr.s,Vr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this}lerpColors(e,r,t){return this.r=e.r+(r.r-e.r)*t,this.g=e.g+(r.g-e.g)*t,this.b=e.b+(r.b-e.b)*t,this}lerpHSL(e,r){this.getHSL(Vr),e.getHSL(Vs);const t=vs(Vr.h,Vs.h,r),a=vs(Vr.s,Vs.s,r),l=vs(Vr.l,Vs.l,r);return this.setHSL(t,a,l),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,r=0){return this.r=e[r],this.g=e[r+1],this.b=e[r+2],this}toArray(e=[],r=0){return e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}fromBufferAttribute(e,r){return this.r=e.getX(r),this.g=e.getY(r),this.b=e.getZ(r),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}at.NAMES=dh;at.prototype.isColor=!0;at.prototype.r=1;at.prototype.g=1;at.prototype.b=1;let pi;class si{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{pi===void 0&&(pi=Es("canvas")),pi.width=e.width,pi.height=e.height;const t=pi.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),r=pi}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const r=Es("canvas");r.width=e.width,r.height=e.height;const t=r.getContext("2d");t.drawImage(e,0,0,e.width,e.height);const a=t.getImageData(0,0,e.width,e.height),l=a.data;for(let c=0;c<l.length;c++)l[c]=Qn(l[c]/255)*255;return t.putImageData(a,0,0),r}else if(e.data){const r=e.data.slice(0);for(let t=0;t<r.length;t++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[t]=Math.floor(Qn(r[t]/255)*255):r[t]=Qn(r[t]);return{data:r,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class il{constructor(e=null){this.uuid=Ir(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const t={uuid:this.uuid,url:""},a=this.data;if(a!==null){let l;if(Array.isArray(a)){l=[];for(let c=0,n=a.length;c<n;c++)a[c].isDataTexture?l.push(oa(a[c].image)):l.push(oa(a[c]))}else l=oa(a);t.url=l}return r||(e.images[this.uuid]=t),t}}function oa(v){return typeof HTMLImageElement!="undefined"&&v instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&v instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&v instanceof ImageBitmap?si.getDataURL(v):v.data?{data:Array.prototype.slice.call(v.data),width:v.width,height:v.height,type:v.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}il.prototype.isSource=!0;let Yf=0;class ar extends ii{constructor(e=ar.DEFAULT_IMAGE,r=ar.DEFAULT_MAPPING,t=Pr,a=Pr,l=vr,c=Yi,n=Dr,f=ei,h=1,m=Fn){super(),Object.defineProperty(this,"id",{value:Yf++}),this.uuid=Ir(),this.name="",this.source=new il(e),this.mipmaps=[],this.mapping=r,this.wrapS=t,this.wrapT=a,this.magFilter=l,this.minFilter=c,this.anisotropy=h,this.format=n,this.internalFormat=null,this.type=f,this.offset=new tt(0,0),this.repeat=new tt(1,1),this.center=new tt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(t.userData=this.userData),r||(e.textures[this.uuid]=t),t}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==oh)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zi:e.x=e.x-Math.floor(e.x);break;case Pr:e.x=e.x<0?0:1;break;case Mo:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case zi:e.y=e.y-Math.floor(e.y);break;case Pr:e.y=e.y<0?0:1;break;case Mo:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}ar.DEFAULT_IMAGE=null;ar.DEFAULT_MAPPING=oh;ar.prototype.isTexture=!0;class Vt{constructor(e=0,r=0,t=0,a=1){this.x=e,this.y=r,this.z=t,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,t,a){return this.x=e,this.y=r,this.z=t,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,r){return r!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,r)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e,r){return r!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,r)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const r=this.x,t=this.y,a=this.z,l=this.w,c=e.elements;return this.x=c[0]*r+c[4]*t+c[8]*a+c[12]*l,this.y=c[1]*r+c[5]*t+c[9]*a+c[13]*l,this.z=c[2]*r+c[6]*t+c[10]*a+c[14]*l,this.w=c[3]*r+c[7]*t+c[11]*a+c[15]*l,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,t,a,l;const f=e.elements,h=f[0],m=f[4],p=f[8],s=f[1],i=f[5],o=f[9],d=f[2],u=f[6],g=f[10];if(Math.abs(m-s)<.01&&Math.abs(p-d)<.01&&Math.abs(o-u)<.01){if(Math.abs(m+s)<.1&&Math.abs(p+d)<.1&&Math.abs(o+u)<.1&&Math.abs(h+i+g-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const _=(h+1)/2,w=(i+1)/2,S=(g+1)/2,T=(m+s)/4,L=(p+d)/4,A=(o+u)/4;return _>w&&_>S?_<.01?(t=0,a=.707106781,l=.707106781):(t=Math.sqrt(_),a=T/t,l=L/t):w>S?w<.01?(t=.707106781,a=0,l=.707106781):(a=Math.sqrt(w),t=T/a,l=A/a):S<.01?(t=.707106781,a=.707106781,l=0):(l=Math.sqrt(S),t=L/l,a=A/l),this.set(t,a,l,r),this}let b=Math.sqrt((u-o)*(u-o)+(p-d)*(p-d)+(s-m)*(s-m));return Math.abs(b)<.001&&(b=1),this.x=(u-o)/b,this.y=(p-d)/b,this.z=(s-m)/b,this.w=Math.acos((h+i+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this.w=Math.max(e.w,Math.min(r.w,this.w)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this.w=Math.max(e,Math.min(r,this.w)),this}clampLength(e,r){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(r,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,t){return this.x=e.x+(r.x-e.x)*t,this.y=e.y+(r.y-e.y)*t,this.z=e.z+(r.z-e.z)*t,this.w=e.w+(r.w-e.w)*t,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r,t){return t!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Vt.prototype.isVector4=!0;class Lr extends ii{constructor(e,r,t={}){super(),this.width=e,this.height=r,this.depth=1,this.scissor=new Vt(0,0,e,r),this.scissorTest=!1,this.viewport=new Vt(0,0,e,r);const a={width:e,height:r,depth:1};this.texture=new ar(a,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.internalFormat=t.internalFormat!==void 0?t.internalFormat:null,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:vr,this.depthBuffer=t.depthBuffer!==void 0?t.depthBuffer:!0,this.stencilBuffer=t.stencilBuffer!==void 0?t.stencilBuffer:!1,this.depthTexture=t.depthTexture!==void 0?t.depthTexture:null,this.samples=t.samples!==void 0?t.samples:0}setSize(e,r,t=1){(this.width!==e||this.height!==r||this.depth!==t)&&(this.width=e,this.height=r,this.depth=t,this.texture.image.width=e,this.texture.image.height=r,this.texture.image.depth=t,this.dispose()),this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const r=Object.assign({},e.texture.image);return this.texture.source=new il(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Lr.prototype.isWebGLRenderTarget=!0;class Ro extends ar{constructor(e=null,r=1,t=1,a=1){super(null),this.image={data:e,width:r,height:t,depth:a},this.magFilter=ur,this.minFilter=ur,this.wrapR=Pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Ro.prototype.isDataArrayTexture=!0;class Zf extends Lr{constructor(e,r,t){super(e,r),this.depth=t,this.texture=new Ro(null,e,r,t),this.texture.isRenderTargetTexture=!0}}Zf.prototype.isWebGLArrayRenderTarget=!0;class sl extends ar{constructor(e=null,r=1,t=1,a=1){super(null),this.image={data:e,width:r,height:t,depth:a},this.magFilter=ur,this.minFilter=ur,this.wrapR=Pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}sl.prototype.isData3DTexture=!0;class Kf extends Lr{constructor(e,r,t){super(e,r),this.depth=t,this.texture=new sl(null,e,r,t),this.texture.isRenderTargetTexture=!0}}Kf.prototype.isWebGL3DRenderTarget=!0;class Jf extends Lr{constructor(e,r,t,a={}){super(e,r,a);const l=this.texture;this.texture=[];for(let c=0;c<t;c++)this.texture[c]=l.clone(),this.texture[c].isRenderTargetTexture=!0}setSize(e,r,t=1){if(this.width!==e||this.height!==r||this.depth!==t){this.width=e,this.height=r,this.depth=t;for(let a=0,l=this.texture.length;a<l;a++)this.texture[a].image.width=e,this.texture[a].image.height=r,this.texture[a].image.depth=t;this.dispose()}return this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let r=0,t=e.texture.length;r<t;r++)this.texture[r]=e.texture[r].clone(),this.texture[r].isRenderTargetTexture=!0;return this}}Jf.prototype.isWebGLMultipleRenderTargets=!0;class wr{constructor(e=0,r=0,t=0,a=1){this._x=e,this._y=r,this._z=t,this._w=a}static slerp(e,r,t,a){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),t.slerpQuaternions(e,r,a)}static slerpFlat(e,r,t,a,l,c,n){let f=t[a+0],h=t[a+1],m=t[a+2],p=t[a+3];const s=l[c+0],i=l[c+1],o=l[c+2],d=l[c+3];if(n===0){e[r+0]=f,e[r+1]=h,e[r+2]=m,e[r+3]=p;return}if(n===1){e[r+0]=s,e[r+1]=i,e[r+2]=o,e[r+3]=d;return}if(p!==d||f!==s||h!==i||m!==o){let u=1-n;const g=f*s+h*i+m*o+p*d,b=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const S=Math.sqrt(_),T=Math.atan2(S,g*b);u=Math.sin(u*T)/S,n=Math.sin(n*T)/S}const w=n*b;if(f=f*u+s*w,h=h*u+i*w,m=m*u+o*w,p=p*u+d*w,u===1-n){const S=1/Math.sqrt(f*f+h*h+m*m+p*p);f*=S,h*=S,m*=S,p*=S}}e[r]=f,e[r+1]=h,e[r+2]=m,e[r+3]=p}static multiplyQuaternionsFlat(e,r,t,a,l,c){const n=t[a],f=t[a+1],h=t[a+2],m=t[a+3],p=l[c],s=l[c+1],i=l[c+2],o=l[c+3];return e[r]=n*o+m*p+f*i-h*s,e[r+1]=f*o+m*s+h*p-n*i,e[r+2]=h*o+m*i+n*s-f*p,e[r+3]=m*o-n*p-f*s-h*i,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,t,a){return this._x=e,this._y=r,this._z=t,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const t=e._x,a=e._y,l=e._z,c=e._order,n=Math.cos,f=Math.sin,h=n(t/2),m=n(a/2),p=n(l/2),s=f(t/2),i=f(a/2),o=f(l/2);switch(c){case"XYZ":this._x=s*m*p+h*i*o,this._y=h*i*p-s*m*o,this._z=h*m*o+s*i*p,this._w=h*m*p-s*i*o;break;case"YXZ":this._x=s*m*p+h*i*o,this._y=h*i*p-s*m*o,this._z=h*m*o-s*i*p,this._w=h*m*p+s*i*o;break;case"ZXY":this._x=s*m*p-h*i*o,this._y=h*i*p+s*m*o,this._z=h*m*o+s*i*p,this._w=h*m*p-s*i*o;break;case"ZYX":this._x=s*m*p-h*i*o,this._y=h*i*p+s*m*o,this._z=h*m*o-s*i*p,this._w=h*m*p+s*i*o;break;case"YZX":this._x=s*m*p+h*i*o,this._y=h*i*p+s*m*o,this._z=h*m*o-s*i*p,this._w=h*m*p-s*i*o;break;case"XZY":this._x=s*m*p-h*i*o,this._y=h*i*p-s*m*o,this._z=h*m*o+s*i*p,this._w=h*m*p+s*i*o;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return r!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const t=r/2,a=Math.sin(t);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(t),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,t=r[0],a=r[4],l=r[8],c=r[1],n=r[5],f=r[9],h=r[2],m=r[6],p=r[10],s=t+n+p;if(s>0){const i=.5/Math.sqrt(s+1);this._w=.25/i,this._x=(m-f)*i,this._y=(l-h)*i,this._z=(c-a)*i}else if(t>n&&t>p){const i=2*Math.sqrt(1+t-n-p);this._w=(m-f)/i,this._x=.25*i,this._y=(a+c)/i,this._z=(l+h)/i}else if(n>p){const i=2*Math.sqrt(1+n-t-p);this._w=(l-h)/i,this._x=(a+c)/i,this._y=.25*i,this._z=(f+m)/i}else{const i=2*Math.sqrt(1+p-t-n);this._w=(c-a)/i,this._x=(l+h)/i,this._y=(f+m)/i,this._z=.25*i}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let t=e.dot(r)+1;return t<Number.EPSILON?(t=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=t):(this._x=0,this._y=-e.z,this._z=e.y,this._w=t)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=t),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mr(this.dot(e),-1,1)))}rotateTowards(e,r){const t=this.angleTo(e);if(t===0)return this;const a=Math.min(1,r/t);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,r){return r!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,r)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const t=e._x,a=e._y,l=e._z,c=e._w,n=r._x,f=r._y,h=r._z,m=r._w;return this._x=t*m+c*n+a*h-l*f,this._y=a*m+c*f+l*n-t*h,this._z=l*m+c*h+t*f-a*n,this._w=c*m-t*n-a*f-l*h,this._onChangeCallback(),this}slerp(e,r){if(r===0)return this;if(r===1)return this.copy(e);const t=this._x,a=this._y,l=this._z,c=this._w;let n=c*e._w+t*e._x+a*e._y+l*e._z;if(n<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,n=-n):this.copy(e),n>=1)return this._w=c,this._x=t,this._y=a,this._z=l,this;const f=1-n*n;if(f<=Number.EPSILON){const i=1-r;return this._w=i*c+r*this._w,this._x=i*t+r*this._x,this._y=i*a+r*this._y,this._z=i*l+r*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(f),m=Math.atan2(h,n),p=Math.sin((1-r)*m)/h,s=Math.sin(r*m)/h;return this._w=c*p+this._w*s,this._x=t*p+this._x*s,this._y=a*p+this._y*s,this._z=l*p+this._z*s,this._onChangeCallback(),this}slerpQuaternions(e,r,t){return this.copy(e).slerp(r,t)}random(){const e=Math.random(),r=Math.sqrt(1-e),t=Math.sqrt(e),a=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(r*Math.cos(a),t*Math.sin(l),t*Math.cos(l),r*Math.sin(a))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}wr.prototype.isQuaternion=!0;class Me{constructor(e=0,r=0,t=0){this.x=e,this.y=r,this.z=t}set(e,r,t){return t===void 0&&(t=this.z),this.x=e,this.y=r,this.z=t,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,r){return r!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,r)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e,r){return r!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,r)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e,r){return r!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,r)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Vu.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(Vu.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,t=this.y,a=this.z,l=e.elements;return this.x=l[0]*r+l[3]*t+l[6]*a,this.y=l[1]*r+l[4]*t+l[7]*a,this.z=l[2]*r+l[5]*t+l[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,t=this.y,a=this.z,l=e.elements,c=1/(l[3]*r+l[7]*t+l[11]*a+l[15]);return this.x=(l[0]*r+l[4]*t+l[8]*a+l[12])*c,this.y=(l[1]*r+l[5]*t+l[9]*a+l[13])*c,this.z=(l[2]*r+l[6]*t+l[10]*a+l[14])*c,this}applyQuaternion(e){const r=this.x,t=this.y,a=this.z,l=e.x,c=e.y,n=e.z,f=e.w,h=f*r+c*a-n*t,m=f*t+n*r-l*a,p=f*a+l*t-c*r,s=-l*r-c*t-n*a;return this.x=h*f+s*-l+m*-n-p*-c,this.y=m*f+s*-c+p*-l-h*-n,this.z=p*f+s*-n+h*-c-m*-l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,t=this.y,a=this.z,l=e.elements;return this.x=l[0]*r+l[4]*t+l[8]*a,this.y=l[1]*r+l[5]*t+l[9]*a,this.z=l[2]*r+l[6]*t+l[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this}clampLength(e,r){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(r,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,t){return this.x=e.x+(r.x-e.x)*t,this.y=e.y+(r.y-e.y)*t,this.z=e.z+(r.z-e.z)*t,this}cross(e,r){return r!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,r)):this.crossVectors(this,e)}crossVectors(e,r){const t=e.x,a=e.y,l=e.z,c=r.x,n=r.y,f=r.z;return this.x=a*f-l*n,this.y=l*c-t*f,this.z=t*n-a*c,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const t=e.dot(this)/r;return this.copy(e).multiplyScalar(t)}projectOnPlane(e){return aa.copy(this).projectOnVector(e),this.sub(aa)}reflect(e){return this.sub(aa.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const t=this.dot(e)/r;return Math.acos(mr(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,t=this.y-e.y,a=this.z-e.z;return r*r+t*t+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,t){const a=Math.sin(r)*e;return this.x=a*Math.sin(t),this.y=Math.cos(r)*e,this.z=a*Math.cos(t),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,t){return this.x=e*Math.sin(r),this.y=t,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),t=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=t,this.z=a,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r,t){return t!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,r=Math.random()*Math.PI*2,t=Math.sqrt(1-e**2);return this.x=t*Math.cos(r),this.y=t*Math.sin(r),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Me.prototype.isVector3=!0;const aa=new Me,Vu=new wr;class Or{constructor(e=new Me(1/0,1/0,1/0),r=new Me(-1/0,-1/0,-1/0)){this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){let r=1/0,t=1/0,a=1/0,l=-1/0,c=-1/0,n=-1/0;for(let f=0,h=e.length;f<h;f+=3){const m=e[f],p=e[f+1],s=e[f+2];m<r&&(r=m),p<t&&(t=p),s<a&&(a=s),m>l&&(l=m),p>c&&(c=p),s>n&&(n=s)}return this.min.set(r,t,a),this.max.set(l,c,n),this}setFromBufferAttribute(e){let r=1/0,t=1/0,a=1/0,l=-1/0,c=-1/0,n=-1/0;for(let f=0,h=e.count;f<h;f++){const m=e.getX(f),p=e.getY(f),s=e.getZ(f);m<r&&(r=m),p<t&&(t=p),s<a&&(a=s),m>l&&(l=m),p>c&&(c=p),s>n&&(n=s)}return this.min.set(r,t,a),this.max.set(l,c,n),this}setFromPoints(e){this.makeEmpty();for(let r=0,t=e.length;r<t;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const t=Hn.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}setFromObject(e,r=!1){return this.makeEmpty(),this.expandByObject(e,r)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,r=!1){e.updateWorldMatrix(!1,!1);const t=e.geometry;if(t!==void 0)if(r&&t.attributes!=null&&t.attributes.position!==void 0){const l=t.attributes.position;for(let c=0,n=l.count;c<n;c++)Hn.fromBufferAttribute(l,c).applyMatrix4(e.matrixWorld),this.expandByPoint(Hn)}else t.boundingBox===null&&t.computeBoundingBox(),la.copy(t.boundingBox),la.applyMatrix4(e.matrixWorld),this.union(la);const a=e.children;for(let l=0,c=a.length;l<c;l++)this.expandByObject(a[l],r);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Hn),Hn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,t;return e.normal.x>0?(r=e.normal.x*this.min.x,t=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,t=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,t+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,t+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,t+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,t+=e.normal.z*this.min.z),r<=-e.constant&&t>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ss),Ws.subVectors(this.max,ss),mi.subVectors(e.a,ss),gi.subVectors(e.b,ss),yi.subVectors(e.c,ss),Sn.subVectors(gi,mi),Mn.subVectors(yi,gi),Wn.subVectors(mi,yi);let r=[0,-Sn.z,Sn.y,0,-Mn.z,Mn.y,0,-Wn.z,Wn.y,Sn.z,0,-Sn.x,Mn.z,0,-Mn.x,Wn.z,0,-Wn.x,-Sn.y,Sn.x,0,-Mn.y,Mn.x,0,-Wn.y,Wn.x,0];return!ua(r,mi,gi,yi,Ws)||(r=[1,0,0,0,1,0,0,0,1],!ua(r,mi,gi,yi,Ws))?!1:(qs.crossVectors(Sn,Mn),r=[qs.x,qs.y,qs.z],ua(r,mi,gi,yi,Ws))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Hn.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Hn).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(an[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),an[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),an[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),an[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),an[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),an[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),an[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),an[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(an),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Or.prototype.isBox3=!0;const an=[new Me,new Me,new Me,new Me,new Me,new Me,new Me,new Me],Hn=new Me,la=new Or,mi=new Me,gi=new Me,yi=new Me,Sn=new Me,Mn=new Me,Wn=new Me,ss=new Me,Ws=new Me,qs=new Me,qn=new Me;function ua(v,e,r,t,a){for(let l=0,c=v.length-3;l<=c;l+=3){qn.fromArray(v,l);const n=a.x*Math.abs(qn.x)+a.y*Math.abs(qn.y)+a.z*Math.abs(qn.z),f=e.dot(qn),h=r.dot(qn),m=t.dot(qn);if(Math.max(-Math.max(f,h,m),Math.min(f,h,m))>n)return!1}return!0}const Qf=new Or,Hu=new Me,Xs=new Me,ca=new Me;class oi{constructor(e=new Me,r=-1){this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){const t=this.center;r!==void 0?t.copy(r):Qf.setFromPoints(e).getCenter(t);let a=0;for(let l=0,c=e.length;l<c;l++)a=Math.max(a,t.distanceToSquared(e[l]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){const t=this.center.distanceToSquared(e);return r.copy(e),t>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){ca.subVectors(e,this.center);const r=ca.lengthSq();if(r>this.radius*this.radius){const t=Math.sqrt(r),a=(t-this.radius)*.5;this.center.add(ca.multiplyScalar(a/t)),this.radius+=a}return this}union(e){return this.center.equals(e.center)===!0?Xs.set(0,0,1).multiplyScalar(e.radius):Xs.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Hu.copy(e.center).add(Xs)),this.expandByPoint(Hu.copy(e.center).sub(Xs)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ln=new Me,ha=new Me,Ys=new Me,Tn=new Me,da=new Me,Zs=new Me,fa=new Me;class Zi{constructor(e=new Me,r=new Me(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ln)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);const t=r.dot(this.direction);return t<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(t).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const r=ln.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(ln.copy(this.direction).multiplyScalar(r).add(this.origin),ln.distanceToSquared(e))}distanceSqToSegment(e,r,t,a){ha.copy(e).add(r).multiplyScalar(.5),Ys.copy(r).sub(e).normalize(),Tn.copy(this.origin).sub(ha);const l=e.distanceTo(r)*.5,c=-this.direction.dot(Ys),n=Tn.dot(this.direction),f=-Tn.dot(Ys),h=Tn.lengthSq(),m=Math.abs(1-c*c);let p,s,i,o;if(m>0)if(p=c*f-n,s=c*n-f,o=l*m,p>=0)if(s>=-o)if(s<=o){const d=1/m;p*=d,s*=d,i=p*(p+c*s+2*n)+s*(c*p+s+2*f)+h}else s=l,p=Math.max(0,-(c*s+n)),i=-p*p+s*(s+2*f)+h;else s=-l,p=Math.max(0,-(c*s+n)),i=-p*p+s*(s+2*f)+h;else s<=-o?(p=Math.max(0,-(-c*l+n)),s=p>0?-l:Math.min(Math.max(-l,-f),l),i=-p*p+s*(s+2*f)+h):s<=o?(p=0,s=Math.min(Math.max(-l,-f),l),i=s*(s+2*f)+h):(p=Math.max(0,-(c*l+n)),s=p>0?l:Math.min(Math.max(-l,-f),l),i=-p*p+s*(s+2*f)+h);else s=c>0?-l:l,p=Math.max(0,-(c*s+n)),i=-p*p+s*(s+2*f)+h;return t&&t.copy(this.direction).multiplyScalar(p).add(this.origin),a&&a.copy(Ys).multiplyScalar(s).add(ha),i}intersectSphere(e,r){ln.subVectors(e.center,this.origin);const t=ln.dot(this.direction),a=ln.dot(ln)-t*t,l=e.radius*e.radius;if(a>l)return null;const c=Math.sqrt(l-a),n=t-c,f=t+c;return n<0&&f<0?null:n<0?this.at(f,r):this.at(n,r)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const r=e.normal.dot(this.direction);if(r===0)return e.distanceToPoint(this.origin)===0?0:null;const t=-(this.origin.dot(e.normal)+e.constant)/r;return t>=0?t:null}intersectPlane(e,r){const t=this.distanceToPlane(e);return t===null?null:this.at(t,r)}intersectsPlane(e){const r=e.distanceToPoint(this.origin);return r===0||e.normal.dot(this.direction)*r<0}intersectBox(e,r){let t,a,l,c,n,f;const h=1/this.direction.x,m=1/this.direction.y,p=1/this.direction.z,s=this.origin;return h>=0?(t=(e.min.x-s.x)*h,a=(e.max.x-s.x)*h):(t=(e.max.x-s.x)*h,a=(e.min.x-s.x)*h),m>=0?(l=(e.min.y-s.y)*m,c=(e.max.y-s.y)*m):(l=(e.max.y-s.y)*m,c=(e.min.y-s.y)*m),t>c||l>a||((l>t||t!==t)&&(t=l),(c<a||a!==a)&&(a=c),p>=0?(n=(e.min.z-s.z)*p,f=(e.max.z-s.z)*p):(n=(e.max.z-s.z)*p,f=(e.min.z-s.z)*p),t>f||n>a)||((n>t||t!==t)&&(t=n),(f<a||a!==a)&&(a=f),a<0)?null:this.at(t>=0?t:a,r)}intersectsBox(e){return this.intersectBox(e,ln)!==null}intersectTriangle(e,r,t,a,l){da.subVectors(r,e),Zs.subVectors(t,e),fa.crossVectors(da,Zs);let c=this.direction.dot(fa),n;if(c>0){if(a)return null;n=1}else if(c<0)n=-1,c=-c;else return null;Tn.subVectors(this.origin,e);const f=n*this.direction.dot(Zs.crossVectors(Tn,Zs));if(f<0)return null;const h=n*this.direction.dot(da.cross(Tn));if(h<0||f+h>c)return null;const m=-n*Tn.dot(fa);return m<0?null:this.at(m/c,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,r,t,a,l,c,n,f,h,m,p,s,i,o,d,u){const g=this.elements;return g[0]=e,g[4]=r,g[8]=t,g[12]=a,g[1]=l,g[5]=c,g[9]=n,g[13]=f,g[2]=h,g[6]=m,g[10]=p,g[14]=s,g[3]=i,g[7]=o,g[11]=d,g[15]=u,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pt().fromArray(this.elements)}copy(e){const r=this.elements,t=e.elements;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],this}copyPosition(e){const r=this.elements,t=e.elements;return r[12]=t[12],r[13]=t[13],r[14]=t[14],this}setFromMatrix3(e){const r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,t){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),t.setFromMatrixColumn(this,2),this}makeBasis(e,r,t){return this.set(e.x,r.x,t.x,0,e.y,r.y,t.y,0,e.z,r.z,t.z,0,0,0,0,1),this}extractRotation(e){const r=this.elements,t=e.elements,a=1/vi.setFromMatrixColumn(e,0).length(),l=1/vi.setFromMatrixColumn(e,1).length(),c=1/vi.setFromMatrixColumn(e,2).length();return r[0]=t[0]*a,r[1]=t[1]*a,r[2]=t[2]*a,r[3]=0,r[4]=t[4]*l,r[5]=t[5]*l,r[6]=t[6]*l,r[7]=0,r[8]=t[8]*c,r[9]=t[9]*c,r[10]=t[10]*c,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const r=this.elements,t=e.x,a=e.y,l=e.z,c=Math.cos(t),n=Math.sin(t),f=Math.cos(a),h=Math.sin(a),m=Math.cos(l),p=Math.sin(l);if(e.order==="XYZ"){const s=c*m,i=c*p,o=n*m,d=n*p;r[0]=f*m,r[4]=-f*p,r[8]=h,r[1]=i+o*h,r[5]=s-d*h,r[9]=-n*f,r[2]=d-s*h,r[6]=o+i*h,r[10]=c*f}else if(e.order==="YXZ"){const s=f*m,i=f*p,o=h*m,d=h*p;r[0]=s+d*n,r[4]=o*n-i,r[8]=c*h,r[1]=c*p,r[5]=c*m,r[9]=-n,r[2]=i*n-o,r[6]=d+s*n,r[10]=c*f}else if(e.order==="ZXY"){const s=f*m,i=f*p,o=h*m,d=h*p;r[0]=s-d*n,r[4]=-c*p,r[8]=o+i*n,r[1]=i+o*n,r[5]=c*m,r[9]=d-s*n,r[2]=-c*h,r[6]=n,r[10]=c*f}else if(e.order==="ZYX"){const s=c*m,i=c*p,o=n*m,d=n*p;r[0]=f*m,r[4]=o*h-i,r[8]=s*h+d,r[1]=f*p,r[5]=d*h+s,r[9]=i*h-o,r[2]=-h,r[6]=n*f,r[10]=c*f}else if(e.order==="YZX"){const s=c*f,i=c*h,o=n*f,d=n*h;r[0]=f*m,r[4]=d-s*p,r[8]=o*p+i,r[1]=p,r[5]=c*m,r[9]=-n*m,r[2]=-h*m,r[6]=i*p+o,r[10]=s-d*p}else if(e.order==="XZY"){const s=c*f,i=c*h,o=n*f,d=n*h;r[0]=f*m,r[4]=-p,r[8]=h*m,r[1]=s*p+d,r[5]=c*m,r[9]=i*p-o,r[2]=o*p-i,r[6]=n*m,r[10]=d*p+s}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose($f,e,ep)}lookAt(e,r,t){const a=this.elements;return Er.subVectors(e,r),Er.lengthSq()===0&&(Er.z=1),Er.normalize(),En.crossVectors(t,Er),En.lengthSq()===0&&(Math.abs(t.z)===1?Er.x+=1e-4:Er.z+=1e-4,Er.normalize(),En.crossVectors(t,Er)),En.normalize(),Ks.crossVectors(Er,En),a[0]=En.x,a[4]=Ks.x,a[8]=Er.x,a[1]=En.y,a[5]=Ks.y,a[9]=Er.y,a[2]=En.z,a[6]=Ks.z,a[10]=Er.z,this}multiply(e,r){return r!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,r)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const t=e.elements,a=r.elements,l=this.elements,c=t[0],n=t[4],f=t[8],h=t[12],m=t[1],p=t[5],s=t[9],i=t[13],o=t[2],d=t[6],u=t[10],g=t[14],b=t[3],_=t[7],w=t[11],S=t[15],T=a[0],L=a[4],A=a[8],P=a[12],R=a[1],D=a[5],F=a[9],I=a[13],k=a[2],U=a[6],q=a[10],Q=a[14],W=a[3],K=a[7],Y=a[11],se=a[15];return l[0]=c*T+n*R+f*k+h*W,l[4]=c*L+n*D+f*U+h*K,l[8]=c*A+n*F+f*q+h*Y,l[12]=c*P+n*I+f*Q+h*se,l[1]=m*T+p*R+s*k+i*W,l[5]=m*L+p*D+s*U+i*K,l[9]=m*A+p*F+s*q+i*Y,l[13]=m*P+p*I+s*Q+i*se,l[2]=o*T+d*R+u*k+g*W,l[6]=o*L+d*D+u*U+g*K,l[10]=o*A+d*F+u*q+g*Y,l[14]=o*P+d*I+u*Q+g*se,l[3]=b*T+_*R+w*k+S*W,l[7]=b*L+_*D+w*U+S*K,l[11]=b*A+_*F+w*q+S*Y,l[15]=b*P+_*I+w*Q+S*se,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){const e=this.elements,r=e[0],t=e[4],a=e[8],l=e[12],c=e[1],n=e[5],f=e[9],h=e[13],m=e[2],p=e[6],s=e[10],i=e[14],o=e[3],d=e[7],u=e[11],g=e[15];return o*(+l*f*p-a*h*p-l*n*s+t*h*s+a*n*i-t*f*i)+d*(+r*f*i-r*h*s+l*c*s-a*c*i+a*h*m-l*f*m)+u*(+r*h*p-r*n*i-l*c*p+t*c*i+l*n*m-t*h*m)+g*(-a*n*m-r*f*p+r*n*s+a*c*p-t*c*s+t*f*m)}transpose(){const e=this.elements;let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}setPosition(e,r,t){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=r,a[14]=t),this}invert(){const e=this.elements,r=e[0],t=e[1],a=e[2],l=e[3],c=e[4],n=e[5],f=e[6],h=e[7],m=e[8],p=e[9],s=e[10],i=e[11],o=e[12],d=e[13],u=e[14],g=e[15],b=p*u*h-d*s*h+d*f*i-n*u*i-p*f*g+n*s*g,_=o*s*h-m*u*h-o*f*i+c*u*i+m*f*g-c*s*g,w=m*d*h-o*p*h+o*n*i-c*d*i-m*n*g+c*p*g,S=o*p*f-m*d*f-o*n*s+c*d*s+m*n*u-c*p*u,T=r*b+t*_+a*w+l*S;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/T;return e[0]=b*L,e[1]=(d*s*l-p*u*l-d*a*i+t*u*i+p*a*g-t*s*g)*L,e[2]=(n*u*l-d*f*l+d*a*h-t*u*h-n*a*g+t*f*g)*L,e[3]=(p*f*l-n*s*l-p*a*h+t*s*h+n*a*i-t*f*i)*L,e[4]=_*L,e[5]=(m*u*l-o*s*l+o*a*i-r*u*i-m*a*g+r*s*g)*L,e[6]=(o*f*l-c*u*l-o*a*h+r*u*h+c*a*g-r*f*g)*L,e[7]=(c*s*l-m*f*l+m*a*h-r*s*h-c*a*i+r*f*i)*L,e[8]=w*L,e[9]=(o*p*l-m*d*l-o*t*i+r*d*i+m*t*g-r*p*g)*L,e[10]=(c*d*l-o*n*l+o*t*h-r*d*h-c*t*g+r*n*g)*L,e[11]=(m*n*l-c*p*l-m*t*h+r*p*h+c*t*i-r*n*i)*L,e[12]=S*L,e[13]=(m*d*a-o*p*a+o*t*s-r*d*s-m*t*u+r*p*u)*L,e[14]=(o*n*a-c*d*a-o*t*f+r*d*f+c*t*u-r*n*u)*L,e[15]=(c*p*a-m*n*a+m*t*f-r*p*f-c*t*s+r*n*s)*L,this}scale(e){const r=this.elements,t=e.x,a=e.y,l=e.z;return r[0]*=t,r[4]*=a,r[8]*=l,r[1]*=t,r[5]*=a,r[9]*=l,r[2]*=t,r[6]*=a,r[10]*=l,r[3]*=t,r[7]*=a,r[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],t=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,t,a))}makeTranslation(e,r,t){return this.set(1,0,0,e,0,1,0,r,0,0,1,t,0,0,0,1),this}makeRotationX(e){const r=Math.cos(e),t=Math.sin(e);return this.set(1,0,0,0,0,r,-t,0,0,t,r,0,0,0,0,1),this}makeRotationY(e){const r=Math.cos(e),t=Math.sin(e);return this.set(r,0,t,0,0,1,0,0,-t,0,r,0,0,0,0,1),this}makeRotationZ(e){const r=Math.cos(e),t=Math.sin(e);return this.set(r,-t,0,0,t,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){const t=Math.cos(r),a=Math.sin(r),l=1-t,c=e.x,n=e.y,f=e.z,h=l*c,m=l*n;return this.set(h*c+t,h*n-a*f,h*f+a*n,0,h*n+a*f,m*n+t,m*f-a*c,0,h*f-a*n,m*f+a*c,l*f*f+t,0,0,0,0,1),this}makeScale(e,r,t){return this.set(e,0,0,0,0,r,0,0,0,0,t,0,0,0,0,1),this}makeShear(e,r,t,a,l,c){return this.set(1,t,l,0,e,1,c,0,r,a,1,0,0,0,0,1),this}compose(e,r,t){const a=this.elements,l=r._x,c=r._y,n=r._z,f=r._w,h=l+l,m=c+c,p=n+n,s=l*h,i=l*m,o=l*p,d=c*m,u=c*p,g=n*p,b=f*h,_=f*m,w=f*p,S=t.x,T=t.y,L=t.z;return a[0]=(1-(d+g))*S,a[1]=(i+w)*S,a[2]=(o-_)*S,a[3]=0,a[4]=(i-w)*T,a[5]=(1-(s+g))*T,a[6]=(u+b)*T,a[7]=0,a[8]=(o+_)*L,a[9]=(u-b)*L,a[10]=(1-(s+d))*L,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,r,t){const a=this.elements;let l=vi.set(a[0],a[1],a[2]).length();const c=vi.set(a[4],a[5],a[6]).length(),n=vi.set(a[8],a[9],a[10]).length();this.determinant()<0&&(l=-l),e.x=a[12],e.y=a[13],e.z=a[14],Hr.copy(this);const h=1/l,m=1/c,p=1/n;return Hr.elements[0]*=h,Hr.elements[1]*=h,Hr.elements[2]*=h,Hr.elements[4]*=m,Hr.elements[5]*=m,Hr.elements[6]*=m,Hr.elements[8]*=p,Hr.elements[9]*=p,Hr.elements[10]*=p,r.setFromRotationMatrix(Hr),t.x=l,t.y=c,t.z=n,this}makePerspective(e,r,t,a,l,c){c===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const n=this.elements,f=2*l/(r-e),h=2*l/(t-a),m=(r+e)/(r-e),p=(t+a)/(t-a),s=-(c+l)/(c-l),i=-2*c*l/(c-l);return n[0]=f,n[4]=0,n[8]=m,n[12]=0,n[1]=0,n[5]=h,n[9]=p,n[13]=0,n[2]=0,n[6]=0,n[10]=s,n[14]=i,n[3]=0,n[7]=0,n[11]=-1,n[15]=0,this}makeOrthographic(e,r,t,a,l,c){const n=this.elements,f=1/(r-e),h=1/(t-a),m=1/(c-l),p=(r+e)*f,s=(t+a)*h,i=(c+l)*m;return n[0]=2*f,n[4]=0,n[8]=0,n[12]=-p,n[1]=0,n[5]=2*h,n[9]=0,n[13]=-s,n[2]=0,n[6]=0,n[10]=-2*m,n[14]=-i,n[3]=0,n[7]=0,n[11]=0,n[15]=1,this}equals(e){const r=this.elements,t=e.elements;for(let a=0;a<16;a++)if(r[a]!==t[a])return!1;return!0}fromArray(e,r=0){for(let t=0;t<16;t++)this.elements[t]=e[t+r];return this}toArray(e=[],r=0){const t=this.elements;return e[r]=t[0],e[r+1]=t[1],e[r+2]=t[2],e[r+3]=t[3],e[r+4]=t[4],e[r+5]=t[5],e[r+6]=t[6],e[r+7]=t[7],e[r+8]=t[8],e[r+9]=t[9],e[r+10]=t[10],e[r+11]=t[11],e[r+12]=t[12],e[r+13]=t[13],e[r+14]=t[14],e[r+15]=t[15],e}}pt.prototype.isMatrix4=!0;const vi=new Me,Hr=new pt,$f=new Me(0,0,0),ep=new Me(1,1,1),En=new Me,Ks=new Me,Er=new Me,Wu=new pt,qu=new wr;class ai{constructor(e=0,r=0,t=0,a=ai.DefaultOrder){this._x=e,this._y=r,this._z=t,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,t,a=this._order){return this._x=e,this._y=r,this._z=t,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,t=!0){const a=e.elements,l=a[0],c=a[4],n=a[8],f=a[1],h=a[5],m=a[9],p=a[2],s=a[6],i=a[10];switch(r){case"XYZ":this._y=Math.asin(mr(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(-m,i),this._z=Math.atan2(-c,l)):(this._x=Math.atan2(s,h),this._z=0);break;case"YXZ":this._x=Math.asin(-mr(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(n,i),this._z=Math.atan2(f,h)):(this._y=Math.atan2(-p,l),this._z=0);break;case"ZXY":this._x=Math.asin(mr(s,-1,1)),Math.abs(s)<.9999999?(this._y=Math.atan2(-p,i),this._z=Math.atan2(-c,h)):(this._y=0,this._z=Math.atan2(f,l));break;case"ZYX":this._y=Math.asin(-mr(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(s,i),this._z=Math.atan2(f,l)):(this._x=0,this._z=Math.atan2(-c,h));break;case"YZX":this._z=Math.asin(mr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-m,h),this._y=Math.atan2(-p,l)):(this._x=0,this._y=Math.atan2(n,i));break;case"XZY":this._z=Math.asin(-mr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(s,h),this._y=Math.atan2(n,l)):(this._x=Math.atan2(-m,i),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,t===!0&&this._onChangeCallback(),this}setFromQuaternion(e,r,t){return Wu.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Wu,r,t)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return qu.setFromEuler(this),this.setFromQuaternion(qu,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ai.prototype.isEuler=!0;ai.DefaultOrder="XYZ";ai.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class fh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let tp=0;const Xu=new Me,bi=new wr,un=new pt,Js=new Me,os=new Me,rp=new Me,np=new wr,Yu=new Me(1,0,0),Zu=new Me(0,1,0),Ku=new Me(0,0,1),ip={type:"added"},Ju={type:"removed"};class Bt extends ii{constructor(){super(),Object.defineProperty(this,"id",{value:tp++}),this.uuid=Ir(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bt.DefaultUp.clone();const e=new Me,r=new ai,t=new wr,a=new Me(1,1,1);function l(){t.setFromEuler(r,!1)}function c(){r.setFromQuaternion(t,void 0,!1)}r._onChange(l),t._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new pt},normalMatrix:{value:new gr}}),this.matrix=new pt,this.matrixWorld=new pt,this.matrixAutoUpdate=Bt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new fh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return bi.setFromAxisAngle(e,r),this.quaternion.multiply(bi),this}rotateOnWorldAxis(e,r){return bi.setFromAxisAngle(e,r),this.quaternion.premultiply(bi),this}rotateX(e){return this.rotateOnAxis(Yu,e)}rotateY(e){return this.rotateOnAxis(Zu,e)}rotateZ(e){return this.rotateOnAxis(Ku,e)}translateOnAxis(e,r){return Xu.copy(e).applyQuaternion(this.quaternion),this.position.add(Xu.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(Yu,e)}translateY(e){return this.translateOnAxis(Zu,e)}translateZ(e){return this.translateOnAxis(Ku,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(un.copy(this.matrixWorld).invert())}lookAt(e,r,t){e.isVector3?Js.copy(e):Js.set(e,r,t);const a=this.parent;this.updateWorldMatrix(!0,!1),os.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?un.lookAt(os,Js,this.up):un.lookAt(Js,os,this.up),this.quaternion.setFromRotationMatrix(un),a&&(un.extractRotation(a.matrixWorld),bi.setFromRotationMatrix(un),this.quaternion.premultiply(bi.invert()))}add(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ip)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const r=this.children.indexOf(e);return r!==-1&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(Ju)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const r=this.children[e];r.parent=null,r.dispatchEvent(Ju)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),un.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),un.multiply(e.parent.matrixWorld)),e.applyMatrix4(un),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let t=0,a=this.children.length;t<a;t++){const c=this.children[t].getObjectByProperty(e,r);if(c!==void 0)return c}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(os,e,rp),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(os,np,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);const r=this.children;for(let t=0,a=r.length;t<a;t++)r[t].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const r=this.children;for(let t=0,a=r.length;t<a;t++)r[t].traverseVisible(e)}traverseAncestors(e){const r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const r=this.children;for(let t=0,a=r.length;t<a;t++)r[t].updateMatrixWorld(e)}updateWorldMatrix(e,r){const t=this.parent;if(e===!0&&t!==null&&t.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),r===!0){const a=this.children;for(let l=0,c=a.length;l<c;l++)a[l].updateWorldMatrix(!1,!0)}}toJSON(e){const r=e===void 0||typeof e=="string",t={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},t.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON()));function l(n,f){return n[f.uuid]===void 0&&(n[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=l(e.geometries,this.geometry);const n=this.geometry.parameters;if(n!==void 0&&n.shapes!==void 0){const f=n.shapes;if(Array.isArray(f))for(let h=0,m=f.length;h<m;h++){const p=f[h];l(e.shapes,p)}else l(e.shapes,f)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const n=[];for(let f=0,h=this.material.length;f<h;f++)n.push(l(e.materials,this.material[f]));a.material=n}else a.material=l(e.materials,this.material);if(this.children.length>0){a.children=[];for(let n=0;n<this.children.length;n++)a.children.push(this.children[n].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let n=0;n<this.animations.length;n++){const f=this.animations[n];a.animations.push(l(e.animations,f))}}if(r){const n=c(e.geometries),f=c(e.materials),h=c(e.textures),m=c(e.images),p=c(e.shapes),s=c(e.skeletons),i=c(e.animations),o=c(e.nodes);n.length>0&&(t.geometries=n),f.length>0&&(t.materials=f),h.length>0&&(t.textures=h),m.length>0&&(t.images=m),p.length>0&&(t.shapes=p),s.length>0&&(t.skeletons=s),i.length>0&&(t.animations=i),o.length>0&&(t.nodes=o)}return t.object=a,t;function c(n){const f=[];for(const h in n){const m=n[h];delete m.metadata,f.push(m)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),r===!0)for(let t=0;t<e.children.length;t++){const a=e.children[t];this.add(a.clone())}return this}}Bt.DefaultUp=new Me(0,1,0);Bt.DefaultMatrixAutoUpdate=!0;Bt.prototype.isObject3D=!0;const Wr=new Me,cn=new Me,pa=new Me,hn=new Me,_i=new Me,xi=new Me,Qu=new Me,ma=new Me,ga=new Me,ya=new Me;class or{constructor(e=new Me,r=new Me,t=new Me){this.a=e,this.b=r,this.c=t}static getNormal(e,r,t,a){a.subVectors(t,r),Wr.subVectors(e,r),a.cross(Wr);const l=a.lengthSq();return l>0?a.multiplyScalar(1/Math.sqrt(l)):a.set(0,0,0)}static getBarycoord(e,r,t,a,l){Wr.subVectors(a,r),cn.subVectors(t,r),pa.subVectors(e,r);const c=Wr.dot(Wr),n=Wr.dot(cn),f=Wr.dot(pa),h=cn.dot(cn),m=cn.dot(pa),p=c*h-n*n;if(p===0)return l.set(-2,-1,-1);const s=1/p,i=(h*f-n*m)*s,o=(c*m-n*f)*s;return l.set(1-i-o,o,i)}static containsPoint(e,r,t,a){return this.getBarycoord(e,r,t,a,hn),hn.x>=0&&hn.y>=0&&hn.x+hn.y<=1}static getUV(e,r,t,a,l,c,n,f){return this.getBarycoord(e,r,t,a,hn),f.set(0,0),f.addScaledVector(l,hn.x),f.addScaledVector(c,hn.y),f.addScaledVector(n,hn.z),f}static isFrontFacing(e,r,t,a){return Wr.subVectors(t,r),cn.subVectors(e,r),Wr.cross(cn).dot(a)<0}set(e,r,t){return this.a.copy(e),this.b.copy(r),this.c.copy(t),this}setFromPointsAndIndices(e,r,t,a){return this.a.copy(e[r]),this.b.copy(e[t]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,r,t,a){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,t),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wr.subVectors(this.c,this.b),cn.subVectors(this.a,this.b),Wr.cross(cn).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return or.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return or.getBarycoord(e,this.a,this.b,this.c,r)}getUV(e,r,t,a,l){return or.getUV(e,this.a,this.b,this.c,r,t,a,l)}containsPoint(e){return or.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return or.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){const t=this.a,a=this.b,l=this.c;let c,n;_i.subVectors(a,t),xi.subVectors(l,t),ma.subVectors(e,t);const f=_i.dot(ma),h=xi.dot(ma);if(f<=0&&h<=0)return r.copy(t);ga.subVectors(e,a);const m=_i.dot(ga),p=xi.dot(ga);if(m>=0&&p<=m)return r.copy(a);const s=f*p-m*h;if(s<=0&&f>=0&&m<=0)return c=f/(f-m),r.copy(t).addScaledVector(_i,c);ya.subVectors(e,l);const i=_i.dot(ya),o=xi.dot(ya);if(o>=0&&i<=o)return r.copy(l);const d=i*h-f*o;if(d<=0&&h>=0&&o<=0)return n=h/(h-o),r.copy(t).addScaledVector(xi,n);const u=m*o-i*p;if(u<=0&&p-m>=0&&i-o>=0)return Qu.subVectors(l,a),n=(p-m)/(p-m+(i-o)),r.copy(a).addScaledVector(Qu,n);const g=1/(u+d+s);return c=d*g,n=s*g,r.copy(t).addScaledVector(_i,c).addScaledVector(xi,n)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let sp=0;class er extends ii{constructor(){super(),Object.defineProperty(this,"id",{value:sp++}),this.uuid=Ir(),this.name="",this.type="Material",this.blending=Ni,this.side=Ui,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=ih,this.blendDst=sh,this.blendEquation=Di,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Fa,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Pf,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=na,this.stencilZFail=na,this.stencilZPass=na,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const r in e){const t=e[r];if(t===void 0){console.warn("THREE.Material: '"+r+"' parameter is undefined.");continue}if(r==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===nh;continue}const a=this[r];if(a===void 0){console.warn("THREE."+this.type+": '"+r+"' is not a property of this material.");continue}a&&a.isColor?a.set(t):a&&a.isVector3&&t&&t.isVector3?a.copy(t):this[r]=t}}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{}});const t={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen!==void 0&&(t.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(t.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(t.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(t.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(t.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(e).uuid,t.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(e).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(e).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(e).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(e).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(t.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(t.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(t.combine=this.combine)),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(t.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(t.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(t.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(t.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(t.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(t.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(t.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(t.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(t.size=this.size),this.shadowSide!==null&&(t.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==Ni&&(t.blending=this.blending),this.side!==Ui&&(t.side=this.side),this.vertexColors&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=this.transparent),t.depthFunc=this.depthFunc,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.colorWrite=this.colorWrite,t.stencilWrite=this.stencilWrite,t.stencilWriteMask=this.stencilWriteMask,t.stencilFunc=this.stencilFunc,t.stencilRef=this.stencilRef,t.stencilFuncMask=this.stencilFuncMask,t.stencilFail=this.stencilFail,t.stencilZFail=this.stencilZFail,t.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(t.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(t.flatShading=this.flatShading),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),this.fog===!1&&(t.fog=!1),JSON.stringify(this.userData)!=="{}"&&(t.userData=this.userData);function a(l){const c=[];for(const n in l){const f=l[n];delete f.metadata,c.push(f)}return c}if(r){const l=a(e.textures),c=a(e.images);l.length>0&&(t.textures=l),c.length>0&&(t.images=c)}return t}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const r=e.clippingPlanes;let t=null;if(r!==null){const a=r.length;t=new Array(a);for(let l=0;l!==a;++l)t[l]=r[l].clone()}return this.clippingPlanes=t,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}er.prototype.isMaterial=!0;er.fromType=function(){return null};class gn extends er{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Lo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}gn.prototype.isMeshBasicMaterial=!0;const sr=new Me,Qs=new tt;class nr{constructor(e,r,t){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=r,this.count=e!==void 0?e.length/r:0,this.normalized=t===!0,this.usage=Ms,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,r,t){e*=this.itemSize,t*=r.itemSize;for(let a=0,l=this.itemSize;a<l;a++)this.array[e+a]=r.array[t+a];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const r=this.array;let t=0;for(let a=0,l=e.length;a<l;a++){let c=e[a];c===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",a),c=new at),r[t++]=c.r,r[t++]=c.g,r[t++]=c.b}return this}copyVector2sArray(e){const r=this.array;let t=0;for(let a=0,l=e.length;a<l;a++){let c=e[a];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",a),c=new tt),r[t++]=c.x,r[t++]=c.y}return this}copyVector3sArray(e){const r=this.array;let t=0;for(let a=0,l=e.length;a<l;a++){let c=e[a];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",a),c=new Me),r[t++]=c.x,r[t++]=c.y,r[t++]=c.z}return this}copyVector4sArray(e){const r=this.array;let t=0;for(let a=0,l=e.length;a<l;a++){let c=e[a];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",a),c=new Vt),r[t++]=c.x,r[t++]=c.y,r[t++]=c.z,r[t++]=c.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let r=0,t=this.count;r<t;r++)Qs.fromBufferAttribute(this,r),Qs.applyMatrix3(e),this.setXY(r,Qs.x,Qs.y);else if(this.itemSize===3)for(let r=0,t=this.count;r<t;r++)sr.fromBufferAttribute(this,r),sr.applyMatrix3(e),this.setXYZ(r,sr.x,sr.y,sr.z);return this}applyMatrix4(e){for(let r=0,t=this.count;r<t;r++)sr.fromBufferAttribute(this,r),sr.applyMatrix4(e),this.setXYZ(r,sr.x,sr.y,sr.z);return this}applyNormalMatrix(e){for(let r=0,t=this.count;r<t;r++)sr.fromBufferAttribute(this,r),sr.applyNormalMatrix(e),this.setXYZ(r,sr.x,sr.y,sr.z);return this}transformDirection(e){for(let r=0,t=this.count;r<t;r++)sr.fromBufferAttribute(this,r),sr.transformDirection(e),this.setXYZ(r,sr.x,sr.y,sr.z);return this}set(e,r=0){return this.array.set(e,r),this}getX(e){return this.array[e*this.itemSize]}setX(e,r){return this.array[e*this.itemSize]=r,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,r){return this.array[e*this.itemSize+1]=r,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,r){return this.array[e*this.itemSize+2]=r,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,r){return this.array[e*this.itemSize+3]=r,this}setXY(e,r,t){return e*=this.itemSize,this.array[e+0]=r,this.array[e+1]=t,this}setXYZ(e,r,t,a){return e*=this.itemSize,this.array[e+0]=r,this.array[e+1]=t,this.array[e+2]=a,this}setXYZW(e,r,t,a,l){return e*=this.itemSize,this.array[e+0]=r,this.array[e+1]=t,this.array[e+2]=a,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ms&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}nr.prototype.isBufferAttribute=!0;class ph extends nr{constructor(e,r,t){super(new Uint16Array(e),r,t)}}class mh extends nr{constructor(e,r,t){super(new Uint32Array(e),r,t)}}class op extends nr{constructor(e,r,t){super(new Uint16Array(e),r,t)}}op.prototype.isFloat16BufferAttribute=!0;class hr extends nr{constructor(e,r,t){super(new Float32Array(e),r,t)}}let ap=0;const Rr=new pt,va=new Bt,wi=new Me,Ar=new Or,as=new Or,cr=new Me;class Zt extends ii{constructor(){super(),Object.defineProperty(this,"id",{value:ap++}),this.uuid=Ir(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(hh(e)?mh:ph)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,r,t=0){this.groups.push({start:e,count:r,materialIndex:t})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(e),r.needsUpdate=!0);const t=this.attributes.normal;if(t!==void 0){const l=new gr().getNormalMatrix(e);t.applyNormalMatrix(l),t.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Rr.makeRotationFromQuaternion(e),this.applyMatrix4(Rr),this}rotateX(e){return Rr.makeRotationX(e),this.applyMatrix4(Rr),this}rotateY(e){return Rr.makeRotationY(e),this.applyMatrix4(Rr),this}rotateZ(e){return Rr.makeRotationZ(e),this.applyMatrix4(Rr),this}translate(e,r,t){return Rr.makeTranslation(e,r,t),this.applyMatrix4(Rr),this}scale(e,r,t){return Rr.makeScale(e,r,t),this.applyMatrix4(Rr),this}lookAt(e){return va.lookAt(e),va.updateMatrix(),this.applyMatrix4(va.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(wi).negate(),this.translate(wi.x,wi.y,wi.z),this}setFromPoints(e){const r=[];for(let t=0,a=e.length;t<a;t++){const l=e[t];r.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new hr(r,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Or);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Me(-1/0,-1/0,-1/0),new Me(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),r)for(let t=0,a=r.length;t<a;t++){const l=r[t];Ar.setFromBufferAttribute(l),this.morphTargetsRelative?(cr.addVectors(this.boundingBox.min,Ar.min),this.boundingBox.expandByPoint(cr),cr.addVectors(this.boundingBox.max,Ar.max),this.boundingBox.expandByPoint(cr)):(this.boundingBox.expandByPoint(Ar.min),this.boundingBox.expandByPoint(Ar.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new oi);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Me,1/0);return}if(e){const t=this.boundingSphere.center;if(Ar.setFromBufferAttribute(e),r)for(let l=0,c=r.length;l<c;l++){const n=r[l];as.setFromBufferAttribute(n),this.morphTargetsRelative?(cr.addVectors(Ar.min,as.min),Ar.expandByPoint(cr),cr.addVectors(Ar.max,as.max),Ar.expandByPoint(cr)):(Ar.expandByPoint(as.min),Ar.expandByPoint(as.max))}Ar.getCenter(t);let a=0;for(let l=0,c=e.count;l<c;l++)cr.fromBufferAttribute(e,l),a=Math.max(a,t.distanceToSquared(cr));if(r)for(let l=0,c=r.length;l<c;l++){const n=r[l],f=this.morphTargetsRelative;for(let h=0,m=n.count;h<m;h++)cr.fromBufferAttribute(n,h),f&&(wi.fromBufferAttribute(e,h),cr.add(wi)),a=Math.max(a,t.distanceToSquared(cr))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,r=this.attributes;if(e===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const t=e.array,a=r.position.array,l=r.normal.array,c=r.uv.array,n=a.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new nr(new Float32Array(4*n),4));const f=this.getAttribute("tangent").array,h=[],m=[];for(let R=0;R<n;R++)h[R]=new Me,m[R]=new Me;const p=new Me,s=new Me,i=new Me,o=new tt,d=new tt,u=new tt,g=new Me,b=new Me;function _(R,D,F){p.fromArray(a,R*3),s.fromArray(a,D*3),i.fromArray(a,F*3),o.fromArray(c,R*2),d.fromArray(c,D*2),u.fromArray(c,F*2),s.sub(p),i.sub(p),d.sub(o),u.sub(o);const I=1/(d.x*u.y-u.x*d.y);!isFinite(I)||(g.copy(s).multiplyScalar(u.y).addScaledVector(i,-d.y).multiplyScalar(I),b.copy(i).multiplyScalar(d.x).addScaledVector(s,-u.x).multiplyScalar(I),h[R].add(g),h[D].add(g),h[F].add(g),m[R].add(b),m[D].add(b),m[F].add(b))}let w=this.groups;w.length===0&&(w=[{start:0,count:t.length}]);for(let R=0,D=w.length;R<D;++R){const F=w[R],I=F.start,k=F.count;for(let U=I,q=I+k;U<q;U+=3)_(t[U+0],t[U+1],t[U+2])}const S=new Me,T=new Me,L=new Me,A=new Me;function P(R){L.fromArray(l,R*3),A.copy(L);const D=h[R];S.copy(D),S.sub(L.multiplyScalar(L.dot(D))).normalize(),T.crossVectors(A,D);const I=T.dot(m[R])<0?-1:1;f[R*4]=S.x,f[R*4+1]=S.y,f[R*4+2]=S.z,f[R*4+3]=I}for(let R=0,D=w.length;R<D;++R){const F=w[R],I=F.start,k=F.count;for(let U=I,q=I+k;U<q;U+=3)P(t[U+0]),P(t[U+1]),P(t[U+2])}}computeVertexNormals(){const e=this.index,r=this.getAttribute("position");if(r!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new nr(new Float32Array(r.count*3),3),this.setAttribute("normal",t);else for(let s=0,i=t.count;s<i;s++)t.setXYZ(s,0,0,0);const a=new Me,l=new Me,c=new Me,n=new Me,f=new Me,h=new Me,m=new Me,p=new Me;if(e)for(let s=0,i=e.count;s<i;s+=3){const o=e.getX(s+0),d=e.getX(s+1),u=e.getX(s+2);a.fromBufferAttribute(r,o),l.fromBufferAttribute(r,d),c.fromBufferAttribute(r,u),m.subVectors(c,l),p.subVectors(a,l),m.cross(p),n.fromBufferAttribute(t,o),f.fromBufferAttribute(t,d),h.fromBufferAttribute(t,u),n.add(m),f.add(m),h.add(m),t.setXYZ(o,n.x,n.y,n.z),t.setXYZ(d,f.x,f.y,f.z),t.setXYZ(u,h.x,h.y,h.z)}else for(let s=0,i=r.count;s<i;s+=3)a.fromBufferAttribute(r,s+0),l.fromBufferAttribute(r,s+1),c.fromBufferAttribute(r,s+2),m.subVectors(c,l),p.subVectors(a,l),m.cross(p),t.setXYZ(s+0,m.x,m.y,m.z),t.setXYZ(s+1,m.x,m.y,m.z),t.setXYZ(s+2,m.x,m.y,m.z);this.normalizeNormals(),t.needsUpdate=!0}}merge(e,r){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}r===void 0&&(r=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const t=this.attributes;for(const a in t){if(e.attributes[a]===void 0)continue;const c=t[a].array,n=e.attributes[a],f=n.array,h=n.itemSize*r,m=Math.min(f.length,c.length-h);for(let p=0,s=h;p<m;p++,s++)c[s]=f[p]}return this}normalizeNormals(){const e=this.attributes.normal;for(let r=0,t=e.count;r<t;r++)cr.fromBufferAttribute(e,r),cr.normalize(),e.setXYZ(r,cr.x,cr.y,cr.z)}toNonIndexed(){function e(n,f){const h=n.array,m=n.itemSize,p=n.normalized,s=new h.constructor(f.length*m);let i=0,o=0;for(let d=0,u=f.length;d<u;d++){n.isInterleavedBufferAttribute?i=f[d]*n.data.stride+n.offset:i=f[d]*m;for(let g=0;g<m;g++)s[o++]=h[i++]}return new nr(s,m,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new Zt,t=this.index.array,a=this.attributes;for(const n in a){const f=a[n],h=e(f,t);r.setAttribute(n,h)}const l=this.morphAttributes;for(const n in l){const f=[],h=l[n];for(let m=0,p=h.length;m<p;m++){const s=h[m],i=e(s,t);f.push(i)}r.morphAttributes[n]=f}r.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let n=0,f=c.length;n<f;n++){const h=c[n];r.addGroup(h.start,h.count,h.materialIndex)}return r}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const h in f)f[h]!==void 0&&(e[h]=f[h]);return e}e.data={attributes:{}};const r=this.index;r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const t=this.attributes;for(const f in t){const h=t[f];e.data.attributes[f]=h.toJSON(e.data)}const a={};let l=!1;for(const f in this.morphAttributes){const h=this.morphAttributes[f],m=[];for(let p=0,s=h.length;p<s;p++){const i=h[p];m.push(i.toJSON(e.data))}m.length>0&&(a[f]=m,l=!0)}l&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));const n=this.boundingSphere;return n!==null&&(e.data.boundingSphere={center:n.center.toArray(),radius:n.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=e.name;const t=e.index;t!==null&&this.setIndex(t.clone(r));const a=e.attributes;for(const h in a){const m=a[h];this.setAttribute(h,m.clone(r))}const l=e.morphAttributes;for(const h in l){const m=[],p=l[h];for(let s=0,i=p.length;s<i;s++)m.push(p[s].clone(r));this.morphAttributes[h]=m}this.morphTargetsRelative=e.morphTargetsRelative;const c=e.groups;for(let h=0,m=c.length;h<m;h++){const p=c[h];this.addGroup(p.start,p.count,p.materialIndex)}const n=e.boundingBox;n!==null&&(this.boundingBox=n.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Zt.prototype.isBufferGeometry=!0;const $u=new pt,Si=new Zi,ba=new oi,An=new Me,Ln=new Me,Cn=new Me,_a=new Me,xa=new Me,wa=new Me,$s=new Me,eo=new Me,to=new Me,ro=new tt,no=new tt,io=new tt,Sa=new Me,so=new Me;class xr extends Bt{constructor(e=new Zt,r=new gn){super(),this.type="Mesh",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const r=e.morphAttributes,t=Object.keys(r);if(t.length>0){const a=r[t[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=a.length;l<c;l++){const n=a[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=l}}}}else{const r=e.morphTargets;r!==void 0&&r.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,r){const t=this.geometry,a=this.material,l=this.matrixWorld;if(a===void 0||(t.boundingSphere===null&&t.computeBoundingSphere(),ba.copy(t.boundingSphere),ba.applyMatrix4(l),e.ray.intersectsSphere(ba)===!1)||($u.copy(l).invert(),Si.copy(e.ray).applyMatrix4($u),t.boundingBox!==null&&Si.intersectsBox(t.boundingBox)===!1))return;let c;if(t.isBufferGeometry){const n=t.index,f=t.attributes.position,h=t.morphAttributes.position,m=t.morphTargetsRelative,p=t.attributes.uv,s=t.attributes.uv2,i=t.groups,o=t.drawRange;if(n!==null)if(Array.isArray(a))for(let d=0,u=i.length;d<u;d++){const g=i[d],b=a[g.materialIndex],_=Math.max(g.start,o.start),w=Math.min(n.count,Math.min(g.start+g.count,o.start+o.count));for(let S=_,T=w;S<T;S+=3){const L=n.getX(S),A=n.getX(S+1),P=n.getX(S+2);c=oo(this,b,e,Si,f,h,m,p,s,L,A,P),c&&(c.faceIndex=Math.floor(S/3),c.face.materialIndex=g.materialIndex,r.push(c))}}else{const d=Math.max(0,o.start),u=Math.min(n.count,o.start+o.count);for(let g=d,b=u;g<b;g+=3){const _=n.getX(g),w=n.getX(g+1),S=n.getX(g+2);c=oo(this,a,e,Si,f,h,m,p,s,_,w,S),c&&(c.faceIndex=Math.floor(g/3),r.push(c))}}else if(f!==void 0)if(Array.isArray(a))for(let d=0,u=i.length;d<u;d++){const g=i[d],b=a[g.materialIndex],_=Math.max(g.start,o.start),w=Math.min(f.count,Math.min(g.start+g.count,o.start+o.count));for(let S=_,T=w;S<T;S+=3){const L=S,A=S+1,P=S+2;c=oo(this,b,e,Si,f,h,m,p,s,L,A,P),c&&(c.faceIndex=Math.floor(S/3),c.face.materialIndex=g.materialIndex,r.push(c))}}else{const d=Math.max(0,o.start),u=Math.min(f.count,o.start+o.count);for(let g=d,b=u;g<b;g+=3){const _=g,w=g+1,S=g+2;c=oo(this,a,e,Si,f,h,m,p,s,_,w,S),c&&(c.faceIndex=Math.floor(g/3),r.push(c))}}}else t.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}xr.prototype.isMesh=!0;function lp(v,e,r,t,a,l,c,n){let f;if(e.side===qr?f=t.intersectTriangle(c,l,a,!0,n):f=t.intersectTriangle(a,l,c,e.side!==$n,n),f===null)return null;so.copy(n),so.applyMatrix4(v.matrixWorld);const h=r.ray.origin.distanceTo(so);return h<r.near||h>r.far?null:{distance:h,point:so.clone(),object:v}}function oo(v,e,r,t,a,l,c,n,f,h,m,p){An.fromBufferAttribute(a,h),Ln.fromBufferAttribute(a,m),Cn.fromBufferAttribute(a,p);const s=v.morphTargetInfluences;if(l&&s){$s.set(0,0,0),eo.set(0,0,0),to.set(0,0,0);for(let o=0,d=l.length;o<d;o++){const u=s[o],g=l[o];u!==0&&(_a.fromBufferAttribute(g,h),xa.fromBufferAttribute(g,m),wa.fromBufferAttribute(g,p),c?($s.addScaledVector(_a,u),eo.addScaledVector(xa,u),to.addScaledVector(wa,u)):($s.addScaledVector(_a.sub(An),u),eo.addScaledVector(xa.sub(Ln),u),to.addScaledVector(wa.sub(Cn),u)))}An.add($s),Ln.add(eo),Cn.add(to)}v.isSkinnedMesh&&(v.boneTransform(h,An),v.boneTransform(m,Ln),v.boneTransform(p,Cn));const i=lp(v,e,r,t,An,Ln,Cn,Sa);if(i){n&&(ro.fromBufferAttribute(n,h),no.fromBufferAttribute(n,m),io.fromBufferAttribute(n,p),i.uv=or.getUV(Sa,An,Ln,Cn,ro,no,io,new tt)),f&&(ro.fromBufferAttribute(f,h),no.fromBufferAttribute(f,m),io.fromBufferAttribute(f,p),i.uv2=or.getUV(Sa,An,Ln,Cn,ro,no,io,new tt));const o={a:h,b:m,c:p,normal:new Me,materialIndex:0};or.getNormal(An,Ln,Cn,o.normal),i.face=o}return i}class Is extends Zt{constructor(e=1,r=1,t=1,a=1,l=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:t,widthSegments:a,heightSegments:l,depthSegments:c};const n=this;a=Math.floor(a),l=Math.floor(l),c=Math.floor(c);const f=[],h=[],m=[],p=[];let s=0,i=0;o("z","y","x",-1,-1,t,r,e,c,l,0),o("z","y","x",1,-1,t,r,-e,c,l,1),o("x","z","y",1,1,e,t,r,a,c,2),o("x","z","y",1,-1,e,t,-r,a,c,3),o("x","y","z",1,-1,e,r,t,a,l,4),o("x","y","z",-1,-1,e,r,-t,a,l,5),this.setIndex(f),this.setAttribute("position",new hr(h,3)),this.setAttribute("normal",new hr(m,3)),this.setAttribute("uv",new hr(p,2));function o(d,u,g,b,_,w,S,T,L,A,P){const R=w/L,D=S/A,F=w/2,I=S/2,k=T/2,U=L+1,q=A+1;let Q=0,W=0;const K=new Me;for(let Y=0;Y<q;Y++){const se=Y*D-I;for(let ue=0;ue<U;ue++){const ge=ue*R-F;K[d]=ge*b,K[u]=se*_,K[g]=k,h.push(K.x,K.y,K.z),K[d]=0,K[u]=0,K[g]=T>0?1:-1,m.push(K.x,K.y,K.z),p.push(ue/L),p.push(1-Y/A),Q+=1}}for(let Y=0;Y<A;Y++)for(let se=0;se<L;se++){const ue=s+se+U*Y,ge=s+se+U*(Y+1),de=s+(se+1)+U*(Y+1),Pe=s+(se+1)+U*Y;f.push(ue,ge,Pe),f.push(ge,de,Pe),W+=6}n.addGroup(i,W,P),i+=W,s+=Q}}static fromJSON(e){return new Is(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Wi(v){const e={};for(const r in v){e[r]={};for(const t in v[r]){const a=v[r][t];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?e[r][t]=a.clone():Array.isArray(a)?e[r][t]=a.slice():e[r][t]=a}}return e}function yr(v){const e={};for(let r=0;r<v.length;r++){const t=Wi(v[r]);for(const a in t)e[a]=t[a]}return e}const up={clone:Wi,merge:yr};var cp=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,hp=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Xr extends er{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=cp,this.fragmentShader=hp,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Wi(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const r=super.toJSON(e);r.glslVersion=this.glslVersion,r.uniforms={};for(const a in this.uniforms){const c=this.uniforms[a].value;c&&c.isTexture?r.uniforms[a]={type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?r.uniforms[a]={type:"c",value:c.getHex()}:c&&c.isVector2?r.uniforms[a]={type:"v2",value:c.toArray()}:c&&c.isVector3?r.uniforms[a]={type:"v3",value:c.toArray()}:c&&c.isVector4?r.uniforms[a]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?r.uniforms[a]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?r.uniforms[a]={type:"m4",value:c.toArray()}:r.uniforms[a]={value:c}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader;const t={};for(const a in this.extensions)this.extensions[a]===!0&&(t[a]=!0);return Object.keys(t).length>0&&(r.extensions=t),r}}Xr.prototype.isShaderMaterial=!0;class ol extends Bt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new pt,this.projectionMatrix=new pt,this.projectionMatrixInverse=new pt}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(-r[8],-r[9],-r[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}ol.prototype.isCamera=!0;class br extends ol{constructor(e=50,r=1,t=.1,a=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=t,this.far=a,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const r=.5*this.getFilmHeight()/e;this.fov=Ts*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ys*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ts*2*Math.atan(Math.tan(ys*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,r,t,a,l,c){this.aspect=e/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=t,this.view.offsetY=a,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let r=e*Math.tan(ys*.5*this.fov)/this.zoom,t=2*r,a=this.aspect*t,l=-.5*a;const c=this.view;if(this.view!==null&&this.view.enabled){const f=c.fullWidth,h=c.fullHeight;l+=c.offsetX*a/f,r-=c.offsetY*t/h,a*=c.width/f,t*=c.height/h}const n=this.filmOffset;n!==0&&(l+=e*n/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+a,r,r-t,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}br.prototype.isPerspectiveCamera=!0;const Mi=90,Ti=1;class al extends Bt{constructor(e,r,t){if(super(),this.type="CubeCamera",t.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=t;const a=new br(Mi,Ti,e,r);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Me(1,0,0)),this.add(a);const l=new br(Mi,Ti,e,r);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Me(-1,0,0)),this.add(l);const c=new br(Mi,Ti,e,r);c.layers=this.layers,c.up.set(0,0,1),c.lookAt(new Me(0,1,0)),this.add(c);const n=new br(Mi,Ti,e,r);n.layers=this.layers,n.up.set(0,0,-1),n.lookAt(new Me(0,-1,0)),this.add(n);const f=new br(Mi,Ti,e,r);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new Me(0,0,1)),this.add(f);const h=new br(Mi,Ti,e,r);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Me(0,0,-1)),this.add(h)}update(e,r){this.parent===null&&this.updateMatrixWorld();const t=this.renderTarget,[a,l,c,n,f,h]=this.children,m=e.getRenderTarget(),p=e.toneMapping,s=e.xr.enabled;e.toneMapping=yn,e.xr.enabled=!1;const i=t.texture.generateMipmaps;t.texture.generateMipmaps=!1,e.setRenderTarget(t,0),e.render(r,a),e.setRenderTarget(t,1),e.render(r,l),e.setRenderTarget(t,2),e.render(r,c),e.setRenderTarget(t,3),e.render(r,n),e.setRenderTarget(t,4),e.render(r,f),t.texture.generateMipmaps=i,e.setRenderTarget(t,5),e.render(r,h),e.setRenderTarget(m),e.toneMapping=p,e.xr.enabled=s,t.texture.needsPMREMUpdate=!0}}class Po extends ar{constructor(e,r,t,a,l,c,n,f,h,m){e=e!==void 0?e:[],r=r!==void 0?r:Bi,super(e,r,t,a,l,c,n,f,h,m),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Po.prototype.isCubeTexture=!0;class gh extends Lr{constructor(e,r={}){super(e,e,r);const t={width:e,height:e,depth:1},a=[t,t,t,t,t,t];this.texture=new Po(a,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:vr}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.encoding=r.encoding,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const t={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Is(5,5,5),l=new Xr({name:"CubemapFromEquirect",uniforms:Wi(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:qr,blending:jn});l.uniforms.tEquirect.value=r;const c=new xr(a,l),n=r.minFilter;return r.minFilter===Yi&&(r.minFilter=vr),new al(1,10,this).update(e,c),r.minFilter=n,c.geometry.dispose(),c.material.dispose(),this}clear(e,r,t,a){const l=e.getRenderTarget();for(let c=0;c<6;c++)e.setRenderTarget(this,c),e.clear(r,t,a);e.setRenderTarget(l)}}gh.prototype.isWebGLCubeRenderTarget=!0;const Ma=new Me,dp=new Me,fp=new gr;class mn{constructor(e=new Me(1,0,0),r=0){this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,t,a){return this.normal.set(e,r,t),this.constant=a,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,t){const a=Ma.subVectors(t,r).cross(dp.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,r){const t=e.delta(Ma),a=this.normal.dot(t);if(a===0)return this.distanceToPoint(e.start)===0?r.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/a;return l<0||l>1?null:r.copy(t).multiplyScalar(l).add(e.start)}intersectsLine(e){const r=this.distanceToPoint(e.start),t=this.distanceToPoint(e.end);return r<0&&t>0||t<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){const t=r||fp.getNormalMatrix(e),a=this.coplanarPoint(Ma).applyMatrix4(e),l=this.normal.applyMatrix3(t).normalize();return this.constant=-a.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}mn.prototype.isPlane=!0;const Ei=new oi,ao=new Me;class Do{constructor(e=new mn,r=new mn,t=new mn,a=new mn,l=new mn,c=new mn){this.planes=[e,r,t,a,l,c]}set(e,r,t,a,l,c){const n=this.planes;return n[0].copy(e),n[1].copy(r),n[2].copy(t),n[3].copy(a),n[4].copy(l),n[5].copy(c),this}copy(e){const r=this.planes;for(let t=0;t<6;t++)r[t].copy(e.planes[t]);return this}setFromProjectionMatrix(e){const r=this.planes,t=e.elements,a=t[0],l=t[1],c=t[2],n=t[3],f=t[4],h=t[5],m=t[6],p=t[7],s=t[8],i=t[9],o=t[10],d=t[11],u=t[12],g=t[13],b=t[14],_=t[15];return r[0].setComponents(n-a,p-f,d-s,_-u).normalize(),r[1].setComponents(n+a,p+f,d+s,_+u).normalize(),r[2].setComponents(n+l,p+h,d+i,_+g).normalize(),r[3].setComponents(n-l,p-h,d-i,_-g).normalize(),r[4].setComponents(n-c,p-m,d-o,_-b).normalize(),r[5].setComponents(n+c,p+m,d+o,_+b).normalize(),this}intersectsObject(e){const r=e.geometry;return r.boundingSphere===null&&r.computeBoundingSphere(),Ei.copy(r.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ei)}intersectsSprite(e){return Ei.center.set(0,0,0),Ei.radius=.7071067811865476,Ei.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ei)}intersectsSphere(e){const r=this.planes,t=e.center,a=-e.radius;for(let l=0;l<6;l++)if(r[l].distanceToPoint(t)<a)return!1;return!0}intersectsBox(e){const r=this.planes;for(let t=0;t<6;t++){const a=r[t];if(ao.x=a.normal.x>0?e.max.x:e.min.x,ao.y=a.normal.y>0?e.max.y:e.min.y,ao.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(ao)<0)return!1}return!0}containsPoint(e){const r=this.planes;for(let t=0;t<6;t++)if(r[t].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function yh(){let v=null,e=!1,r=null,t=null;function a(l,c){r(l,c),t=v.requestAnimationFrame(a)}return{start:function(){e!==!0&&r!==null&&(t=v.requestAnimationFrame(a),e=!0)},stop:function(){v.cancelAnimationFrame(t),e=!1},setAnimationLoop:function(l){r=l},setContext:function(l){v=l}}}function pp(v,e){const r=e.isWebGL2,t=new WeakMap;function a(h,m){const p=h.array,s=h.usage,i=v.createBuffer();v.bindBuffer(m,i),v.bufferData(m,p,s),h.onUploadCallback();let o;if(p instanceof Float32Array)o=5126;else if(p instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(r)o=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else o=5123;else if(p instanceof Int16Array)o=5122;else if(p instanceof Uint32Array)o=5125;else if(p instanceof Int32Array)o=5124;else if(p instanceof Int8Array)o=5120;else if(p instanceof Uint8Array)o=5121;else if(p instanceof Uint8ClampedArray)o=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:i,type:o,bytesPerElement:p.BYTES_PER_ELEMENT,version:h.version}}function l(h,m,p){const s=m.array,i=m.updateRange;v.bindBuffer(p,h),i.count===-1?v.bufferSubData(p,0,s):(r?v.bufferSubData(p,i.offset*s.BYTES_PER_ELEMENT,s,i.offset,i.count):v.bufferSubData(p,i.offset*s.BYTES_PER_ELEMENT,s.subarray(i.offset,i.offset+i.count)),i.count=-1)}function c(h){return h.isInterleavedBufferAttribute&&(h=h.data),t.get(h)}function n(h){h.isInterleavedBufferAttribute&&(h=h.data);const m=t.get(h);m&&(v.deleteBuffer(m.buffer),t.delete(h))}function f(h,m){if(h.isGLBufferAttribute){const s=t.get(h);(!s||s.version<h.version)&&t.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const p=t.get(h);p===void 0?t.set(h,a(h,m)):p.version<h.version&&(l(p.buffer,h,m),p.version=h.version)}return{get:c,remove:n,update:f}}class ll extends Zt{constructor(e=1,r=1,t=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:t,heightSegments:a};const l=e/2,c=r/2,n=Math.floor(t),f=Math.floor(a),h=n+1,m=f+1,p=e/n,s=r/f,i=[],o=[],d=[],u=[];for(let g=0;g<m;g++){const b=g*s-c;for(let _=0;_<h;_++){const w=_*p-l;o.push(w,-b,0),d.push(0,0,1),u.push(_/n),u.push(1-g/f)}}for(let g=0;g<f;g++)for(let b=0;b<n;b++){const _=b+h*g,w=b+h*(g+1),S=b+1+h*(g+1),T=b+1+h*g;i.push(_,w,T),i.push(w,S,T)}this.setIndex(i),this.setAttribute("position",new hr(o,3)),this.setAttribute("normal",new hr(d,3)),this.setAttribute("uv",new hr(u,2))}static fromJSON(e){return new ll(e.width,e.height,e.widthSegments,e.heightSegments)}}var mp=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,gp=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yp=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,vp=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,bp=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,_p=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,xp="vec3 transformed = vec3( position );",wp=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Sp=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Mp=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Tp=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Ep=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ap=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Lp=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Cp=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Rp=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Pp=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Dp=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Ip=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,jp=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Op=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,kp=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Np=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Fp=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Up=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Bp="gl_FragColor = linearToOutputTexel( gl_FragColor );",Gp=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,zp=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Vp=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Hp=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Wp=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,qp=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Xp=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Yp=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Zp=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Kp=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Jp=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Qp=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,$p=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,em=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,tm=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,rm=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,nm=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,im=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,sm=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,om=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,am=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,lm=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,um=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,cm=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,hm=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,dm=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,fm=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,pm=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,mm=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,gm=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ym=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,vm=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,bm=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_m=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,xm=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,wm=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Sm=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Mm=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Tm=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Em=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Am=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Lm=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Cm=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Rm=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Pm=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Dm=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Im=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,jm=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Om=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,km=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Nm=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Fm=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Um=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Bm=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Gm=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,zm=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Vm=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Hm=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Wm=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,qm=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Xm=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ym=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Zm=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Km=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Jm=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Qm=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,$m=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,eg=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tg=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,rg=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,ng=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,ig=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,sg=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,og=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,ag=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,lg=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,ug=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const cg=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,hg=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,dg=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fg=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,pg=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,mg=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,gg=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,yg=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vg=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bg=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,_g=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xg=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wg=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Sg=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mg=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Tg=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Eg=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Ag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lg=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Cg=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Rg=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Pg=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dg=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Ig=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jg=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Og=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kg=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Ng=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Fg=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ug=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Bg=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Gg=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Lt={alphamap_fragment:mp,alphamap_pars_fragment:gp,alphatest_fragment:yp,alphatest_pars_fragment:vp,aomap_fragment:bp,aomap_pars_fragment:_p,begin_vertex:xp,beginnormal_vertex:wp,bsdfs:Sp,bumpmap_pars_fragment:Mp,clipping_planes_fragment:Tp,clipping_planes_pars_fragment:Ep,clipping_planes_pars_vertex:Ap,clipping_planes_vertex:Lp,color_fragment:Cp,color_pars_fragment:Rp,color_pars_vertex:Pp,color_vertex:Dp,common:Ip,cube_uv_reflection_fragment:jp,defaultnormal_vertex:Op,displacementmap_pars_vertex:kp,displacementmap_vertex:Np,emissivemap_fragment:Fp,emissivemap_pars_fragment:Up,encodings_fragment:Bp,encodings_pars_fragment:Gp,envmap_fragment:zp,envmap_common_pars_fragment:Vp,envmap_pars_fragment:Hp,envmap_pars_vertex:Wp,envmap_physical_pars_fragment:rm,envmap_vertex:qp,fog_vertex:Xp,fog_pars_vertex:Yp,fog_fragment:Zp,fog_pars_fragment:Kp,gradientmap_pars_fragment:Jp,lightmap_fragment:Qp,lightmap_pars_fragment:$p,lights_lambert_vertex:em,lights_pars_begin:tm,lights_toon_fragment:nm,lights_toon_pars_fragment:im,lights_phong_fragment:sm,lights_phong_pars_fragment:om,lights_physical_fragment:am,lights_physical_pars_fragment:lm,lights_fragment_begin:um,lights_fragment_maps:cm,lights_fragment_end:hm,logdepthbuf_fragment:dm,logdepthbuf_pars_fragment:fm,logdepthbuf_pars_vertex:pm,logdepthbuf_vertex:mm,map_fragment:gm,map_pars_fragment:ym,map_particle_fragment:vm,map_particle_pars_fragment:bm,metalnessmap_fragment:_m,metalnessmap_pars_fragment:xm,morphcolor_vertex:wm,morphnormal_vertex:Sm,morphtarget_pars_vertex:Mm,morphtarget_vertex:Tm,normal_fragment_begin:Em,normal_fragment_maps:Am,normal_pars_fragment:Lm,normal_pars_vertex:Cm,normal_vertex:Rm,normalmap_pars_fragment:Pm,clearcoat_normal_fragment_begin:Dm,clearcoat_normal_fragment_maps:Im,clearcoat_pars_fragment:jm,output_fragment:Om,packing:km,premultiplied_alpha_fragment:Nm,project_vertex:Fm,dithering_fragment:Um,dithering_pars_fragment:Bm,roughnessmap_fragment:Gm,roughnessmap_pars_fragment:zm,shadowmap_pars_fragment:Vm,shadowmap_pars_vertex:Hm,shadowmap_vertex:Wm,shadowmask_pars_fragment:qm,skinbase_vertex:Xm,skinning_pars_vertex:Ym,skinning_vertex:Zm,skinnormal_vertex:Km,specularmap_fragment:Jm,specularmap_pars_fragment:Qm,tonemapping_fragment:$m,tonemapping_pars_fragment:eg,transmission_fragment:tg,transmission_pars_fragment:rg,uv_pars_fragment:ng,uv_pars_vertex:ig,uv_vertex:sg,uv2_pars_fragment:og,uv2_pars_vertex:ag,uv2_vertex:lg,worldpos_vertex:ug,background_vert:cg,background_frag:hg,cube_vert:dg,cube_frag:fg,depth_vert:pg,depth_frag:mg,distanceRGBA_vert:gg,distanceRGBA_frag:yg,equirect_vert:vg,equirect_frag:bg,linedashed_vert:_g,linedashed_frag:xg,meshbasic_vert:wg,meshbasic_frag:Sg,meshlambert_vert:Mg,meshlambert_frag:Tg,meshmatcap_vert:Eg,meshmatcap_frag:Ag,meshnormal_vert:Lg,meshnormal_frag:Cg,meshphong_vert:Rg,meshphong_frag:Pg,meshphysical_vert:Dg,meshphysical_frag:Ig,meshtoon_vert:jg,meshtoon_frag:Og,points_vert:kg,points_frag:Ng,shadow_vert:Fg,shadow_frag:Ug,sprite_vert:Bg,sprite_frag:Gg},nt={common:{diffuse:{value:new at(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new gr},uv2Transform:{value:new gr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new tt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new at(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new at(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gr}},sprite:{diffuse:{value:new at(16777215)},opacity:{value:1},center:{value:new tt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gr}}},$r={basic:{uniforms:yr([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.fog]),vertexShader:Lt.meshbasic_vert,fragmentShader:Lt.meshbasic_frag},lambert:{uniforms:yr([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.fog,nt.lights,{emissive:{value:new at(0)}}]),vertexShader:Lt.meshlambert_vert,fragmentShader:Lt.meshlambert_frag},phong:{uniforms:yr([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,nt.lights,{emissive:{value:new at(0)},specular:{value:new at(1118481)},shininess:{value:30}}]),vertexShader:Lt.meshphong_vert,fragmentShader:Lt.meshphong_frag},standard:{uniforms:yr([nt.common,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.roughnessmap,nt.metalnessmap,nt.fog,nt.lights,{emissive:{value:new at(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag},toon:{uniforms:yr([nt.common,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.gradientmap,nt.fog,nt.lights,{emissive:{value:new at(0)}}]),vertexShader:Lt.meshtoon_vert,fragmentShader:Lt.meshtoon_frag},matcap:{uniforms:yr([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,{matcap:{value:null}}]),vertexShader:Lt.meshmatcap_vert,fragmentShader:Lt.meshmatcap_frag},points:{uniforms:yr([nt.points,nt.fog]),vertexShader:Lt.points_vert,fragmentShader:Lt.points_frag},dashed:{uniforms:yr([nt.common,nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lt.linedashed_vert,fragmentShader:Lt.linedashed_frag},depth:{uniforms:yr([nt.common,nt.displacementmap]),vertexShader:Lt.depth_vert,fragmentShader:Lt.depth_frag},normal:{uniforms:yr([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,{opacity:{value:1}}]),vertexShader:Lt.meshnormal_vert,fragmentShader:Lt.meshnormal_frag},sprite:{uniforms:yr([nt.sprite,nt.fog]),vertexShader:Lt.sprite_vert,fragmentShader:Lt.sprite_frag},background:{uniforms:{uvTransform:{value:new gr},t2D:{value:null}},vertexShader:Lt.background_vert,fragmentShader:Lt.background_frag},cube:{uniforms:yr([nt.envmap,{opacity:{value:1}}]),vertexShader:Lt.cube_vert,fragmentShader:Lt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Lt.equirect_vert,fragmentShader:Lt.equirect_frag},distanceRGBA:{uniforms:yr([nt.common,nt.displacementmap,{referencePosition:{value:new Me},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Lt.distanceRGBA_vert,fragmentShader:Lt.distanceRGBA_frag},shadow:{uniforms:yr([nt.lights,nt.fog,{color:{value:new at(0)},opacity:{value:1}}]),vertexShader:Lt.shadow_vert,fragmentShader:Lt.shadow_frag}};$r.physical={uniforms:yr([$r.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new tt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new at(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new tt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new at(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new at(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag};function zg(v,e,r,t,a,l){const c=new at(0);let n=a===!0?0:1,f,h,m=null,p=0,s=null;function i(d,u){let g=!1,b=u.isScene===!0?u.background:null;b&&b.isTexture&&(b=e.get(b));const _=v.xr,w=_.getSession&&_.getSession();w&&w.environmentBlendMode==="additive"&&(b=null),b===null?o(c,n):b&&b.isColor&&(o(b,1),g=!0),(v.autoClear||g)&&v.clear(v.autoClearColor,v.autoClearDepth,v.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Co)?(h===void 0&&(h=new xr(new Is(1,1,1),new Xr({name:"BackgroundCubeMaterial",uniforms:Wi($r.cube.uniforms),vertexShader:$r.cube.vertexShader,fragmentShader:$r.cube.fragmentShader,side:qr,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(S,T,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),t.update(h)),h.material.uniforms.envMap.value=b,h.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,(m!==b||p!==b.version||s!==v.toneMapping)&&(h.material.needsUpdate=!0,m=b,p=b.version,s=v.toneMapping),h.layers.enableAll(),d.unshift(h,h.geometry,h.material,0,0,null)):b&&b.isTexture&&(f===void 0&&(f=new xr(new ll(2,2),new Xr({name:"BackgroundMaterial",uniforms:Wi($r.background.uniforms),vertexShader:$r.background.vertexShader,fragmentShader:$r.background.fragmentShader,side:Ui,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),t.update(f)),f.material.uniforms.t2D.value=b,b.matrixAutoUpdate===!0&&b.updateMatrix(),f.material.uniforms.uvTransform.value.copy(b.matrix),(m!==b||p!==b.version||s!==v.toneMapping)&&(f.material.needsUpdate=!0,m=b,p=b.version,s=v.toneMapping),f.layers.enableAll(),d.unshift(f,f.geometry,f.material,0,0,null))}function o(d,u){r.buffers.color.setClear(d.r,d.g,d.b,u,l)}return{getClearColor:function(){return c},setClearColor:function(d,u=1){c.set(d),n=u,o(c,n)},getClearAlpha:function(){return n},setClearAlpha:function(d){n=d,o(c,n)},render:i}}function Vg(v,e,r,t){const a=v.getParameter(34921),l=t.isWebGL2?null:e.get("OES_vertex_array_object"),c=t.isWebGL2||l!==null,n={},f=u(null);let h=f,m=!1;function p(k,U,q,Q,W){let K=!1;if(c){const Y=d(Q,q,U);h!==Y&&(h=Y,i(h.object)),K=g(k,Q,q,W),K&&b(k,Q,q,W)}else{const Y=U.wireframe===!0;(h.geometry!==Q.id||h.program!==q.id||h.wireframe!==Y)&&(h.geometry=Q.id,h.program=q.id,h.wireframe=Y,K=!0)}W!==null&&r.update(W,34963),(K||m)&&(m=!1,A(k,U,q,Q),W!==null&&v.bindBuffer(34963,r.get(W).buffer))}function s(){return t.isWebGL2?v.createVertexArray():l.createVertexArrayOES()}function i(k){return t.isWebGL2?v.bindVertexArray(k):l.bindVertexArrayOES(k)}function o(k){return t.isWebGL2?v.deleteVertexArray(k):l.deleteVertexArrayOES(k)}function d(k,U,q){const Q=q.wireframe===!0;let W=n[k.id];W===void 0&&(W={},n[k.id]=W);let K=W[U.id];K===void 0&&(K={},W[U.id]=K);let Y=K[Q];return Y===void 0&&(Y=u(s()),K[Q]=Y),Y}function u(k){const U=[],q=[],Q=[];for(let W=0;W<a;W++)U[W]=0,q[W]=0,Q[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:q,attributeDivisors:Q,object:k,attributes:{},index:null}}function g(k,U,q,Q){const W=h.attributes,K=U.attributes;let Y=0;const se=q.getAttributes();for(const ue in se)if(se[ue].location>=0){const de=W[ue];let Pe=K[ue];if(Pe===void 0&&(ue==="instanceMatrix"&&k.instanceMatrix&&(Pe=k.instanceMatrix),ue==="instanceColor"&&k.instanceColor&&(Pe=k.instanceColor)),de===void 0||de.attribute!==Pe||Pe&&de.data!==Pe.data)return!0;Y++}return h.attributesNum!==Y||h.index!==Q}function b(k,U,q,Q){const W={},K=U.attributes;let Y=0;const se=q.getAttributes();for(const ue in se)if(se[ue].location>=0){let de=K[ue];de===void 0&&(ue==="instanceMatrix"&&k.instanceMatrix&&(de=k.instanceMatrix),ue==="instanceColor"&&k.instanceColor&&(de=k.instanceColor));const Pe={};Pe.attribute=de,de&&de.data&&(Pe.data=de.data),W[ue]=Pe,Y++}h.attributes=W,h.attributesNum=Y,h.index=Q}function _(){const k=h.newAttributes;for(let U=0,q=k.length;U<q;U++)k[U]=0}function w(k){S(k,0)}function S(k,U){const q=h.newAttributes,Q=h.enabledAttributes,W=h.attributeDivisors;q[k]=1,Q[k]===0&&(v.enableVertexAttribArray(k),Q[k]=1),W[k]!==U&&((t.isWebGL2?v:e.get("ANGLE_instanced_arrays"))[t.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](k,U),W[k]=U)}function T(){const k=h.newAttributes,U=h.enabledAttributes;for(let q=0,Q=U.length;q<Q;q++)U[q]!==k[q]&&(v.disableVertexAttribArray(q),U[q]=0)}function L(k,U,q,Q,W,K){t.isWebGL2===!0&&(q===5124||q===5125)?v.vertexAttribIPointer(k,U,q,W,K):v.vertexAttribPointer(k,U,q,Q,W,K)}function A(k,U,q,Q){if(t.isWebGL2===!1&&(k.isInstancedMesh||Q.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const W=Q.attributes,K=q.getAttributes(),Y=U.defaultAttributeValues;for(const se in K){const ue=K[se];if(ue.location>=0){let ge=W[se];if(ge===void 0&&(se==="instanceMatrix"&&k.instanceMatrix&&(ge=k.instanceMatrix),se==="instanceColor"&&k.instanceColor&&(ge=k.instanceColor)),ge!==void 0){const de=ge.normalized,Pe=ge.itemSize,ae=r.get(ge);if(ae===void 0)continue;const we=ae.buffer,j=ae.type,B=ae.bytesPerElement;if(ge.isInterleavedBufferAttribute){const V=ge.data,te=V.stride,$=ge.offset;if(V.isInstancedInterleavedBuffer){for(let X=0;X<ue.locationSize;X++)S(ue.location+X,V.meshPerAttribute);k.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let X=0;X<ue.locationSize;X++)w(ue.location+X);v.bindBuffer(34962,we);for(let X=0;X<ue.locationSize;X++)L(ue.location+X,Pe/ue.locationSize,j,de,te*B,($+Pe/ue.locationSize*X)*B)}else{if(ge.isInstancedBufferAttribute){for(let V=0;V<ue.locationSize;V++)S(ue.location+V,ge.meshPerAttribute);k.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let V=0;V<ue.locationSize;V++)w(ue.location+V);v.bindBuffer(34962,we);for(let V=0;V<ue.locationSize;V++)L(ue.location+V,Pe/ue.locationSize,j,de,Pe*B,Pe/ue.locationSize*V*B)}}else if(Y!==void 0){const de=Y[se];if(de!==void 0)switch(de.length){case 2:v.vertexAttrib2fv(ue.location,de);break;case 3:v.vertexAttrib3fv(ue.location,de);break;case 4:v.vertexAttrib4fv(ue.location,de);break;default:v.vertexAttrib1fv(ue.location,de)}}}}T()}function P(){F();for(const k in n){const U=n[k];for(const q in U){const Q=U[q];for(const W in Q)o(Q[W].object),delete Q[W];delete U[q]}delete n[k]}}function R(k){if(n[k.id]===void 0)return;const U=n[k.id];for(const q in U){const Q=U[q];for(const W in Q)o(Q[W].object),delete Q[W];delete U[q]}delete n[k.id]}function D(k){for(const U in n){const q=n[U];if(q[k.id]===void 0)continue;const Q=q[k.id];for(const W in Q)o(Q[W].object),delete Q[W];delete q[k.id]}}function F(){I(),m=!0,h!==f&&(h=f,i(h.object))}function I(){f.geometry=null,f.program=null,f.wireframe=!1}return{setup:p,reset:F,resetDefaultState:I,dispose:P,releaseStatesOfGeometry:R,releaseStatesOfProgram:D,initAttributes:_,enableAttribute:w,disableUnusedAttributes:T}}function Hg(v,e,r,t){const a=t.isWebGL2;let l;function c(h){l=h}function n(h,m){v.drawArrays(l,h,m),r.update(m,l,1)}function f(h,m,p){if(p===0)return;let s,i;if(a)s=v,i="drawArraysInstanced";else if(s=e.get("ANGLE_instanced_arrays"),i="drawArraysInstancedANGLE",s===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}s[i](l,h,m,p),r.update(m,l,p)}this.setMode=c,this.render=n,this.renderInstances=f}function Wg(v,e,r){let t;function a(){if(t!==void 0)return t;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");t=v.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else t=0;return t}function l(L){if(L==="highp"){if(v.getShaderPrecisionFormat(35633,36338).precision>0&&v.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";L="mediump"}return L==="mediump"&&v.getShaderPrecisionFormat(35633,36337).precision>0&&v.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const c=typeof WebGL2RenderingContext!="undefined"&&v instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&v instanceof WebGL2ComputeRenderingContext;let n=r.precision!==void 0?r.precision:"highp";const f=l(n);f!==n&&(console.warn("THREE.WebGLRenderer:",n,"not supported, using",f,"instead."),n=f);const h=c||e.has("WEBGL_draw_buffers"),m=r.logarithmicDepthBuffer===!0,p=v.getParameter(34930),s=v.getParameter(35660),i=v.getParameter(3379),o=v.getParameter(34076),d=v.getParameter(34921),u=v.getParameter(36347),g=v.getParameter(36348),b=v.getParameter(36349),_=s>0,w=c||e.has("OES_texture_float"),S=_&&w,T=c?v.getParameter(36183):0;return{isWebGL2:c,drawBuffers:h,getMaxAnisotropy:a,getMaxPrecision:l,precision:n,logarithmicDepthBuffer:m,maxTextures:p,maxVertexTextures:s,maxTextureSize:i,maxCubemapSize:o,maxAttributes:d,maxVertexUniforms:u,maxVaryings:g,maxFragmentUniforms:b,vertexTextures:_,floatFragmentTextures:w,floatVertexTextures:S,maxSamples:T}}function qg(v){const e=this;let r=null,t=0,a=!1,l=!1;const c=new mn,n=new gr,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(p,s,i){const o=p.length!==0||s||t!==0||a;return a=s,r=m(p,i,0),t=p.length,o},this.beginShadows=function(){l=!0,m(null)},this.endShadows=function(){l=!1,h()},this.setState=function(p,s,i){const o=p.clippingPlanes,d=p.clipIntersection,u=p.clipShadows,g=v.get(p);if(!a||o===null||o.length===0||l&&!u)l?m(null):h();else{const b=l?0:t,_=b*4;let w=g.clippingState||null;f.value=w,w=m(o,s,_,i);for(let S=0;S!==_;++S)w[S]=r[S];g.clippingState=w,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=b}};function h(){f.value!==r&&(f.value=r,f.needsUpdate=t>0),e.numPlanes=t,e.numIntersection=0}function m(p,s,i,o){const d=p!==null?p.length:0;let u=null;if(d!==0){if(u=f.value,o!==!0||u===null){const g=i+d*4,b=s.matrixWorldInverse;n.getNormalMatrix(b),(u===null||u.length<g)&&(u=new Float32Array(g));for(let _=0,w=i;_!==d;++_,w+=4)c.copy(p[_]).applyMatrix4(b,n),c.normal.toArray(u,w),u[w+3]=c.constant}f.value=u,f.needsUpdate=!0}return e.numPlanes=d,e.numIntersection=0,u}}function Xg(v){let e=new WeakMap;function r(c,n){return n===Ua?c.mapping=Bi:n===Ba&&(c.mapping=Gi),c}function t(c){if(c&&c.isTexture&&c.isRenderTargetTexture===!1){const n=c.mapping;if(n===Ua||n===Ba)if(e.has(c)){const f=e.get(c).texture;return r(f,c.mapping)}else{const f=c.image;if(f&&f.height>0){const h=new gh(f.height/2);return h.fromEquirectangularTexture(v,c),e.set(c,h),c.addEventListener("dispose",a),r(h.texture,c.mapping)}else return null}}return c}function a(c){const n=c.target;n.removeEventListener("dispose",a);const f=e.get(n);f!==void 0&&(e.delete(n),f.dispose())}function l(){e=new WeakMap}return{get:t,dispose:l}}class Io extends ol{constructor(e=-1,r=1,t=1,a=-1,l=.1,c=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=t,this.bottom=a,this.near=l,this.far=c,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,r,t,a,l,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=t,this.view.offsetY=a,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let l=t-e,c=t+e,n=a+r,f=a-r;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=h*this.view.offsetX,c=l+h*this.view.width,n-=m*this.view.offsetY,f=n-m*this.view.height}this.projectionMatrix.makeOrthographic(l,c,n,f,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}Io.prototype.isOrthographicCamera=!0;const Oi=4,ec=[.125,.215,.35,.446,.526,.582],Zn=20,Ta=new Io,tc=new at;let Ea=null;const Xn=(1+Math.sqrt(5))/2,Ai=1/Xn,rc=[new Me(1,1,1),new Me(-1,1,1),new Me(1,1,-1),new Me(-1,1,-1),new Me(0,Xn,Ai),new Me(0,Xn,-Ai),new Me(Ai,0,Xn),new Me(-Ai,0,Xn),new Me(Xn,Ai,0),new Me(-Xn,Ai,0)];class nc{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,r=0,t=.1,a=100){Ea=this._renderer.getRenderTarget(),this._setSize(256);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,t,a,l),r>0&&this._blur(l,0,0,r),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,r=null){return this._fromTexture(e,r)}fromCubemap(e,r=null){return this._fromTexture(e,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=oc(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=sc(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ea),e.scissorTest=!1,lo(e,0,0,e.width,e.height)}_fromTexture(e,r){e.mapping===Bi||e.mapping===Gi?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ea=this._renderer.getRenderTarget();const t=r||this._allocateTargets();return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,t={magFilter:vr,minFilter:vr,generateMipmaps:!1,type:ws,format:Dr,encoding:Fn,depthBuffer:!1},a=ic(e,r,t);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=ic(e,r,t);const{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Yg(l)),this._blurMaterial=Zg(l,e,r)}return a}_compileMaterial(e){const r=new xr(this._lodPlanes[0],e);this._renderer.compile(r,Ta)}_sceneToCubeUV(e,r,t,a){const n=new br(90,1,r,t),f=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],m=this._renderer,p=m.autoClear,s=m.toneMapping;m.getClearColor(tc),m.toneMapping=yn,m.autoClear=!1;const i=new gn({name:"PMREM.Background",side:qr,depthWrite:!1,depthTest:!1}),o=new xr(new Is,i);let d=!1;const u=e.background;u?u.isColor&&(i.color.copy(u),e.background=null,d=!0):(i.color.copy(tc),d=!0);for(let g=0;g<6;g++){const b=g%3;b===0?(n.up.set(0,f[g],0),n.lookAt(h[g],0,0)):b===1?(n.up.set(0,0,f[g]),n.lookAt(0,h[g],0)):(n.up.set(0,f[g],0),n.lookAt(0,0,h[g]));const _=this._cubeSize;lo(a,b*_,g>2?_:0,_,_),m.setRenderTarget(a),d&&m.render(o,n),m.render(e,n)}o.geometry.dispose(),o.material.dispose(),m.toneMapping=s,m.autoClear=p,e.background=u}_textureToCubeUV(e,r){const t=this._renderer,a=e.mapping===Bi||e.mapping===Gi;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=oc()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=sc());const l=a?this._cubemapMaterial:this._equirectMaterial,c=new xr(this._lodPlanes[0],l),n=l.uniforms;n.envMap.value=e;const f=this._cubeSize;lo(r,0,0,3*f,2*f),t.setRenderTarget(r),t.render(c,Ta)}_applyPMREM(e){const r=this._renderer,t=r.autoClear;r.autoClear=!1;for(let a=1;a<this._lodPlanes.length;a++){const l=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),c=rc[(a-1)%rc.length];this._blur(e,a-1,a,l,c)}r.autoClear=t}_blur(e,r,t,a,l){const c=this._pingPongRenderTarget;this._halfBlur(e,c,r,t,a,"latitudinal",l),this._halfBlur(c,e,t,t,a,"longitudinal",l)}_halfBlur(e,r,t,a,l,c,n){const f=this._renderer,h=this._blurMaterial;c!=="latitudinal"&&c!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,p=new xr(this._lodPlanes[a],h),s=h.uniforms,i=this._sizeLods[t]-1,o=isFinite(l)?Math.PI/(2*i):2*Math.PI/(2*Zn-1),d=l/o,u=isFinite(l)?1+Math.floor(m*d):Zn;u>Zn&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${u} samples when the maximum is set to ${Zn}`);const g=[];let b=0;for(let L=0;L<Zn;++L){const A=L/d,P=Math.exp(-A*A/2);g.push(P),L===0?b+=P:L<u&&(b+=2*P)}for(let L=0;L<g.length;L++)g[L]=g[L]/b;s.envMap.value=e.texture,s.samples.value=u,s.weights.value=g,s.latitudinal.value=c==="latitudinal",n&&(s.poleAxis.value=n);const{_lodMax:_}=this;s.dTheta.value=o,s.mipInt.value=_-t;const w=this._sizeLods[a],S=3*w*(a>_-Oi?a-_+Oi:0),T=4*(this._cubeSize-w);lo(r,S,T,3*w,2*w),f.setRenderTarget(r),f.render(p,Ta)}}function Yg(v){const e=[],r=[],t=[];let a=v;const l=v-Oi+1+ec.length;for(let c=0;c<l;c++){const n=Math.pow(2,a);r.push(n);let f=1/n;c>v-Oi?f=ec[c-v+Oi-1]:c===0&&(f=0),t.push(f);const h=1/(n-2),m=-h,p=1+h,s=[m,m,p,m,p,p,m,m,p,p,m,p],i=6,o=6,d=3,u=2,g=1,b=new Float32Array(d*o*i),_=new Float32Array(u*o*i),w=new Float32Array(g*o*i);for(let T=0;T<i;T++){const L=T%3*2/3-1,A=T>2?0:-1,P=[L,A,0,L+2/3,A,0,L+2/3,A+1,0,L,A,0,L+2/3,A+1,0,L,A+1,0];b.set(P,d*o*T),_.set(s,u*o*T);const R=[T,T,T,T,T,T];w.set(R,g*o*T)}const S=new Zt;S.setAttribute("position",new nr(b,d)),S.setAttribute("uv",new nr(_,u)),S.setAttribute("faceIndex",new nr(w,g)),e.push(S),a>Oi&&a--}return{lodPlanes:e,sizeLods:r,sigmas:t}}function ic(v,e,r){const t=new Lr(v,e,r);return t.texture.mapping=Co,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function lo(v,e,r,t,a){v.viewport.set(e,r,t,a),v.scissor.set(e,r,t,a)}function Zg(v,e,r){const t=new Float32Array(Zn),a=new Me(0,1,0);return new Xr({name:"SphericalGaussianBlur",defines:{n:Zn,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${v}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:ul(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:jn,depthTest:!1,depthWrite:!1})}function sc(){return new Xr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ul(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:jn,depthTest:!1,depthWrite:!1})}function oc(){return new Xr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ul(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:jn,depthTest:!1,depthWrite:!1})}function ul(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Kg(v){let e=new WeakMap,r=null;function t(n){if(n&&n.isTexture){const f=n.mapping,h=f===Ua||f===Ba,m=f===Bi||f===Gi;if(h||m)if(n.isRenderTargetTexture&&n.needsPMREMUpdate===!0){n.needsPMREMUpdate=!1;let p=e.get(n);return r===null&&(r=new nc(v)),p=h?r.fromEquirectangular(n,p):r.fromCubemap(n,p),e.set(n,p),p.texture}else{if(e.has(n))return e.get(n).texture;{const p=n.image;if(h&&p&&p.height>0||m&&p&&a(p)){r===null&&(r=new nc(v));const s=h?r.fromEquirectangular(n):r.fromCubemap(n);return e.set(n,s),n.addEventListener("dispose",l),s.texture}else return null}}}return n}function a(n){let f=0;const h=6;for(let m=0;m<h;m++)n[m]!==void 0&&f++;return f===h}function l(n){const f=n.target;f.removeEventListener("dispose",l);const h=e.get(f);h!==void 0&&(e.delete(f),h.dispose())}function c(){e=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:t,dispose:c}}function Jg(v){const e={};function r(t){if(e[t]!==void 0)return e[t];let a;switch(t){case"WEBGL_depth_texture":a=v.getExtension("WEBGL_depth_texture")||v.getExtension("MOZ_WEBGL_depth_texture")||v.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=v.getExtension("EXT_texture_filter_anisotropic")||v.getExtension("MOZ_EXT_texture_filter_anisotropic")||v.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=v.getExtension("WEBGL_compressed_texture_s3tc")||v.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=v.getExtension("WEBGL_compressed_texture_pvrtc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=v.getExtension(t)}return e[t]=a,a}return{has:function(t){return r(t)!==null},init:function(t){t.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(t){const a=r(t);return a===null&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),a}}}function Qg(v,e,r,t){const a={},l=new WeakMap;function c(p){const s=p.target;s.index!==null&&e.remove(s.index);for(const o in s.attributes)e.remove(s.attributes[o]);s.removeEventListener("dispose",c),delete a[s.id];const i=l.get(s);i&&(e.remove(i),l.delete(s)),t.releaseStatesOfGeometry(s),s.isInstancedBufferGeometry===!0&&delete s._maxInstanceCount,r.memory.geometries--}function n(p,s){return a[s.id]===!0||(s.addEventListener("dispose",c),a[s.id]=!0,r.memory.geometries++),s}function f(p){const s=p.attributes;for(const o in s)e.update(s[o],34962);const i=p.morphAttributes;for(const o in i){const d=i[o];for(let u=0,g=d.length;u<g;u++)e.update(d[u],34962)}}function h(p){const s=[],i=p.index,o=p.attributes.position;let d=0;if(i!==null){const b=i.array;d=i.version;for(let _=0,w=b.length;_<w;_+=3){const S=b[_+0],T=b[_+1],L=b[_+2];s.push(S,T,T,L,L,S)}}else{const b=o.array;d=o.version;for(let _=0,w=b.length/3-1;_<w;_+=3){const S=_+0,T=_+1,L=_+2;s.push(S,T,T,L,L,S)}}const u=new(hh(s)?mh:ph)(s,1);u.version=d;const g=l.get(p);g&&e.remove(g),l.set(p,u)}function m(p){const s=l.get(p);if(s){const i=p.index;i!==null&&s.version<i.version&&h(p)}else h(p);return l.get(p)}return{get:n,update:f,getWireframeAttribute:m}}function $g(v,e,r,t){const a=t.isWebGL2;let l;function c(s){l=s}let n,f;function h(s){n=s.type,f=s.bytesPerElement}function m(s,i){v.drawElements(l,i,n,s*f),r.update(i,l,1)}function p(s,i,o){if(o===0)return;let d,u;if(a)d=v,u="drawElementsInstanced";else if(d=e.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",d===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[u](l,i,n,s*f,o),r.update(i,l,o)}this.setMode=c,this.setIndex=h,this.render=m,this.renderInstances=p}function ey(v){const e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function t(l,c,n){switch(r.calls++,c){case 4:r.triangles+=n*(l/3);break;case 1:r.lines+=n*(l/2);break;case 3:r.lines+=n*(l-1);break;case 2:r.lines+=n*l;break;case 0:r.points+=n*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c);break}}function a(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:a,update:t}}function ty(v,e){return v[0]-e[0]}function ry(v,e){return Math.abs(e[1])-Math.abs(v[1])}function Aa(v,e){let r=1;const t=e.isInterleavedBufferAttribute?e.data.array:e.array;t instanceof Int8Array?r=127:t instanceof Int16Array?r=32767:t instanceof Int32Array?r=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",t),v.divideScalar(r)}function ny(v,e,r){const t={},a=new Float32Array(8),l=new WeakMap,c=new Vt,n=[];for(let h=0;h<8;h++)n[h]=[h,0];function f(h,m,p,s){const i=h.morphTargetInfluences;if(e.isWebGL2===!0){const d=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,u=d!==void 0?d.length:0;let g=l.get(m);if(g===void 0||g.count!==u){let q=function(){k.dispose(),l.delete(m),m.removeEventListener("dispose",q)};var o=q;g!==void 0&&g.texture.dispose();const w=m.morphAttributes.position!==void 0,S=m.morphAttributes.normal!==void 0,T=m.morphAttributes.color!==void 0,L=m.morphAttributes.position||[],A=m.morphAttributes.normal||[],P=m.morphAttributes.color||[];let R=0;w===!0&&(R=1),S===!0&&(R=2),T===!0&&(R=3);let D=m.attributes.position.count*R,F=1;D>e.maxTextureSize&&(F=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const I=new Float32Array(D*F*4*u),k=new Ro(I,D,F,u);k.type=Dn,k.needsUpdate=!0;const U=R*4;for(let Q=0;Q<u;Q++){const W=L[Q],K=A[Q],Y=P[Q],se=D*F*4*Q;for(let ue=0;ue<W.count;ue++){const ge=ue*U;w===!0&&(c.fromBufferAttribute(W,ue),W.normalized===!0&&Aa(c,W),I[se+ge+0]=c.x,I[se+ge+1]=c.y,I[se+ge+2]=c.z,I[se+ge+3]=0),S===!0&&(c.fromBufferAttribute(K,ue),K.normalized===!0&&Aa(c,K),I[se+ge+4]=c.x,I[se+ge+5]=c.y,I[se+ge+6]=c.z,I[se+ge+7]=0),T===!0&&(c.fromBufferAttribute(Y,ue),Y.normalized===!0&&Aa(c,Y),I[se+ge+8]=c.x,I[se+ge+9]=c.y,I[se+ge+10]=c.z,I[se+ge+11]=Y.itemSize===4?c.w:1)}}g={count:u,texture:k,size:new tt(D,F)},l.set(m,g),m.addEventListener("dispose",q)}let b=0;for(let w=0;w<i.length;w++)b+=i[w];const _=m.morphTargetsRelative?1:1-b;s.getUniforms().setValue(v,"morphTargetBaseInfluence",_),s.getUniforms().setValue(v,"morphTargetInfluences",i),s.getUniforms().setValue(v,"morphTargetsTexture",g.texture,r),s.getUniforms().setValue(v,"morphTargetsTextureSize",g.size)}else{const d=i===void 0?0:i.length;let u=t[m.id];if(u===void 0||u.length!==d){u=[];for(let S=0;S<d;S++)u[S]=[S,0];t[m.id]=u}for(let S=0;S<d;S++){const T=u[S];T[0]=S,T[1]=i[S]}u.sort(ry);for(let S=0;S<8;S++)S<d&&u[S][1]?(n[S][0]=u[S][0],n[S][1]=u[S][1]):(n[S][0]=Number.MAX_SAFE_INTEGER,n[S][1]=0);n.sort(ty);const g=m.morphAttributes.position,b=m.morphAttributes.normal;let _=0;for(let S=0;S<8;S++){const T=n[S],L=T[0],A=T[1];L!==Number.MAX_SAFE_INTEGER&&A?(g&&m.getAttribute("morphTarget"+S)!==g[L]&&m.setAttribute("morphTarget"+S,g[L]),b&&m.getAttribute("morphNormal"+S)!==b[L]&&m.setAttribute("morphNormal"+S,b[L]),a[S]=A,_+=A):(g&&m.hasAttribute("morphTarget"+S)===!0&&m.deleteAttribute("morphTarget"+S),b&&m.hasAttribute("morphNormal"+S)===!0&&m.deleteAttribute("morphNormal"+S),a[S]=0)}const w=m.morphTargetsRelative?1:1-_;s.getUniforms().setValue(v,"morphTargetBaseInfluence",w),s.getUniforms().setValue(v,"morphTargetInfluences",a)}}return{update:f}}function iy(v,e,r,t){let a=new WeakMap;function l(f){const h=t.render.frame,m=f.geometry,p=e.get(f,m);return a.get(p)!==h&&(e.update(p),a.set(p,h)),f.isInstancedMesh&&(f.hasEventListener("dispose",n)===!1&&f.addEventListener("dispose",n),r.update(f.instanceMatrix,34962),f.instanceColor!==null&&r.update(f.instanceColor,34962)),p}function c(){a=new WeakMap}function n(f){const h=f.target;h.removeEventListener("dispose",n),r.remove(h.instanceMatrix),h.instanceColor!==null&&r.remove(h.instanceColor)}return{update:l,dispose:c}}const vh=new ar,bh=new Ro,_h=new sl,xh=new Po,ac=[],lc=[],uc=new Float32Array(16),cc=new Float32Array(9),hc=new Float32Array(4);function Ki(v,e,r){const t=v[0];if(t<=0||t>0)return v;const a=e*r;let l=ac[a];if(l===void 0&&(l=new Float32Array(a),ac[a]=l),e!==0){t.toArray(l,0);for(let c=1,n=0;c!==e;++c)n+=r,v[c].toArray(l,n)}return l}function Sr(v,e){if(v.length!==e.length)return!1;for(let r=0,t=v.length;r<t;r++)if(v[r]!==e[r])return!1;return!0}function Mr(v,e){for(let r=0,t=e.length;r<t;r++)v[r]=e[r]}function jo(v,e){let r=lc[e];r===void 0&&(r=new Int32Array(e),lc[e]=r);for(let t=0;t!==e;++t)r[t]=v.allocateTextureUnit();return r}function sy(v,e){const r=this.cache;r[0]!==e&&(v.uniform1f(this.addr,e),r[0]=e)}function oy(v,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(v.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Sr(r,e))return;v.uniform2fv(this.addr,e),Mr(r,e)}}function ay(v,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(v.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(e.r!==void 0)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(v.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(Sr(r,e))return;v.uniform3fv(this.addr,e),Mr(r,e)}}function ly(v,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(v.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Sr(r,e))return;v.uniform4fv(this.addr,e),Mr(r,e)}}function uy(v,e){const r=this.cache,t=e.elements;if(t===void 0){if(Sr(r,e))return;v.uniformMatrix2fv(this.addr,!1,e),Mr(r,e)}else{if(Sr(r,t))return;hc.set(t),v.uniformMatrix2fv(this.addr,!1,hc),Mr(r,t)}}function cy(v,e){const r=this.cache,t=e.elements;if(t===void 0){if(Sr(r,e))return;v.uniformMatrix3fv(this.addr,!1,e),Mr(r,e)}else{if(Sr(r,t))return;cc.set(t),v.uniformMatrix3fv(this.addr,!1,cc),Mr(r,t)}}function hy(v,e){const r=this.cache,t=e.elements;if(t===void 0){if(Sr(r,e))return;v.uniformMatrix4fv(this.addr,!1,e),Mr(r,e)}else{if(Sr(r,t))return;uc.set(t),v.uniformMatrix4fv(this.addr,!1,uc),Mr(r,t)}}function dy(v,e){const r=this.cache;r[0]!==e&&(v.uniform1i(this.addr,e),r[0]=e)}function fy(v,e){const r=this.cache;Sr(r,e)||(v.uniform2iv(this.addr,e),Mr(r,e))}function py(v,e){const r=this.cache;Sr(r,e)||(v.uniform3iv(this.addr,e),Mr(r,e))}function my(v,e){const r=this.cache;Sr(r,e)||(v.uniform4iv(this.addr,e),Mr(r,e))}function gy(v,e){const r=this.cache;r[0]!==e&&(v.uniform1ui(this.addr,e),r[0]=e)}function yy(v,e){const r=this.cache;Sr(r,e)||(v.uniform2uiv(this.addr,e),Mr(r,e))}function vy(v,e){const r=this.cache;Sr(r,e)||(v.uniform3uiv(this.addr,e),Mr(r,e))}function by(v,e){const r=this.cache;Sr(r,e)||(v.uniform4uiv(this.addr,e),Mr(r,e))}function _y(v,e,r){const t=this.cache,a=r.allocateTextureUnit();t[0]!==a&&(v.uniform1i(this.addr,a),t[0]=a),r.setTexture2D(e||vh,a)}function xy(v,e,r){const t=this.cache,a=r.allocateTextureUnit();t[0]!==a&&(v.uniform1i(this.addr,a),t[0]=a),r.setTexture3D(e||_h,a)}function wy(v,e,r){const t=this.cache,a=r.allocateTextureUnit();t[0]!==a&&(v.uniform1i(this.addr,a),t[0]=a),r.setTextureCube(e||xh,a)}function Sy(v,e,r){const t=this.cache,a=r.allocateTextureUnit();t[0]!==a&&(v.uniform1i(this.addr,a),t[0]=a),r.setTexture2DArray(e||bh,a)}function My(v){switch(v){case 5126:return sy;case 35664:return oy;case 35665:return ay;case 35666:return ly;case 35674:return uy;case 35675:return cy;case 35676:return hy;case 5124:case 35670:return dy;case 35667:case 35671:return fy;case 35668:case 35672:return py;case 35669:case 35673:return my;case 5125:return gy;case 36294:return yy;case 36295:return vy;case 36296:return by;case 35678:case 36198:case 36298:case 36306:case 35682:return _y;case 35679:case 36299:case 36307:return xy;case 35680:case 36300:case 36308:case 36293:return wy;case 36289:case 36303:case 36311:case 36292:return Sy}}function Ty(v,e){v.uniform1fv(this.addr,e)}function Ey(v,e){const r=Ki(e,this.size,2);v.uniform2fv(this.addr,r)}function Ay(v,e){const r=Ki(e,this.size,3);v.uniform3fv(this.addr,r)}function Ly(v,e){const r=Ki(e,this.size,4);v.uniform4fv(this.addr,r)}function Cy(v,e){const r=Ki(e,this.size,4);v.uniformMatrix2fv(this.addr,!1,r)}function Ry(v,e){const r=Ki(e,this.size,9);v.uniformMatrix3fv(this.addr,!1,r)}function Py(v,e){const r=Ki(e,this.size,16);v.uniformMatrix4fv(this.addr,!1,r)}function Dy(v,e){v.uniform1iv(this.addr,e)}function Iy(v,e){v.uniform2iv(this.addr,e)}function jy(v,e){v.uniform3iv(this.addr,e)}function Oy(v,e){v.uniform4iv(this.addr,e)}function ky(v,e){v.uniform1uiv(this.addr,e)}function Ny(v,e){v.uniform2uiv(this.addr,e)}function Fy(v,e){v.uniform3uiv(this.addr,e)}function Uy(v,e){v.uniform4uiv(this.addr,e)}function By(v,e,r){const t=e.length,a=jo(r,t);v.uniform1iv(this.addr,a);for(let l=0;l!==t;++l)r.setTexture2D(e[l]||vh,a[l])}function Gy(v,e,r){const t=e.length,a=jo(r,t);v.uniform1iv(this.addr,a);for(let l=0;l!==t;++l)r.setTexture3D(e[l]||_h,a[l])}function zy(v,e,r){const t=e.length,a=jo(r,t);v.uniform1iv(this.addr,a);for(let l=0;l!==t;++l)r.setTextureCube(e[l]||xh,a[l])}function Vy(v,e,r){const t=e.length,a=jo(r,t);v.uniform1iv(this.addr,a);for(let l=0;l!==t;++l)r.setTexture2DArray(e[l]||bh,a[l])}function Hy(v){switch(v){case 5126:return Ty;case 35664:return Ey;case 35665:return Ay;case 35666:return Ly;case 35674:return Cy;case 35675:return Ry;case 35676:return Py;case 5124:case 35670:return Dy;case 35667:case 35671:return Iy;case 35668:case 35672:return jy;case 35669:case 35673:return Oy;case 5125:return ky;case 36294:return Ny;case 36295:return Fy;case 36296:return Uy;case 35678:case 36198:case 36298:case 36306:case 35682:return By;case 35679:case 36299:case 36307:return Gy;case 35680:case 36300:case 36308:case 36293:return zy;case 36289:case 36303:case 36311:case 36292:return Vy}}function Wy(v,e,r){this.id=v,this.addr=r,this.cache=[],this.setValue=My(e.type)}function qy(v,e,r){this.id=v,this.addr=r,this.cache=[],this.size=e.size,this.setValue=Hy(e.type)}function wh(v){this.id=v,this.seq=[],this.map={}}wh.prototype.setValue=function(v,e,r){const t=this.seq;for(let a=0,l=t.length;a!==l;++a){const c=t[a];c.setValue(v,e[c.id],r)}};const La=/(\w+)(\])?(\[|\.)?/g;function dc(v,e){v.seq.push(e),v.map[e.id]=e}function Xy(v,e,r){const t=v.name,a=t.length;for(La.lastIndex=0;;){const l=La.exec(t),c=La.lastIndex;let n=l[1];const f=l[2]==="]",h=l[3];if(f&&(n=n|0),h===void 0||h==="["&&c+2===a){dc(r,h===void 0?new Wy(n,v,e):new qy(n,v,e));break}else{let p=r.map[n];p===void 0&&(p=new wh(n),dc(r,p)),r=p}}}function On(v,e){this.seq=[],this.map={};const r=v.getProgramParameter(e,35718);for(let t=0;t<r;++t){const a=v.getActiveUniform(e,t),l=v.getUniformLocation(e,a.name);Xy(a,l,this)}}On.prototype.setValue=function(v,e,r,t){const a=this.map[e];a!==void 0&&a.setValue(v,r,t)};On.prototype.setOptional=function(v,e,r){const t=e[r];t!==void 0&&this.setValue(v,r,t)};On.upload=function(v,e,r,t){for(let a=0,l=e.length;a!==l;++a){const c=e[a],n=r[c.id];n.needsUpdate!==!1&&c.setValue(v,n.value,t)}};On.seqWithValue=function(v,e){const r=[];for(let t=0,a=v.length;t!==a;++t){const l=v[t];l.id in e&&r.push(l)}return r};function fc(v,e,r){const t=v.createShader(e);return v.shaderSource(t,r),v.compileShader(t),t}let Yy=0;function Zy(v,e){const r=v.split(`
`),t=[],a=Math.max(e-6,0),l=Math.min(e+6,r.length);for(let c=a;c<l;c++)t.push(c+1+": "+r[c]);return t.join(`
`)}function Ky(v){switch(v){case Fn:return["Linear","( value )"];case kt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",v),["Linear","( value )"]}}function pc(v,e,r){const t=v.getShaderParameter(e,35713),a=v.getShaderInfoLog(e).trim();if(t&&a==="")return"";const l=/ERROR: 0:(\d+)/.exec(a);if(l){const c=parseInt(l[0]);return r.toUpperCase()+`

`+a+`

`+Zy(v.getShaderSource(e),c)}else return a}function Jy(v,e){const r=Ky(e);return"vec4 "+v+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function Qy(v,e){let r;switch(e){case rf:r="Linear";break;case nf:r="Reinhard";break;case sf:r="OptimizedCineon";break;case of:r="ACESFilmic";break;case af:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),r="Linear"}return"vec3 "+v+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function $y(v){return[v.extensionDerivatives||!!v.envMapCubeUVHeight||v.bumpMap||v.tangentSpaceNormalMap||v.clearcoatNormalMap||v.flatShading||v.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(v.extensionFragDepth||v.logarithmicDepthBuffer)&&v.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",v.extensionDrawBuffers&&v.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(v.extensionShaderTextureLOD||v.envMap||v.transmission)&&v.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(gs).join(`
`)}function e0(v){const e=[];for(const r in v){const t=v[r];t!==!1&&e.push("#define "+r+" "+t)}return e.join(`
`)}function t0(v,e){const r={},t=v.getProgramParameter(e,35721);for(let a=0;a<t;a++){const l=v.getActiveAttrib(e,a),c=l.name;let n=1;l.type===35674&&(n=2),l.type===35675&&(n=3),l.type===35676&&(n=4),r[c]={type:l.type,location:v.getAttribLocation(e,c),locationSize:n}}return r}function gs(v){return v!==""}function mc(v,e){return v.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function gc(v,e){return v.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const r0=/^[ \t]*#include +<([\w\d./]+)>/gm;function Wa(v){return v.replace(r0,n0)}function n0(v,e){const r=Lt[e];if(r===void 0)throw new Error("Can not resolve #include <"+e+">");return Wa(r)}const i0=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,a0=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function yc(v){return v.replace(a0,Sh).replace(i0,l0)}function l0(v,e,r,t){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Sh(v,e,r,t)}function Sh(v,e,r,t){let a="";for(let l=parseInt(e);l<parseInt(r);l++)a+=t.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return a}function vc(v){let e="precision "+v.precision+` float;
precision `+v.precision+" int;";return v.precision==="highp"?e+=`
#define HIGH_PRECISION`:v.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:v.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function u0(v){let e="SHADOWMAP_TYPE_BASIC";return v.shadowMapType===rh?e="SHADOWMAP_TYPE_PCF":v.shadowMapType===jd?e="SHADOWMAP_TYPE_PCF_SOFT":v.shadowMapType===ms&&(e="SHADOWMAP_TYPE_VSM"),e}function c0(v){let e="ENVMAP_TYPE_CUBE";if(v.envMap)switch(v.envMapMode){case Bi:case Gi:e="ENVMAP_TYPE_CUBE";break;case Co:e="ENVMAP_TYPE_CUBE_UV";break}return e}function h0(v){let e="ENVMAP_MODE_REFLECTION";if(v.envMap)switch(v.envMapMode){case Gi:e="ENVMAP_MODE_REFRACTION";break}return e}function d0(v){let e="ENVMAP_BLENDING_NONE";if(v.envMap)switch(v.combine){case Lo:e="ENVMAP_BLENDING_MULTIPLY";break;case ef:e="ENVMAP_BLENDING_MIX";break;case tf:e="ENVMAP_BLENDING_ADD";break}return e}function f0(v){const e=v.envMapCubeUVHeight;if(e===null)return null;const r=Math.log2(e)-2,t=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:t,maxMip:r}}function p0(v,e,r,t){const a=v.getContext(),l=r.defines;let c=r.vertexShader,n=r.fragmentShader;const f=u0(r),h=c0(r),m=h0(r),p=d0(r),s=f0(r),i=r.isWebGL2?"":$y(r),o=e0(l),d=a.createProgram();let u,g,b=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(u=[o].filter(gs).join(`
`),u.length>0&&(u+=`
`),g=[i,o].filter(gs).join(`
`),g.length>0&&(g+=`
`)):(u=[vc(r),"#define SHADER_NAME "+r.shaderName,o,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+m:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+f:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(gs).join(`
`),g=[i,vc(r),"#define SHADER_NAME "+r.shaderName,o,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+m:"",r.envMap?"#define "+p:"",s?"#define CUBEUV_TEXEL_WIDTH "+s.texelWidth:"",s?"#define CUBEUV_TEXEL_HEIGHT "+s.texelHeight:"",s?"#define CUBEUV_MAX_MIP "+s.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+f:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==yn?"#define TONE_MAPPING":"",r.toneMapping!==yn?Lt.tonemapping_pars_fragment:"",r.toneMapping!==yn?Qy("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Lt.encodings_pars_fragment,Jy("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(gs).join(`
`)),c=Wa(c),c=mc(c,r),c=gc(c,r),n=Wa(n),n=mc(n,r),n=gc(n,r),c=yc(c),n=yc(n),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,u=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+u,g=["#define varying in",r.glslVersion===Gu?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===Gu?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=b+u+c,w=b+g+n,S=fc(a,35633,_),T=fc(a,35632,w);if(a.attachShader(d,S),a.attachShader(d,T),r.index0AttributeName!==void 0?a.bindAttribLocation(d,0,r.index0AttributeName):r.morphTargets===!0&&a.bindAttribLocation(d,0,"position"),a.linkProgram(d),v.debug.checkShaderErrors){const P=a.getProgramInfoLog(d).trim(),R=a.getShaderInfoLog(S).trim(),D=a.getShaderInfoLog(T).trim();let F=!0,I=!0;if(a.getProgramParameter(d,35714)===!1){F=!1;const k=pc(a,S,"vertex"),U=pc(a,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(d,35715)+`

Program Info Log: `+P+`
`+k+`
`+U)}else P!==""?console.warn("THREE.WebGLProgram: Program Info Log:",P):(R===""||D==="")&&(I=!1);I&&(this.diagnostics={runnable:F,programLog:P,vertexShader:{log:R,prefix:u},fragmentShader:{log:D,prefix:g}})}a.deleteShader(S),a.deleteShader(T);let L;this.getUniforms=function(){return L===void 0&&(L=new On(a,d)),L};let A;return this.getAttributes=function(){return A===void 0&&(A=t0(a,d)),A},this.destroy=function(){t.releaseStatesOfProgram(this),a.deleteProgram(d),this.program=void 0},this.name=r.shaderName,this.id=Yy++,this.cacheKey=e,this.usedTimes=1,this.program=d,this.vertexShader=S,this.fragmentShader=T,this}let m0=0;class g0{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.vertexShader,t=e.fragmentShader,a=this._getShaderStage(r),l=this._getShaderStage(t),c=this._getShaderCacheForMaterial(e);return c.has(a)===!1&&(c.add(a),a.usedTimes++),c.has(l)===!1&&(c.add(l),l.usedTimes++),this}remove(e){const r=this.materialCache.get(e);for(const t of r)t.usedTimes--,t.usedTimes===0&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const r=this.materialCache;return r.has(e)===!1&&r.set(e,new Set),r.get(e)}_getShaderStage(e){const r=this.shaderCache;if(r.has(e)===!1){const t=new y0(e);r.set(e,t)}return r.get(e)}}class y0{constructor(e){this.id=m0++,this.code=e,this.usedTimes=0}}function v0(v,e,r,t,a,l,c){const n=new fh,f=new g0,h=[],m=a.isWebGL2,p=a.logarithmicDepthBuffer,s=a.vertexTextures;let i=a.precision;const o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function d(A,P,R,D,F){const I=D.fog,k=F.geometry,U=A.isMeshStandardMaterial?D.environment:null,q=(A.isMeshStandardMaterial?r:e).get(A.envMap||U),Q=!!q&&q.mapping===Co?q.image.height:null,W=o[A.type];A.precision!==null&&(i=a.getMaxPrecision(A.precision),i!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",i,"instead."));const K=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,Y=K!==void 0?K.length:0;let se=0;k.morphAttributes.position!==void 0&&(se=1),k.morphAttributes.normal!==void 0&&(se=2),k.morphAttributes.color!==void 0&&(se=3);let ue,ge,de,Pe;if(W){const V=$r[W];ue=V.vertexShader,ge=V.fragmentShader}else ue=A.vertexShader,ge=A.fragmentShader,f.update(A),de=f.getVertexShaderID(A),Pe=f.getFragmentShaderID(A);const ae=v.getRenderTarget(),we=A.alphaTest>0,j=A.clearcoat>0;return{isWebGL2:m,shaderID:W,shaderName:A.type,vertexShader:ue,fragmentShader:ge,defines:A.defines,customVertexShaderID:de,customFragmentShaderID:Pe,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:i,instancing:F.isInstancedMesh===!0,instancingColor:F.isInstancedMesh===!0&&F.instanceColor!==null,supportsVertexTextures:s,outputEncoding:ae===null?v.outputEncoding:ae.isXRRenderTarget===!0?ae.texture.encoding:Fn,map:!!A.map,matcap:!!A.matcap,envMap:!!q,envMapMode:q&&q.mapping,envMapCubeUVHeight:Q,lightMap:!!A.lightMap,aoMap:!!A.aoMap,emissiveMap:!!A.emissiveMap,bumpMap:!!A.bumpMap,normalMap:!!A.normalMap,objectSpaceNormalMap:A.normalMapType===Rf,tangentSpaceNormalMap:A.normalMapType===ni,decodeVideoTexture:!!A.map&&A.map.isVideoTexture===!0&&A.map.encoding===kt,clearcoat:j,clearcoatMap:j&&!!A.clearcoatMap,clearcoatRoughnessMap:j&&!!A.clearcoatRoughnessMap,clearcoatNormalMap:j&&!!A.clearcoatNormalMap,displacementMap:!!A.displacementMap,roughnessMap:!!A.roughnessMap,metalnessMap:!!A.metalnessMap,specularMap:!!A.specularMap,specularIntensityMap:!!A.specularIntensityMap,specularColorMap:!!A.specularColorMap,opaque:A.transparent===!1&&A.blending===Ni,alphaMap:!!A.alphaMap,alphaTest:we,gradientMap:!!A.gradientMap,sheen:A.sheen>0,sheenColorMap:!!A.sheenColorMap,sheenRoughnessMap:!!A.sheenRoughnessMap,transmission:A.transmission>0,transmissionMap:!!A.transmissionMap,thicknessMap:!!A.thicknessMap,combine:A.combine,vertexTangents:!!A.normalMap&&!!k.attributes.tangent,vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!k.attributes.color&&k.attributes.color.itemSize===4,vertexUvs:!!A.map||!!A.bumpMap||!!A.normalMap||!!A.specularMap||!!A.alphaMap||!!A.emissiveMap||!!A.roughnessMap||!!A.metalnessMap||!!A.clearcoatMap||!!A.clearcoatRoughnessMap||!!A.clearcoatNormalMap||!!A.displacementMap||!!A.transmissionMap||!!A.thicknessMap||!!A.specularIntensityMap||!!A.specularColorMap||!!A.sheenColorMap||!!A.sheenRoughnessMap,uvsVertexOnly:!(!!A.map||!!A.bumpMap||!!A.normalMap||!!A.specularMap||!!A.alphaMap||!!A.emissiveMap||!!A.roughnessMap||!!A.metalnessMap||!!A.clearcoatNormalMap||A.transmission>0||!!A.transmissionMap||!!A.thicknessMap||!!A.specularIntensityMap||!!A.specularColorMap||A.sheen>0||!!A.sheenColorMap||!!A.sheenRoughnessMap)&&!!A.displacementMap,fog:!!I,useFog:A.fog===!0,fogExp2:I&&I.isFogExp2,flatShading:!!A.flatShading,sizeAttenuation:A.sizeAttenuation,logarithmicDepthBuffer:p,skinning:F.isSkinnedMesh===!0,morphTargets:k.morphAttributes.position!==void 0,morphNormals:k.morphAttributes.normal!==void 0,morphColors:k.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:se,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:A.dithering,shadowMapEnabled:v.shadowMap.enabled&&R.length>0,shadowMapType:v.shadowMap.type,toneMapping:A.toneMapped?v.toneMapping:yn,physicallyCorrectLights:v.physicallyCorrectLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===$n,flipSided:A.side===qr,useDepthPacking:!!A.depthPacking,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:A.extensions&&A.extensions.derivatives,extensionFragDepth:A.extensions&&A.extensions.fragDepth,extensionDrawBuffers:A.extensions&&A.extensions.drawBuffers,extensionShaderTextureLOD:A.extensions&&A.extensions.shaderTextureLOD,rendererExtensionFragDepth:m||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||t.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}}function u(A){const P=[];if(A.shaderID?P.push(A.shaderID):(P.push(A.customVertexShaderID),P.push(A.customFragmentShaderID)),A.defines!==void 0)for(const R in A.defines)P.push(R),P.push(A.defines[R]);return A.isRawShaderMaterial===!1&&(g(P,A),b(P,A),P.push(v.outputEncoding)),P.push(A.customProgramCacheKey),P.join()}function g(A,P){A.push(P.precision),A.push(P.outputEncoding),A.push(P.envMapMode),A.push(P.envMapCubeUVHeight),A.push(P.combine),A.push(P.vertexUvs),A.push(P.fogExp2),A.push(P.sizeAttenuation),A.push(P.morphTargetsCount),A.push(P.morphAttributeCount),A.push(P.numDirLights),A.push(P.numPointLights),A.push(P.numSpotLights),A.push(P.numHemiLights),A.push(P.numRectAreaLights),A.push(P.numDirLightShadows),A.push(P.numPointLightShadows),A.push(P.numSpotLightShadows),A.push(P.shadowMapType),A.push(P.toneMapping),A.push(P.numClippingPlanes),A.push(P.numClipIntersection),A.push(P.depthPacking)}function b(A,P){n.disableAll(),P.isWebGL2&&n.enable(0),P.supportsVertexTextures&&n.enable(1),P.instancing&&n.enable(2),P.instancingColor&&n.enable(3),P.map&&n.enable(4),P.matcap&&n.enable(5),P.envMap&&n.enable(6),P.lightMap&&n.enable(7),P.aoMap&&n.enable(8),P.emissiveMap&&n.enable(9),P.bumpMap&&n.enable(10),P.normalMap&&n.enable(11),P.objectSpaceNormalMap&&n.enable(12),P.tangentSpaceNormalMap&&n.enable(13),P.clearcoat&&n.enable(14),P.clearcoatMap&&n.enable(15),P.clearcoatRoughnessMap&&n.enable(16),P.clearcoatNormalMap&&n.enable(17),P.displacementMap&&n.enable(18),P.specularMap&&n.enable(19),P.roughnessMap&&n.enable(20),P.metalnessMap&&n.enable(21),P.gradientMap&&n.enable(22),P.alphaMap&&n.enable(23),P.alphaTest&&n.enable(24),P.vertexColors&&n.enable(25),P.vertexAlphas&&n.enable(26),P.vertexUvs&&n.enable(27),P.vertexTangents&&n.enable(28),P.uvsVertexOnly&&n.enable(29),P.fog&&n.enable(30),A.push(n.mask),n.disableAll(),P.useFog&&n.enable(0),P.flatShading&&n.enable(1),P.logarithmicDepthBuffer&&n.enable(2),P.skinning&&n.enable(3),P.morphTargets&&n.enable(4),P.morphNormals&&n.enable(5),P.morphColors&&n.enable(6),P.premultipliedAlpha&&n.enable(7),P.shadowMapEnabled&&n.enable(8),P.physicallyCorrectLights&&n.enable(9),P.doubleSided&&n.enable(10),P.flipSided&&n.enable(11),P.useDepthPacking&&n.enable(12),P.dithering&&n.enable(13),P.specularIntensityMap&&n.enable(14),P.specularColorMap&&n.enable(15),P.transmission&&n.enable(16),P.transmissionMap&&n.enable(17),P.thicknessMap&&n.enable(18),P.sheen&&n.enable(19),P.sheenColorMap&&n.enable(20),P.sheenRoughnessMap&&n.enable(21),P.decodeVideoTexture&&n.enable(22),P.opaque&&n.enable(23),A.push(n.mask)}function _(A){const P=o[A.type];let R;if(P){const D=$r[P];R=up.clone(D.uniforms)}else R=A.uniforms;return R}function w(A,P){let R;for(let D=0,F=h.length;D<F;D++){const I=h[D];if(I.cacheKey===P){R=I,++R.usedTimes;break}}return R===void 0&&(R=new p0(v,P,A,l),h.push(R)),R}function S(A){if(--A.usedTimes===0){const P=h.indexOf(A);h[P]=h[h.length-1],h.pop(),A.destroy()}}function T(A){f.remove(A)}function L(){f.dispose()}return{getParameters:d,getProgramCacheKey:u,getUniforms:_,acquireProgram:w,releaseProgram:S,releaseShaderCache:T,programs:h,dispose:L}}function b0(){let v=new WeakMap;function e(l){let c=v.get(l);return c===void 0&&(c={},v.set(l,c)),c}function r(l){v.delete(l)}function t(l,c,n){v.get(l)[c]=n}function a(){v=new WeakMap}return{get:e,remove:r,update:t,dispose:a}}function _0(v,e){return v.groupOrder!==e.groupOrder?v.groupOrder-e.groupOrder:v.renderOrder!==e.renderOrder?v.renderOrder-e.renderOrder:v.material.id!==e.material.id?v.material.id-e.material.id:v.z!==e.z?v.z-e.z:v.id-e.id}function bc(v,e){return v.groupOrder!==e.groupOrder?v.groupOrder-e.groupOrder:v.renderOrder!==e.renderOrder?v.renderOrder-e.renderOrder:v.z!==e.z?e.z-v.z:v.id-e.id}function _c(){const v=[];let e=0;const r=[],t=[],a=[];function l(){e=0,r.length=0,t.length=0,a.length=0}function c(p,s,i,o,d,u){let g=v[e];return g===void 0?(g={id:p.id,object:p,geometry:s,material:i,groupOrder:o,renderOrder:p.renderOrder,z:d,group:u},v[e]=g):(g.id=p.id,g.object=p,g.geometry=s,g.material=i,g.groupOrder=o,g.renderOrder=p.renderOrder,g.z=d,g.group=u),e++,g}function n(p,s,i,o,d,u){const g=c(p,s,i,o,d,u);i.transmission>0?t.push(g):i.transparent===!0?a.push(g):r.push(g)}function f(p,s,i,o,d,u){const g=c(p,s,i,o,d,u);i.transmission>0?t.unshift(g):i.transparent===!0?a.unshift(g):r.unshift(g)}function h(p,s){r.length>1&&r.sort(p||_0),t.length>1&&t.sort(s||bc),a.length>1&&a.sort(s||bc)}function m(){for(let p=e,s=v.length;p<s;p++){const i=v[p];if(i.id===null)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}}return{opaque:r,transmissive:t,transparent:a,init:l,push:n,unshift:f,finish:m,sort:h}}function x0(){let v=new WeakMap;function e(t,a){let l;return v.has(t)===!1?(l=new _c,v.set(t,[l])):a>=v.get(t).length?(l=new _c,v.get(t).push(l)):l=v.get(t)[a],l}function r(){v=new WeakMap}return{get:e,dispose:r}}function w0(){const v={};return{get:function(e){if(v[e.id]!==void 0)return v[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new Me,color:new at};break;case"SpotLight":r={position:new Me,direction:new Me,color:new at,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Me,color:new at,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Me,skyColor:new at,groundColor:new at};break;case"RectAreaLight":r={color:new at,position:new Me,halfWidth:new Me,halfHeight:new Me};break}return v[e.id]=r,r}}}function S0(){const v={};return{get:function(e){if(v[e.id]!==void 0)return v[e.id];let r;switch(e.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt,shadowCameraNear:1,shadowCameraFar:1e3};break}return v[e.id]=r,r}}}let M0=0;function T0(v,e){return(e.castShadow?1:0)-(v.castShadow?1:0)}function E0(v,e){const r=new w0,t=S0(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let m=0;m<9;m++)a.probe.push(new Me);const l=new Me,c=new pt,n=new pt;function f(m,p){let s=0,i=0,o=0;for(let P=0;P<9;P++)a.probe[P].set(0,0,0);let d=0,u=0,g=0,b=0,_=0,w=0,S=0,T=0;m.sort(T0);const L=p!==!0?Math.PI:1;for(let P=0,R=m.length;P<R;P++){const D=m[P],F=D.color,I=D.intensity,k=D.distance,U=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)s+=F.r*I*L,i+=F.g*I*L,o+=F.b*I*L;else if(D.isLightProbe)for(let q=0;q<9;q++)a.probe[q].addScaledVector(D.sh.coefficients[q],I);else if(D.isDirectionalLight){const q=r.get(D);if(q.color.copy(D.color).multiplyScalar(D.intensity*L),D.castShadow){const Q=D.shadow,W=t.get(D);W.shadowBias=Q.bias,W.shadowNormalBias=Q.normalBias,W.shadowRadius=Q.radius,W.shadowMapSize=Q.mapSize,a.directionalShadow[d]=W,a.directionalShadowMap[d]=U,a.directionalShadowMatrix[d]=D.shadow.matrix,w++}a.directional[d]=q,d++}else if(D.isSpotLight){const q=r.get(D);if(q.position.setFromMatrixPosition(D.matrixWorld),q.color.copy(F).multiplyScalar(I*L),q.distance=k,q.coneCos=Math.cos(D.angle),q.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),q.decay=D.decay,D.castShadow){const Q=D.shadow,W=t.get(D);W.shadowBias=Q.bias,W.shadowNormalBias=Q.normalBias,W.shadowRadius=Q.radius,W.shadowMapSize=Q.mapSize,a.spotShadow[g]=W,a.spotShadowMap[g]=U,a.spotShadowMatrix[g]=D.shadow.matrix,T++}a.spot[g]=q,g++}else if(D.isRectAreaLight){const q=r.get(D);q.color.copy(F).multiplyScalar(I),q.halfWidth.set(D.width*.5,0,0),q.halfHeight.set(0,D.height*.5,0),a.rectArea[b]=q,b++}else if(D.isPointLight){const q=r.get(D);if(q.color.copy(D.color).multiplyScalar(D.intensity*L),q.distance=D.distance,q.decay=D.decay,D.castShadow){const Q=D.shadow,W=t.get(D);W.shadowBias=Q.bias,W.shadowNormalBias=Q.normalBias,W.shadowRadius=Q.radius,W.shadowMapSize=Q.mapSize,W.shadowCameraNear=Q.camera.near,W.shadowCameraFar=Q.camera.far,a.pointShadow[u]=W,a.pointShadowMap[u]=U,a.pointShadowMatrix[u]=D.shadow.matrix,S++}a.point[u]=q,u++}else if(D.isHemisphereLight){const q=r.get(D);q.skyColor.copy(D.color).multiplyScalar(I*L),q.groundColor.copy(D.groundColor).multiplyScalar(I*L),a.hemi[_]=q,_++}}b>0&&(e.isWebGL2||v.has("OES_texture_float_linear")===!0?(a.rectAreaLTC1=nt.LTC_FLOAT_1,a.rectAreaLTC2=nt.LTC_FLOAT_2):v.has("OES_texture_half_float_linear")===!0?(a.rectAreaLTC1=nt.LTC_HALF_1,a.rectAreaLTC2=nt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=s,a.ambient[1]=i,a.ambient[2]=o;const A=a.hash;(A.directionalLength!==d||A.pointLength!==u||A.spotLength!==g||A.rectAreaLength!==b||A.hemiLength!==_||A.numDirectionalShadows!==w||A.numPointShadows!==S||A.numSpotShadows!==T)&&(a.directional.length=d,a.spot.length=g,a.rectArea.length=b,a.point.length=u,a.hemi.length=_,a.directionalShadow.length=w,a.directionalShadowMap.length=w,a.pointShadow.length=S,a.pointShadowMap.length=S,a.spotShadow.length=T,a.spotShadowMap.length=T,a.directionalShadowMatrix.length=w,a.pointShadowMatrix.length=S,a.spotShadowMatrix.length=T,A.directionalLength=d,A.pointLength=u,A.spotLength=g,A.rectAreaLength=b,A.hemiLength=_,A.numDirectionalShadows=w,A.numPointShadows=S,A.numSpotShadows=T,a.version=M0++)}function h(m,p){let s=0,i=0,o=0,d=0,u=0;const g=p.matrixWorldInverse;for(let b=0,_=m.length;b<_;b++){const w=m[b];if(w.isDirectionalLight){const S=a.directional[s];S.direction.setFromMatrixPosition(w.matrixWorld),l.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(l),S.direction.transformDirection(g),s++}else if(w.isSpotLight){const S=a.spot[o];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(g),S.direction.setFromMatrixPosition(w.matrixWorld),l.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(l),S.direction.transformDirection(g),o++}else if(w.isRectAreaLight){const S=a.rectArea[d];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(g),n.identity(),c.copy(w.matrixWorld),c.premultiply(g),n.extractRotation(c),S.halfWidth.set(w.width*.5,0,0),S.halfHeight.set(0,w.height*.5,0),S.halfWidth.applyMatrix4(n),S.halfHeight.applyMatrix4(n),d++}else if(w.isPointLight){const S=a.point[i];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(g),i++}else if(w.isHemisphereLight){const S=a.hemi[u];S.direction.setFromMatrixPosition(w.matrixWorld),S.direction.transformDirection(g),u++}}}return{setup:f,setupView:h,state:a}}function xc(v,e){const r=new E0(v,e),t=[],a=[];function l(){t.length=0,a.length=0}function c(p){t.push(p)}function n(p){a.push(p)}function f(p){r.setup(t,p)}function h(p){r.setupView(t,p)}return{init:l,state:{lightsArray:t,shadowsArray:a,lights:r},setupLights:f,setupLightsView:h,pushLight:c,pushShadow:n}}function A0(v,e){let r=new WeakMap;function t(l,c=0){let n;return r.has(l)===!1?(n=new xc(v,e),r.set(l,[n])):c>=r.get(l).length?(n=new xc(v,e),r.get(l).push(n)):n=r.get(l)[c],n}function a(){r=new WeakMap}return{get:t,dispose:a}}class cl extends er{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=Lf,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}cl.prototype.isMeshDepthMaterial=!0;class hl extends er{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Me,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}hl.prototype.isMeshDistanceMaterial=!0;const L0=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,C0=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Mh(v,e,r){let t=new Do;const a=new tt,l=new tt,c=new Vt,n=new cl({depthPacking:Cf}),f=new hl,h={},m=r.maxTextureSize,p={0:qr,1:Ui,2:$n},s=new Xr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tt},radius:{value:4}},vertexShader:L0,fragmentShader:C0}),i=s.clone();i.defines.HORIZONTAL_PASS=1;const o=new Zt;o.setAttribute("position",new nr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const d=new xr(o,s),u=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=rh,this.render=function(w,S,T){if(u.enabled===!1||u.autoUpdate===!1&&u.needsUpdate===!1||w.length===0)return;const L=v.getRenderTarget(),A=v.getActiveCubeFace(),P=v.getActiveMipmapLevel(),R=v.state;R.setBlending(jn),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);for(let D=0,F=w.length;D<F;D++){const I=w[D],k=I.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",I,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;a.copy(k.mapSize);const U=k.getFrameExtents();if(a.multiply(U),l.copy(k.mapSize),(a.x>m||a.y>m)&&(a.x>m&&(l.x=Math.floor(m/U.x),a.x=l.x*U.x,k.mapSize.x=l.x),a.y>m&&(l.y=Math.floor(m/U.y),a.y=l.y*U.y,k.mapSize.y=l.y)),k.map===null&&!k.isPointLightShadow&&this.type===ms&&(k.map=new Lr(a.x,a.y),k.map.texture.name=I.name+".shadowMap",k.mapPass=new Lr(a.x,a.y),k.camera.updateProjectionMatrix()),k.map===null){const Q={minFilter:ur,magFilter:ur,format:Dr};k.map=new Lr(a.x,a.y,Q),k.map.texture.name=I.name+".shadowMap",k.camera.updateProjectionMatrix()}v.setRenderTarget(k.map),v.clear();const q=k.getViewportCount();for(let Q=0;Q<q;Q++){const W=k.getViewport(Q);c.set(l.x*W.x,l.y*W.y,l.x*W.z,l.y*W.w),R.viewport(c),k.updateMatrices(I,Q),t=k.getFrustum(),_(S,T,k.camera,I,this.type)}!k.isPointLightShadow&&this.type===ms&&g(k,T),k.needsUpdate=!1}u.needsUpdate=!1,v.setRenderTarget(L,A,P)};function g(w,S){const T=e.update(d);s.defines.VSM_SAMPLES!==w.blurSamples&&(s.defines.VSM_SAMPLES=w.blurSamples,i.defines.VSM_SAMPLES=w.blurSamples,s.needsUpdate=!0,i.needsUpdate=!0),s.uniforms.shadow_pass.value=w.map.texture,s.uniforms.resolution.value=w.mapSize,s.uniforms.radius.value=w.radius,v.setRenderTarget(w.mapPass),v.clear(),v.renderBufferDirect(S,null,T,s,d,null),i.uniforms.shadow_pass.value=w.mapPass.texture,i.uniforms.resolution.value=w.mapSize,i.uniforms.radius.value=w.radius,v.setRenderTarget(w.map),v.clear(),v.renderBufferDirect(S,null,T,i,d,null)}function b(w,S,T,L,A,P){let R=null;const D=T.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(D!==void 0?R=D:R=T.isPointLight===!0?f:n,v.localClippingEnabled&&S.clipShadows===!0&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0){const F=R.uuid,I=S.uuid;let k=h[F];k===void 0&&(k={},h[F]=k);let U=k[I];U===void 0&&(U=R.clone(),k[I]=U),R=U}return R.visible=S.visible,R.wireframe=S.wireframe,P===ms?R.side=S.shadowSide!==null?S.shadowSide:S.side:R.side=S.shadowSide!==null?S.shadowSide:p[S.side],R.alphaMap=S.alphaMap,R.alphaTest=S.alphaTest,R.clipShadows=S.clipShadows,R.clippingPlanes=S.clippingPlanes,R.clipIntersection=S.clipIntersection,R.displacementMap=S.displacementMap,R.displacementScale=S.displacementScale,R.displacementBias=S.displacementBias,R.wireframeLinewidth=S.wireframeLinewidth,R.linewidth=S.linewidth,T.isPointLight===!0&&R.isMeshDistanceMaterial===!0&&(R.referencePosition.setFromMatrixPosition(T.matrixWorld),R.nearDistance=L,R.farDistance=A),R}function _(w,S,T,L,A){if(w.visible===!1)return;if(w.layers.test(S.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&A===ms)&&(!w.frustumCulled||t.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,w.matrixWorld);const D=e.update(w),F=w.material;if(Array.isArray(F)){const I=D.groups;for(let k=0,U=I.length;k<U;k++){const q=I[k],Q=F[q.materialIndex];if(Q&&Q.visible){const W=b(w,Q,L,T.near,T.far,A);v.renderBufferDirect(T,null,D,W,w,q)}}}else if(F.visible){const I=b(w,F,L,T.near,T.far,A);v.renderBufferDirect(T,null,D,I,w,null)}}const R=w.children;for(let D=0,F=R.length;D<F;D++)_(R[D],S,T,L,A)}}function R0(v,e,r){const t=r.isWebGL2;function a(){let O=!1;const H=new Vt;let G=null;const Z=new Vt(0,0,0,0);return{setMask:function(oe){G!==oe&&!O&&(v.colorMask(oe,oe,oe,oe),G=oe)},setLocked:function(oe){O=oe},setClear:function(oe,xe,Se,ke,_e){_e===!0&&(oe*=ke,xe*=ke,Se*=ke),H.set(oe,xe,Se,ke),Z.equals(H)===!1&&(v.clearColor(oe,xe,Se,ke),Z.copy(H))},reset:function(){O=!1,G=null,Z.set(-1,0,0,0)}}}function l(){let O=!1,H=null,G=null,Z=null;return{setTest:function(oe){oe?Pe(2929):ae(2929)},setMask:function(oe){H!==oe&&!O&&(v.depthMask(oe),H=oe)},setFunc:function(oe){if(G!==oe){if(oe)switch(oe){case Xd:v.depthFunc(512);break;case Yd:v.depthFunc(519);break;case Zd:v.depthFunc(513);break;case Fa:v.depthFunc(515);break;case Kd:v.depthFunc(514);break;case Jd:v.depthFunc(518);break;case Qd:v.depthFunc(516);break;case $d:v.depthFunc(517);break;default:v.depthFunc(515)}else v.depthFunc(515);G=oe}},setLocked:function(oe){O=oe},setClear:function(oe){Z!==oe&&(v.clearDepth(oe),Z=oe)},reset:function(){O=!1,H=null,G=null,Z=null}}}function c(){let O=!1,H=null,G=null,Z=null,oe=null,xe=null,Se=null,ke=null,_e=null;return{setTest:function(Ye){O||(Ye?Pe(2960):ae(2960))},setMask:function(Ye){H!==Ye&&!O&&(v.stencilMask(Ye),H=Ye)},setFunc:function(Ye,it,lt){(G!==Ye||Z!==it||oe!==lt)&&(v.stencilFunc(Ye,it,lt),G=Ye,Z=it,oe=lt)},setOp:function(Ye,it,lt){(xe!==Ye||Se!==it||ke!==lt)&&(v.stencilOp(Ye,it,lt),xe=Ye,Se=it,ke=lt)},setLocked:function(Ye){O=Ye},setClear:function(Ye){_e!==Ye&&(v.clearStencil(Ye),_e=Ye)},reset:function(){O=!1,H=null,G=null,Z=null,oe=null,xe=null,Se=null,ke=null,_e=null}}}const n=new a,f=new l,h=new c;let m={},p={},s=new WeakMap,i=[],o=null,d=!1,u=null,g=null,b=null,_=null,w=null,S=null,T=null,L=!1,A=null,P=null,R=null,D=null,F=null;const I=v.getParameter(35661);let k=!1,U=0;const q=v.getParameter(7938);q.indexOf("WebGL")!==-1?(U=parseFloat(/^WebGL (\d)/.exec(q)[1]),k=U>=1):q.indexOf("OpenGL ES")!==-1&&(U=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),k=U>=2);let Q=null,W={};const K=v.getParameter(3088),Y=v.getParameter(2978),se=new Vt().fromArray(K),ue=new Vt().fromArray(Y);function ge(O,H,G){const Z=new Uint8Array(4),oe=v.createTexture();v.bindTexture(O,oe),v.texParameteri(O,10241,9728),v.texParameteri(O,10240,9728);for(let xe=0;xe<G;xe++)v.texImage2D(H+xe,0,6408,1,1,0,6408,5121,Z);return oe}const de={};de[3553]=ge(3553,3553,1),de[34067]=ge(34067,34069,6),n.setClear(0,0,0,1),f.setClear(1),h.setClear(0),Pe(2929),f.setFunc(Fa),ye(!1),ne(pu),Pe(2884),$(jn);function Pe(O){m[O]!==!0&&(v.enable(O),m[O]=!0)}function ae(O){m[O]!==!1&&(v.disable(O),m[O]=!1)}function we(O,H){return p[O]!==H?(v.bindFramebuffer(O,H),p[O]=H,t&&(O===36009&&(p[36160]=H),O===36160&&(p[36009]=H)),!0):!1}function j(O,H){let G=i,Z=!1;if(O)if(G=s.get(H),G===void 0&&(G=[],s.set(H,G)),O.isWebGLMultipleRenderTargets){const oe=O.texture;if(G.length!==oe.length||G[0]!==36064){for(let xe=0,Se=oe.length;xe<Se;xe++)G[xe]=36064+xe;G.length=oe.length,Z=!0}}else G[0]!==36064&&(G[0]=36064,Z=!0);else G[0]!==1029&&(G[0]=1029,Z=!0);Z&&(r.isWebGL2?v.drawBuffers(G):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(G))}function B(O){return o!==O?(v.useProgram(O),o=O,!0):!1}const V={[Di]:32774,[kd]:32778,[Nd]:32779};if(t)V[vu]=32775,V[bu]=32776;else{const O=e.get("EXT_blend_minmax");O!==null&&(V[vu]=O.MIN_EXT,V[bu]=O.MAX_EXT)}const te={[Fd]:0,[Ud]:1,[Bd]:768,[ih]:770,[qd]:776,[Hd]:774,[zd]:772,[Gd]:769,[sh]:771,[Wd]:775,[Vd]:773};function $(O,H,G,Z,oe,xe,Se,ke){if(O===jn){d===!0&&(ae(3042),d=!1);return}if(d===!1&&(Pe(3042),d=!0),O!==Od){if(O!==u||ke!==L){if((g!==Di||w!==Di)&&(v.blendEquation(32774),g=Di,w=Di),ke)switch(O){case Ni:v.blendFuncSeparate(1,771,1,771);break;case mu:v.blendFunc(1,1);break;case gu:v.blendFuncSeparate(0,769,0,1);break;case yu:v.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}else switch(O){case Ni:v.blendFuncSeparate(770,771,1,771);break;case mu:v.blendFunc(770,1);break;case gu:v.blendFuncSeparate(0,769,0,1);break;case yu:v.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}b=null,_=null,S=null,T=null,u=O,L=ke}return}oe=oe||H,xe=xe||G,Se=Se||Z,(H!==g||oe!==w)&&(v.blendEquationSeparate(V[H],V[oe]),g=H,w=oe),(G!==b||Z!==_||xe!==S||Se!==T)&&(v.blendFuncSeparate(te[G],te[Z],te[xe],te[Se]),b=G,_=Z,S=xe,T=Se),u=O,L=null}function X(O,H){O.side===$n?ae(2884):Pe(2884);let G=O.side===qr;H&&(G=!G),ye(G),O.blending===Ni&&O.transparent===!1?$(jn):$(O.blending,O.blendEquation,O.blendSrc,O.blendDst,O.blendEquationAlpha,O.blendSrcAlpha,O.blendDstAlpha,O.premultipliedAlpha),f.setFunc(O.depthFunc),f.setTest(O.depthTest),f.setMask(O.depthWrite),n.setMask(O.colorWrite);const Z=O.stencilWrite;h.setTest(Z),Z&&(h.setMask(O.stencilWriteMask),h.setFunc(O.stencilFunc,O.stencilRef,O.stencilFuncMask),h.setOp(O.stencilFail,O.stencilZFail,O.stencilZPass)),ve(O.polygonOffset,O.polygonOffsetFactor,O.polygonOffsetUnits),O.alphaToCoverage===!0?Pe(32926):ae(32926)}function ye(O){A!==O&&(O?v.frontFace(2304):v.frontFace(2305),A=O)}function ne(O){O!==Dd?(Pe(2884),O!==P&&(O===pu?v.cullFace(1029):O===Id?v.cullFace(1028):v.cullFace(1032))):ae(2884),P=O}function pe(O){O!==R&&(k&&v.lineWidth(O),R=O)}function ve(O,H,G){O?(Pe(32823),(D!==H||F!==G)&&(v.polygonOffset(H,G),D=H,F=G)):ae(32823)}function he(O){O?Pe(3089):ae(3089)}function Ae(O){O===void 0&&(O=33984+I-1),Q!==O&&(v.activeTexture(O),Q=O)}function Oe(O,H){Q===null&&Ae();let G=W[Q];G===void 0&&(G={type:void 0,texture:void 0},W[Q]=G),(G.type!==O||G.texture!==H)&&(v.bindTexture(O,H||de[O]),G.type=O,G.texture=H)}function Ie(){const O=W[Q];O!==void 0&&O.type!==void 0&&(v.bindTexture(O.type,null),O.type=void 0,O.texture=void 0)}function ie(){try{v.compressedTexImage2D.apply(v,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function ee(){try{v.texSubImage2D.apply(v,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Le(){try{v.texSubImage3D.apply(v,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function De(){try{v.compressedTexSubImage2D.apply(v,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Ze(){try{v.texStorage2D.apply(v,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Ce(){try{v.texStorage3D.apply(v,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function je(){try{v.texImage2D.apply(v,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Ee(){try{v.texImage3D.apply(v,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function qe(O){se.equals(O)===!1&&(v.scissor(O.x,O.y,O.z,O.w),se.copy(O))}function be(O){ue.equals(O)===!1&&(v.viewport(O.x,O.y,O.z,O.w),ue.copy(O))}function Xe(){v.disable(3042),v.disable(2884),v.disable(2929),v.disable(32823),v.disable(3089),v.disable(2960),v.disable(32926),v.blendEquation(32774),v.blendFunc(1,0),v.blendFuncSeparate(1,0,1,0),v.colorMask(!0,!0,!0,!0),v.clearColor(0,0,0,0),v.depthMask(!0),v.depthFunc(513),v.clearDepth(1),v.stencilMask(4294967295),v.stencilFunc(519,0,4294967295),v.stencilOp(7680,7680,7680),v.clearStencil(0),v.cullFace(1029),v.frontFace(2305),v.polygonOffset(0,0),v.activeTexture(33984),v.bindFramebuffer(36160,null),t===!0&&(v.bindFramebuffer(36009,null),v.bindFramebuffer(36008,null)),v.useProgram(null),v.lineWidth(1),v.scissor(0,0,v.canvas.width,v.canvas.height),v.viewport(0,0,v.canvas.width,v.canvas.height),m={},Q=null,W={},p={},s=new WeakMap,i=[],o=null,d=!1,u=null,g=null,b=null,_=null,w=null,S=null,T=null,L=!1,A=null,P=null,R=null,D=null,F=null,se.set(0,0,v.canvas.width,v.canvas.height),ue.set(0,0,v.canvas.width,v.canvas.height),n.reset(),f.reset(),h.reset()}return{buffers:{color:n,depth:f,stencil:h},enable:Pe,disable:ae,bindFramebuffer:we,drawBuffers:j,useProgram:B,setBlending:$,setMaterial:X,setFlipSided:ye,setCullFace:ne,setLineWidth:pe,setPolygonOffset:ve,setScissorTest:he,activeTexture:Ae,bindTexture:Oe,unbindTexture:Ie,compressedTexImage2D:ie,texImage2D:je,texImage3D:Ee,texStorage2D:Ze,texStorage3D:Ce,texSubImage2D:ee,texSubImage3D:Le,compressedTexSubImage2D:De,scissor:qe,viewport:be,reset:Xe}}function P0(v,e,r,t,a,l,c){const n=a.isWebGL2,f=a.maxTextures,h=a.maxCubemapSize,m=a.maxTextureSize,p=a.maxSamples,s=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,i=/OculusBrowser/g.test(navigator.userAgent),o=new WeakMap;let d;const u=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(ie,ee){return g?new OffscreenCanvas(ie,ee):Es("canvas")}function _(ie,ee,Le,De){let Ze=1;if((ie.width>De||ie.height>De)&&(Ze=De/Math.max(ie.width,ie.height)),Ze<1||ee===!0)if(typeof HTMLImageElement!="undefined"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&ie instanceof ImageBitmap){const Ce=ee?Ao:Math.floor,je=Ce(Ze*ie.width),Ee=Ce(Ze*ie.height);d===void 0&&(d=b(je,Ee));const qe=Le?b(je,Ee):d;return qe.width=je,qe.height=Ee,qe.getContext("2d").drawImage(ie,0,0,je,Ee),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ie.width+"x"+ie.height+") to ("+je+"x"+Ee+")."),qe}else return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ie.width+"x"+ie.height+")."),ie;return ie}function w(ie){return Ha(ie.width)&&Ha(ie.height)}function S(ie){return n?!1:ie.wrapS!==Pr||ie.wrapT!==Pr||ie.minFilter!==ur&&ie.minFilter!==vr}function T(ie,ee){return ie.generateMipmaps&&ee&&ie.minFilter!==ur&&ie.minFilter!==vr}function L(ie){v.generateMipmap(ie)}function A(ie,ee,Le,De,Ze=!1){if(n===!1)return ee;if(ie!==null){if(v[ie]!==void 0)return v[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let Ce=ee;return ee===6403&&(Le===5126&&(Ce=33326),Le===5131&&(Ce=33325),Le===5121&&(Ce=33321)),ee===33319&&(Le===5126&&(Ce=33328),Le===5131&&(Ce=33327),Le===5121&&(Ce=33323)),ee===6408&&(Le===5126&&(Ce=34836),Le===5131&&(Ce=34842),Le===5121&&(Ce=De===kt&&Ze===!1?35907:32856),Le===32819&&(Ce=32854),Le===32820&&(Ce=32855)),(Ce===33325||Ce===33326||Ce===33327||Ce===33328||Ce===34842||Ce===34836)&&e.get("EXT_color_buffer_float"),Ce}function P(ie,ee,Le){return T(ie,Le)===!0||ie.isFramebufferTexture&&ie.minFilter!==ur&&ie.minFilter!==vr?Math.log2(Math.max(ee.width,ee.height))+1:ie.mipmaps!==void 0&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?ee.mipmaps.length:1}function R(ie){return ie===ur||ie===Ga||ie===za?9728:9729}function D(ie){const ee=ie.target;ee.removeEventListener("dispose",D),I(ee),ee.isVideoTexture&&o.delete(ee)}function F(ie){const ee=ie.target;ee.removeEventListener("dispose",F),U(ee)}function I(ie){const ee=t.get(ie);if(ee.__webglInit===void 0)return;const Le=ie.source,De=u.get(Le);if(De){const Ze=De[ee.__cacheKey];Ze.usedTimes--,Ze.usedTimes===0&&k(ie),Object.keys(De).length===0&&u.delete(Le)}t.remove(ie)}function k(ie){const ee=t.get(ie);v.deleteTexture(ee.__webglTexture);const Le=ie.source,De=u.get(Le);delete De[ee.__cacheKey],c.memory.textures--}function U(ie){const ee=ie.texture,Le=t.get(ie),De=t.get(ee);if(De.__webglTexture!==void 0&&(v.deleteTexture(De.__webglTexture),c.memory.textures--),ie.depthTexture&&ie.depthTexture.dispose(),ie.isWebGLCubeRenderTarget)for(let Ze=0;Ze<6;Ze++)v.deleteFramebuffer(Le.__webglFramebuffer[Ze]),Le.__webglDepthbuffer&&v.deleteRenderbuffer(Le.__webglDepthbuffer[Ze]);else v.deleteFramebuffer(Le.__webglFramebuffer),Le.__webglDepthbuffer&&v.deleteRenderbuffer(Le.__webglDepthbuffer),Le.__webglMultisampledFramebuffer&&v.deleteFramebuffer(Le.__webglMultisampledFramebuffer),Le.__webglColorRenderbuffer&&v.deleteRenderbuffer(Le.__webglColorRenderbuffer),Le.__webglDepthRenderbuffer&&v.deleteRenderbuffer(Le.__webglDepthRenderbuffer);if(ie.isWebGLMultipleRenderTargets)for(let Ze=0,Ce=ee.length;Ze<Ce;Ze++){const je=t.get(ee[Ze]);je.__webglTexture&&(v.deleteTexture(je.__webglTexture),c.memory.textures--),t.remove(ee[Ze])}t.remove(ee),t.remove(ie)}let q=0;function Q(){q=0}function W(){const ie=q;return ie>=f&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+f),q+=1,ie}function K(ie){const ee=[];return ee.push(ie.wrapS),ee.push(ie.wrapT),ee.push(ie.magFilter),ee.push(ie.minFilter),ee.push(ie.anisotropy),ee.push(ie.internalFormat),ee.push(ie.format),ee.push(ie.type),ee.push(ie.generateMipmaps),ee.push(ie.premultiplyAlpha),ee.push(ie.flipY),ee.push(ie.unpackAlignment),ee.push(ie.encoding),ee.join()}function Y(ie,ee){const Le=t.get(ie);if(ie.isVideoTexture&&Oe(ie),ie.isRenderTargetTexture===!1&&ie.version>0&&Le.__version!==ie.version){const De=ie.image;if(De===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(De.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{j(Le,ie,ee);return}}r.activeTexture(33984+ee),r.bindTexture(3553,Le.__webglTexture)}function se(ie,ee){const Le=t.get(ie);if(ie.version>0&&Le.__version!==ie.version){j(Le,ie,ee);return}r.activeTexture(33984+ee),r.bindTexture(35866,Le.__webglTexture)}function ue(ie,ee){const Le=t.get(ie);if(ie.version>0&&Le.__version!==ie.version){j(Le,ie,ee);return}r.activeTexture(33984+ee),r.bindTexture(32879,Le.__webglTexture)}function ge(ie,ee){const Le=t.get(ie);if(ie.version>0&&Le.__version!==ie.version){B(Le,ie,ee);return}r.activeTexture(33984+ee),r.bindTexture(34067,Le.__webglTexture)}const de={[zi]:10497,[Pr]:33071,[Mo]:33648},Pe={[ur]:9728,[Ga]:9984,[za]:9986,[vr]:9729,[ah]:9985,[Yi]:9987};function ae(ie,ee,Le){if(Le?(v.texParameteri(ie,10242,de[ee.wrapS]),v.texParameteri(ie,10243,de[ee.wrapT]),(ie===32879||ie===35866)&&v.texParameteri(ie,32882,de[ee.wrapR]),v.texParameteri(ie,10240,Pe[ee.magFilter]),v.texParameteri(ie,10241,Pe[ee.minFilter])):(v.texParameteri(ie,10242,33071),v.texParameteri(ie,10243,33071),(ie===32879||ie===35866)&&v.texParameteri(ie,32882,33071),(ee.wrapS!==Pr||ee.wrapT!==Pr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),v.texParameteri(ie,10240,R(ee.magFilter)),v.texParameteri(ie,10241,R(ee.minFilter)),ee.minFilter!==ur&&ee.minFilter!==vr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const De=e.get("EXT_texture_filter_anisotropic");if(ee.type===Dn&&e.has("OES_texture_float_linear")===!1||n===!1&&ee.type===ws&&e.has("OES_texture_half_float_linear")===!1)return;(ee.anisotropy>1||t.get(ee).__currentAnisotropy)&&(v.texParameterf(ie,De.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ee.anisotropy,a.getMaxAnisotropy())),t.get(ee).__currentAnisotropy=ee.anisotropy)}}function we(ie,ee){let Le=!1;ie.__webglInit===void 0&&(ie.__webglInit=!0,ee.addEventListener("dispose",D));const De=ee.source;let Ze=u.get(De);Ze===void 0&&(Ze={},u.set(De,Ze));const Ce=K(ee);if(Ce!==ie.__cacheKey){Ze[Ce]===void 0&&(Ze[Ce]={texture:v.createTexture(),usedTimes:0},c.memory.textures++,Le=!0),Ze[Ce].usedTimes++;const je=Ze[ie.__cacheKey];je!==void 0&&(Ze[ie.__cacheKey].usedTimes--,je.usedTimes===0&&k(ee)),ie.__cacheKey=Ce,ie.__webglTexture=Ze[Ce].texture}return Le}function j(ie,ee,Le){let De=3553;ee.isDataArrayTexture&&(De=35866),ee.isData3DTexture&&(De=32879);const Ze=we(ie,ee),Ce=ee.source;if(r.activeTexture(33984+Le),r.bindTexture(De,ie.__webglTexture),Ce.version!==Ce.__currentVersion||Ze===!0){v.pixelStorei(37440,ee.flipY),v.pixelStorei(37441,ee.premultiplyAlpha),v.pixelStorei(3317,ee.unpackAlignment),v.pixelStorei(37443,0);const je=S(ee)&&w(ee.image)===!1;let Ee=_(ee.image,je,!1,m);Ee=Ie(ee,Ee);const qe=w(Ee)||n,be=l.convert(ee.format,ee.encoding);let Xe=l.convert(ee.type),O=A(ee.internalFormat,be,Xe,ee.encoding,ee.isVideoTexture);ae(De,ee,qe);let H;const G=ee.mipmaps,Z=n&&ee.isVideoTexture!==!0,oe=ie.__version===void 0||Ze===!0,xe=P(ee,Ee,qe);if(ee.isDepthTexture)O=6402,n?ee.type===Dn?O=36012:ee.type===wo?O=33190:ee.type===Fi?O=35056:O=33189:ee.type===Dn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ee.format===Jn&&O===6402&&ee.type!==xs&&ee.type!==wo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ee.type=xs,Xe=l.convert(ee.type)),ee.format===Vi&&O===6402&&(O=34041,ee.type!==Fi&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ee.type=Fi,Xe=l.convert(ee.type))),oe&&(Z?r.texStorage2D(3553,1,O,Ee.width,Ee.height):r.texImage2D(3553,0,O,Ee.width,Ee.height,0,be,Xe,null));else if(ee.isDataTexture)if(G.length>0&&qe){Z&&oe&&r.texStorage2D(3553,xe,O,G[0].width,G[0].height);for(let Se=0,ke=G.length;Se<ke;Se++)H=G[Se],Z?r.texSubImage2D(3553,Se,0,0,H.width,H.height,be,Xe,H.data):r.texImage2D(3553,Se,O,H.width,H.height,0,be,Xe,H.data);ee.generateMipmaps=!1}else Z?(oe&&r.texStorage2D(3553,xe,O,Ee.width,Ee.height),r.texSubImage2D(3553,0,0,0,Ee.width,Ee.height,be,Xe,Ee.data)):r.texImage2D(3553,0,O,Ee.width,Ee.height,0,be,Xe,Ee.data);else if(ee.isCompressedTexture){Z&&oe&&r.texStorage2D(3553,xe,O,G[0].width,G[0].height);for(let Se=0,ke=G.length;Se<ke;Se++)H=G[Se],ee.format!==Dr?be!==null?Z?r.compressedTexSubImage2D(3553,Se,0,0,H.width,H.height,be,H.data):r.compressedTexImage2D(3553,Se,O,H.width,H.height,0,H.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Z?r.texSubImage2D(3553,Se,0,0,H.width,H.height,be,Xe,H.data):r.texImage2D(3553,Se,O,H.width,H.height,0,be,Xe,H.data)}else if(ee.isDataArrayTexture)Z?(oe&&r.texStorage3D(35866,xe,O,Ee.width,Ee.height,Ee.depth),r.texSubImage3D(35866,0,0,0,0,Ee.width,Ee.height,Ee.depth,be,Xe,Ee.data)):r.texImage3D(35866,0,O,Ee.width,Ee.height,Ee.depth,0,be,Xe,Ee.data);else if(ee.isData3DTexture)Z?(oe&&r.texStorage3D(32879,xe,O,Ee.width,Ee.height,Ee.depth),r.texSubImage3D(32879,0,0,0,0,Ee.width,Ee.height,Ee.depth,be,Xe,Ee.data)):r.texImage3D(32879,0,O,Ee.width,Ee.height,Ee.depth,0,be,Xe,Ee.data);else if(ee.isFramebufferTexture){if(oe)if(Z)r.texStorage2D(3553,xe,O,Ee.width,Ee.height);else{let Se=Ee.width,ke=Ee.height;for(let _e=0;_e<xe;_e++)r.texImage2D(3553,_e,O,Se,ke,0,be,Xe,null),Se>>=1,ke>>=1}}else if(G.length>0&&qe){Z&&oe&&r.texStorage2D(3553,xe,O,G[0].width,G[0].height);for(let Se=0,ke=G.length;Se<ke;Se++)H=G[Se],Z?r.texSubImage2D(3553,Se,0,0,be,Xe,H):r.texImage2D(3553,Se,O,be,Xe,H);ee.generateMipmaps=!1}else Z?(oe&&r.texStorage2D(3553,xe,O,Ee.width,Ee.height),r.texSubImage2D(3553,0,0,0,be,Xe,Ee)):r.texImage2D(3553,0,O,be,Xe,Ee);T(ee,qe)&&L(De),Ce.__currentVersion=Ce.version,ee.onUpdate&&ee.onUpdate(ee)}ie.__version=ee.version}function B(ie,ee,Le){if(ee.image.length!==6)return;const De=we(ie,ee),Ze=ee.source;if(r.activeTexture(33984+Le),r.bindTexture(34067,ie.__webglTexture),Ze.version!==Ze.__currentVersion||De===!0){v.pixelStorei(37440,ee.flipY),v.pixelStorei(37441,ee.premultiplyAlpha),v.pixelStorei(3317,ee.unpackAlignment),v.pixelStorei(37443,0);const Ce=ee.isCompressedTexture||ee.image[0].isCompressedTexture,je=ee.image[0]&&ee.image[0].isDataTexture,Ee=[];for(let Se=0;Se<6;Se++)!Ce&&!je?Ee[Se]=_(ee.image[Se],!1,!0,h):Ee[Se]=je?ee.image[Se].image:ee.image[Se],Ee[Se]=Ie(ee,Ee[Se]);const qe=Ee[0],be=w(qe)||n,Xe=l.convert(ee.format,ee.encoding),O=l.convert(ee.type),H=A(ee.internalFormat,Xe,O,ee.encoding),G=n&&ee.isVideoTexture!==!0,Z=ie.__version===void 0;let oe=P(ee,qe,be);ae(34067,ee,be);let xe;if(Ce){G&&Z&&r.texStorage2D(34067,oe,H,qe.width,qe.height);for(let Se=0;Se<6;Se++){xe=Ee[Se].mipmaps;for(let ke=0;ke<xe.length;ke++){const _e=xe[ke];ee.format!==Dr?Xe!==null?G?r.compressedTexSubImage2D(34069+Se,ke,0,0,_e.width,_e.height,Xe,_e.data):r.compressedTexImage2D(34069+Se,ke,H,_e.width,_e.height,0,_e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):G?r.texSubImage2D(34069+Se,ke,0,0,_e.width,_e.height,Xe,O,_e.data):r.texImage2D(34069+Se,ke,H,_e.width,_e.height,0,Xe,O,_e.data)}}}else{xe=ee.mipmaps,G&&Z&&(xe.length>0&&oe++,r.texStorage2D(34067,oe,H,Ee[0].width,Ee[0].height));for(let Se=0;Se<6;Se++)if(je){G?r.texSubImage2D(34069+Se,0,0,0,Ee[Se].width,Ee[Se].height,Xe,O,Ee[Se].data):r.texImage2D(34069+Se,0,H,Ee[Se].width,Ee[Se].height,0,Xe,O,Ee[Se].data);for(let ke=0;ke<xe.length;ke++){const Ye=xe[ke].image[Se].image;G?r.texSubImage2D(34069+Se,ke+1,0,0,Ye.width,Ye.height,Xe,O,Ye.data):r.texImage2D(34069+Se,ke+1,H,Ye.width,Ye.height,0,Xe,O,Ye.data)}}else{G?r.texSubImage2D(34069+Se,0,0,0,Xe,O,Ee[Se]):r.texImage2D(34069+Se,0,H,Xe,O,Ee[Se]);for(let ke=0;ke<xe.length;ke++){const _e=xe[ke];G?r.texSubImage2D(34069+Se,ke+1,0,0,Xe,O,_e.image[Se]):r.texImage2D(34069+Se,ke+1,H,Xe,O,_e.image[Se])}}}T(ee,be)&&L(34067),Ze.__currentVersion=Ze.version,ee.onUpdate&&ee.onUpdate(ee)}ie.__version=ee.version}function V(ie,ee,Le,De,Ze){const Ce=l.convert(Le.format,Le.encoding),je=l.convert(Le.type),Ee=A(Le.internalFormat,Ce,je,Le.encoding);t.get(ee).__hasExternalTextures||(Ze===32879||Ze===35866?r.texImage3D(Ze,0,Ee,ee.width,ee.height,ee.depth,0,Ce,je,null):r.texImage2D(Ze,0,Ee,ee.width,ee.height,0,Ce,je,null)),r.bindFramebuffer(36160,ie),Ae(ee)?s.framebufferTexture2DMultisampleEXT(36160,De,Ze,t.get(Le).__webglTexture,0,he(ee)):v.framebufferTexture2D(36160,De,Ze,t.get(Le).__webglTexture,0),r.bindFramebuffer(36160,null)}function te(ie,ee,Le){if(v.bindRenderbuffer(36161,ie),ee.depthBuffer&&!ee.stencilBuffer){let De=33189;if(Le||Ae(ee)){const Ze=ee.depthTexture;Ze&&Ze.isDepthTexture&&(Ze.type===Dn?De=36012:Ze.type===wo&&(De=33190));const Ce=he(ee);Ae(ee)?s.renderbufferStorageMultisampleEXT(36161,Ce,De,ee.width,ee.height):v.renderbufferStorageMultisample(36161,Ce,De,ee.width,ee.height)}else v.renderbufferStorage(36161,De,ee.width,ee.height);v.framebufferRenderbuffer(36160,36096,36161,ie)}else if(ee.depthBuffer&&ee.stencilBuffer){const De=he(ee);Le&&Ae(ee)===!1?v.renderbufferStorageMultisample(36161,De,35056,ee.width,ee.height):Ae(ee)?s.renderbufferStorageMultisampleEXT(36161,De,35056,ee.width,ee.height):v.renderbufferStorage(36161,34041,ee.width,ee.height),v.framebufferRenderbuffer(36160,33306,36161,ie)}else{const De=ee.isWebGLMultipleRenderTargets===!0?ee.texture[0]:ee.texture,Ze=l.convert(De.format,De.encoding),Ce=l.convert(De.type),je=A(De.internalFormat,Ze,Ce,De.encoding),Ee=he(ee);Le&&Ae(ee)===!1?v.renderbufferStorageMultisample(36161,Ee,je,ee.width,ee.height):Ae(ee)?s.renderbufferStorageMultisampleEXT(36161,Ee,je,ee.width,ee.height):v.renderbufferStorage(36161,je,ee.width,ee.height)}v.bindRenderbuffer(36161,null)}function $(ie,ee){if(ee&&ee.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,ie),!(ee.depthTexture&&ee.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!t.get(ee.depthTexture).__webglTexture||ee.depthTexture.image.width!==ee.width||ee.depthTexture.image.height!==ee.height)&&(ee.depthTexture.image.width=ee.width,ee.depthTexture.image.height=ee.height,ee.depthTexture.needsUpdate=!0),Y(ee.depthTexture,0);const De=t.get(ee.depthTexture).__webglTexture,Ze=he(ee);if(ee.depthTexture.format===Jn)Ae(ee)?s.framebufferTexture2DMultisampleEXT(36160,36096,3553,De,0,Ze):v.framebufferTexture2D(36160,36096,3553,De,0);else if(ee.depthTexture.format===Vi)Ae(ee)?s.framebufferTexture2DMultisampleEXT(36160,33306,3553,De,0,Ze):v.framebufferTexture2D(36160,33306,3553,De,0);else throw new Error("Unknown depthTexture format")}function X(ie){const ee=t.get(ie),Le=ie.isWebGLCubeRenderTarget===!0;if(ie.depthTexture&&!ee.__autoAllocateDepthBuffer){if(Le)throw new Error("target.depthTexture not supported in Cube render targets");$(ee.__webglFramebuffer,ie)}else if(Le){ee.__webglDepthbuffer=[];for(let De=0;De<6;De++)r.bindFramebuffer(36160,ee.__webglFramebuffer[De]),ee.__webglDepthbuffer[De]=v.createRenderbuffer(),te(ee.__webglDepthbuffer[De],ie,!1)}else r.bindFramebuffer(36160,ee.__webglFramebuffer),ee.__webglDepthbuffer=v.createRenderbuffer(),te(ee.__webglDepthbuffer,ie,!1);r.bindFramebuffer(36160,null)}function ye(ie,ee,Le){const De=t.get(ie);ee!==void 0&&V(De.__webglFramebuffer,ie,ie.texture,36064,3553),Le!==void 0&&X(ie)}function ne(ie){const ee=ie.texture,Le=t.get(ie),De=t.get(ee);ie.addEventListener("dispose",F),ie.isWebGLMultipleRenderTargets!==!0&&(De.__webglTexture===void 0&&(De.__webglTexture=v.createTexture()),De.__version=ee.version,c.memory.textures++);const Ze=ie.isWebGLCubeRenderTarget===!0,Ce=ie.isWebGLMultipleRenderTargets===!0,je=w(ie)||n;if(Ze){Le.__webglFramebuffer=[];for(let Ee=0;Ee<6;Ee++)Le.__webglFramebuffer[Ee]=v.createFramebuffer()}else if(Le.__webglFramebuffer=v.createFramebuffer(),Ce)if(a.drawBuffers){const Ee=ie.texture;for(let qe=0,be=Ee.length;qe<be;qe++){const Xe=t.get(Ee[qe]);Xe.__webglTexture===void 0&&(Xe.__webglTexture=v.createTexture(),c.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(n&&ie.samples>0&&Ae(ie)===!1){Le.__webglMultisampledFramebuffer=v.createFramebuffer(),Le.__webglColorRenderbuffer=v.createRenderbuffer(),v.bindRenderbuffer(36161,Le.__webglColorRenderbuffer);const Ee=l.convert(ee.format,ee.encoding),qe=l.convert(ee.type),be=A(ee.internalFormat,Ee,qe,ee.encoding),Xe=he(ie);v.renderbufferStorageMultisample(36161,Xe,be,ie.width,ie.height),r.bindFramebuffer(36160,Le.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(36160,36064,36161,Le.__webglColorRenderbuffer),v.bindRenderbuffer(36161,null),ie.depthBuffer&&(Le.__webglDepthRenderbuffer=v.createRenderbuffer(),te(Le.__webglDepthRenderbuffer,ie,!0)),r.bindFramebuffer(36160,null)}if(Ze){r.bindTexture(34067,De.__webglTexture),ae(34067,ee,je);for(let Ee=0;Ee<6;Ee++)V(Le.__webglFramebuffer[Ee],ie,ee,36064,34069+Ee);T(ee,je)&&L(34067),r.unbindTexture()}else if(Ce){const Ee=ie.texture;for(let qe=0,be=Ee.length;qe<be;qe++){const Xe=Ee[qe],O=t.get(Xe);r.bindTexture(3553,O.__webglTexture),ae(3553,Xe,je),V(Le.__webglFramebuffer,ie,Xe,36064+qe,3553),T(Xe,je)&&L(3553)}r.unbindTexture()}else{let Ee=3553;(ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(n?Ee=ie.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(Ee,De.__webglTexture),ae(Ee,ee,je),V(Le.__webglFramebuffer,ie,ee,36064,Ee),T(ee,je)&&L(Ee),r.unbindTexture()}ie.depthBuffer&&X(ie)}function pe(ie){const ee=w(ie)||n,Le=ie.isWebGLMultipleRenderTargets===!0?ie.texture:[ie.texture];for(let De=0,Ze=Le.length;De<Ze;De++){const Ce=Le[De];if(T(Ce,ee)){const je=ie.isWebGLCubeRenderTarget?34067:3553,Ee=t.get(Ce).__webglTexture;r.bindTexture(je,Ee),L(je),r.unbindTexture()}}}function ve(ie){if(n&&ie.samples>0&&Ae(ie)===!1){const ee=ie.width,Le=ie.height;let De=16384;const Ze=[36064],Ce=ie.stencilBuffer?33306:36096;ie.depthBuffer&&Ze.push(Ce);const je=t.get(ie),Ee=je.__ignoreDepthValues!==void 0?je.__ignoreDepthValues:!1;Ee===!1&&(ie.depthBuffer&&(De|=256),ie.stencilBuffer&&(De|=1024)),r.bindFramebuffer(36008,je.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,je.__webglFramebuffer),Ee===!0&&(v.invalidateFramebuffer(36008,[Ce]),v.invalidateFramebuffer(36009,[Ce])),v.blitFramebuffer(0,0,ee,Le,0,0,ee,Le,De,9728),i&&v.invalidateFramebuffer(36008,Ze),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,je.__webglMultisampledFramebuffer)}}function he(ie){return Math.min(p,ie.samples)}function Ae(ie){const ee=t.get(ie);return n&&ie.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ee.__useRenderToTexture!==!1}function Oe(ie){const ee=c.render.frame;o.get(ie)!==ee&&(o.set(ie,ee),ie.update())}function Ie(ie,ee){const Le=ie.encoding,De=ie.format,Ze=ie.type;return ie.isCompressedTexture===!0||ie.isVideoTexture===!0||ie.format===Va||Le!==Fn&&(Le===kt?n===!1?e.has("EXT_sRGB")===!0&&De===Dr?(ie.format=Va,ie.minFilter=vr,ie.generateMipmaps=!1):ee=si.sRGBToLinear(ee):(De!==Dr||Ze!==ei)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Le)),ee}this.allocateTextureUnit=W,this.resetTextureUnits=Q,this.setTexture2D=Y,this.setTexture2DArray=se,this.setTexture3D=ue,this.setTextureCube=ge,this.rebindTextures=ye,this.setupRenderTarget=ne,this.updateRenderTargetMipmap=pe,this.updateMultisampleRenderTarget=ve,this.setupDepthRenderbuffer=X,this.setupFrameBufferTexture=V,this.useMultisampledRTT=Ae}function D0(v,e,r){const t=r.isWebGL2;function a(l,c=null){let n;if(l===ei)return 5121;if(l===hf)return 32819;if(l===df)return 32820;if(l===lf)return 5120;if(l===uf)return 5122;if(l===xs)return 5123;if(l===cf)return 5124;if(l===wo)return 5125;if(l===Dn)return 5126;if(l===ws)return t?5131:(n=e.get("OES_texture_half_float"),n!==null?n.HALF_FLOAT_OES:null);if(l===ff)return 6406;if(l===Dr)return 6408;if(l===mf)return 6409;if(l===gf)return 6410;if(l===Jn)return 6402;if(l===Vi)return 34041;if(l===yf)return 6403;if(l===pf)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(l===Va)return n=e.get("EXT_sRGB"),n!==null?n.SRGB_ALPHA_EXT:null;if(l===vf)return 36244;if(l===bf)return 33319;if(l===_f)return 33320;if(l===xf)return 36249;if(l===Qo||l===$o||l===ea||l===ta)if(c===kt)if(n=e.get("WEBGL_compressed_texture_s3tc_srgb"),n!==null){if(l===Qo)return n.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(l===$o)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(l===ea)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(l===ta)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(n=e.get("WEBGL_compressed_texture_s3tc"),n!==null){if(l===Qo)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===$o)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===ea)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===ta)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(l===_u||l===xu||l===wu||l===Su)if(n=e.get("WEBGL_compressed_texture_pvrtc"),n!==null){if(l===_u)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===xu)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===wu)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===Su)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(l===wf)return n=e.get("WEBGL_compressed_texture_etc1"),n!==null?n.COMPRESSED_RGB_ETC1_WEBGL:null;if(l===Mu||l===Tu)if(n=e.get("WEBGL_compressed_texture_etc"),n!==null){if(l===Mu)return c===kt?n.COMPRESSED_SRGB8_ETC2:n.COMPRESSED_RGB8_ETC2;if(l===Tu)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:n.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(l===Eu||l===Au||l===Lu||l===Cu||l===Ru||l===Pu||l===Du||l===Iu||l===ju||l===Ou||l===ku||l===Nu||l===Fu||l===Uu)if(n=e.get("WEBGL_compressed_texture_astc"),n!==null){if(l===Eu)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:n.COMPRESSED_RGBA_ASTC_4x4_KHR;if(l===Au)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:n.COMPRESSED_RGBA_ASTC_5x4_KHR;if(l===Lu)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:n.COMPRESSED_RGBA_ASTC_5x5_KHR;if(l===Cu)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:n.COMPRESSED_RGBA_ASTC_6x5_KHR;if(l===Ru)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:n.COMPRESSED_RGBA_ASTC_6x6_KHR;if(l===Pu)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:n.COMPRESSED_RGBA_ASTC_8x5_KHR;if(l===Du)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:n.COMPRESSED_RGBA_ASTC_8x6_KHR;if(l===Iu)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:n.COMPRESSED_RGBA_ASTC_8x8_KHR;if(l===ju)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:n.COMPRESSED_RGBA_ASTC_10x5_KHR;if(l===Ou)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:n.COMPRESSED_RGBA_ASTC_10x6_KHR;if(l===ku)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:n.COMPRESSED_RGBA_ASTC_10x8_KHR;if(l===Nu)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:n.COMPRESSED_RGBA_ASTC_10x10_KHR;if(l===Fu)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:n.COMPRESSED_RGBA_ASTC_12x10_KHR;if(l===Uu)return c===kt?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:n.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(l===Bu)if(n=e.get("EXT_texture_compression_bptc"),n!==null){if(l===Bu)return c===kt?n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:n.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return l===Fi?t?34042:(n=e.get("WEBGL_depth_texture"),n!==null?n.UNSIGNED_INT_24_8_WEBGL:null):v[l]!==void 0?v[l]:null}return{convert:a}}class Th extends br{constructor(e=[]){super(),this.cameras=e}}Th.prototype.isArrayCamera=!0;class In extends Bt{constructor(){super(),this.type="Group"}}In.prototype.isGroup=!0;const I0={type:"move"};class Ca{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new In,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new In,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Me,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Me),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new In,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Me,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Me),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,r,t){let a=null,l=null,c=null;const n=this._targetRay,f=this._grip,h=this._hand;if(e&&r.session.visibilityState!=="visible-blurred")if(n!==null&&(a=r.getPose(e.targetRaySpace,t),a!==null&&(n.matrix.fromArray(a.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),a.linearVelocity?(n.hasLinearVelocity=!0,n.linearVelocity.copy(a.linearVelocity)):n.hasLinearVelocity=!1,a.angularVelocity?(n.hasAngularVelocity=!0,n.angularVelocity.copy(a.angularVelocity)):n.hasAngularVelocity=!1,this.dispatchEvent(I0))),h&&e.hand){c=!0;for(const d of e.hand.values()){const u=r.getJointPose(d,t);if(h.joints[d.jointName]===void 0){const b=new In;b.matrixAutoUpdate=!1,b.visible=!1,h.joints[d.jointName]=b,h.add(b)}const g=h.joints[d.jointName];u!==null&&(g.matrix.fromArray(u.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=u.radius),g.visible=u!==null}const m=h.joints["index-finger-tip"],p=h.joints["thumb-tip"],s=m.position.distanceTo(p.position),i=.02,o=.005;h.inputState.pinching&&s>i+o?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&s<=i-o&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(l=r.getPose(e.gripSpace,t),l!==null&&(f.matrix.fromArray(l.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),l.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(l.linearVelocity)):f.hasLinearVelocity=!1,l.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(l.angularVelocity)):f.hasAngularVelocity=!1));return n!==null&&(n.visible=a!==null),f!==null&&(f.visible=l!==null),h!==null&&(h.visible=c!==null),this}}class Eh extends ar{constructor(e,r,t,a,l,c,n,f,h,m){if(m=m!==void 0?m:Jn,m!==Jn&&m!==Vi)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&m===Jn&&(t=xs),t===void 0&&m===Vi&&(t=Fi),super(null,a,l,c,n,f,m,t,h),this.image={width:e,height:r},this.magFilter=n!==void 0?n:ur,this.minFilter=f!==void 0?f:ur,this.flipY=!1,this.generateMipmaps=!1}}Eh.prototype.isDepthTexture=!0;class j0 extends ii{constructor(e,r){super();const t=this;let a=null,l=1,c=null,n="local-floor",f=null,h=null,m=null,p=null,s=null,i=null;const o=r.getContextAttributes();let d=null,u=null;const g=[],b=new Map,_=new br;_.layers.enable(1),_.viewport=new Vt;const w=new br;w.layers.enable(2),w.viewport=new Vt;const S=[_,w],T=new Th;T.layers.enable(1),T.layers.enable(2);let L=null,A=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let Y=g[K];return Y===void 0&&(Y=new Ca,g[K]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(K){let Y=g[K];return Y===void 0&&(Y=new Ca,g[K]=Y),Y.getGripSpace()},this.getHand=function(K){let Y=g[K];return Y===void 0&&(Y=new Ca,g[K]=Y),Y.getHandSpace()};function P(K){const Y=b.get(K.inputSource);Y&&Y.dispatchEvent({type:K.type,data:K.inputSource})}function R(){b.forEach(function(K,Y){K.disconnect(Y)}),b.clear(),L=null,A=null,e.setRenderTarget(d),s=null,p=null,m=null,a=null,u=null,W.stop(),t.isPresenting=!1,t.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){l=K,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){n=K,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||c},this.setReferenceSpace=function(K){f=K},this.getBaseLayer=function(){return p!==null?p:s},this.getBinding=function(){return m},this.getFrame=function(){return i},this.getSession=function(){return a},this.setSession=async function(K){if(a=K,a!==null){if(d=e.getRenderTarget(),a.addEventListener("select",P),a.addEventListener("selectstart",P),a.addEventListener("selectend",P),a.addEventListener("squeeze",P),a.addEventListener("squeezestart",P),a.addEventListener("squeezeend",P),a.addEventListener("end",R),a.addEventListener("inputsourceschange",D),o.xrCompatible!==!0&&await r.makeXRCompatible(),a.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Y={antialias:a.renderState.layers===void 0?o.antialias:!0,alpha:o.alpha,depth:o.depth,stencil:o.stencil,framebufferScaleFactor:l};s=new XRWebGLLayer(a,r,Y),a.updateRenderState({baseLayer:s}),u=new Lr(s.framebufferWidth,s.framebufferHeight,{format:Dr,type:ei,encoding:e.outputEncoding})}else{let Y=null,se=null,ue=null;o.depth&&(ue=o.stencil?35056:33190,Y=o.stencil?Vi:Jn,se=o.stencil?Fi:xs);const ge={colorFormat:e.outputEncoding===kt?35907:32856,depthFormat:ue,scaleFactor:l};m=new XRWebGLBinding(a,r),p=m.createProjectionLayer(ge),a.updateRenderState({layers:[p]}),u=new Lr(p.textureWidth,p.textureHeight,{format:Dr,type:ei,depthTexture:new Eh(p.textureWidth,p.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,Y),stencilBuffer:o.stencil,encoding:e.outputEncoding,samples:o.antialias?4:0});const de=e.properties.get(u);de.__ignoreDepthValues=p.ignoreDepthValues}u.isXRRenderTarget=!0,this.setFoveation(1),c=await a.requestReferenceSpace(n),W.setContext(a),W.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}};function D(K){const Y=a.inputSources;for(let se=0;se<Y.length;se++){const ue=Y[se].handedness==="right"?1:0;b.set(Y[se],g[ue])}for(let se=0;se<K.removed.length;se++){const ue=K.removed[se],ge=b.get(ue);ge&&(ge.dispatchEvent({type:"disconnected",data:ue}),b.delete(ue))}for(let se=0;se<K.added.length;se++){const ue=K.added[se],ge=b.get(ue);ge&&ge.dispatchEvent({type:"connected",data:ue})}}const F=new Me,I=new Me;function k(K,Y,se){F.setFromMatrixPosition(Y.matrixWorld),I.setFromMatrixPosition(se.matrixWorld);const ue=F.distanceTo(I),ge=Y.projectionMatrix.elements,de=se.projectionMatrix.elements,Pe=ge[14]/(ge[10]-1),ae=ge[14]/(ge[10]+1),we=(ge[9]+1)/ge[5],j=(ge[9]-1)/ge[5],B=(ge[8]-1)/ge[0],V=(de[8]+1)/de[0],te=Pe*B,$=Pe*V,X=ue/(-B+V),ye=X*-B;Y.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(ye),K.translateZ(X),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert();const ne=Pe+X,pe=ae+X,ve=te-ye,he=$+(ue-ye),Ae=we*ae/pe*ne,Oe=j*ae/pe*ne;K.projectionMatrix.makePerspective(ve,he,Ae,Oe,ne,pe)}function U(K,Y){Y===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(Y.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(a===null)return;T.near=w.near=_.near=K.near,T.far=w.far=_.far=K.far,(L!==T.near||A!==T.far)&&(a.updateRenderState({depthNear:T.near,depthFar:T.far}),L=T.near,A=T.far);const Y=K.parent,se=T.cameras;U(T,Y);for(let ge=0;ge<se.length;ge++)U(se[ge],Y);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),K.position.copy(T.position),K.quaternion.copy(T.quaternion),K.scale.copy(T.scale),K.matrix.copy(T.matrix),K.matrixWorld.copy(T.matrixWorld);const ue=K.children;for(let ge=0,de=ue.length;ge<de;ge++)ue[ge].updateMatrixWorld(!0);se.length===2?k(T,_,w):T.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){if(p!==null)return p.fixedFoveation;if(s!==null)return s.fixedFoveation},this.setFoveation=function(K){p!==null&&(p.fixedFoveation=K),s!==null&&s.fixedFoveation!==void 0&&(s.fixedFoveation=K)};let q=null;function Q(K,Y){if(h=Y.getViewerPose(f||c),i=Y,h!==null){const ue=h.views;s!==null&&(e.setRenderTargetFramebuffer(u,s.framebuffer),e.setRenderTarget(u));let ge=!1;ue.length!==T.cameras.length&&(T.cameras.length=0,ge=!0);for(let de=0;de<ue.length;de++){const Pe=ue[de];let ae=null;if(s!==null)ae=s.getViewport(Pe);else{const j=m.getViewSubImage(p,Pe);ae=j.viewport,de===0&&(e.setRenderTargetTextures(u,j.colorTexture,p.ignoreDepthValues?void 0:j.depthStencilTexture),e.setRenderTarget(u))}const we=S[de];we.matrix.fromArray(Pe.transform.matrix),we.projectionMatrix.fromArray(Pe.projectionMatrix),we.viewport.set(ae.x,ae.y,ae.width,ae.height),de===0&&T.matrix.copy(we.matrix),ge===!0&&T.cameras.push(we)}}const se=a.inputSources;for(let ue=0;ue<g.length;ue++){const ge=se[ue],de=b.get(ge);de!==void 0&&de.update(ge,Y,f||c)}q&&q(K,Y),i=null}const W=new yh;W.setAnimationLoop(Q),this.setAnimationLoop=function(K){q=K},this.dispose=function(){}}}function O0(v,e){function r(d,u){d.fogColor.value.copy(u.color),u.isFog?(d.fogNear.value=u.near,d.fogFar.value=u.far):u.isFogExp2&&(d.fogDensity.value=u.density)}function t(d,u,g,b,_){u.isMeshBasicMaterial||u.isMeshLambertMaterial?a(d,u):u.isMeshToonMaterial?(a(d,u),m(d,u)):u.isMeshPhongMaterial?(a(d,u),h(d,u)):u.isMeshStandardMaterial?(a(d,u),p(d,u),u.isMeshPhysicalMaterial&&s(d,u,_)):u.isMeshMatcapMaterial?(a(d,u),i(d,u)):u.isMeshDepthMaterial?a(d,u):u.isMeshDistanceMaterial?(a(d,u),o(d,u)):u.isMeshNormalMaterial?a(d,u):u.isLineBasicMaterial?(l(d,u),u.isLineDashedMaterial&&c(d,u)):u.isPointsMaterial?n(d,u,g,b):u.isSpriteMaterial?f(d,u):u.isShadowMaterial?(d.color.value.copy(u.color),d.opacity.value=u.opacity):u.isShaderMaterial&&(u.uniformsNeedUpdate=!1)}function a(d,u){d.opacity.value=u.opacity,u.color&&d.diffuse.value.copy(u.color),u.emissive&&d.emissive.value.copy(u.emissive).multiplyScalar(u.emissiveIntensity),u.map&&(d.map.value=u.map),u.alphaMap&&(d.alphaMap.value=u.alphaMap),u.bumpMap&&(d.bumpMap.value=u.bumpMap,d.bumpScale.value=u.bumpScale,u.side===qr&&(d.bumpScale.value*=-1)),u.displacementMap&&(d.displacementMap.value=u.displacementMap,d.displacementScale.value=u.displacementScale,d.displacementBias.value=u.displacementBias),u.emissiveMap&&(d.emissiveMap.value=u.emissiveMap),u.normalMap&&(d.normalMap.value=u.normalMap,d.normalScale.value.copy(u.normalScale),u.side===qr&&d.normalScale.value.negate()),u.specularMap&&(d.specularMap.value=u.specularMap),u.alphaTest>0&&(d.alphaTest.value=u.alphaTest);const g=e.get(u).envMap;if(g&&(d.envMap.value=g,d.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,d.reflectivity.value=u.reflectivity,d.ior.value=u.ior,d.refractionRatio.value=u.refractionRatio),u.lightMap){d.lightMap.value=u.lightMap;const w=v.physicallyCorrectLights!==!0?Math.PI:1;d.lightMapIntensity.value=u.lightMapIntensity*w}u.aoMap&&(d.aoMap.value=u.aoMap,d.aoMapIntensity.value=u.aoMapIntensity);let b;u.map?b=u.map:u.specularMap?b=u.specularMap:u.displacementMap?b=u.displacementMap:u.normalMap?b=u.normalMap:u.bumpMap?b=u.bumpMap:u.roughnessMap?b=u.roughnessMap:u.metalnessMap?b=u.metalnessMap:u.alphaMap?b=u.alphaMap:u.emissiveMap?b=u.emissiveMap:u.clearcoatMap?b=u.clearcoatMap:u.clearcoatNormalMap?b=u.clearcoatNormalMap:u.clearcoatRoughnessMap?b=u.clearcoatRoughnessMap:u.specularIntensityMap?b=u.specularIntensityMap:u.specularColorMap?b=u.specularColorMap:u.transmissionMap?b=u.transmissionMap:u.thicknessMap?b=u.thicknessMap:u.sheenColorMap?b=u.sheenColorMap:u.sheenRoughnessMap&&(b=u.sheenRoughnessMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),d.uvTransform.value.copy(b.matrix));let _;u.aoMap?_=u.aoMap:u.lightMap&&(_=u.lightMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),d.uv2Transform.value.copy(_.matrix))}function l(d,u){d.diffuse.value.copy(u.color),d.opacity.value=u.opacity}function c(d,u){d.dashSize.value=u.dashSize,d.totalSize.value=u.dashSize+u.gapSize,d.scale.value=u.scale}function n(d,u,g,b){d.diffuse.value.copy(u.color),d.opacity.value=u.opacity,d.size.value=u.size*g,d.scale.value=b*.5,u.map&&(d.map.value=u.map),u.alphaMap&&(d.alphaMap.value=u.alphaMap),u.alphaTest>0&&(d.alphaTest.value=u.alphaTest);let _;u.map?_=u.map:u.alphaMap&&(_=u.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),d.uvTransform.value.copy(_.matrix))}function f(d,u){d.diffuse.value.copy(u.color),d.opacity.value=u.opacity,d.rotation.value=u.rotation,u.map&&(d.map.value=u.map),u.alphaMap&&(d.alphaMap.value=u.alphaMap),u.alphaTest>0&&(d.alphaTest.value=u.alphaTest);let g;u.map?g=u.map:u.alphaMap&&(g=u.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),d.uvTransform.value.copy(g.matrix))}function h(d,u){d.specular.value.copy(u.specular),d.shininess.value=Math.max(u.shininess,1e-4)}function m(d,u){u.gradientMap&&(d.gradientMap.value=u.gradientMap)}function p(d,u){d.roughness.value=u.roughness,d.metalness.value=u.metalness,u.roughnessMap&&(d.roughnessMap.value=u.roughnessMap),u.metalnessMap&&(d.metalnessMap.value=u.metalnessMap),e.get(u).envMap&&(d.envMapIntensity.value=u.envMapIntensity)}function s(d,u,g){d.ior.value=u.ior,u.sheen>0&&(d.sheenColor.value.copy(u.sheenColor).multiplyScalar(u.sheen),d.sheenRoughness.value=u.sheenRoughness,u.sheenColorMap&&(d.sheenColorMap.value=u.sheenColorMap),u.sheenRoughnessMap&&(d.sheenRoughnessMap.value=u.sheenRoughnessMap)),u.clearcoat>0&&(d.clearcoat.value=u.clearcoat,d.clearcoatRoughness.value=u.clearcoatRoughness,u.clearcoatMap&&(d.clearcoatMap.value=u.clearcoatMap),u.clearcoatRoughnessMap&&(d.clearcoatRoughnessMap.value=u.clearcoatRoughnessMap),u.clearcoatNormalMap&&(d.clearcoatNormalScale.value.copy(u.clearcoatNormalScale),d.clearcoatNormalMap.value=u.clearcoatNormalMap,u.side===qr&&d.clearcoatNormalScale.value.negate())),u.transmission>0&&(d.transmission.value=u.transmission,d.transmissionSamplerMap.value=g.texture,d.transmissionSamplerSize.value.set(g.width,g.height),u.transmissionMap&&(d.transmissionMap.value=u.transmissionMap),d.thickness.value=u.thickness,u.thicknessMap&&(d.thicknessMap.value=u.thicknessMap),d.attenuationDistance.value=u.attenuationDistance,d.attenuationColor.value.copy(u.attenuationColor)),d.specularIntensity.value=u.specularIntensity,d.specularColor.value.copy(u.specularColor),u.specularIntensityMap&&(d.specularIntensityMap.value=u.specularIntensityMap),u.specularColorMap&&(d.specularColorMap.value=u.specularColorMap)}function i(d,u){u.matcap&&(d.matcap.value=u.matcap)}function o(d,u){d.referencePosition.value.copy(u.referencePosition),d.nearDistance.value=u.nearDistance,d.farDistance.value=u.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:t}}function k0(){const v=Es("canvas");return v.style.display="block",v}function zt(v={}){const e=v.canvas!==void 0?v.canvas:k0(),r=v.context!==void 0?v.context:null,t=v.depth!==void 0?v.depth:!0,a=v.stencil!==void 0?v.stencil:!0,l=v.antialias!==void 0?v.antialias:!1,c=v.premultipliedAlpha!==void 0?v.premultipliedAlpha:!0,n=v.preserveDrawingBuffer!==void 0?v.preserveDrawingBuffer:!1,f=v.powerPreference!==void 0?v.powerPreference:"default",h=v.failIfMajorPerformanceCaveat!==void 0?v.failIfMajorPerformanceCaveat:!1;let m;r!==null?m=r.getContextAttributes().alpha:m=v.alpha!==void 0?v.alpha:!1;let p=null,s=null;const i=[],o=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Fn,this.physicallyCorrectLights=!1,this.toneMapping=yn,this.toneMappingExposure=1;const d=this;let u=!1,g=0,b=0,_=null,w=-1,S=null;const T=new Vt,L=new Vt;let A=null,P=e.width,R=e.height,D=1,F=null,I=null;const k=new Vt(0,0,P,R),U=new Vt(0,0,P,R);let q=!1;const Q=new Do;let W=!1,K=!1,Y=null;const se=new pt,ue=new tt,ge=new Me,de={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Pe(){return _===null?D:1}let ae=r;function we(me,Ue){for(let ze=0;ze<me.length;ze++){const Be=me[ze],Je=e.getContext(Be,Ue);if(Je!==null)return Je}return null}try{const me={alpha:!0,depth:t,stencil:a,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:n,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${tl}`),e.addEventListener("webglcontextlost",O,!1),e.addEventListener("webglcontextrestored",H,!1),ae===null){const Ue=["webgl2","webgl","experimental-webgl"];if(d.isWebGL1Renderer===!0&&Ue.shift(),ae=we(Ue,me),ae===null)throw we(Ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ae.getShaderPrecisionFormat===void 0&&(ae.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(me){throw console.error("THREE.WebGLRenderer: "+me.message),me}let j,B,V,te,$,X,ye,ne,pe,ve,he,Ae,Oe,Ie,ie,ee,Le,De,Ze,Ce,je,Ee,qe;function be(){j=new Jg(ae),B=new Wg(ae,j,v),j.init(B),Ee=new D0(ae,j,B),V=new R0(ae,j,B),te=new ey(ae),$=new b0,X=new P0(ae,j,V,$,B,Ee,te),ye=new Xg(d),ne=new Kg(d),pe=new pp(ae,B),qe=new Vg(ae,j,pe,B),ve=new Qg(ae,pe,te,qe),he=new iy(ae,ve,pe,te),Ze=new ny(ae,B,X),ee=new qg($),Ae=new v0(d,ye,ne,j,B,qe,ee),Oe=new O0(d,$),Ie=new x0,ie=new A0(j,B),De=new zg(d,ye,V,he,m,c),Le=new Mh(d,he,B),Ce=new Hg(ae,j,te,B),je=new $g(ae,j,te,B),te.programs=Ae.programs,d.capabilities=B,d.extensions=j,d.properties=$,d.renderLists=Ie,d.shadowMap=Le,d.state=V,d.info=te}be();const Xe=new j0(d,ae);this.xr=Xe,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const me=j.get("WEBGL_lose_context");me&&me.loseContext()},this.forceContextRestore=function(){const me=j.get("WEBGL_lose_context");me&&me.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(me){me!==void 0&&(D=me,this.setSize(P,R,!1))},this.getSize=function(me){return me.set(P,R)},this.setSize=function(me,Ue,ze){if(Xe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}P=me,R=Ue,e.width=Math.floor(me*D),e.height=Math.floor(Ue*D),ze!==!1&&(e.style.width=me+"px",e.style.height=Ue+"px"),this.setViewport(0,0,me,Ue)},this.getDrawingBufferSize=function(me){return me.set(P*D,R*D).floor()},this.setDrawingBufferSize=function(me,Ue,ze){P=me,R=Ue,D=ze,e.width=Math.floor(me*ze),e.height=Math.floor(Ue*ze),this.setViewport(0,0,me,Ue)},this.getCurrentViewport=function(me){return me.copy(T)},this.getViewport=function(me){return me.copy(k)},this.setViewport=function(me,Ue,ze,Be){me.isVector4?k.set(me.x,me.y,me.z,me.w):k.set(me,Ue,ze,Be),V.viewport(T.copy(k).multiplyScalar(D).floor())},this.getScissor=function(me){return me.copy(U)},this.setScissor=function(me,Ue,ze,Be){me.isVector4?U.set(me.x,me.y,me.z,me.w):U.set(me,Ue,ze,Be),V.scissor(L.copy(U).multiplyScalar(D).floor())},this.getScissorTest=function(){return q},this.setScissorTest=function(me){V.setScissorTest(q=me)},this.setOpaqueSort=function(me){F=me},this.setTransparentSort=function(me){I=me},this.getClearColor=function(me){return me.copy(De.getClearColor())},this.setClearColor=function(){De.setClearColor.apply(De,arguments)},this.getClearAlpha=function(){return De.getClearAlpha()},this.setClearAlpha=function(){De.setClearAlpha.apply(De,arguments)},this.clear=function(me=!0,Ue=!0,ze=!0){let Be=0;me&&(Be|=16384),Ue&&(Be|=256),ze&&(Be|=1024),ae.clear(Be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",O,!1),e.removeEventListener("webglcontextrestored",H,!1),Ie.dispose(),ie.dispose(),$.dispose(),ye.dispose(),ne.dispose(),he.dispose(),qe.dispose(),Ae.dispose(),Xe.dispose(),Xe.removeEventListener("sessionstart",ke),Xe.removeEventListener("sessionend",_e),Y&&(Y.dispose(),Y=null),Ye.stop()};function O(me){me.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),u=!0}function H(){console.log("THREE.WebGLRenderer: Context Restored."),u=!1;const me=te.autoReset,Ue=Le.enabled,ze=Le.autoUpdate,Be=Le.needsUpdate,Je=Le.type;be(),te.autoReset=me,Le.enabled=Ue,Le.autoUpdate=ze,Le.needsUpdate=Be,Le.type=Je}function G(me){const Ue=me.target;Ue.removeEventListener("dispose",G),Z(Ue)}function Z(me){oe(me),$.remove(me)}function oe(me){const Ue=$.get(me).programs;Ue!==void 0&&(Ue.forEach(function(ze){Ae.releaseProgram(ze)}),me.isShaderMaterial&&Ae.releaseShaderCache(me))}this.renderBufferDirect=function(me,Ue,ze,Be,Je,yt){Ue===null&&(Ue=de);const bt=Je.isMesh&&Je.matrixWorld.determinant()<0,xt=dr(me,Ue,ze,Be,Je);V.setMaterial(Be,bt);let _t=ze.index;const ce=ze.attributes.position;if(_t===null){if(ce===void 0||ce.count===0)return}else if(_t.count===0)return;let Fe=1;Be.wireframe===!0&&(_t=ve.getWireframeAttribute(ze),Fe=2),qe.setup(Je,Be,xt,ze,_t);let Ke,He=Ce;_t!==null&&(Ke=pe.get(_t),He=je,He.setIndex(Ke));const rt=_t!==null?_t.count:ce.count,Ve=ze.drawRange.start*Fe,Mt=ze.drawRange.count*Fe,St=yt!==null?yt.start*Fe:0,ht=yt!==null?yt.count*Fe:1/0,wt=Math.max(Ve,St),$e=Math.min(rt,Ve+Mt,St+ht)-1,Ct=Math.max(0,$e-wt+1);if(Ct!==0){if(Je.isMesh)Be.wireframe===!0?(V.setLineWidth(Be.wireframeLinewidth*Pe()),He.setMode(1)):He.setMode(4);else if(Je.isLine){let ut=Be.linewidth;ut===void 0&&(ut=1),V.setLineWidth(ut*Pe()),Je.isLineSegments?He.setMode(1):Je.isLineLoop?He.setMode(2):He.setMode(3)}else Je.isPoints?He.setMode(0):Je.isSprite&&He.setMode(4);if(Je.isInstancedMesh)He.renderInstances(wt,Ct,Je.count);else if(ze.isInstancedBufferGeometry){const ut=Math.min(ze.instanceCount,ze._maxInstanceCount);He.renderInstances(wt,Ct,ut)}else He.render(wt,Ct)}},this.compile=function(me,Ue){s=ie.get(me),s.init(),o.push(s),me.traverseVisible(function(ze){ze.isLight&&ze.layers.test(Ue.layers)&&(s.pushLight(ze),ze.castShadow&&s.pushShadow(ze))}),s.setupLights(d.physicallyCorrectLights),me.traverse(function(ze){const Be=ze.material;if(Be)if(Array.isArray(Be))for(let Je=0;Je<Be.length;Je++){const yt=Be[Je];Tt(yt,me,ze)}else Tt(Be,me,ze)}),o.pop(),s=null};let xe=null;function Se(me){xe&&xe(me)}function ke(){Ye.stop()}function _e(){Ye.start()}const Ye=new yh;Ye.setAnimationLoop(Se),typeof self!="undefined"&&Ye.setContext(self),this.setAnimationLoop=function(me){xe=me,Xe.setAnimationLoop(me),me===null?Ye.stop():Ye.start()},Xe.addEventListener("sessionstart",ke),Xe.addEventListener("sessionend",_e),this.render=function(me,Ue){if(Ue!==void 0&&Ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(u===!0)return;me.autoUpdate===!0&&me.updateMatrixWorld(),Ue.parent===null&&Ue.updateMatrixWorld(),Xe.enabled===!0&&Xe.isPresenting===!0&&(Xe.cameraAutoUpdate===!0&&Xe.updateCamera(Ue),Ue=Xe.getCamera()),me.isScene===!0&&me.onBeforeRender(d,me,Ue,_),s=ie.get(me,o.length),s.init(),o.push(s),se.multiplyMatrices(Ue.projectionMatrix,Ue.matrixWorldInverse),Q.setFromProjectionMatrix(se),K=this.localClippingEnabled,W=ee.init(this.clippingPlanes,K,Ue),p=Ie.get(me,i.length),p.init(),i.push(p),it(me,Ue,0,d.sortObjects),p.finish(),d.sortObjects===!0&&p.sort(F,I),W===!0&&ee.beginShadows();const ze=s.state.shadowsArray;if(Le.render(ze,me,Ue),W===!0&&ee.endShadows(),this.info.autoReset===!0&&this.info.reset(),De.render(p,me),s.setupLights(d.physicallyCorrectLights),Ue.isArrayCamera){const Be=Ue.cameras;for(let Je=0,yt=Be.length;Je<yt;Je++){const bt=Be[Je];lt(p,me,bt,bt.viewport)}}else lt(p,me,Ue);_!==null&&(X.updateMultisampleRenderTarget(_),X.updateRenderTargetMipmap(_)),me.isScene===!0&&me.onAfterRender(d,me,Ue),qe.resetDefaultState(),w=-1,S=null,o.pop(),o.length>0?s=o[o.length-1]:s=null,i.pop(),i.length>0?p=i[i.length-1]:p=null};function it(me,Ue,ze,Be){if(me.visible===!1)return;if(me.layers.test(Ue.layers)){if(me.isGroup)ze=me.renderOrder;else if(me.isLOD)me.autoUpdate===!0&&me.update(Ue);else if(me.isLight)s.pushLight(me),me.castShadow&&s.pushShadow(me);else if(me.isSprite){if(!me.frustumCulled||Q.intersectsSprite(me)){Be&&ge.setFromMatrixPosition(me.matrixWorld).applyMatrix4(se);const bt=he.update(me),xt=me.material;xt.visible&&p.push(me,bt,xt,ze,ge.z,null)}}else if((me.isMesh||me.isLine||me.isPoints)&&(me.isSkinnedMesh&&me.skeleton.frame!==te.render.frame&&(me.skeleton.update(),me.skeleton.frame=te.render.frame),!me.frustumCulled||Q.intersectsObject(me))){Be&&ge.setFromMatrixPosition(me.matrixWorld).applyMatrix4(se);const bt=he.update(me),xt=me.material;if(Array.isArray(xt)){const _t=bt.groups;for(let ce=0,Fe=_t.length;ce<Fe;ce++){const Ke=_t[ce],He=xt[Ke.materialIndex];He&&He.visible&&p.push(me,bt,He,ze,ge.z,Ke)}}else xt.visible&&p.push(me,bt,xt,ze,ge.z,null)}}const yt=me.children;for(let bt=0,xt=yt.length;bt<xt;bt++)it(yt[bt],Ue,ze,Be)}function lt(me,Ue,ze,Be){const Je=me.opaque,yt=me.transmissive,bt=me.transparent;s.setupLightsView(ze),yt.length>0&&vt(Je,Ue,ze),Be&&V.viewport(T.copy(Be)),Je.length>0&&dt(Je,Ue,ze),yt.length>0&&dt(yt,Ue,ze),bt.length>0&&dt(bt,Ue,ze),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1)}function vt(me,Ue,ze){const Be=B.isWebGL2;Y===null&&(Y=new Lr(1,1,{generateMipmaps:!0,type:j.has("EXT_color_buffer_half_float")?ws:ei,minFilter:Yi,samples:Be&&l===!0?4:0})),d.getDrawingBufferSize(ue),Be?Y.setSize(ue.x,ue.y):Y.setSize(Ao(ue.x),Ao(ue.y));const Je=d.getRenderTarget();d.setRenderTarget(Y),d.clear();const yt=d.toneMapping;d.toneMapping=yn,dt(me,Ue,ze),d.toneMapping=yt,X.updateMultisampleRenderTarget(Y),X.updateRenderTargetMipmap(Y),d.setRenderTarget(Je)}function dt(me,Ue,ze){const Be=Ue.isScene===!0?Ue.overrideMaterial:null;for(let Je=0,yt=me.length;Je<yt;Je++){const bt=me[Je],xt=bt.object,_t=bt.geometry,ce=Be===null?bt.material:Be,Fe=bt.group;xt.layers.test(ze.layers)&&gt(xt,Ue,ze,_t,ce,Fe)}}function gt(me,Ue,ze,Be,Je,yt){me.onBeforeRender(d,Ue,ze,Be,Je,yt),me.modelViewMatrix.multiplyMatrices(ze.matrixWorldInverse,me.matrixWorld),me.normalMatrix.getNormalMatrix(me.modelViewMatrix),Je.onBeforeRender(d,Ue,ze,Be,me,yt),Je.transparent===!0&&Je.side===$n?(Je.side=qr,Je.needsUpdate=!0,d.renderBufferDirect(ze,Ue,Be,Je,me,yt),Je.side=Ui,Je.needsUpdate=!0,d.renderBufferDirect(ze,Ue,Be,Je,me,yt),Je.side=$n):d.renderBufferDirect(ze,Ue,Be,Je,me,yt),me.onAfterRender(d,Ue,ze,Be,Je,yt)}function Tt(me,Ue,ze){Ue.isScene!==!0&&(Ue=de);const Be=$.get(me),Je=s.state.lights,yt=s.state.shadowsArray,bt=Je.state.version,xt=Ae.getParameters(me,Je.state,yt,Ue,ze),_t=Ae.getProgramCacheKey(xt);let ce=Be.programs;Be.environment=me.isMeshStandardMaterial?Ue.environment:null,Be.fog=Ue.fog,Be.envMap=(me.isMeshStandardMaterial?ne:ye).get(me.envMap||Be.environment),ce===void 0&&(me.addEventListener("dispose",G),ce=new Map,Be.programs=ce);let Fe=ce.get(_t);if(Fe!==void 0){if(Be.currentProgram===Fe&&Be.lightsStateVersion===bt)return Tr(me,xt),Fe}else xt.uniforms=Ae.getUniforms(me),me.onBuild(ze,xt,d),me.onBeforeCompile(xt,d),Fe=Ae.acquireProgram(xt,_t),ce.set(_t,Fe),Be.uniforms=xt.uniforms;const Ke=Be.uniforms;(!me.isShaderMaterial&&!me.isRawShaderMaterial||me.clipping===!0)&&(Ke.clippingPlanes=ee.uniform),Tr(me,xt),Be.needsLights=kr(me),Be.lightsStateVersion=bt,Be.needsLights&&(Ke.ambientLightColor.value=Je.state.ambient,Ke.lightProbe.value=Je.state.probe,Ke.directionalLights.value=Je.state.directional,Ke.directionalLightShadows.value=Je.state.directionalShadow,Ke.spotLights.value=Je.state.spot,Ke.spotLightShadows.value=Je.state.spotShadow,Ke.rectAreaLights.value=Je.state.rectArea,Ke.ltc_1.value=Je.state.rectAreaLTC1,Ke.ltc_2.value=Je.state.rectAreaLTC2,Ke.pointLights.value=Je.state.point,Ke.pointLightShadows.value=Je.state.pointShadow,Ke.hemisphereLights.value=Je.state.hemi,Ke.directionalShadowMap.value=Je.state.directionalShadowMap,Ke.directionalShadowMatrix.value=Je.state.directionalShadowMatrix,Ke.spotShadowMap.value=Je.state.spotShadowMap,Ke.spotShadowMatrix.value=Je.state.spotShadowMatrix,Ke.pointShadowMap.value=Je.state.pointShadowMap,Ke.pointShadowMatrix.value=Je.state.pointShadowMatrix);const He=Fe.getUniforms(),rt=On.seqWithValue(He.seq,Ke);return Be.currentProgram=Fe,Be.uniformsList=rt,Fe}function Tr(me,Ue){const ze=$.get(me);ze.outputEncoding=Ue.outputEncoding,ze.instancing=Ue.instancing,ze.skinning=Ue.skinning,ze.morphTargets=Ue.morphTargets,ze.morphNormals=Ue.morphNormals,ze.morphColors=Ue.morphColors,ze.morphTargetsCount=Ue.morphTargetsCount,ze.numClippingPlanes=Ue.numClippingPlanes,ze.numIntersection=Ue.numClipIntersection,ze.vertexAlphas=Ue.vertexAlphas,ze.vertexTangents=Ue.vertexTangents,ze.toneMapping=Ue.toneMapping}function dr(me,Ue,ze,Be,Je){Ue.isScene!==!0&&(Ue=de),X.resetTextureUnits();const yt=Ue.fog,bt=Be.isMeshStandardMaterial?Ue.environment:null,xt=_===null?d.outputEncoding:_.isXRRenderTarget===!0?_.texture.encoding:Fn,_t=(Be.isMeshStandardMaterial?ne:ye).get(Be.envMap||bt),ce=Be.vertexColors===!0&&!!ze.attributes.color&&ze.attributes.color.itemSize===4,Fe=!!Be.normalMap&&!!ze.attributes.tangent,Ke=!!ze.morphAttributes.position,He=!!ze.morphAttributes.normal,rt=!!ze.morphAttributes.color,Ve=Be.toneMapped?d.toneMapping:yn,Mt=ze.morphAttributes.position||ze.morphAttributes.normal||ze.morphAttributes.color,St=Mt!==void 0?Mt.length:0,ht=$.get(Be),wt=s.state.lights;if(W===!0&&(K===!0||me!==S)){const fr=me===S&&Be.id===w;ee.setState(Be,me,fr)}let $e=!1;Be.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==wt.state.version||ht.outputEncoding!==xt||Je.isInstancedMesh&&ht.instancing===!1||!Je.isInstancedMesh&&ht.instancing===!0||Je.isSkinnedMesh&&ht.skinning===!1||!Je.isSkinnedMesh&&ht.skinning===!0||ht.envMap!==_t||Be.fog===!0&&ht.fog!==yt||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==ee.numPlanes||ht.numIntersection!==ee.numIntersection)||ht.vertexAlphas!==ce||ht.vertexTangents!==Fe||ht.morphTargets!==Ke||ht.morphNormals!==He||ht.morphColors!==rt||ht.toneMapping!==Ve||B.isWebGL2===!0&&ht.morphTargetsCount!==St)&&($e=!0):($e=!0,ht.__version=Be.version);let Ct=ht.currentProgram;$e===!0&&(Ct=Tt(Be,Ue,Je));let ut=!1,Nr=!1,Fr=!1;const tr=Ct.getUniforms(),Ur=ht.uniforms;if(V.useProgram(Ct.program)&&(ut=!0,Nr=!0,Fr=!0),Be.id!==w&&(w=Be.id,Nr=!0),ut||S!==me){if(tr.setValue(ae,"projectionMatrix",me.projectionMatrix),B.logarithmicDepthBuffer&&tr.setValue(ae,"logDepthBufFC",2/(Math.log(me.far+1)/Math.LN2)),S!==me&&(S=me,Nr=!0,Fr=!0),Be.isShaderMaterial||Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshStandardMaterial||Be.envMap){const fr=tr.map.cameraPosition;fr!==void 0&&fr.setValue(ae,ge.setFromMatrixPosition(me.matrixWorld))}(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial)&&tr.setValue(ae,"isOrthographic",me.isOrthographicCamera===!0),(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial||Be.isShadowMaterial||Je.isSkinnedMesh)&&tr.setValue(ae,"viewMatrix",me.matrixWorldInverse)}if(Je.isSkinnedMesh){tr.setOptional(ae,Je,"bindMatrix"),tr.setOptional(ae,Je,"bindMatrixInverse");const fr=Je.skeleton;fr&&(B.floatVertexTextures?(fr.boneTexture===null&&fr.computeBoneTexture(),tr.setValue(ae,"boneTexture",fr.boneTexture,X),tr.setValue(ae,"boneTextureSize",fr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const nn=ze.morphAttributes;return(nn.position!==void 0||nn.normal!==void 0||nn.color!==void 0&&B.isWebGL2===!0)&&Ze.update(Je,ze,Be,Ct),(Nr||ht.receiveShadow!==Je.receiveShadow)&&(ht.receiveShadow=Je.receiveShadow,tr.setValue(ae,"receiveShadow",Je.receiveShadow)),Nr&&(tr.setValue(ae,"toneMappingExposure",d.toneMappingExposure),ht.needsLights&&rn(Ur,Fr),yt&&Be.fog===!0&&Oe.refreshFogUniforms(Ur,yt),Oe.refreshMaterialUniforms(Ur,Be,D,R,Y),On.upload(ae,ht.uniformsList,Ur,X)),Be.isShaderMaterial&&Be.uniformsNeedUpdate===!0&&(On.upload(ae,ht.uniformsList,Ur,X),Be.uniformsNeedUpdate=!1),Be.isSpriteMaterial&&tr.setValue(ae,"center",Je.center),tr.setValue(ae,"modelViewMatrix",Je.modelViewMatrix),tr.setValue(ae,"normalMatrix",Je.normalMatrix),tr.setValue(ae,"modelMatrix",Je.matrixWorld),Ct}function rn(me,Ue){me.ambientLightColor.needsUpdate=Ue,me.lightProbe.needsUpdate=Ue,me.directionalLights.needsUpdate=Ue,me.directionalLightShadows.needsUpdate=Ue,me.pointLights.needsUpdate=Ue,me.pointLightShadows.needsUpdate=Ue,me.spotLights.needsUpdate=Ue,me.spotLightShadows.needsUpdate=Ue,me.rectAreaLights.needsUpdate=Ue,me.hemisphereLights.needsUpdate=Ue}function kr(me){return me.isMeshLambertMaterial||me.isMeshToonMaterial||me.isMeshPhongMaterial||me.isMeshStandardMaterial||me.isShadowMaterial||me.isShaderMaterial&&me.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(me,Ue,ze){$.get(me.texture).__webglTexture=Ue,$.get(me.depthTexture).__webglTexture=ze;const Be=$.get(me);Be.__hasExternalTextures=!0,Be.__hasExternalTextures&&(Be.__autoAllocateDepthBuffer=ze===void 0,Be.__autoAllocateDepthBuffer||j.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Be.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(me,Ue){const ze=$.get(me);ze.__webglFramebuffer=Ue,ze.__useDefaultFramebuffer=Ue===void 0},this.setRenderTarget=function(me,Ue=0,ze=0){_=me,g=Ue,b=ze;let Be=!0;if(me){const _t=$.get(me);_t.__useDefaultFramebuffer!==void 0?(V.bindFramebuffer(36160,null),Be=!1):_t.__webglFramebuffer===void 0?X.setupRenderTarget(me):_t.__hasExternalTextures&&X.rebindTextures(me,$.get(me.texture).__webglTexture,$.get(me.depthTexture).__webglTexture)}let Je=null,yt=!1,bt=!1;if(me){const _t=me.texture;(_t.isData3DTexture||_t.isDataArrayTexture)&&(bt=!0);const ce=$.get(me).__webglFramebuffer;me.isWebGLCubeRenderTarget?(Je=ce[Ue],yt=!0):B.isWebGL2&&me.samples>0&&X.useMultisampledRTT(me)===!1?Je=$.get(me).__webglMultisampledFramebuffer:Je=ce,T.copy(me.viewport),L.copy(me.scissor),A=me.scissorTest}else T.copy(k).multiplyScalar(D).floor(),L.copy(U).multiplyScalar(D).floor(),A=q;if(V.bindFramebuffer(36160,Je)&&B.drawBuffers&&Be&&V.drawBuffers(me,Je),V.viewport(T),V.scissor(L),V.setScissorTest(A),yt){const _t=$.get(me.texture);ae.framebufferTexture2D(36160,36064,34069+Ue,_t.__webglTexture,ze)}else if(bt){const _t=$.get(me.texture),ce=Ue||0;ae.framebufferTextureLayer(36160,36064,_t.__webglTexture,ze||0,ce)}w=-1},this.readRenderTargetPixels=function(me,Ue,ze,Be,Je,yt,bt){if(!(me&&me.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let xt=$.get(me).__webglFramebuffer;if(me.isWebGLCubeRenderTarget&&bt!==void 0&&(xt=xt[bt]),xt){V.bindFramebuffer(36160,xt);try{const _t=me.texture,ce=_t.format,Fe=_t.type;if(ce!==Dr&&Ee.convert(ce)!==ae.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ke=Fe===ws&&(j.has("EXT_color_buffer_half_float")||B.isWebGL2&&j.has("EXT_color_buffer_float"));if(Fe!==ei&&Ee.convert(Fe)!==ae.getParameter(35738)&&!(Fe===Dn&&(B.isWebGL2||j.has("OES_texture_float")||j.has("WEBGL_color_buffer_float")))&&!Ke){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ue>=0&&Ue<=me.width-Be&&ze>=0&&ze<=me.height-Je&&ae.readPixels(Ue,ze,Be,Je,Ee.convert(ce),Ee.convert(Fe),yt)}finally{const _t=_!==null?$.get(_).__webglFramebuffer:null;V.bindFramebuffer(36160,_t)}}},this.copyFramebufferToTexture=function(me,Ue,ze=0){if(Ue.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const Be=Math.pow(2,-ze),Je=Math.floor(Ue.image.width*Be),yt=Math.floor(Ue.image.height*Be);X.setTexture2D(Ue,0),ae.copyTexSubImage2D(3553,ze,0,0,me.x,me.y,Je,yt),V.unbindTexture()},this.copyTextureToTexture=function(me,Ue,ze,Be=0){const Je=Ue.image.width,yt=Ue.image.height,bt=Ee.convert(ze.format),xt=Ee.convert(ze.type);X.setTexture2D(ze,0),ae.pixelStorei(37440,ze.flipY),ae.pixelStorei(37441,ze.premultiplyAlpha),ae.pixelStorei(3317,ze.unpackAlignment),Ue.isDataTexture?ae.texSubImage2D(3553,Be,me.x,me.y,Je,yt,bt,xt,Ue.image.data):Ue.isCompressedTexture?ae.compressedTexSubImage2D(3553,Be,me.x,me.y,Ue.mipmaps[0].width,Ue.mipmaps[0].height,bt,Ue.mipmaps[0].data):ae.texSubImage2D(3553,Be,me.x,me.y,bt,xt,Ue.image),Be===0&&ze.generateMipmaps&&ae.generateMipmap(3553),V.unbindTexture()},this.copyTextureToTexture3D=function(me,Ue,ze,Be,Je=0){if(d.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const yt=me.max.x-me.min.x+1,bt=me.max.y-me.min.y+1,xt=me.max.z-me.min.z+1,_t=Ee.convert(Be.format),ce=Ee.convert(Be.type);let Fe;if(Be.isData3DTexture)X.setTexture3D(Be,0),Fe=32879;else if(Be.isDataArrayTexture)X.setTexture2DArray(Be,0),Fe=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ae.pixelStorei(37440,Be.flipY),ae.pixelStorei(37441,Be.premultiplyAlpha),ae.pixelStorei(3317,Be.unpackAlignment);const Ke=ae.getParameter(3314),He=ae.getParameter(32878),rt=ae.getParameter(3316),Ve=ae.getParameter(3315),Mt=ae.getParameter(32877),St=ze.isCompressedTexture?ze.mipmaps[0]:ze.image;ae.pixelStorei(3314,St.width),ae.pixelStorei(32878,St.height),ae.pixelStorei(3316,me.min.x),ae.pixelStorei(3315,me.min.y),ae.pixelStorei(32877,me.min.z),ze.isDataTexture||ze.isData3DTexture?ae.texSubImage3D(Fe,Je,Ue.x,Ue.y,Ue.z,yt,bt,xt,_t,ce,St.data):ze.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ae.compressedTexSubImage3D(Fe,Je,Ue.x,Ue.y,Ue.z,yt,bt,xt,_t,St.data)):ae.texSubImage3D(Fe,Je,Ue.x,Ue.y,Ue.z,yt,bt,xt,_t,ce,St),ae.pixelStorei(3314,Ke),ae.pixelStorei(32878,He),ae.pixelStorei(3316,rt),ae.pixelStorei(3315,Ve),ae.pixelStorei(32877,Mt),Je===0&&Be.generateMipmaps&&ae.generateMipmap(Fe),V.unbindTexture()},this.initTexture=function(me){X.setTexture2D(me,0),V.unbindTexture()},this.resetState=function(){g=0,b=0,_=null,V.reset(),qe.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}zt.prototype.isWebGLRenderer=!0;class N0 extends zt{}N0.prototype.isWebGL1Renderer=!0;class dl extends Bt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const r=super.toJSON(e);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),r}}dl.prototype.isScene=!0;class Ji{constructor(e,r){this.array=e,this.stride=r,this.count=e!==void 0?e.length/r:0,this.usage=Ms,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ir()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,r,t){e*=this.stride,t*=r.stride;for(let a=0,l=this.stride;a<l;a++)this.array[e+a]=r.array[t+a];return this}set(e,r=0){return this.array.set(e,r),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ir()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),t=new this.constructor(r,this.stride);return t.setUsage(this.usage),t}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ir()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Ji.prototype.isInterleavedBuffer=!0;const _r=new Me;class qi{constructor(e,r,t,a=!1){this.name="",this.data=e,this.itemSize=r,this.offset=t,this.normalized=a===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let r=0,t=this.data.count;r<t;r++)_r.fromBufferAttribute(this,r),_r.applyMatrix4(e),this.setXYZ(r,_r.x,_r.y,_r.z);return this}applyNormalMatrix(e){for(let r=0,t=this.count;r<t;r++)_r.fromBufferAttribute(this,r),_r.applyNormalMatrix(e),this.setXYZ(r,_r.x,_r.y,_r.z);return this}transformDirection(e){for(let r=0,t=this.count;r<t;r++)_r.fromBufferAttribute(this,r),_r.transformDirection(e),this.setXYZ(r,_r.x,_r.y,_r.z);return this}setX(e,r){return this.data.array[e*this.data.stride+this.offset]=r,this}setY(e,r){return this.data.array[e*this.data.stride+this.offset+1]=r,this}setZ(e,r){return this.data.array[e*this.data.stride+this.offset+2]=r,this}setW(e,r){return this.data.array[e*this.data.stride+this.offset+3]=r,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,r,t){return e=e*this.data.stride+this.offset,this.data.array[e+0]=r,this.data.array[e+1]=t,this}setXYZ(e,r,t,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=r,this.data.array[e+1]=t,this.data.array[e+2]=a,this}setXYZW(e,r,t,a,l){return e=e*this.data.stride+this.offset,this.data.array[e+0]=r,this.data.array[e+1]=t,this.data.array[e+2]=a,this.data.array[e+3]=l,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const r=[];for(let t=0;t<this.count;t++){const a=t*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)r.push(this.data.array[a+l])}return new nr(new this.array.constructor(r),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new qi(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const r=[];for(let t=0;t<this.count;t++){const a=t*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)r.push(this.data.array[a+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}qi.prototype.isInterleavedBufferAttribute=!0;class fl extends er{constructor(e){super(),this.type="SpriteMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}fl.prototype.isSpriteMaterial=!0;let Li;const ls=new Me,Ci=new Me,Ri=new Me,Pi=new tt,us=new tt,Ah=new pt,uo=new Me,cs=new Me,co=new Me,wc=new tt,Ra=new tt,Sc=new tt;class F0 extends Bt{constructor(e){if(super(),this.type="Sprite",Li===void 0){Li=new Zt;const r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Ji(r,5);Li.setIndex([0,1,2,0,2,3]),Li.setAttribute("position",new qi(t,3,0,!1)),Li.setAttribute("uv",new qi(t,2,3,!1))}this.geometry=Li,this.material=e!==void 0?e:new fl,this.center=new tt(.5,.5)}raycast(e,r){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ci.setFromMatrixScale(this.matrixWorld),Ah.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ri.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ci.multiplyScalar(-Ri.z);const t=this.material.rotation;let a,l;t!==0&&(l=Math.cos(t),a=Math.sin(t));const c=this.center;ho(uo.set(-.5,-.5,0),Ri,c,Ci,a,l),ho(cs.set(.5,-.5,0),Ri,c,Ci,a,l),ho(co.set(.5,.5,0),Ri,c,Ci,a,l),wc.set(0,0),Ra.set(1,0),Sc.set(1,1);let n=e.ray.intersectTriangle(uo,cs,co,!1,ls);if(n===null&&(ho(cs.set(-.5,.5,0),Ri,c,Ci,a,l),Ra.set(0,1),n=e.ray.intersectTriangle(uo,co,cs,!1,ls),n===null))return;const f=e.ray.origin.distanceTo(ls);f<e.near||f>e.far||r.push({distance:f,point:ls.clone(),uv:or.getUV(ls,uo,cs,co,wc,Ra,Sc,new tt),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}F0.prototype.isSprite=!0;function ho(v,e,r,t,a,l){Pi.subVectors(v,r).addScalar(.5).multiply(t),a!==void 0?(us.x=l*Pi.x-a*Pi.y,us.y=a*Pi.x+l*Pi.y):us.copy(Pi),v.copy(e),v.x+=us.x,v.y+=us.y,v.applyMatrix4(Ah)}const Mc=new Me,Tc=new Vt,Ec=new Vt,U0=new Me,Ac=new pt;class pl extends xr{constructor(e,r){super(e,r),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new pt,this.bindMatrixInverse=new pt}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,r){this.skeleton=e,r===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Vt,r=this.geometry.attributes.skinWeight;for(let t=0,a=r.count;t<a;t++){e.fromBufferAttribute(r,t);const l=1/e.manhattanLength();l!==1/0?e.multiplyScalar(l):e.set(1,0,0,0),r.setXYZW(t,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,r){const t=this.skeleton,a=this.geometry;Tc.fromBufferAttribute(a.attributes.skinIndex,e),Ec.fromBufferAttribute(a.attributes.skinWeight,e),Mc.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let l=0;l<4;l++){const c=Ec.getComponent(l);if(c!==0){const n=Tc.getComponent(l);Ac.multiplyMatrices(t.bones[n].matrixWorld,t.boneInverses[n]),r.addScaledVector(U0.copy(Mc).applyMatrix4(Ac),c)}}return r.applyMatrix4(this.bindMatrixInverse)}}pl.prototype.isSkinnedMesh=!0;class ml extends Bt{constructor(){super(),this.type="Bone"}}ml.prototype.isBone=!0;class Lh extends ar{constructor(e=null,r=1,t=1,a,l,c,n,f,h=ur,m=ur,p,s){super(null,c,n,f,h,m,a,l,p,s),this.image={data:e,width:r,height:t},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Lh.prototype.isDataTexture=!0;const Lc=new pt,B0=new pt;class gl{constructor(e=[],r=[]){this.uuid=Ir(),this.bones=e.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),r.length===0)this.calculateInverses();else if(e.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,a=this.bones.length;t<a;t++)this.boneInverses.push(new pt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,r=this.bones.length;e<r;e++){const t=new pt;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,r=this.bones.length;e<r;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,r=this.bones.length;e<r;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,r=this.boneInverses,t=this.boneMatrices,a=this.boneTexture;for(let l=0,c=e.length;l<c;l++){const n=e[l]?e[l].matrixWorld:B0;Lc.multiplyMatrices(n,r[l]),Lc.toArray(t,l*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new gl(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=ch(e),e=Math.max(e,4);const r=new Float32Array(e*e*4);r.set(this.boneMatrices);const t=new Lh(r,e,e,Dr,Dn);return t.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=t,this.boneTextureSize=e,this}getBoneByName(e){for(let r=0,t=this.bones.length;r<t;r++){const a=this.bones[r];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,r){this.uuid=e.uuid;for(let t=0,a=e.bones.length;t<a;t++){const l=e.bones[t];let c=r[l];c===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",l),c=new ml),this.bones.push(c),this.boneInverses.push(new pt().fromArray(e.boneInverses[t]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const r=this.bones,t=this.boneInverses;for(let a=0,l=r.length;a<l;a++){const c=r[a];e.bones.push(c.uuid);const n=t[a];e.boneInverses.push(n.toArray())}return e}}class qa extends nr{constructor(e,r,t,a=1){typeof t=="number"&&(a=t,t=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,r,t),this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}qa.prototype.isInstancedBufferAttribute=!0;const Cc=new pt,Rc=new pt,fo=[],hs=new xr;class G0 extends xr{constructor(e,r,t){super(e,r),this.instanceMatrix=new qa(new Float32Array(t*16),16),this.instanceColor=null,this.count=t,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,r){r.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,r){r.fromArray(this.instanceMatrix.array,e*16)}raycast(e,r){const t=this.matrixWorld,a=this.count;if(hs.geometry=this.geometry,hs.material=this.material,hs.material!==void 0)for(let l=0;l<a;l++){this.getMatrixAt(l,Cc),Rc.multiplyMatrices(t,Cc),hs.matrixWorld=Rc,hs.raycast(e,fo);for(let c=0,n=fo.length;c<n;c++){const f=fo[c];f.instanceId=l,f.object=this,r.push(f)}fo.length=0}}setColorAt(e,r){this.instanceColor===null&&(this.instanceColor=new qa(new Float32Array(this.instanceMatrix.count*3),3)),r.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,r){r.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}G0.prototype.isInstancedMesh=!0;class li extends er{constructor(e){super(),this.type="LineBasicMaterial",this.color=new at(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}li.prototype.isLineBasicMaterial=!0;const Pc=new Me,Dc=new Me,Ic=new pt,Pa=new Zi,po=new oi;class Oo extends Bt{constructor(e=new Zt,r=new li){super(),this.type="Line",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const r=e.attributes.position,t=[0];for(let a=1,l=r.count;a<l;a++)Pc.fromBufferAttribute(r,a-1),Dc.fromBufferAttribute(r,a),t[a]=t[a-1],t[a]+=Pc.distanceTo(Dc);e.setAttribute("lineDistance",new hr(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,r){const t=this.geometry,a=this.matrixWorld,l=e.params.Line.threshold,c=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),po.copy(t.boundingSphere),po.applyMatrix4(a),po.radius+=l,e.ray.intersectsSphere(po)===!1)return;Ic.copy(a).invert(),Pa.copy(e.ray).applyMatrix4(Ic);const n=l/((this.scale.x+this.scale.y+this.scale.z)/3),f=n*n,h=new Me,m=new Me,p=new Me,s=new Me,i=this.isLineSegments?2:1;if(t.isBufferGeometry){const o=t.index,u=t.attributes.position;if(o!==null){const g=Math.max(0,c.start),b=Math.min(o.count,c.start+c.count);for(let _=g,w=b-1;_<w;_+=i){const S=o.getX(_),T=o.getX(_+1);if(h.fromBufferAttribute(u,S),m.fromBufferAttribute(u,T),Pa.distanceSqToSegment(h,m,s,p)>f)continue;s.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(s);A<e.near||A>e.far||r.push({distance:A,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,c.start),b=Math.min(u.count,c.start+c.count);for(let _=g,w=b-1;_<w;_+=i){if(h.fromBufferAttribute(u,_),m.fromBufferAttribute(u,_+1),Pa.distanceSqToSegment(h,m,s,p)>f)continue;s.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(s);T<e.near||T>e.far||r.push({distance:T,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else t.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const r=e.morphAttributes,t=Object.keys(r);if(t.length>0){const a=r[t[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=a.length;l<c;l++){const n=a[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=l}}}}else{const r=e.morphTargets;r!==void 0&&r.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Oo.prototype.isLine=!0;const jc=new Me,Oc=new Me;class ko extends Oo{constructor(e,r){super(e,r),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const r=e.attributes.position,t=[];for(let a=0,l=r.count;a<l;a+=2)jc.fromBufferAttribute(r,a),Oc.fromBufferAttribute(r,a+1),t[a]=a===0?0:t[a-1],t[a+1]=t[a]+jc.distanceTo(Oc);e.setAttribute("lineDistance",new hr(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}ko.prototype.isLineSegments=!0;class Ch extends Oo{constructor(e,r){super(e,r),this.type="LineLoop"}}Ch.prototype.isLineLoop=!0;class No extends er{constructor(e){super(),this.type="PointsMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}No.prototype.isPointsMaterial=!0;const kc=new pt,Xa=new Zi,mo=new oi,go=new Me;class Rh extends Bt{constructor(e=new Zt,r=new No){super(),this.type="Points",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,r){const t=this.geometry,a=this.matrixWorld,l=e.params.Points.threshold,c=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),mo.copy(t.boundingSphere),mo.applyMatrix4(a),mo.radius+=l,e.ray.intersectsSphere(mo)===!1)return;kc.copy(a).invert(),Xa.copy(e.ray).applyMatrix4(kc);const n=l/((this.scale.x+this.scale.y+this.scale.z)/3),f=n*n;if(t.isBufferGeometry){const h=t.index,p=t.attributes.position;if(h!==null){const s=Math.max(0,c.start),i=Math.min(h.count,c.start+c.count);for(let o=s,d=i;o<d;o++){const u=h.getX(o);go.fromBufferAttribute(p,u),Nc(go,u,f,a,e,r,this)}}else{const s=Math.max(0,c.start),i=Math.min(p.count,c.start+c.count);for(let o=s,d=i;o<d;o++)go.fromBufferAttribute(p,o),Nc(go,o,f,a,e,r,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const r=e.morphAttributes,t=Object.keys(r);if(t.length>0){const a=r[t[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=a.length;l<c;l++){const n=a[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=l}}}}else{const r=e.morphTargets;r!==void 0&&r.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Rh.prototype.isPoints=!0;function Nc(v,e,r,t,a,l,c){const n=Xa.distanceSqToPoint(v);if(n<r){const f=new Me;Xa.closestPointToPoint(v,f),f.applyMatrix4(t);const h=a.ray.origin.distanceTo(f);if(h<a.near||h>a.far)return;l.push({distance:h,distanceToRay:Math.sqrt(n),point:f,index:e,face:null,object:c})}}class z0 extends ar{constructor(e,r,t,a,l,c,n,f,h){super(e,r,t,a,l,c,n,f,h),this.minFilter=c!==void 0?c:vr,this.magFilter=l!==void 0?l:vr,this.generateMipmaps=!1;const m=this;function p(){m.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}z0.prototype.isVideoTexture=!0;class V0 extends ar{constructor(e,r,t){super({width:e,height:r}),this.format=t,this.magFilter=ur,this.minFilter=ur,this.generateMipmaps=!1,this.needsUpdate=!0}}V0.prototype.isFramebufferTexture=!0;class H0 extends ar{constructor(e,r,t,a,l,c,n,f,h,m,p,s){super(null,c,n,f,h,m,a,l,p,s),this.image={width:r,height:t},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}H0.prototype.isCompressedTexture=!0;class W0 extends ar{constructor(e,r,t,a,l,c,n,f,h){super(e,r,t,a,l,c,n,f,h),this.needsUpdate=!0}}W0.prototype.isCanvasTexture=!0;class jr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,r){const t=this.getUtoTmapping(e);return this.getPoint(t,r)}getPoints(e=5){const r=[];for(let t=0;t<=e;t++)r.push(this.getPoint(t/e));return r}getSpacedPoints(e=5){const r=[];for(let t=0;t<=e;t++)r.push(this.getPointAt(t/e));return r}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const r=[];let t,a=this.getPoint(0),l=0;r.push(0);for(let c=1;c<=e;c++)t=this.getPoint(c/e),l+=t.distanceTo(a),r.push(l),a=t;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,r){const t=this.getLengths();let a=0;const l=t.length;let c;r?c=r:c=e*t[l-1];let n=0,f=l-1,h;for(;n<=f;)if(a=Math.floor(n+(f-n)/2),h=t[a]-c,h<0)n=a+1;else if(h>0)f=a-1;else{f=a;break}if(a=f,t[a]===c)return a/(l-1);const m=t[a],s=t[a+1]-m,i=(c-m)/s;return(a+i)/(l-1)}getTangent(e,r){let a=e-1e-4,l=e+1e-4;a<0&&(a=0),l>1&&(l=1);const c=this.getPoint(a),n=this.getPoint(l),f=r||(c.isVector2?new tt:new Me);return f.copy(n).sub(c).normalize(),f}getTangentAt(e,r){const t=this.getUtoTmapping(e);return this.getTangent(t,r)}computeFrenetFrames(e,r){const t=new Me,a=[],l=[],c=[],n=new Me,f=new pt;for(let i=0;i<=e;i++){const o=i/e;a[i]=this.getTangentAt(o,new Me)}l[0]=new Me,c[0]=new Me;let h=Number.MAX_VALUE;const m=Math.abs(a[0].x),p=Math.abs(a[0].y),s=Math.abs(a[0].z);m<=h&&(h=m,t.set(1,0,0)),p<=h&&(h=p,t.set(0,1,0)),s<=h&&t.set(0,0,1),n.crossVectors(a[0],t).normalize(),l[0].crossVectors(a[0],n),c[0].crossVectors(a[0],l[0]);for(let i=1;i<=e;i++){if(l[i]=l[i-1].clone(),c[i]=c[i-1].clone(),n.crossVectors(a[i-1],a[i]),n.length()>Number.EPSILON){n.normalize();const o=Math.acos(mr(a[i-1].dot(a[i]),-1,1));l[i].applyMatrix4(f.makeRotationAxis(n,o))}c[i].crossVectors(a[i],l[i])}if(r===!0){let i=Math.acos(mr(l[0].dot(l[e]),-1,1));i/=e,a[0].dot(n.crossVectors(l[0],l[e]))>0&&(i=-i);for(let o=1;o<=e;o++)l[o].applyMatrix4(f.makeRotationAxis(a[o],i*o)),c[o].crossVectors(a[o],l[o])}return{tangents:a,normals:l,binormals:c}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Fo extends jr{constructor(e=0,r=0,t=1,a=1,l=0,c=Math.PI*2,n=!1,f=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=r,this.xRadius=t,this.yRadius=a,this.aStartAngle=l,this.aEndAngle=c,this.aClockwise=n,this.aRotation=f}getPoint(e,r){const t=r||new tt,a=Math.PI*2;let l=this.aEndAngle-this.aStartAngle;const c=Math.abs(l)<Number.EPSILON;for(;l<0;)l+=a;for(;l>a;)l-=a;l<Number.EPSILON&&(c?l=0:l=a),this.aClockwise===!0&&!c&&(l===a?l=-a:l=l-a);const n=this.aStartAngle+e*l;let f=this.aX+this.xRadius*Math.cos(n),h=this.aY+this.yRadius*Math.sin(n);if(this.aRotation!==0){const m=Math.cos(this.aRotation),p=Math.sin(this.aRotation),s=f-this.aX,i=h-this.aY;f=s*m-i*p+this.aX,h=s*p+i*m+this.aY}return t.set(f,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Fo.prototype.isEllipseCurve=!0;class Ph extends Fo{constructor(e,r,t,a,l,c){super(e,r,t,t,a,l,c),this.type="ArcCurve"}}Ph.prototype.isArcCurve=!0;function yl(){let v=0,e=0,r=0,t=0;function a(l,c,n,f){v=l,e=n,r=-3*l+3*c-2*n-f,t=2*l-2*c+n+f}return{initCatmullRom:function(l,c,n,f,h){a(c,n,h*(n-l),h*(f-c))},initNonuniformCatmullRom:function(l,c,n,f,h,m,p){let s=(c-l)/h-(n-l)/(h+m)+(n-c)/m,i=(n-c)/m-(f-c)/(m+p)+(f-n)/p;s*=m,i*=m,a(c,n,s,i)},calc:function(l){const c=l*l,n=c*l;return v+e*l+r*c+t*n}}}const yo=new Me,Da=new yl,Ia=new yl,ja=new yl;class Dh extends jr{constructor(e=[],r=!1,t="centripetal",a=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=r,this.curveType=t,this.tension=a}getPoint(e,r=new Me){const t=r,a=this.points,l=a.length,c=(l-(this.closed?0:1))*e;let n=Math.floor(c),f=c-n;this.closed?n+=n>0?0:(Math.floor(Math.abs(n)/l)+1)*l:f===0&&n===l-1&&(n=l-2,f=1);let h,m;this.closed||n>0?h=a[(n-1)%l]:(yo.subVectors(a[0],a[1]).add(a[0]),h=yo);const p=a[n%l],s=a[(n+1)%l];if(this.closed||n+2<l?m=a[(n+2)%l]:(yo.subVectors(a[l-1],a[l-2]).add(a[l-1]),m=yo),this.curveType==="centripetal"||this.curveType==="chordal"){const i=this.curveType==="chordal"?.5:.25;let o=Math.pow(h.distanceToSquared(p),i),d=Math.pow(p.distanceToSquared(s),i),u=Math.pow(s.distanceToSquared(m),i);d<1e-4&&(d=1),o<1e-4&&(o=d),u<1e-4&&(u=d),Da.initNonuniformCatmullRom(h.x,p.x,s.x,m.x,o,d,u),Ia.initNonuniformCatmullRom(h.y,p.y,s.y,m.y,o,d,u),ja.initNonuniformCatmullRom(h.z,p.z,s.z,m.z,o,d,u)}else this.curveType==="catmullrom"&&(Da.initCatmullRom(h.x,p.x,s.x,m.x,this.tension),Ia.initCatmullRom(h.y,p.y,s.y,m.y,this.tension),ja.initCatmullRom(h.z,p.z,s.z,m.z,this.tension));return t.set(Da.calc(f),Ia.calc(f),ja.calc(f)),t}copy(e){super.copy(e),this.points=[];for(let r=0,t=e.points.length;r<t;r++){const a=e.points[r];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,t=this.points.length;r<t;r++){const a=this.points[r];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,t=e.points.length;r<t;r++){const a=e.points[r];this.points.push(new Me().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}Dh.prototype.isCatmullRomCurve3=!0;function Fc(v,e,r,t,a){const l=(t-e)*.5,c=(a-r)*.5,n=v*v,f=v*n;return(2*r-2*t+l+c)*f+(-3*r+3*t-2*l-c)*n+l*v+r}function q0(v,e){const r=1-v;return r*r*e}function X0(v,e){return 2*(1-v)*v*e}function Y0(v,e){return v*v*e}function bs(v,e,r,t){return q0(v,e)+X0(v,r)+Y0(v,t)}function Z0(v,e){const r=1-v;return r*r*r*e}function K0(v,e){const r=1-v;return 3*r*r*v*e}function J0(v,e){return 3*(1-v)*v*v*e}function Q0(v,e){return v*v*v*e}function _s(v,e,r,t,a){return Z0(v,e)+K0(v,r)+J0(v,t)+Q0(v,a)}class vl extends jr{constructor(e=new tt,r=new tt,t=new tt,a=new tt){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=r,this.v2=t,this.v3=a}getPoint(e,r=new tt){const t=r,a=this.v0,l=this.v1,c=this.v2,n=this.v3;return t.set(_s(e,a.x,l.x,c.x,n.x),_s(e,a.y,l.y,c.y,n.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}vl.prototype.isCubicBezierCurve=!0;class Ih extends jr{constructor(e=new Me,r=new Me,t=new Me,a=new Me){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=r,this.v2=t,this.v3=a}getPoint(e,r=new Me){const t=r,a=this.v0,l=this.v1,c=this.v2,n=this.v3;return t.set(_s(e,a.x,l.x,c.x,n.x),_s(e,a.y,l.y,c.y,n.y),_s(e,a.z,l.z,c.z,n.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Ih.prototype.isCubicBezierCurve3=!0;class Uo extends jr{constructor(e=new tt,r=new tt){super(),this.type="LineCurve",this.v1=e,this.v2=r}getPoint(e,r=new tt){const t=r;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,r){return this.getPoint(e,r)}getTangent(e,r){const t=r||new tt;return t.copy(this.v2).sub(this.v1).normalize(),t}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Uo.prototype.isLineCurve=!0;class $0 extends jr{constructor(e=new Me,r=new Me){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=r}getPoint(e,r=new Me){const t=r;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,r){return this.getPoint(e,r)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bl extends jr{constructor(e=new tt,r=new tt,t=new tt){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=r,this.v2=t}getPoint(e,r=new tt){const t=r,a=this.v0,l=this.v1,c=this.v2;return t.set(bs(e,a.x,l.x,c.x),bs(e,a.y,l.y,c.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}bl.prototype.isQuadraticBezierCurve=!0;class jh extends jr{constructor(e=new Me,r=new Me,t=new Me){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=r,this.v2=t}getPoint(e,r=new Me){const t=r,a=this.v0,l=this.v1,c=this.v2;return t.set(bs(e,a.x,l.x,c.x),bs(e,a.y,l.y,c.y),bs(e,a.z,l.z,c.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}jh.prototype.isQuadraticBezierCurve3=!0;class _l extends jr{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,r=new tt){const t=r,a=this.points,l=(a.length-1)*e,c=Math.floor(l),n=l-c,f=a[c===0?c:c-1],h=a[c],m=a[c>a.length-2?a.length-1:c+1],p=a[c>a.length-3?a.length-1:c+2];return t.set(Fc(n,f.x,h.x,m.x,p.x),Fc(n,f.y,h.y,m.y,p.y)),t}copy(e){super.copy(e),this.points=[];for(let r=0,t=e.points.length;r<t;r++){const a=e.points[r];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,t=this.points.length;r<t;r++){const a=this.points[r];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,t=e.points.length;r<t;r++){const a=e.points[r];this.points.push(new tt().fromArray(a))}return this}}_l.prototype.isSplineCurve=!0;var Oh=Object.freeze({__proto__:null,ArcCurve:Ph,CatmullRomCurve3:Dh,CubicBezierCurve:vl,CubicBezierCurve3:Ih,EllipseCurve:Fo,LineCurve:Uo,LineCurve3:$0,QuadraticBezierCurve:bl,QuadraticBezierCurve3:jh,SplineCurve:_l});class ev extends jr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);e.equals(r)||this.curves.push(new Uo(r,e))}getPoint(e,r){const t=e*this.getLength(),a=this.getCurveLengths();let l=0;for(;l<a.length;){if(a[l]>=t){const c=a[l]-t,n=this.curves[l],f=n.getLength(),h=f===0?0:1-c/f;return n.getPointAt(h,r)}l++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let r=0;for(let t=0,a=this.curves.length;t<a;t++)r+=this.curves[t].getLength(),e.push(r);return this.cacheLengths=e,e}getSpacedPoints(e=40){const r=[];for(let t=0;t<=e;t++)r.push(this.getPoint(t/e));return this.autoClose&&r.push(r[0]),r}getPoints(e=12){const r=[];let t;for(let a=0,l=this.curves;a<l.length;a++){const c=l[a],n=c.isEllipseCurve?e*2:c.isLineCurve||c.isLineCurve3?1:c.isSplineCurve?e*c.points.length:e,f=c.getPoints(n);for(let h=0;h<f.length;h++){const m=f[h];t&&t.equals(m)||(r.push(m),t=m)}}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r}copy(e){super.copy(e),this.curves=[];for(let r=0,t=e.curves.length;r<t;r++){const a=e.curves[r];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let r=0,t=this.curves.length;r<t;r++){const a=this.curves[r];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let r=0,t=e.curves.length;r<t;r++){const a=e.curves[r];this.curves.push(new Oh[a.type]().fromJSON(a))}return this}}class Ya extends ev{constructor(e){super(),this.type="Path",this.currentPoint=new tt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let r=1,t=e.length;r<t;r++)this.lineTo(e[r].x,e[r].y);return this}moveTo(e,r){return this.currentPoint.set(e,r),this}lineTo(e,r){const t=new Uo(this.currentPoint.clone(),new tt(e,r));return this.curves.push(t),this.currentPoint.set(e,r),this}quadraticCurveTo(e,r,t,a){const l=new bl(this.currentPoint.clone(),new tt(e,r),new tt(t,a));return this.curves.push(l),this.currentPoint.set(t,a),this}bezierCurveTo(e,r,t,a,l,c){const n=new vl(this.currentPoint.clone(),new tt(e,r),new tt(t,a),new tt(l,c));return this.curves.push(n),this.currentPoint.set(l,c),this}splineThru(e){const r=[this.currentPoint.clone()].concat(e),t=new _l(r);return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,r,t,a,l,c){const n=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+n,r+f,t,a,l,c),this}absarc(e,r,t,a,l,c){return this.absellipse(e,r,t,t,a,l,c),this}ellipse(e,r,t,a,l,c,n,f){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+h,r+m,t,a,l,c,n,f),this}absellipse(e,r,t,a,l,c,n,f){const h=new Fo(e,r,t,a,l,c,n,f);if(this.curves.length>0){const p=h.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(h);const m=h.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}new Me;new Me;new Me;new or;class js extends Ya{constructor(e){super(e),this.uuid=Ir(),this.type="Shape",this.holes=[]}getPointsHoles(e){const r=[];for(let t=0,a=this.holes.length;t<a;t++)r[t]=this.holes[t].getPoints(e);return r}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let r=0,t=e.holes.length;r<t;r++){const a=e.holes[r];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let r=0,t=this.holes.length;r<t;r++){const a=this.holes[r];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let r=0,t=e.holes.length;r<t;r++){const a=e.holes[r];this.holes.push(new Ya().fromJSON(a))}return this}}const tv={triangulate:function(v,e,r=2){const t=e&&e.length,a=t?e[0]*r:v.length;let l=kh(v,0,a,r,!0);const c=[];if(!l||l.next===l.prev)return c;let n,f,h,m,p,s,i;if(t&&(l=ov(v,e,l,r)),v.length>80*r){n=h=v[0],f=m=v[1];for(let o=r;o<a;o+=r)p=v[o],s=v[o+1],p<n&&(n=p),s<f&&(f=s),p>h&&(h=p),s>m&&(m=s);i=Math.max(h-n,m-f),i=i!==0?1/i:0}return As(l,c,r,n,f,i),c}};function kh(v,e,r,t,a){let l,c;if(a===yv(v,e,r,t)>0)for(l=e;l<r;l+=t)c=Uc(l,v[l],v[l+1],c);else for(l=r-t;l>=e;l-=t)c=Uc(l,v[l],v[l+1],c);return c&&Bo(c,c.next)&&(Cs(c),c=c.next),c}function Un(v,e){if(!v)return v;e||(e=v);let r=v,t;do if(t=!1,!r.steiner&&(Bo(r,r.next)||Qt(r.prev,r,r.next)===0)){if(Cs(r),r=e=r.prev,r===r.next)break;t=!0}else r=r.next;while(t||r!==e);return e}function As(v,e,r,t,a,l,c){if(!v)return;!c&&l&&hv(v,t,a,l);let n=v,f,h;for(;v.prev!==v.next;){if(f=v.prev,h=v.next,l?nv(v,t,a,l):rv(v)){e.push(f.i/r),e.push(v.i/r),e.push(h.i/r),Cs(v),v=h.next,n=h.next;continue}if(v=h,v===n){c?c===1?(v=iv(Un(v),e,r),As(v,e,r,t,a,l,2)):c===2&&sv(v,e,r,t,a,l):As(Un(v),e,r,t,a,l,1);break}}}function rv(v){const e=v.prev,r=v,t=v.next;if(Qt(e,r,t)>=0)return!1;let a=v.next.next;for(;a!==v.prev;){if(ki(e.x,e.y,r.x,r.y,t.x,t.y,a.x,a.y)&&Qt(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function nv(v,e,r,t){const a=v.prev,l=v,c=v.next;if(Qt(a,l,c)>=0)return!1;const n=a.x<l.x?a.x<c.x?a.x:c.x:l.x<c.x?l.x:c.x,f=a.y<l.y?a.y<c.y?a.y:c.y:l.y<c.y?l.y:c.y,h=a.x>l.x?a.x>c.x?a.x:c.x:l.x>c.x?l.x:c.x,m=a.y>l.y?a.y>c.y?a.y:c.y:l.y>c.y?l.y:c.y,p=Za(n,f,e,r,t),s=Za(h,m,e,r,t);let i=v.prevZ,o=v.nextZ;for(;i&&i.z>=p&&o&&o.z<=s;){if(i!==v.prev&&i!==v.next&&ki(a.x,a.y,l.x,l.y,c.x,c.y,i.x,i.y)&&Qt(i.prev,i,i.next)>=0||(i=i.prevZ,o!==v.prev&&o!==v.next&&ki(a.x,a.y,l.x,l.y,c.x,c.y,o.x,o.y)&&Qt(o.prev,o,o.next)>=0))return!1;o=o.nextZ}for(;i&&i.z>=p;){if(i!==v.prev&&i!==v.next&&ki(a.x,a.y,l.x,l.y,c.x,c.y,i.x,i.y)&&Qt(i.prev,i,i.next)>=0)return!1;i=i.prevZ}for(;o&&o.z<=s;){if(o!==v.prev&&o!==v.next&&ki(a.x,a.y,l.x,l.y,c.x,c.y,o.x,o.y)&&Qt(o.prev,o,o.next)>=0)return!1;o=o.nextZ}return!0}function iv(v,e,r){let t=v;do{const a=t.prev,l=t.next.next;!Bo(a,l)&&Nh(a,t,t.next,l)&&Ls(a,l)&&Ls(l,a)&&(e.push(a.i/r),e.push(t.i/r),e.push(l.i/r),Cs(t),Cs(t.next),t=v=l),t=t.next}while(t!==v);return Un(t)}function sv(v,e,r,t,a,l){let c=v;do{let n=c.next.next;for(;n!==c.prev;){if(c.i!==n.i&&pv(c,n)){let f=Fh(c,n);c=Un(c,c.next),f=Un(f,f.next),As(c,e,r,t,a,l),As(f,e,r,t,a,l);return}n=n.next}c=c.next}while(c!==v)}function ov(v,e,r,t){const a=[];let l,c,n,f,h;for(l=0,c=e.length;l<c;l++)n=e[l]*t,f=l<c-1?e[l+1]*t:v.length,h=kh(v,n,f,t,!1),h===h.next&&(h.steiner=!0),a.push(fv(h));for(a.sort(av),l=0;l<a.length;l++)lv(a[l],r),r=Un(r,r.next);return r}function av(v,e){return v.x-e.x}function lv(v,e){if(e=uv(v,e),e){const r=Fh(e,v);Un(e,e.next),Un(r,r.next)}}function uv(v,e){let r=e;const t=v.x,a=v.y;let l=-1/0,c;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){const s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=t&&s>l){if(l=s,s===t){if(a===r.y)return r;if(a===r.next.y)return r.next}c=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!c)return null;if(t===l)return c;const n=c,f=c.x,h=c.y;let m=1/0,p;r=c;do t>=r.x&&r.x>=f&&t!==r.x&&ki(a<h?t:l,a,f,h,a<h?l:t,a,r.x,r.y)&&(p=Math.abs(a-r.y)/(t-r.x),Ls(r,v)&&(p<m||p===m&&(r.x>c.x||r.x===c.x&&cv(c,r)))&&(c=r,m=p)),r=r.next;while(r!==n);return c}function cv(v,e){return Qt(v.prev,v,e.prev)<0&&Qt(e.next,v,v.next)<0}function hv(v,e,r,t){let a=v;do a.z===null&&(a.z=Za(a.x,a.y,e,r,t)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==v);a.prevZ.nextZ=null,a.prevZ=null,dv(a)}function dv(v){let e,r,t,a,l,c,n,f,h=1;do{for(r=v,v=null,l=null,c=0;r;){for(c++,t=r,n=0,e=0;e<h&&(n++,t=t.nextZ,!!t);e++);for(f=h;n>0||f>0&&t;)n!==0&&(f===0||!t||r.z<=t.z)?(a=r,r=r.nextZ,n--):(a=t,t=t.nextZ,f--),l?l.nextZ=a:v=a,a.prevZ=l,l=a;r=t}l.nextZ=null,h*=2}while(c>1);return v}function Za(v,e,r,t,a){return v=32767*(v-r)*a,e=32767*(e-t)*a,v=(v|v<<8)&16711935,v=(v|v<<4)&252645135,v=(v|v<<2)&858993459,v=(v|v<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,v|e<<1}function fv(v){let e=v,r=v;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==v);return r}function ki(v,e,r,t,a,l,c,n){return(a-c)*(e-n)-(v-c)*(l-n)>=0&&(v-c)*(t-n)-(r-c)*(e-n)>=0&&(r-c)*(l-n)-(a-c)*(t-n)>=0}function pv(v,e){return v.next.i!==e.i&&v.prev.i!==e.i&&!mv(v,e)&&(Ls(v,e)&&Ls(e,v)&&gv(v,e)&&(Qt(v.prev,v,e.prev)||Qt(v,e.prev,e))||Bo(v,e)&&Qt(v.prev,v,v.next)>0&&Qt(e.prev,e,e.next)>0)}function Qt(v,e,r){return(e.y-v.y)*(r.x-e.x)-(e.x-v.x)*(r.y-e.y)}function Bo(v,e){return v.x===e.x&&v.y===e.y}function Nh(v,e,r,t){const a=bo(Qt(v,e,r)),l=bo(Qt(v,e,t)),c=bo(Qt(r,t,v)),n=bo(Qt(r,t,e));return!!(a!==l&&c!==n||a===0&&vo(v,r,e)||l===0&&vo(v,t,e)||c===0&&vo(r,v,t)||n===0&&vo(r,e,t))}function vo(v,e,r){return e.x<=Math.max(v.x,r.x)&&e.x>=Math.min(v.x,r.x)&&e.y<=Math.max(v.y,r.y)&&e.y>=Math.min(v.y,r.y)}function bo(v){return v>0?1:v<0?-1:0}function mv(v,e){let r=v;do{if(r.i!==v.i&&r.next.i!==v.i&&r.i!==e.i&&r.next.i!==e.i&&Nh(r,r.next,v,e))return!0;r=r.next}while(r!==v);return!1}function Ls(v,e){return Qt(v.prev,v,v.next)<0?Qt(v,e,v.next)>=0&&Qt(v,v.prev,e)>=0:Qt(v,e,v.prev)<0||Qt(v,v.next,e)<0}function gv(v,e){let r=v,t=!1;const a=(v.x+e.x)/2,l=(v.y+e.y)/2;do r.y>l!=r.next.y>l&&r.next.y!==r.y&&a<(r.next.x-r.x)*(l-r.y)/(r.next.y-r.y)+r.x&&(t=!t),r=r.next;while(r!==v);return t}function Fh(v,e){const r=new Ka(v.i,v.x,v.y),t=new Ka(e.i,e.x,e.y),a=v.next,l=e.prev;return v.next=e,e.prev=v,r.next=a,a.prev=r,t.next=r,r.prev=t,l.next=t,t.prev=l,t}function Uc(v,e,r,t){const a=new Ka(v,e,r);return t?(a.next=t.next,a.prev=t,t.next.prev=a,t.next=a):(a.prev=a,a.next=a),a}function Cs(v){v.next.prev=v.prev,v.prev.next=v.next,v.prevZ&&(v.prevZ.nextZ=v.nextZ),v.nextZ&&(v.nextZ.prevZ=v.prevZ)}function Ka(v,e,r){this.i=v,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yv(v,e,r,t){let a=0;for(let l=e,c=r-t;l<r;l+=t)a+=(v[c]-v[l])*(v[l+1]+v[c+1]),c=l;return a}class kn{static area(e){const r=e.length;let t=0;for(let a=r-1,l=0;l<r;a=l++)t+=e[a].x*e[l].y-e[l].x*e[a].y;return t*.5}static isClockWise(e){return kn.area(e)<0}static triangulateShape(e,r){const t=[],a=[],l=[];Bc(e),Gc(t,e);let c=e.length;r.forEach(Bc);for(let f=0;f<r.length;f++)a.push(c),c+=r[f].length,Gc(t,r[f]);const n=tv.triangulate(t,a);for(let f=0;f<n.length;f+=3)l.push(n.slice(f,f+3));return l}}function Bc(v){const e=v.length;e>2&&v[e-1].equals(v[0])&&v.pop()}function Gc(v,e){for(let r=0;r<e.length;r++)v.push(e[r].x),v.push(e[r].y)}class Qi extends Zt{constructor(e=new js([new tt(.5,.5),new tt(-.5,.5),new tt(-.5,-.5),new tt(.5,-.5)]),r={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:r},e=Array.isArray(e)?e:[e];const t=this,a=[],l=[];for(let n=0,f=e.length;n<f;n++){const h=e[n];c(h)}this.setAttribute("position",new hr(a,3)),this.setAttribute("uv",new hr(l,2)),this.computeVertexNormals();function c(n){const f=[],h=r.curveSegments!==void 0?r.curveSegments:12,m=r.steps!==void 0?r.steps:1;let p=r.depth!==void 0?r.depth:1,s=r.bevelEnabled!==void 0?r.bevelEnabled:!0,i=r.bevelThickness!==void 0?r.bevelThickness:.2,o=r.bevelSize!==void 0?r.bevelSize:i-.1,d=r.bevelOffset!==void 0?r.bevelOffset:0,u=r.bevelSegments!==void 0?r.bevelSegments:3;const g=r.extrudePath,b=r.UVGenerator!==void 0?r.UVGenerator:vv;r.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),p=r.amount);let _,w=!1,S,T,L,A;g&&(_=g.getSpacedPoints(m),w=!0,s=!1,S=g.computeFrenetFrames(m,!1),T=new Me,L=new Me,A=new Me),s||(u=0,i=0,o=0,d=0);const P=n.extractPoints(h);let R=P.shape;const D=P.holes;if(!kn.isClockWise(R)){R=R.reverse();for(let $=0,X=D.length;$<X;$++){const ye=D[$];kn.isClockWise(ye)&&(D[$]=ye.reverse())}}const I=kn.triangulateShape(R,D),k=R;for(let $=0,X=D.length;$<X;$++){const ye=D[$];R=R.concat(ye)}function U($,X,ye){return X||console.error("THREE.ExtrudeGeometry: vec does not exist"),X.clone().multiplyScalar(ye).add($)}const q=R.length,Q=I.length;function W($,X,ye){let ne,pe,ve;const he=$.x-X.x,Ae=$.y-X.y,Oe=ye.x-$.x,Ie=ye.y-$.y,ie=he*he+Ae*Ae,ee=he*Ie-Ae*Oe;if(Math.abs(ee)>Number.EPSILON){const Le=Math.sqrt(ie),De=Math.sqrt(Oe*Oe+Ie*Ie),Ze=X.x-Ae/Le,Ce=X.y+he/Le,je=ye.x-Ie/De,Ee=ye.y+Oe/De,qe=((je-Ze)*Ie-(Ee-Ce)*Oe)/(he*Ie-Ae*Oe);ne=Ze+he*qe-$.x,pe=Ce+Ae*qe-$.y;const be=ne*ne+pe*pe;if(be<=2)return new tt(ne,pe);ve=Math.sqrt(be/2)}else{let Le=!1;he>Number.EPSILON?Oe>Number.EPSILON&&(Le=!0):he<-Number.EPSILON?Oe<-Number.EPSILON&&(Le=!0):Math.sign(Ae)===Math.sign(Ie)&&(Le=!0),Le?(ne=-Ae,pe=he,ve=Math.sqrt(ie)):(ne=he,pe=Ae,ve=Math.sqrt(ie/2))}return new tt(ne/ve,pe/ve)}const K=[];for(let $=0,X=k.length,ye=X-1,ne=$+1;$<X;$++,ye++,ne++)ye===X&&(ye=0),ne===X&&(ne=0),K[$]=W(k[$],k[ye],k[ne]);const Y=[];let se,ue=K.concat();for(let $=0,X=D.length;$<X;$++){const ye=D[$];se=[];for(let ne=0,pe=ye.length,ve=pe-1,he=ne+1;ne<pe;ne++,ve++,he++)ve===pe&&(ve=0),he===pe&&(he=0),se[ne]=W(ye[ne],ye[ve],ye[he]);Y.push(se),ue=ue.concat(se)}for(let $=0;$<u;$++){const X=$/u,ye=i*Math.cos(X*Math.PI/2),ne=o*Math.sin(X*Math.PI/2)+d;for(let pe=0,ve=k.length;pe<ve;pe++){const he=U(k[pe],K[pe],ne);we(he.x,he.y,-ye)}for(let pe=0,ve=D.length;pe<ve;pe++){const he=D[pe];se=Y[pe];for(let Ae=0,Oe=he.length;Ae<Oe;Ae++){const Ie=U(he[Ae],se[Ae],ne);we(Ie.x,Ie.y,-ye)}}}const ge=o+d;for(let $=0;$<q;$++){const X=s?U(R[$],ue[$],ge):R[$];w?(L.copy(S.normals[0]).multiplyScalar(X.x),T.copy(S.binormals[0]).multiplyScalar(X.y),A.copy(_[0]).add(L).add(T),we(A.x,A.y,A.z)):we(X.x,X.y,0)}for(let $=1;$<=m;$++)for(let X=0;X<q;X++){const ye=s?U(R[X],ue[X],ge):R[X];w?(L.copy(S.normals[$]).multiplyScalar(ye.x),T.copy(S.binormals[$]).multiplyScalar(ye.y),A.copy(_[$]).add(L).add(T),we(A.x,A.y,A.z)):we(ye.x,ye.y,p/m*$)}for(let $=u-1;$>=0;$--){const X=$/u,ye=i*Math.cos(X*Math.PI/2),ne=o*Math.sin(X*Math.PI/2)+d;for(let pe=0,ve=k.length;pe<ve;pe++){const he=U(k[pe],K[pe],ne);we(he.x,he.y,p+ye)}for(let pe=0,ve=D.length;pe<ve;pe++){const he=D[pe];se=Y[pe];for(let Ae=0,Oe=he.length;Ae<Oe;Ae++){const Ie=U(he[Ae],se[Ae],ne);w?we(Ie.x,Ie.y+_[m-1].y,_[m-1].x+ye):we(Ie.x,Ie.y,p+ye)}}}de(),Pe();function de(){const $=a.length/3;if(s){let X=0,ye=q*X;for(let ne=0;ne<Q;ne++){const pe=I[ne];j(pe[2]+ye,pe[1]+ye,pe[0]+ye)}X=m+u*2,ye=q*X;for(let ne=0;ne<Q;ne++){const pe=I[ne];j(pe[0]+ye,pe[1]+ye,pe[2]+ye)}}else{for(let X=0;X<Q;X++){const ye=I[X];j(ye[2],ye[1],ye[0])}for(let X=0;X<Q;X++){const ye=I[X];j(ye[0]+q*m,ye[1]+q*m,ye[2]+q*m)}}t.addGroup($,a.length/3-$,0)}function Pe(){const $=a.length/3;let X=0;ae(k,X),X+=k.length;for(let ye=0,ne=D.length;ye<ne;ye++){const pe=D[ye];ae(pe,X),X+=pe.length}t.addGroup($,a.length/3-$,1)}function ae($,X){let ye=$.length;for(;--ye>=0;){const ne=ye;let pe=ye-1;pe<0&&(pe=$.length-1);for(let ve=0,he=m+u*2;ve<he;ve++){const Ae=q*ve,Oe=q*(ve+1),Ie=X+ne+Ae,ie=X+pe+Ae,ee=X+pe+Oe,Le=X+ne+Oe;B(Ie,ie,ee,Le)}}}function we($,X,ye){f.push($),f.push(X),f.push(ye)}function j($,X,ye){V($),V(X),V(ye);const ne=a.length/3,pe=b.generateTopUV(t,a,ne-3,ne-2,ne-1);te(pe[0]),te(pe[1]),te(pe[2])}function B($,X,ye,ne){V($),V(X),V(ne),V(X),V(ye),V(ne);const pe=a.length/3,ve=b.generateSideWallUV(t,a,pe-6,pe-3,pe-2,pe-1);te(ve[0]),te(ve[1]),te(ve[3]),te(ve[1]),te(ve[2]),te(ve[3])}function V($){a.push(f[$*3+0]),a.push(f[$*3+1]),a.push(f[$*3+2])}function te($){l.push($.x),l.push($.y)}}}toJSON(){const e=super.toJSON(),r=this.parameters.shapes,t=this.parameters.options;return bv(r,t,e)}static fromJSON(e,r){const t=[];for(let l=0,c=e.shapes.length;l<c;l++){const n=r[e.shapes[l]];t.push(n)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new Oh[a.type]().fromJSON(a)),new Qi(t,e.options)}}const vv={generateTopUV:function(v,e,r,t,a){const l=e[r*3],c=e[r*3+1],n=e[t*3],f=e[t*3+1],h=e[a*3],m=e[a*3+1];return[new tt(l,c),new tt(n,f),new tt(h,m)]},generateSideWallUV:function(v,e,r,t,a,l){const c=e[r*3],n=e[r*3+1],f=e[r*3+2],h=e[t*3],m=e[t*3+1],p=e[t*3+2],s=e[a*3],i=e[a*3+1],o=e[a*3+2],d=e[l*3],u=e[l*3+1],g=e[l*3+2];return Math.abs(n-m)<Math.abs(c-h)?[new tt(c,1-f),new tt(h,1-p),new tt(s,1-o),new tt(d,1-g)]:[new tt(n,1-f),new tt(m,1-p),new tt(i,1-o),new tt(u,1-g)]}};function bv(v,e,r){if(r.shapes=[],Array.isArray(v))for(let t=0,a=v.length;t<a;t++){const l=v[t];r.shapes.push(l.uuid)}else r.shapes.push(v.uuid);return e.extrudePath!==void 0&&(r.options.extrudePath=e.extrudePath.toJSON()),r}class xl extends Zt{constructor(e=new js([new tt(0,.5),new tt(-.5,-.5),new tt(.5,-.5)]),r=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:r};const t=[],a=[],l=[],c=[];let n=0,f=0;if(Array.isArray(e)===!1)h(e);else for(let m=0;m<e.length;m++)h(e[m]),this.addGroup(n,f,m),n+=f,f=0;this.setIndex(t),this.setAttribute("position",new hr(a,3)),this.setAttribute("normal",new hr(l,3)),this.setAttribute("uv",new hr(c,2));function h(m){const p=a.length/3,s=m.extractPoints(r);let i=s.shape;const o=s.holes;kn.isClockWise(i)===!1&&(i=i.reverse());for(let u=0,g=o.length;u<g;u++){const b=o[u];kn.isClockWise(b)===!0&&(o[u]=b.reverse())}const d=kn.triangulateShape(i,o);for(let u=0,g=o.length;u<g;u++){const b=o[u];i=i.concat(b)}for(let u=0,g=i.length;u<g;u++){const b=i[u];a.push(b.x,b.y,0),l.push(0,0,1),c.push(b.x,b.y)}for(let u=0,g=d.length;u<g;u++){const b=d[u],_=b[0]+p,w=b[1]+p,S=b[2]+p;t.push(_,w,S),f+=3}}}toJSON(){const e=super.toJSON(),r=this.parameters.shapes;return _v(r,e)}static fromJSON(e,r){const t=[];for(let a=0,l=e.shapes.length;a<l;a++){const c=r[e.shapes[a]];t.push(c)}return new xl(t,e.curveSegments)}}function _v(v,e){if(e.shapes=[],Array.isArray(v))for(let r=0,t=v.length;r<t;r++){const a=v[r];e.shapes.push(a.uuid)}else e.shapes.push(v.uuid);return e}class Uh extends er{constructor(e){super(),this.type="ShadowMaterial",this.color=new at(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}Uh.prototype.isShadowMaterial=!0;class Bh extends Xr{constructor(e){super(e),this.type="RawShaderMaterial"}}Bh.prototype.isRawShaderMaterial=!0;class $i extends er{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new at(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ni,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}$i.prototype.isMeshStandardMaterial=!0;class Bn extends $i{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new tt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return mr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.sheenColor=new at(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new at(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new at(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}Bn.prototype.isMeshPhysicalMaterial=!0;class Gh extends er{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new at(16777215),this.specular=new at(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ni,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Lo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}Gh.prototype.isMeshPhongMaterial=!0;class zh extends er{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new at(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ni,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}zh.prototype.isMeshToonMaterial=!0;class Vh extends er{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ni,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}Vh.prototype.isMeshNormalMaterial=!0;class Hh extends er{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Lo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}Hh.prototype.isMeshLambertMaterial=!0;class Wh extends er{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new at(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ni,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}Wh.prototype.isMeshMatcapMaterial=!0;class qh extends li{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}qh.prototype.isLineDashedMaterial=!0;const xv={ShadowMaterial:Uh,SpriteMaterial:fl,RawShaderMaterial:Bh,ShaderMaterial:Xr,PointsMaterial:No,MeshPhysicalMaterial:Bn,MeshStandardMaterial:$i,MeshPhongMaterial:Gh,MeshToonMaterial:zh,MeshNormalMaterial:Vh,MeshLambertMaterial:Hh,MeshDepthMaterial:cl,MeshDistanceMaterial:hl,MeshBasicMaterial:gn,MeshMatcapMaterial:Wh,LineDashedMaterial:qh,LineBasicMaterial:li,Material:er};er.fromType=function(v){return new xv[v]};const Jt={arraySlice:function(v,e,r){return Jt.isTypedArray(v)?new v.constructor(v.subarray(e,r!==void 0?r:v.length)):v.slice(e,r)},convertArray:function(v,e,r){return!v||!r&&v.constructor===e?v:typeof e.BYTES_PER_ELEMENT=="number"?new e(v):Array.prototype.slice.call(v)},isTypedArray:function(v){return ArrayBuffer.isView(v)&&!(v instanceof DataView)},getKeyframeOrder:function(v){function e(a,l){return v[a]-v[l]}const r=v.length,t=new Array(r);for(let a=0;a!==r;++a)t[a]=a;return t.sort(e),t},sortedArray:function(v,e,r){const t=v.length,a=new v.constructor(t);for(let l=0,c=0;c!==t;++l){const n=r[l]*e;for(let f=0;f!==e;++f)a[c++]=v[n+f]}return a},flattenJSON:function(v,e,r,t){let a=1,l=v[0];for(;l!==void 0&&l[t]===void 0;)l=v[a++];if(l===void 0)return;let c=l[t];if(c!==void 0)if(Array.isArray(c))do c=l[t],c!==void 0&&(e.push(l.time),r.push.apply(r,c)),l=v[a++];while(l!==void 0);else if(c.toArray!==void 0)do c=l[t],c!==void 0&&(e.push(l.time),c.toArray(r,r.length)),l=v[a++];while(l!==void 0);else do c=l[t],c!==void 0&&(e.push(l.time),r.push(c)),l=v[a++];while(l!==void 0)},subclip:function(v,e,r,t,a=30){const l=v.clone();l.name=e;const c=[];for(let f=0;f<l.tracks.length;++f){const h=l.tracks[f],m=h.getValueSize(),p=[],s=[];for(let i=0;i<h.times.length;++i){const o=h.times[i]*a;if(!(o<r||o>=t)){p.push(h.times[i]);for(let d=0;d<m;++d)s.push(h.values[i*m+d])}}p.length!==0&&(h.times=Jt.convertArray(p,h.times.constructor),h.values=Jt.convertArray(s,h.values.constructor),c.push(h))}l.tracks=c;let n=1/0;for(let f=0;f<l.tracks.length;++f)n>l.tracks[f].times[0]&&(n=l.tracks[f].times[0]);for(let f=0;f<l.tracks.length;++f)l.tracks[f].shift(-1*n);return l.resetDuration(),l},makeClipAdditive:function(v,e=0,r=v,t=30){t<=0&&(t=30);const a=r.tracks.length,l=e/t;for(let c=0;c<a;++c){const n=r.tracks[c],f=n.ValueTypeName;if(f==="bool"||f==="string")continue;const h=v.tracks.find(function(g){return g.name===n.name&&g.ValueTypeName===f});if(h===void 0)continue;let m=0;const p=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=p/3);let s=0;const i=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=i/3);const o=n.times.length-1;let d;if(l<=n.times[0]){const g=m,b=p-m;d=Jt.arraySlice(n.values,g,b)}else if(l>=n.times[o]){const g=o*p+m,b=g+p-m;d=Jt.arraySlice(n.values,g,b)}else{const g=n.createInterpolant(),b=m,_=p-m;g.evaluate(l),d=Jt.arraySlice(g.resultBuffer,b,_)}f==="quaternion"&&new wr().fromArray(d).normalize().conjugate().toArray(d);const u=h.times.length;for(let g=0;g<u;++g){const b=g*i+s;if(f==="quaternion")wr.multiplyQuaternionsFlat(h.values,b,d,0,h.values,b);else{const _=i-s*2;for(let w=0;w<_;++w)h.values[b+w]-=d[w]}}}return v.blendMode=lh,v}};class vn{constructor(e,r,t,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new r.constructor(t),this.sampleValues=r,this.valueSize=t,this.settings=null,this.DefaultSettings_={}}evaluate(e){const r=this.parameterPositions;let t=this._cachedIndex,a=r[t],l=r[t-1];e:{t:{let c;r:{n:if(!(e<a)){for(let n=t+2;;){if(a===void 0){if(e<l)break n;return t=r.length,this._cachedIndex=t,this.afterEnd_(t-1,e,l)}if(t===n)break;if(l=a,a=r[++t],e<a)break t}c=r.length;break r}if(!(e>=l)){const n=r[1];e<n&&(t=2,l=n);for(let f=t-2;;){if(l===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,a);if(t===f)break;if(a=l,l=r[--t-1],e>=l)break t}c=t,t=0;break r}break e}for(;t<c;){const n=t+c>>>1;e<r[n]?c=n:t=n+1}if(a=r[t],l=r[t-1],l===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,a);if(a===void 0)return t=r.length,this._cachedIndex=t,this.afterEnd_(t-1,l,e)}this._cachedIndex=t,this.intervalChanged_(t,l,a)}return this.interpolate_(t,l,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const r=this.resultBuffer,t=this.sampleValues,a=this.valueSize,l=e*a;for(let c=0;c!==a;++c)r[c]=t[l+c];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}vn.prototype.beforeStart_=vn.prototype.copySampleValue_;vn.prototype.afterEnd_=vn.prototype.copySampleValue_;class wv extends vn{constructor(e,r,t,a){super(e,r,t,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ii,endingEnd:Ii}}intervalChanged_(e,r,t){const a=this.parameterPositions;let l=e-2,c=e+1,n=a[l],f=a[c];if(n===void 0)switch(this.getSettings_().endingStart){case ji:l=e,n=2*r-t;break;case To:l=a.length-2,n=r+a[l]-a[l+1];break;default:l=e,n=t}if(f===void 0)switch(this.getSettings_().endingEnd){case ji:c=e,f=2*t-r;break;case To:c=1,f=t+a[1]-a[0];break;default:c=e-1,f=r}const h=(t-r)*.5,m=this.valueSize;this._weightPrev=h/(r-n),this._weightNext=h/(f-t),this._offsetPrev=l*m,this._offsetNext=c*m}interpolate_(e,r,t,a){const l=this.resultBuffer,c=this.sampleValues,n=this.valueSize,f=e*n,h=f-n,m=this._offsetPrev,p=this._offsetNext,s=this._weightPrev,i=this._weightNext,o=(t-r)/(a-r),d=o*o,u=d*o,g=-s*u+2*s*d-s*o,b=(1+s)*u+(-1.5-2*s)*d+(-.5+s)*o+1,_=(-1-i)*u+(1.5+i)*d+.5*o,w=i*u-i*d;for(let S=0;S!==n;++S)l[S]=g*c[m+S]+b*c[h+S]+_*c[f+S]+w*c[p+S];return l}}class Xh extends vn{constructor(e,r,t,a){super(e,r,t,a)}interpolate_(e,r,t,a){const l=this.resultBuffer,c=this.sampleValues,n=this.valueSize,f=e*n,h=f-n,m=(t-r)/(a-r),p=1-m;for(let s=0;s!==n;++s)l[s]=c[h+s]*p+c[f+s]*m;return l}}class Sv extends vn{constructor(e,r,t,a){super(e,r,t,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class tn{constructor(e,r,t,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(r===void 0||r.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jt.convertArray(r,this.TimeBufferType),this.values=Jt.convertArray(t,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const r=e.constructor;let t;if(r.toJSON!==this.toJSON)t=r.toJSON(e);else{t={name:e.name,times:Jt.convertArray(e.times,Array),values:Jt.convertArray(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(t.interpolation=a)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new Sv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Xh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new wv(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let r;switch(e){case Ss:r=this.InterpolantFactoryMethodDiscrete;break;case Hi:r=this.InterpolantFactoryMethodLinear;break;case ra:r=this.InterpolantFactoryMethodSmooth;break}if(r===void 0){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(t);return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ss;case this.InterpolantFactoryMethodLinear:return Hi;case this.InterpolantFactoryMethodSmooth:return ra}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const r=this.times;for(let t=0,a=r.length;t!==a;++t)r[t]+=e}return this}scale(e){if(e!==1){const r=this.times;for(let t=0,a=r.length;t!==a;++t)r[t]*=e}return this}trim(e,r){const t=this.times,a=t.length;let l=0,c=a-1;for(;l!==a&&t[l]<e;)++l;for(;c!==-1&&t[c]>r;)--c;if(++c,l!==0||c!==a){l>=c&&(c=Math.max(c,1),l=c-1);const n=this.getValueSize();this.times=Jt.arraySlice(t,l,c),this.values=Jt.arraySlice(this.values,l*n,c*n)}return this}validate(){let e=!0;const r=this.getValueSize();r-Math.floor(r)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const t=this.times,a=this.values,l=t.length;l===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let c=null;for(let n=0;n!==l;n++){const f=t[n];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,n,f),e=!1;break}if(c!==null&&c>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,n,f,c),e=!1;break}c=f}if(a!==void 0&&Jt.isTypedArray(a))for(let n=0,f=a.length;n!==f;++n){const h=a[n];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,n,h),e=!1;break}}return e}optimize(){const e=Jt.arraySlice(this.times),r=Jt.arraySlice(this.values),t=this.getValueSize(),a=this.getInterpolation()===ra,l=e.length-1;let c=1;for(let n=1;n<l;++n){let f=!1;const h=e[n],m=e[n+1];if(h!==m&&(n!==1||h!==e[0]))if(a)f=!0;else{const p=n*t,s=p-t,i=p+t;for(let o=0;o!==t;++o){const d=r[p+o];if(d!==r[s+o]||d!==r[i+o]){f=!0;break}}}if(f){if(n!==c){e[c]=e[n];const p=n*t,s=c*t;for(let i=0;i!==t;++i)r[s+i]=r[p+i]}++c}}if(l>0){e[c]=e[l];for(let n=l*t,f=c*t,h=0;h!==t;++h)r[f+h]=r[n+h];++c}return c!==e.length?(this.times=Jt.arraySlice(e,0,c),this.values=Jt.arraySlice(r,0,c*t)):(this.times=e,this.values=r),this}clone(){const e=Jt.arraySlice(this.times,0),r=Jt.arraySlice(this.values,0),t=this.constructor,a=new t(this.name,e,r);return a.createInterpolant=this.createInterpolant,a}}tn.prototype.TimeBufferType=Float32Array;tn.prototype.ValueBufferType=Float32Array;tn.prototype.DefaultInterpolation=Hi;class es extends tn{}es.prototype.ValueTypeName="bool";es.prototype.ValueBufferType=Array;es.prototype.DefaultInterpolation=Ss;es.prototype.InterpolantFactoryMethodLinear=void 0;es.prototype.InterpolantFactoryMethodSmooth=void 0;class Yh extends tn{}Yh.prototype.ValueTypeName="color";class Rs extends tn{}Rs.prototype.ValueTypeName="number";class Mv extends vn{constructor(e,r,t,a){super(e,r,t,a)}interpolate_(e,r,t,a){const l=this.resultBuffer,c=this.sampleValues,n=this.valueSize,f=(t-r)/(a-r);let h=e*n;for(let m=h+n;h!==m;h+=4)wr.slerpFlat(l,0,c,h-n,c,h,f);return l}}class ti extends tn{InterpolantFactoryMethodLinear(e){return new Mv(this.times,this.values,this.getValueSize(),e)}}ti.prototype.ValueTypeName="quaternion";ti.prototype.DefaultInterpolation=Hi;ti.prototype.InterpolantFactoryMethodSmooth=void 0;class ts extends tn{}ts.prototype.ValueTypeName="string";ts.prototype.ValueBufferType=Array;ts.prototype.DefaultInterpolation=Ss;ts.prototype.InterpolantFactoryMethodLinear=void 0;ts.prototype.InterpolantFactoryMethodSmooth=void 0;class Ps extends tn{}Ps.prototype.ValueTypeName="vector";class Ja{constructor(e,r=-1,t,a=rl){this.name=e,this.tracks=t,this.duration=r,this.blendMode=a,this.uuid=Ir(),this.duration<0&&this.resetDuration()}static parse(e){const r=[],t=e.tracks,a=1/(e.fps||1);for(let c=0,n=t.length;c!==n;++c)r.push(Ev(t[c]).scale(a));const l=new this(e.name,e.duration,r,e.blendMode);return l.uuid=e.uuid,l}static toJSON(e){const r=[],t=e.tracks,a={name:e.name,duration:e.duration,tracks:r,uuid:e.uuid,blendMode:e.blendMode};for(let l=0,c=t.length;l!==c;++l)r.push(tn.toJSON(t[l]));return a}static CreateFromMorphTargetSequence(e,r,t,a){const l=r.length,c=[];for(let n=0;n<l;n++){let f=[],h=[];f.push((n+l-1)%l,n,(n+1)%l),h.push(0,1,0);const m=Jt.getKeyframeOrder(f);f=Jt.sortedArray(f,1,m),h=Jt.sortedArray(h,1,m),!a&&f[0]===0&&(f.push(l),h.push(h[0])),c.push(new Rs(".morphTargetInfluences["+r[n].name+"]",f,h).scale(1/t))}return new this(e,-1,c)}static findByName(e,r){let t=e;if(!Array.isArray(e)){const a=e;t=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<t.length;a++)if(t[a].name===r)return t[a];return null}static CreateClipsFromMorphTargetSequences(e,r,t){const a={},l=/^([\w-]*?)([\d]+)$/;for(let n=0,f=e.length;n<f;n++){const h=e[n],m=h.name.match(l);if(m&&m.length>1){const p=m[1];let s=a[p];s||(a[p]=s=[]),s.push(h)}}const c=[];for(const n in a)c.push(this.CreateFromMorphTargetSequence(n,a[n],r,t));return c}static parseAnimation(e,r){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const t=function(p,s,i,o,d){if(i.length!==0){const u=[],g=[];Jt.flattenJSON(i,u,g,o),u.length!==0&&d.push(new p(s,u,g))}},a=[],l=e.name||"default",c=e.fps||30,n=e.blendMode;let f=e.length||-1;const h=e.hierarchy||[];for(let p=0;p<h.length;p++){const s=h[p].keys;if(!(!s||s.length===0))if(s[0].morphTargets){const i={};let o;for(o=0;o<s.length;o++)if(s[o].morphTargets)for(let d=0;d<s[o].morphTargets.length;d++)i[s[o].morphTargets[d]]=-1;for(const d in i){const u=[],g=[];for(let b=0;b!==s[o].morphTargets.length;++b){const _=s[o];u.push(_.time),g.push(_.morphTarget===d?1:0)}a.push(new Rs(".morphTargetInfluence["+d+"]",u,g))}f=i.length*c}else{const i=".bones["+r[p].name+"]";t(Ps,i+".position",s,"pos",a),t(ti,i+".quaternion",s,"rot",a),t(Ps,i+".scale",s,"scl",a)}}return a.length===0?null:new this(l,f,a,n)}resetDuration(){const e=this.tracks;let r=0;for(let t=0,a=e.length;t!==a;++t){const l=this.tracks[t];r=Math.max(r,l.times[l.times.length-1])}return this.duration=r,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let r=0;r<this.tracks.length;r++)e=e&&this.tracks[r].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Tv(v){switch(v.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Rs;case"vector":case"vector2":case"vector3":case"vector4":return Ps;case"color":return Yh;case"quaternion":return ti;case"bool":case"boolean":return es;case"string":return ts}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+v)}function Ev(v){if(v.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Tv(v.type);if(v.times===void 0){const r=[],t=[];Jt.flattenJSON(v.keys,r,t,"value"),v.times=r,v.values=t}return e.parse!==void 0?e.parse(v):new e(v.name,v.times,v.values,v.interpolation)}const Xi={enabled:!1,files:{},add:function(v,e){this.enabled!==!1&&(this.files[v]=e)},get:function(v){if(this.enabled!==!1)return this.files[v]},remove:function(v){delete this.files[v]},clear:function(){this.files={}}};class Av{constructor(e,r,t){const a=this;let l=!1,c=0,n=0,f;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=r,this.onError=t,this.itemStart=function(m){n++,l===!1&&a.onStart!==void 0&&a.onStart(m,c,n),l=!0},this.itemEnd=function(m){c++,a.onProgress!==void 0&&a.onProgress(m,c,n),c===n&&(l=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(m){a.onError!==void 0&&a.onError(m)},this.resolveURL=function(m){return f?f(m):m},this.setURLModifier=function(m){return f=m,this},this.addHandler=function(m,p){return h.push(m,p),this},this.removeHandler=function(m){const p=h.indexOf(m);return p!==-1&&h.splice(p,2),this},this.getHandler=function(m){for(let p=0,s=h.length;p<s;p+=2){const i=h[p],o=h[p+1];if(i.global&&(i.lastIndex=0),i.test(m))return o}return null}}}const Lv=new Av;class bn{constructor(e){this.manager=e!==void 0?e:Lv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,r){const t=this;return new Promise(function(a,l){t.load(e,a,r,l)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const dn={};class wl extends bn{constructor(e){super(e)}load(e,r,t,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=Xi.get(e);if(l!==void 0)return this.manager.itemStart(e),setTimeout(()=>{r&&r(l),this.manager.itemEnd(e)},0),l;if(dn[e]!==void 0){dn[e].push({onLoad:r,onProgress:t,onError:a});return}dn[e]=[],dn[e].push({onLoad:r,onProgress:t,onError:a});const c=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),n=this.mimeType,f=this.responseType;fetch(c).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||h.body===void 0||h.body.getReader===void 0)return h;const m=dn[e],p=h.body.getReader(),s=h.headers.get("Content-Length"),i=s?parseInt(s):0,o=i!==0;let d=0;const u=new ReadableStream({start(g){b();function b(){p.read().then(({done:_,value:w})=>{if(_)g.close();else{d+=w.byteLength;const S=new ProgressEvent("progress",{lengthComputable:o,loaded:d,total:i});for(let T=0,L=m.length;T<L;T++){const A=m[T];A.onProgress&&A.onProgress(S)}g.enqueue(w),b()}})}}});return new Response(u)}else throw Error(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`)}).then(h=>{switch(f){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(m=>new DOMParser().parseFromString(m,n));case"json":return h.json();default:if(n===void 0)return h.text();{const p=/charset="?([^;"\s]*)"?/i.exec(n),s=p&&p[1]?p[1].toLowerCase():void 0,i=new TextDecoder(s);return h.arrayBuffer().then(o=>i.decode(o))}}}).then(h=>{Xi.add(e,h);const m=dn[e];delete dn[e];for(let p=0,s=m.length;p<s;p++){const i=m[p];i.onLoad&&i.onLoad(h)}}).catch(h=>{const m=dn[e];if(m===void 0)throw this.manager.itemError(e),h;delete dn[e];for(let p=0,s=m.length;p<s;p++){const i=m[p];i.onError&&i.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Zh extends bn{constructor(e){super(e)}load(e,r,t,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,c=Xi.get(e);if(c!==void 0)return l.manager.itemStart(e),setTimeout(function(){r&&r(c),l.manager.itemEnd(e)},0),c;const n=Es("img");function f(){m(),Xi.add(e,this),r&&r(this),l.manager.itemEnd(e)}function h(p){m(),a&&a(p),l.manager.itemError(e),l.manager.itemEnd(e)}function m(){n.removeEventListener("load",f,!1),n.removeEventListener("error",h,!1)}return n.addEventListener("load",f,!1),n.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(n.crossOrigin=this.crossOrigin),l.manager.itemStart(e),n.src=e,n}}class Cv extends bn{constructor(e){super(e)}load(e,r,t,a){const l=new Po,c=new Zh(this.manager);c.setCrossOrigin(this.crossOrigin),c.setPath(this.path);let n=0;function f(h){c.load(e[h],function(m){l.images[h]=m,n++,n===6&&(l.needsUpdate=!0,r&&r(l))},void 0,a)}for(let h=0;h<e.length;++h)f(h);return l}}class Kh extends bn{constructor(e){super(e)}load(e,r,t,a){const l=new ar,c=new Zh(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(e,function(n){l.image=n,l.needsUpdate=!0,r!==void 0&&r(l)},t,a),l}}class en extends Bt{constructor(e,r=1){super(),this.type="Light",this.color=new at(e),this.intensity=r}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const r=super.toJSON(e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),r}}en.prototype.isLight=!0;class Rv extends en{constructor(e,r,t){super(e,t),this.type="HemisphereLight",this.position.copy(Bt.DefaultUp),this.updateMatrix(),this.groundColor=new at(r)}copy(e){return en.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Rv.prototype.isHemisphereLight=!0;const zc=new pt,Vc=new Me,Hc=new Me;class Sl{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tt(512,512),this.map=null,this.mapPass=null,this.matrix=new pt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Do,this._frameExtents=new tt(1,1),this._viewportCount=1,this._viewports=[new Vt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const r=this.camera,t=this.matrix;Vc.setFromMatrixPosition(e.matrixWorld),r.position.copy(Vc),Hc.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(Hc),r.updateMatrixWorld(),zc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zc),t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(r.projectionMatrix),t.multiply(r.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Jh extends Sl{constructor(){super(new br(50,1,.5,500)),this.focus=1}updateMatrices(e){const r=this.camera,t=Ts*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,l=e.distance||r.far;(t!==r.fov||a!==r.aspect||l!==r.far)&&(r.fov=t,r.aspect=a,r.far=l,r.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Jh.prototype.isSpotLightShadow=!0;class Qh extends en{constructor(e,r,t=0,a=Math.PI/3,l=0,c=1){super(e,r),this.type="SpotLight",this.position.copy(Bt.DefaultUp),this.updateMatrix(),this.target=new Bt,this.distance=t,this.angle=a,this.penumbra=l,this.decay=c,this.shadow=new Jh}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Qh.prototype.isSpotLight=!0;const Wc=new pt,ds=new Me,Oa=new Me;class $h extends Sl{constructor(){super(new br(90,1,.5,500)),this._frameExtents=new tt(4,2),this._viewportCount=6,this._viewports=[new Vt(2,1,1,1),new Vt(0,1,1,1),new Vt(3,1,1,1),new Vt(1,1,1,1),new Vt(3,0,1,1),new Vt(1,0,1,1)],this._cubeDirections=[new Me(1,0,0),new Me(-1,0,0),new Me(0,0,1),new Me(0,0,-1),new Me(0,1,0),new Me(0,-1,0)],this._cubeUps=[new Me(0,1,0),new Me(0,1,0),new Me(0,1,0),new Me(0,1,0),new Me(0,0,1),new Me(0,0,-1)]}updateMatrices(e,r=0){const t=this.camera,a=this.matrix,l=e.distance||t.far;l!==t.far&&(t.far=l,t.updateProjectionMatrix()),ds.setFromMatrixPosition(e.matrixWorld),t.position.copy(ds),Oa.copy(t.position),Oa.add(this._cubeDirections[r]),t.up.copy(this._cubeUps[r]),t.lookAt(Oa),t.updateMatrixWorld(),a.makeTranslation(-ds.x,-ds.y,-ds.z),Wc.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wc)}}$h.prototype.isPointLightShadow=!0;class Ml extends en{constructor(e,r,t=0,a=1){super(e,r),this.type="PointLight",this.distance=t,this.decay=a,this.shadow=new $h}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Ml.prototype.isPointLight=!0;class ed extends Sl{constructor(){super(new Io(-5,5,5,-5,.5,500))}}ed.prototype.isDirectionalLightShadow=!0;class td extends en{constructor(e,r){super(e,r),this.type="DirectionalLight",this.position.copy(Bt.DefaultUp),this.updateMatrix(),this.target=new Bt,this.shadow=new ed}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}td.prototype.isDirectionalLight=!0;class rd extends en{constructor(e,r){super(e,r),this.type="AmbientLight"}}rd.prototype.isAmbientLight=!0;class Pv extends en{constructor(e,r,t=10,a=10){super(e,r),this.type="RectAreaLight",this.width=t,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const r=super.toJSON(e);return r.object.width=this.width,r.object.height=this.height,r}}Pv.prototype.isRectAreaLight=!0;class nd{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Me)}set(e){for(let r=0;r<9;r++)this.coefficients[r].copy(e[r]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,r){const t=e.x,a=e.y,l=e.z,c=this.coefficients;return r.copy(c[0]).multiplyScalar(.282095),r.addScaledVector(c[1],.488603*a),r.addScaledVector(c[2],.488603*l),r.addScaledVector(c[3],.488603*t),r.addScaledVector(c[4],1.092548*(t*a)),r.addScaledVector(c[5],1.092548*(a*l)),r.addScaledVector(c[6],.315392*(3*l*l-1)),r.addScaledVector(c[7],1.092548*(t*l)),r.addScaledVector(c[8],.546274*(t*t-a*a)),r}getIrradianceAt(e,r){const t=e.x,a=e.y,l=e.z,c=this.coefficients;return r.copy(c[0]).multiplyScalar(.886227),r.addScaledVector(c[1],2*.511664*a),r.addScaledVector(c[2],2*.511664*l),r.addScaledVector(c[3],2*.511664*t),r.addScaledVector(c[4],2*.429043*t*a),r.addScaledVector(c[5],2*.429043*a*l),r.addScaledVector(c[6],.743125*l*l-.247708),r.addScaledVector(c[7],2*.429043*t*l),r.addScaledVector(c[8],.429043*(t*t-a*a)),r}add(e){for(let r=0;r<9;r++)this.coefficients[r].add(e.coefficients[r]);return this}addScaledSH(e,r){for(let t=0;t<9;t++)this.coefficients[t].addScaledVector(e.coefficients[t],r);return this}scale(e){for(let r=0;r<9;r++)this.coefficients[r].multiplyScalar(e);return this}lerp(e,r){for(let t=0;t<9;t++)this.coefficients[t].lerp(e.coefficients[t],r);return this}equals(e){for(let r=0;r<9;r++)if(!this.coefficients[r].equals(e.coefficients[r]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,r=0){const t=this.coefficients;for(let a=0;a<9;a++)t[a].fromArray(e,r+a*3);return this}toArray(e=[],r=0){const t=this.coefficients;for(let a=0;a<9;a++)t[a].toArray(e,r+a*3);return e}static getBasisAt(e,r){const t=e.x,a=e.y,l=e.z;r[0]=.282095,r[1]=.488603*a,r[2]=.488603*l,r[3]=.488603*t,r[4]=1.092548*t*a,r[5]=1.092548*a*l,r[6]=.315392*(3*l*l-1),r[7]=1.092548*t*l,r[8]=.546274*(t*t-a*a)}}nd.prototype.isSphericalHarmonics3=!0;class Tl extends en{constructor(e=new nd,r=1){super(void 0,r),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const r=super.toJSON(e);return r.object.sh=this.sh.toArray(),r}}Tl.prototype.isLightProbe=!0;class Nn{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let r="";for(let t=0,a=e.length;t<a;t++)r+=String.fromCharCode(e[t]);try{return decodeURIComponent(escape(r))}catch{return r}}static extractUrlBase(e){const r=e.lastIndexOf("/");return r===-1?"./":e.slice(0,r+1)}static resolveURL(e,r){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(r)&&/^\//.test(e)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:r+e)}}class Dv extends Zt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}Dv.prototype.isInstancedBufferGeometry=!0;class id extends bn{constructor(e){super(e),typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,r,t,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,c=Xi.get(e);if(c!==void 0)return l.manager.itemStart(e),setTimeout(function(){r&&r(c),l.manager.itemEnd(e)},0),c;const n={};n.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",n.headers=this.requestHeader,fetch(e,n).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(f){Xi.add(e,f),r&&r(f),l.manager.itemEnd(e)}).catch(function(f){a&&a(f),l.manager.itemError(e),l.manager.itemEnd(e)}),l.manager.itemStart(e)}}id.prototype.isImageBitmapLoader=!0;let _o;const Iv={getContext:function(){return _o===void 0&&(_o=new(window.AudioContext||window.webkitAudioContext)),_o},setContext:function(v){_o=v}};class jv extends bn{constructor(e){super(e)}load(e,r,t,a){const l=this,c=new wl(this.manager);c.setResponseType("arraybuffer"),c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(n){try{const f=n.slice(0);Iv.getContext().decodeAudioData(f,function(m){r(m)})}catch(f){a?a(f):console.error(f),l.manager.itemError(e)}},t,a)}}class Ov extends Tl{constructor(e,r,t=1){super(void 0,t);const a=new at().set(e),l=new at().set(r),c=new Me(a.r,a.g,a.b),n=new Me(l.r,l.g,l.b),f=Math.sqrt(Math.PI),h=f*Math.sqrt(.75);this.sh.coefficients[0].copy(c).add(n).multiplyScalar(f),this.sh.coefficients[1].copy(c).sub(n).multiplyScalar(h)}}Ov.prototype.isHemisphereLightProbe=!0;class kv extends Tl{constructor(e,r=1){super(void 0,r);const t=new at().set(e);this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}}kv.prototype.isAmbientLightProbe=!0;class Nv extends Bt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const r=this.context.createBufferSource();return r.buffer=this.buffer,r.loop=this.loop,r.loopStart=this.loopStart,r.loopEnd=this.loopEnd,r.onended=this.onEnded.bind(this),r.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=r,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,r=this.filters.length;e<r;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,r=this.filters.length;e<r;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class Fv{constructor(e,r,t){this.binding=e,this.valueSize=t;let a,l,c;switch(r){case"quaternion":a=this._slerp,l=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(t*6),this._workIndex=5;break;case"string":case"bool":a=this._select,l=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(t*5);break;default:a=this._lerp,l=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(t*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=l,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,r){const t=this.buffer,a=this.valueSize,l=e*a+a;let c=this.cumulativeWeight;if(c===0){for(let n=0;n!==a;++n)t[l+n]=t[n];c=r}else{c+=r;const n=r/c;this._mixBufferRegion(t,l,0,n,a)}this.cumulativeWeight=c}accumulateAdditive(e){const r=this.buffer,t=this.valueSize,a=t*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(r,a,0,e,t),this.cumulativeWeightAdditive+=e}apply(e){const r=this.valueSize,t=this.buffer,a=e*r+r,l=this.cumulativeWeight,c=this.cumulativeWeightAdditive,n=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,l<1){const f=r*this._origIndex;this._mixBufferRegion(t,a,f,1-l,r)}c>0&&this._mixBufferRegionAdditive(t,a,this._addIndex*r,1,r);for(let f=r,h=r+r;f!==h;++f)if(t[f]!==t[f+r]){n.setValue(t,a);break}}saveOriginalState(){const e=this.binding,r=this.buffer,t=this.valueSize,a=t*this._origIndex;e.getValue(r,a);for(let l=t,c=a;l!==c;++l)r[l]=r[a+l%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,r=e+this.valueSize;for(let t=e;t<r;t++)this.buffer[t]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize;for(let t=0;t<this.valueSize;t++)this.buffer[r+t]=this.buffer[e+t]}_select(e,r,t,a,l){if(a>=.5)for(let c=0;c!==l;++c)e[r+c]=e[t+c]}_slerp(e,r,t,a){wr.slerpFlat(e,r,e,r,e,t,a)}_slerpAdditive(e,r,t,a,l){const c=this._workIndex*l;wr.multiplyQuaternionsFlat(e,c,e,r,e,t),wr.slerpFlat(e,r,e,r,e,c,a)}_lerp(e,r,t,a,l){const c=1-a;for(let n=0;n!==l;++n){const f=r+n;e[f]=e[f]*c+e[t+n]*a}}_lerpAdditive(e,r,t,a,l){for(let c=0;c!==l;++c){const n=r+c;e[n]=e[n]+e[t+c]*a}}}const El="\\[\\]\\.:\\/",Uv=new RegExp("["+El+"]","g"),Al="[^"+El+"]",Bv="[^"+El.replace("\\.","")+"]",Gv=/((?:WC+[\/:])*)/.source.replace("WC",Al),zv=/(WCOD+)?/.source.replace("WCOD",Bv),Vv=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Al),Hv=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Al),Wv=new RegExp("^"+Gv+zv+Vv+Hv+"$"),qv=["material","materials","bones"];class Xv{constructor(e,r,t){const a=t||Ut.parseTrackName(r);this._targetGroup=e,this._bindings=e.subscribe_(r,a)}getValue(e,r){this.bind();const t=this._targetGroup.nCachedObjects_,a=this._bindings[t];a!==void 0&&a.getValue(e,r)}setValue(e,r){const t=this._bindings;for(let a=this._targetGroup.nCachedObjects_,l=t.length;a!==l;++a)t[a].setValue(e,r)}bind(){const e=this._bindings;for(let r=this._targetGroup.nCachedObjects_,t=e.length;r!==t;++r)e[r].bind()}unbind(){const e=this._bindings;for(let r=this._targetGroup.nCachedObjects_,t=e.length;r!==t;++r)e[r].unbind()}}class Ut{constructor(e,r,t){this.path=r,this.parsedPath=t||Ut.parseTrackName(r),this.node=Ut.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,r,t){return e&&e.isAnimationObjectGroup?new Ut.Composite(e,r,t):new Ut(e,r,t)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Uv,"")}static parseTrackName(e){const r=Wv.exec(e);if(r===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const t={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},a=t.nodeName&&t.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const l=t.nodeName.substring(a+1);qv.indexOf(l)!==-1&&(t.nodeName=t.nodeName.substring(0,a),t.objectName=l)}if(t.propertyName===null||t.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t}static findNode(e,r){if(r===void 0||r===""||r==="."||r===-1||r===e.name||r===e.uuid)return e;if(e.skeleton){const t=e.skeleton.getBoneByName(r);if(t!==void 0)return t}if(e.children){const t=function(l){for(let c=0;c<l.length;c++){const n=l[c];if(n.name===r||n.uuid===r)return n;const f=t(n.children);if(f)return f}return null},a=t(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,r){e[r]=this.targetObject[this.propertyName]}_getValue_array(e,r){const t=this.resolvedProperty;for(let a=0,l=t.length;a!==l;++a)e[r++]=t[a]}_getValue_arrayElement(e,r){e[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,r){this.resolvedProperty.toArray(e,r)}_setValue_direct(e,r){this.targetObject[this.propertyName]=e[r]}_setValue_direct_setNeedsUpdate(e,r){this.targetObject[this.propertyName]=e[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,r){this.targetObject[this.propertyName]=e[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,r){const t=this.resolvedProperty;for(let a=0,l=t.length;a!==l;++a)t[a]=e[r++]}_setValue_array_setNeedsUpdate(e,r){const t=this.resolvedProperty;for(let a=0,l=t.length;a!==l;++a)t[a]=e[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,r){const t=this.resolvedProperty;for(let a=0,l=t.length;a!==l;++a)t[a]=e[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,r){this.resolvedProperty[this.propertyIndex]=e[r]}_setValue_arrayElement_setNeedsUpdate(e,r){this.resolvedProperty[this.propertyIndex]=e[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,r){this.resolvedProperty[this.propertyIndex]=e[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,r){this.resolvedProperty.fromArray(e,r)}_setValue_fromArray_setNeedsUpdate(e,r){this.resolvedProperty.fromArray(e,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,r){this.resolvedProperty.fromArray(e,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,r){this.bind(),this.getValue(e,r)}_setValue_unbound(e,r){this.bind(),this.setValue(e,r)}bind(){let e=this.node;const r=this.parsedPath,t=r.objectName,a=r.propertyName;let l=r.propertyIndex;if(e||(e=Ut.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(t){let h=r.objectIndex;switch(t){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===h){h=m;break}break;default:if(e[t]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[t]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const c=e[a];if(c===void 0){const h=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+a+" but it wasn't found.",e);return}let n=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?n=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(n=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(l!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[l]!==void 0&&(l=e.morphTargetDictionary[l])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}f=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=l}else c.fromArray!==void 0&&c.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(f=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=a;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][n]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ut.Composite=Xv;Ut.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ut.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ut.prototype.GetterByBindingType=[Ut.prototype._getValue_direct,Ut.prototype._getValue_array,Ut.prototype._getValue_arrayElement,Ut.prototype._getValue_toArray];Ut.prototype.SetterByBindingTypeAndVersioning=[[Ut.prototype._setValue_direct,Ut.prototype._setValue_direct_setNeedsUpdate,Ut.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_array,Ut.prototype._setValue_array_setNeedsUpdate,Ut.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_arrayElement,Ut.prototype._setValue_arrayElement_setNeedsUpdate,Ut.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_fromArray,Ut.prototype._setValue_fromArray_setNeedsUpdate,Ut.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Yv{constructor(e,r,t=null,a=r.blendMode){this._mixer=e,this._clip=r,this._localRoot=t,this.blendMode=a;const l=r.tracks,c=l.length,n=new Array(c),f={endingStart:Ii,endingEnd:Ii};for(let h=0;h!==c;++h){const m=l[h].createInterpolant(null);n[h]=m,m.settings=f}this._interpolantSettings=f,this._interpolants=n,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Mf,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,r){return this.loop=e,this.repetitions=r,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,r,t){if(e.fadeOut(r),this.fadeIn(r),t){const a=this._clip.duration,l=e._clip.duration,c=l/a,n=a/l;e.warp(1,c,r),this.warp(n,1,r)}return this}crossFadeTo(e,r,t){return e.crossFadeFrom(this,r,t)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,r,t){const a=this._mixer,l=a.time,c=this.timeScale;let n=this._timeScaleInterpolant;n===null&&(n=a._lendControlInterpolant(),this._timeScaleInterpolant=n);const f=n.parameterPositions,h=n.sampleValues;return f[0]=l,f[1]=l+t,h[0]=e/c,h[1]=r/c,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,r,t,a){if(!this.enabled){this._updateWeight(e);return}const l=this._startTime;if(l!==null){const f=(e-l)*t;if(f<0||t===0)return;this._startTime=null,r=t*f}r*=this._updateTimeScale(e);const c=this._updateTime(r),n=this._updateWeight(e);if(n>0){const f=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case lh:for(let m=0,p=f.length;m!==p;++m)f[m].evaluate(c),h[m].accumulateAdditive(n);break;case rl:default:for(let m=0,p=f.length;m!==p;++m)f[m].evaluate(c),h[m].accumulate(a,n)}}}_updateWeight(e){let r=0;if(this.enabled){r=this.weight;const t=this._weightInterpolant;if(t!==null){const a=t.evaluate(e)[0];r*=a,e>t.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=r,r}_updateTimeScale(e){let r=0;if(!this.paused){r=this.timeScale;const t=this._timeScaleInterpolant;t!==null&&(r*=t.evaluate(e)[0],e>t.parameterPositions[1]&&(this.stopWarping(),r===0?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}_updateTime(e){const r=this._clip.duration,t=this.loop;let a=this.time+e,l=this._loopCount;const c=t===Tf;if(e===0)return l===-1?a:c&&(l&1)===1?r-a:a;if(t===Sf){l===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=r)a=r;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(l===-1&&(e>=0?(l=0,this._setEndings(!0,this.repetitions===0,c)):this._setEndings(this.repetitions===0,!0,c)),a>=r||a<0){const n=Math.floor(a/r);a-=r*n,l+=Math.abs(n);const f=this.repetitions-l;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?r:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const h=e<0;this._setEndings(h,!h,c)}else this._setEndings(!1,!1,c);this._loopCount=l,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=a;if(c&&(l&1)===1)return r-a}return a}_setEndings(e,r,t){const a=this._interpolantSettings;t?(a.endingStart=ji,a.endingEnd=ji):(e?a.endingStart=this.zeroSlopeAtStart?ji:Ii:a.endingStart=To,r?a.endingEnd=this.zeroSlopeAtEnd?ji:Ii:a.endingEnd=To)}_scheduleFading(e,r,t){const a=this._mixer,l=a.time;let c=this._weightInterpolant;c===null&&(c=a._lendControlInterpolant(),this._weightInterpolant=c);const n=c.parameterPositions,f=c.sampleValues;return n[0]=l,f[0]=r,n[1]=l+e,f[1]=t,this}}class Zv extends ii{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,r){const t=e._localRoot||this._root,a=e._clip.tracks,l=a.length,c=e._propertyBindings,n=e._interpolants,f=t.uuid,h=this._bindingsByRootAndName;let m=h[f];m===void 0&&(m={},h[f]=m);for(let p=0;p!==l;++p){const s=a[p],i=s.name;let o=m[i];if(o!==void 0)++o.referenceCount,c[p]=o;else{if(o=c[p],o!==void 0){o._cacheIndex===null&&(++o.referenceCount,this._addInactiveBinding(o,f,i));continue}const d=r&&r._propertyBindings[p].binding.parsedPath;o=new Fv(Ut.create(t,i,d),s.ValueTypeName,s.getValueSize()),++o.referenceCount,this._addInactiveBinding(o,f,i),c[p]=o}n[p].resultBuffer=o.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const t=(e._localRoot||this._root).uuid,a=e._clip.uuid,l=this._actionsByClip[a];this._bindAction(e,l&&l.knownActions[0]),this._addInactiveAction(e,a,t)}const r=e._propertyBindings;for(let t=0,a=r.length;t!==a;++t){const l=r[t];l.useCount++===0&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const r=e._propertyBindings;for(let t=0,a=r.length;t!==a;++t){const l=r[t];--l.useCount===0&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const r=e._cacheIndex;return r!==null&&r<this._nActiveActions}_addInactiveAction(e,r,t){const a=this._actions,l=this._actionsByClip;let c=l[r];if(c===void 0)c={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,l[r]=c;else{const n=c.knownActions;e._byClipCacheIndex=n.length,n.push(e)}e._cacheIndex=a.length,a.push(e),c.actionByRoot[t]=e}_removeInactiveAction(e){const r=this._actions,t=r[r.length-1],a=e._cacheIndex;t._cacheIndex=a,r[a]=t,r.pop(),e._cacheIndex=null;const l=e._clip.uuid,c=this._actionsByClip,n=c[l],f=n.knownActions,h=f[f.length-1],m=e._byClipCacheIndex;h._byClipCacheIndex=m,f[m]=h,f.pop(),e._byClipCacheIndex=null;const p=n.actionByRoot,s=(e._localRoot||this._root).uuid;delete p[s],f.length===0&&delete c[l],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const r=e._propertyBindings;for(let t=0,a=r.length;t!==a;++t){const l=r[t];--l.referenceCount===0&&this._removeInactiveBinding(l)}}_lendAction(e){const r=this._actions,t=e._cacheIndex,a=this._nActiveActions++,l=r[a];e._cacheIndex=a,r[a]=e,l._cacheIndex=t,r[t]=l}_takeBackAction(e){const r=this._actions,t=e._cacheIndex,a=--this._nActiveActions,l=r[a];e._cacheIndex=a,r[a]=e,l._cacheIndex=t,r[t]=l}_addInactiveBinding(e,r,t){const a=this._bindingsByRootAndName,l=this._bindings;let c=a[r];c===void 0&&(c={},a[r]=c),c[t]=e,e._cacheIndex=l.length,l.push(e)}_removeInactiveBinding(e){const r=this._bindings,t=e.binding,a=t.rootNode.uuid,l=t.path,c=this._bindingsByRootAndName,n=c[a],f=r[r.length-1],h=e._cacheIndex;f._cacheIndex=h,r[h]=f,r.pop(),delete n[l],Object.keys(n).length===0&&delete c[a]}_lendBinding(e){const r=this._bindings,t=e._cacheIndex,a=this._nActiveBindings++,l=r[a];e._cacheIndex=a,r[a]=e,l._cacheIndex=t,r[t]=l}_takeBackBinding(e){const r=this._bindings,t=e._cacheIndex,a=--this._nActiveBindings,l=r[a];e._cacheIndex=a,r[a]=e,l._cacheIndex=t,r[t]=l}_lendControlInterpolant(){const e=this._controlInterpolants,r=this._nActiveControlInterpolants++;let t=e[r];return t===void 0&&(t=new Xh(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),t.__cacheIndex=r,e[r]=t),t}_takeBackControlInterpolant(e){const r=this._controlInterpolants,t=e.__cacheIndex,a=--this._nActiveControlInterpolants,l=r[a];e.__cacheIndex=a,r[a]=e,l.__cacheIndex=t,r[t]=l}clipAction(e,r,t){const a=r||this._root,l=a.uuid;let c=typeof e=="string"?Ja.findByName(a,e):e;const n=c!==null?c.uuid:e,f=this._actionsByClip[n];let h=null;if(t===void 0&&(c!==null?t=c.blendMode:t=rl),f!==void 0){const p=f.actionByRoot[l];if(p!==void 0&&p.blendMode===t)return p;h=f.knownActions[0],c===null&&(c=h._clip)}if(c===null)return null;const m=new Yv(this,c,r,t);return this._bindAction(m,h),this._addInactiveAction(m,n,l),m}existingAction(e,r){const t=r||this._root,a=t.uuid,l=typeof e=="string"?Ja.findByName(t,e):e,c=l?l.uuid:e,n=this._actionsByClip[c];return n!==void 0&&n.actionByRoot[a]||null}stopAllAction(){const e=this._actions,r=this._nActiveActions;for(let t=r-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const r=this._actions,t=this._nActiveActions,a=this.time+=e,l=Math.sign(e),c=this._accuIndex^=1;for(let h=0;h!==t;++h)r[h]._update(a,e,l,c);const n=this._bindings,f=this._nActiveBindings;for(let h=0;h!==f;++h)n[h].apply(c);return this}setTime(e){this.time=0;for(let r=0;r<this._actions.length;r++)this._actions[r].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const r=this._actions,t=e.uuid,a=this._actionsByClip,l=a[t];if(l!==void 0){const c=l.knownActions;for(let n=0,f=c.length;n!==f;++n){const h=c[n];this._deactivateAction(h);const m=h._cacheIndex,p=r[r.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,p._cacheIndex=m,r[m]=p,r.pop(),this._removeInactiveBindingsForAction(h)}delete a[t]}}uncacheRoot(e){const r=e.uuid,t=this._actionsByClip;for(const c in t){const n=t[c].actionByRoot,f=n[r];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const a=this._bindingsByRootAndName,l=a[r];if(l!==void 0)for(const c in l){const n=l[c];n.restoreOriginalState(),this._removeInactiveBinding(n)}}uncacheAction(e,r){const t=this.existingAction(e,r);t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}}Zv.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Kv extends Ji{constructor(e,r,t=1){super(e,r),this.meshPerAttribute=t}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const r=super.clone(e);return r.meshPerAttribute=this.meshPerAttribute,r}toJSON(e){const r=super.toJSON(e);return r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=this.meshPerAttribute,r}}Kv.prototype.isInstancedInterleavedBuffer=!0;const Rn=new Me,xo=new pt,ka=new pt;class Jv extends ko{constructor(e){const r=sd(e),t=new Zt,a=[],l=[],c=new at(0,0,1),n=new at(0,1,0);for(let h=0;h<r.length;h++){const m=r[h];m.parent&&m.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),l.push(c.r,c.g,c.b),l.push(n.r,n.g,n.b))}t.setAttribute("position",new hr(a,3)),t.setAttribute("color",new hr(l,3));const f=new li({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(t,f),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=r,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const r=this.bones,t=this.geometry,a=t.getAttribute("position");ka.copy(this.root.matrixWorld).invert();for(let l=0,c=0;l<r.length;l++){const n=r[l];n.parent&&n.parent.isBone&&(xo.multiplyMatrices(ka,n.matrixWorld),Rn.setFromMatrixPosition(xo),a.setXYZ(c,Rn.x,Rn.y,Rn.z),xo.multiplyMatrices(ka,n.parent.matrixWorld),Rn.setFromMatrixPosition(xo),a.setXYZ(c+1,Rn.x,Rn.y,Rn.z),c+=2)}t.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function sd(v){const e=[];v.isBone===!0&&e.push(v);for(let r=0;r<v.children.length;r++)e.push.apply(e,sd(v.children[r]));return e}class Qv extends ko{constructor(e=10,r=10,t=4473924,a=8947848){t=new at(t),a=new at(a);const l=r/2,c=e/r,n=e/2,f=[],h=[];for(let s=0,i=0,o=-n;s<=r;s++,o+=c){f.push(-n,0,o,n,0,o),f.push(o,0,-n,o,0,n);const d=s===l?t:a;d.toArray(h,i),i+=3,d.toArray(h,i),i+=3,d.toArray(h,i),i+=3,d.toArray(h,i),i+=3}const m=new Zt;m.setAttribute("position",new hr(f,3)),m.setAttribute("color",new hr(h,3));const p=new li({vertexColors:!0,toneMapped:!1});super(m,p),this.type="GridHelper"}}const Jr=new Uint32Array(512),Qr=new Uint32Array(512);for(let v=0;v<256;++v){const e=v-127;e<-27?(Jr[v]=0,Jr[v|256]=32768,Qr[v]=24,Qr[v|256]=24):e<-14?(Jr[v]=1024>>-e-14,Jr[v|256]=1024>>-e-14|32768,Qr[v]=-e-1,Qr[v|256]=-e-1):e<=15?(Jr[v]=e+15<<10,Jr[v|256]=e+15<<10|32768,Qr[v]=13,Qr[v|256]=13):e<128?(Jr[v]=31744,Jr[v|256]=64512,Qr[v]=24,Qr[v|256]=24):(Jr[v]=31744,Jr[v|256]=64512,Qr[v]=13,Qr[v|256]=13)}const od=new Uint32Array(2048),Os=new Uint32Array(64),$v=new Uint32Array(64);for(let v=1;v<1024;++v){let e=v<<13,r=0;for(;(e&8388608)===0;)e<<=1,r-=8388608;e&=-8388609,r+=947912704,od[v]=e|r}for(let v=1024;v<2048;++v)od[v]=939524096+(v-1024<<13);for(let v=1;v<31;++v)Os[v]=v<<23;Os[31]=1199570944;Os[32]=2147483648;for(let v=33;v<63;++v)Os[v]=2147483648+(v-32<<23);Os[63]=3347054592;for(let v=1;v<64;++v)v!==32&&($v[v]=1024);jr.create=function(v,e){return console.log("THREE.Curve.create() has been deprecated"),v.prototype=Object.create(jr.prototype),v.prototype.constructor=v,v.prototype.getPoint=e,v};Ya.prototype.fromPoints=function(v){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(v)};Qv.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Jv.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};bn.prototype.extractUrlBase=function(v){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Nn.extractUrlBase(v)};bn.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Or.prototype.center=function(v){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(v)};Or.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Or.prototype.isIntersectionBox=function(v){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(v)};Or.prototype.isIntersectionSphere=function(v){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(v)};Or.prototype.size=function(v){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(v)};ai.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")};oi.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Do.prototype.setFromMatrix=function(v){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(v)};gr.prototype.flattenToArrayOffset=function(v,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(v,e)};gr.prototype.multiplyVector3=function(v){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),v.applyMatrix3(this)};gr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};gr.prototype.applyToBufferAttribute=function(v){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),v.applyMatrix3(this)};gr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};gr.prototype.getInverse=function(v){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(v).invert()};pt.prototype.extractPosition=function(v){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(v)};pt.prototype.flattenToArrayOffset=function(v,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(v,e)};pt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Me().setFromMatrixColumn(this,3)};pt.prototype.setRotationFromQuaternion=function(v){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(v)};pt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};pt.prototype.multiplyVector3=function(v){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),v.applyMatrix4(this)};pt.prototype.multiplyVector4=function(v){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),v.applyMatrix4(this)};pt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};pt.prototype.rotateAxis=function(v){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),v.transformDirection(this)};pt.prototype.crossVector=function(v){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),v.applyMatrix4(this)};pt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};pt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};pt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};pt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};pt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};pt.prototype.applyToBufferAttribute=function(v){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),v.applyMatrix4(this)};pt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};pt.prototype.makeFrustum=function(v,e,r,t,a,l){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(v,e,t,r,a,l)};pt.prototype.getInverse=function(v){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(v).invert()};mn.prototype.isIntersectionLine=function(v){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(v)};wr.prototype.multiplyVector3=function(v){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),v.applyQuaternion(this)};wr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Zi.prototype.isIntersectionBox=function(v){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(v)};Zi.prototype.isIntersectionPlane=function(v){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(v)};Zi.prototype.isIntersectionSphere=function(v){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(v)};or.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};or.prototype.barycoordFromPoint=function(v,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(v,e)};or.prototype.midpoint=function(v){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(v)};or.prototypenormal=function(v){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(v)};or.prototype.plane=function(v){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(v)};or.barycoordFromPoint=function(v,e,r,t,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),or.getBarycoord(v,e,r,t,a)};or.normal=function(v,e,r,t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),or.getNormal(v,e,r,t)};js.prototype.extractAllPoints=function(v){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(v)};js.prototype.extrude=function(v){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Qi(this,v)};js.prototype.makeGeometry=function(v){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new xl(this,v)};tt.prototype.fromAttribute=function(v,e,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(v,e,r)};tt.prototype.distanceToManhattan=function(v){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(v)};tt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Me.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};Me.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};Me.prototype.getPositionFromMatrix=function(v){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(v)};Me.prototype.getScaleFromMatrix=function(v){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(v)};Me.prototype.getColumnFromMatrix=function(v,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,v)};Me.prototype.applyProjection=function(v){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(v)};Me.prototype.fromAttribute=function(v,e,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(v,e,r)};Me.prototype.distanceToManhattan=function(v){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(v)};Me.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Vt.prototype.fromAttribute=function(v,e,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(v,e,r)};Vt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Bt.prototype.getChildByName=function(v){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(v)};Bt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Bt.prototype.translate=function(v,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,v)};Bt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Bt.prototype.applyMatrix=function(v){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(v)};Object.defineProperties(Bt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(v){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=v}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});xr.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(xr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Ef},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});pl.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};br.prototype.setLens=function(v,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(v)};Object.defineProperties(en.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(v){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=v}},shadowCameraLeft:{set:function(v){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=v}},shadowCameraRight:{set:function(v){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=v}},shadowCameraTop:{set:function(v){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=v}},shadowCameraBottom:{set:function(v){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=v}},shadowCameraNear:{set:function(v){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=v}},shadowCameraFar:{set:function(v){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=v}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(v){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=v}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(v){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=v}},shadowMapHeight:{set:function(v){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=v}}});Object.defineProperties(nr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Eo},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Eo)}}});nr.prototype.setDynamic=function(v){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(v===!0?Eo:Ms),this};nr.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},nr.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Zt.prototype.addIndex=function(v){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(v)};Zt.prototype.addAttribute=function(v,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(v,new nr(arguments[1],arguments[2]))):v==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(v,e)};Zt.prototype.addDrawCall=function(v,e,r){r!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(v,e)};Zt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Zt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Zt.prototype.removeAttribute=function(v){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(v)};Zt.prototype.applyMatrix=function(v){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(v)};Object.defineProperties(Zt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Ji.prototype.setDynamic=function(v){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(v===!0?Eo:Ms),this};Ji.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Qi.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Qi.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Qi.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};dl.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(er.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new at}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(v){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=v===nh}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(v){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=v}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Xr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(v){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=v}}});zt.prototype.clearTarget=function(v,e,r,t){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(v),this.clear(e,r,t)};zt.prototype.animate=function(v){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(v)};zt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};zt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};zt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};zt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};zt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};zt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};zt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};zt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};zt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};zt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};zt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};zt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};zt.prototype.enableScissorTest=function(v){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(v)};zt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};zt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};zt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};zt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};zt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};zt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};zt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};zt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};zt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};zt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(zt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(v){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=v}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(v){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=v}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(v){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=v===!0?kt:Fn}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(Mh.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Lr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(v){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=v}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(v){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=v}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(v){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=v}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(v){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=v}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(v){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=v}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(v){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=v}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(v){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=v}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(v){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=v}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(v){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=v}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(v){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=v}}});Nv.prototype.load=function(v){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new jv().load(v,function(t){e.setBuffer(t)}),this};al.prototype.updateCubeMap=function(v,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(v,e)};al.prototype.clear=function(v,e,r,t){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(v,e,r,t)};si.crossOrigin=void 0;si.loadTexture=function(v,e,r,t){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const a=new Kh;a.setCrossOrigin(this.crossOrigin);const l=a.load(v,r,void 0,t);return e&&(l.mapping=e),l};si.loadTextureCube=function(v,e,r,t){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const a=new Cv;a.setCrossOrigin(this.crossOrigin);const l=a.load(v,r,void 0,t);return e&&(l.mapping=e),l};si.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};si.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:tl}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=tl);class eb extends bn{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new sb(r)}),this.register(function(r){return new hb(r)}),this.register(function(r){return new db(r)}),this.register(function(r){return new ob(r)}),this.register(function(r){return new ab(r)}),this.register(function(r){return new lb(r)}),this.register(function(r){return new ub(r)}),this.register(function(r){return new ib(r)}),this.register(function(r){return new cb(r)}),this.register(function(r){return new rb(r)}),this.register(function(r){return new fb(r)})}load(e,r,t,a){const l=this;let c;this.resourcePath!==""?c=this.resourcePath:this.path!==""?c=this.path:c=Nn.extractUrlBase(e),this.manager.itemStart(e);const n=function(h){a?a(h):console.error(h),l.manager.itemError(e),l.manager.itemEnd(e)},f=new wl(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(h){try{l.parse(h,c,function(m){r(m),l.manager.itemEnd(e)},n)}catch(m){n(m)}},t,n)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,r,t,a){let l;const c={},n={};if(typeof e=="string")l=e;else if(Nn.decodeText(new Uint8Array(e,0,4))===ad){try{c[Dt.KHR_BINARY_GLTF]=new pb(e)}catch(p){a&&a(p);return}l=c[Dt.KHR_BINARY_GLTF].content}else l=Nn.decodeText(new Uint8Array(e));const f=JSON.parse(l);if(f.asset===void 0||f.asset.version[0]<2){a&&a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new Ab(f,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let m=0;m<this.pluginCallbacks.length;m++){const p=this.pluginCallbacks[m](h);n[p.name]=p,c[p.name]=!0}if(f.extensionsUsed)for(let m=0;m<f.extensionsUsed.length;++m){const p=f.extensionsUsed[m],s=f.extensionsRequired||[];switch(p){case Dt.KHR_MATERIALS_UNLIT:c[p]=new nb;break;case Dt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:c[p]=new yb;break;case Dt.KHR_DRACO_MESH_COMPRESSION:c[p]=new mb(f,this.dracoLoader);break;case Dt.KHR_TEXTURE_TRANSFORM:c[p]=new gb;break;case Dt.KHR_MESH_QUANTIZATION:c[p]=new vb;break;default:s.indexOf(p)>=0&&n[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}h.setExtensions(c),h.setPlugins(n),h.parse(t,a)}parseAsync(e,r){const t=this;return new Promise(function(a,l){t.parse(e,r,a,l)})}}function tb(){let v={};return{get:function(e){return v[e]},add:function(e,r){v[e]=r},remove:function(e){delete v[e]},removeAll:function(){v={}}}}const Dt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class rb{constructor(e){this.parser=e,this.name=Dt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,r=this.parser.json.nodes||[];for(let t=0,a=r.length;t<a;t++){const l=r[t];l.extensions&&l.extensions[this.name]&&l.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,l.extensions[this.name].light)}}_loadLight(e){const r=this.parser,t="light:"+e;let a=r.cache.get(t);if(a)return a;const l=r.json,f=((l.extensions&&l.extensions[this.name]||{}).lights||[])[e];let h;const m=new at(16777215);f.color!==void 0&&m.fromArray(f.color);const p=f.range!==void 0?f.range:0;switch(f.type){case"directional":h=new td(m),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new Ml(m),h.distance=p;break;case"spot":h=new Qh(m),h.distance=p,f.spot=f.spot||{},f.spot.innerConeAngle=f.spot.innerConeAngle!==void 0?f.spot.innerConeAngle:0,f.spot.outerConeAngle=f.spot.outerConeAngle!==void 0?f.spot.outerConeAngle:Math.PI/4,h.angle=f.spot.outerConeAngle,h.penumbra=1-f.spot.innerConeAngle/f.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+f.type)}return h.position.set(0,0,0),h.decay=2,f.intensity!==void 0&&(h.intensity=f.intensity),h.name=r.createUniqueName(f.name||"light_"+e),a=Promise.resolve(h),r.cache.add(t,a),a}createNodeAttachment(e){const r=this,t=this.parser,l=t.json.nodes[e],n=(l.extensions&&l.extensions[this.name]||{}).light;return n===void 0?null:this._loadLight(n).then(function(f){return t._getNodeRef(r.cache,n,f)})}}class nb{constructor(){this.name=Dt.KHR_MATERIALS_UNLIT}getMaterialType(){return gn}extendParams(e,r,t){const a=[];e.color=new at(1,1,1),e.opacity=1;const l=r.pbrMetallicRoughness;if(l){if(Array.isArray(l.baseColorFactor)){const c=l.baseColorFactor;e.color.fromArray(c),e.opacity=c[3]}l.baseColorTexture!==void 0&&a.push(t.assignTexture(e,"map",l.baseColorTexture,kt))}return Promise.all(a)}}class ib{constructor(e){this.parser=e,this.name=Dt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,r){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const l=a.extensions[this.name].emissiveStrength;return l!==void 0&&(r.emissiveIntensity=l),Promise.resolve()}}class sb{constructor(e){this.parser=e,this.name=Dt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Bn}extendMaterialParams(e,r){const t=this.parser,a=t.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const l=[],c=a.extensions[this.name];if(c.clearcoatFactor!==void 0&&(r.clearcoat=c.clearcoatFactor),c.clearcoatTexture!==void 0&&l.push(t.assignTexture(r,"clearcoatMap",c.clearcoatTexture)),c.clearcoatRoughnessFactor!==void 0&&(r.clearcoatRoughness=c.clearcoatRoughnessFactor),c.clearcoatRoughnessTexture!==void 0&&l.push(t.assignTexture(r,"clearcoatRoughnessMap",c.clearcoatRoughnessTexture)),c.clearcoatNormalTexture!==void 0&&(l.push(t.assignTexture(r,"clearcoatNormalMap",c.clearcoatNormalTexture)),c.clearcoatNormalTexture.scale!==void 0)){const n=c.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new tt(n,n)}return Promise.all(l)}}class ob{constructor(e){this.parser=e,this.name=Dt.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Bn}extendMaterialParams(e,r){const t=this.parser,a=t.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const l=[];r.sheenColor=new at(0,0,0),r.sheenRoughness=0,r.sheen=1;const c=a.extensions[this.name];return c.sheenColorFactor!==void 0&&r.sheenColor.fromArray(c.sheenColorFactor),c.sheenRoughnessFactor!==void 0&&(r.sheenRoughness=c.sheenRoughnessFactor),c.sheenColorTexture!==void 0&&l.push(t.assignTexture(r,"sheenColorMap",c.sheenColorTexture,kt)),c.sheenRoughnessTexture!==void 0&&l.push(t.assignTexture(r,"sheenRoughnessMap",c.sheenRoughnessTexture)),Promise.all(l)}}class ab{constructor(e){this.parser=e,this.name=Dt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Bn}extendMaterialParams(e,r){const t=this.parser,a=t.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const l=[],c=a.extensions[this.name];return c.transmissionFactor!==void 0&&(r.transmission=c.transmissionFactor),c.transmissionTexture!==void 0&&l.push(t.assignTexture(r,"transmissionMap",c.transmissionTexture)),Promise.all(l)}}class lb{constructor(e){this.parser=e,this.name=Dt.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Bn}extendMaterialParams(e,r){const t=this.parser,a=t.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const l=[],c=a.extensions[this.name];r.thickness=c.thicknessFactor!==void 0?c.thicknessFactor:0,c.thicknessTexture!==void 0&&l.push(t.assignTexture(r,"thicknessMap",c.thicknessTexture)),r.attenuationDistance=c.attenuationDistance||0;const n=c.attenuationColor||[1,1,1];return r.attenuationColor=new at(n[0],n[1],n[2]),Promise.all(l)}}class ub{constructor(e){this.parser=e,this.name=Dt.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Bn}extendMaterialParams(e,r){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const l=a.extensions[this.name];return r.ior=l.ior!==void 0?l.ior:1.5,Promise.resolve()}}class cb{constructor(e){this.parser=e,this.name=Dt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Bn}extendMaterialParams(e,r){const t=this.parser,a=t.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const l=[],c=a.extensions[this.name];r.specularIntensity=c.specularFactor!==void 0?c.specularFactor:1,c.specularTexture!==void 0&&l.push(t.assignTexture(r,"specularIntensityMap",c.specularTexture));const n=c.specularColorFactor||[1,1,1];return r.specularColor=new at(n[0],n[1],n[2]),c.specularColorTexture!==void 0&&l.push(t.assignTexture(r,"specularColorMap",c.specularColorTexture,kt)),Promise.all(l)}}class hb{constructor(e){this.parser=e,this.name=Dt.KHR_TEXTURE_BASISU}loadTexture(e){const r=this.parser,t=r.json,a=t.textures[e];if(!a.extensions||!a.extensions[this.name])return null;const l=a.extensions[this.name],c=r.options.ktx2Loader;if(!c){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(e,l.source,c)}}class db{constructor(e){this.parser=e,this.name=Dt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const r=this.name,t=this.parser,a=t.json,l=a.textures[e];if(!l.extensions||!l.extensions[r])return null;const c=l.extensions[r],n=a.images[c.source];let f=t.textureLoader;if(n.uri){const h=t.options.manager.getHandler(n.uri);h!==null&&(f=h)}return this.detectSupport().then(function(h){if(h)return t.loadTextureImage(e,c.source,f);if(a.extensionsRequired&&a.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){e(r.height===1)}})),this.isSupported}}class fb{constructor(e){this.name=Dt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const r=this.parser.json,t=r.bufferViews[e];if(t.extensions&&t.extensions[this.name]){const a=t.extensions[this.name],l=this.parser.getDependency("buffer",a.buffer),c=this.parser.options.meshoptDecoder;if(!c||!c.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([l,c.ready]).then(function(n){const f=a.byteOffset||0,h=a.byteLength||0,m=a.count,p=a.byteStride,s=new ArrayBuffer(m*p),i=new Uint8Array(n[0],f,h);return c.decodeGltfBuffer(new Uint8Array(s),m,p,i,a.mode,a.filter),s})}else return null}}const ad="glTF",fs=12,qc={JSON:1313821514,BIN:5130562};class pb{constructor(e){this.name=Dt.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(e,0,fs);if(this.header={magic:Nn.decodeText(new Uint8Array(e.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==ad)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const t=this.header.length-fs,a=new DataView(e,fs);let l=0;for(;l<t;){const c=a.getUint32(l,!0);l+=4;const n=a.getUint32(l,!0);if(l+=4,n===qc.JSON){const f=new Uint8Array(e,fs+l,c);this.content=Nn.decodeText(f)}else if(n===qc.BIN){const f=fs+l;this.body=e.slice(f,f+c)}l+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class mb{constructor(e,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Dt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(e,r){const t=this.json,a=this.dracoLoader,l=e.extensions[this.name].bufferView,c=e.extensions[this.name].attributes,n={},f={},h={};for(const m in c){const p=$a[m]||m.toLowerCase();n[p]=c[m]}for(const m in e.attributes){const p=$a[m]||m.toLowerCase();if(c[m]!==void 0){const s=t.accessors[e.attributes[m]],i=Ds[s.componentType];h[p]=i,f[p]=s.normalized===!0}}return r.getDependency("bufferView",l).then(function(m){return new Promise(function(p){a.decodeDracoFile(m,function(s){for(const i in s.attributes){const o=s.attributes[i],d=f[i];d!==void 0&&(o.normalized=d)}p(s)},n,h)})})}}class gb{constructor(){this.name=Dt.KHR_TEXTURE_TRANSFORM}extendTexture(e,r){return r.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(e=e.clone(),r.offset!==void 0&&e.offset.fromArray(r.offset),r.rotation!==void 0&&(e.rotation=r.rotation),r.scale!==void 0&&e.repeat.fromArray(r.scale),e.needsUpdate=!0),e}}class Qa extends $i{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const r=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),t=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),a=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),c=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),n={specular:{value:new at().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=n,this.onBeforeCompile=function(f){for(const h in n)f.uniforms[h]=n[h];f.fragmentShader=f.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",r).replace("#include <metalnessmap_pars_fragment>",t).replace("#include <roughnessmap_fragment>",a).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",c)},Object.defineProperties(this,{specular:{get:function(){return n.specular.value},set:function(f){n.specular.value=f}},specularMap:{get:function(){return n.specularMap.value},set:function(f){n.specularMap.value=f,f?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return n.glossiness.value},set:function(f){n.glossiness.value=f}},glossinessMap:{get:function(){return n.glossinessMap.value},set:function(f){n.glossinessMap.value=f,f?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class yb{constructor(){this.name=Dt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return Qa}extendParams(e,r,t){const a=r.extensions[this.name];e.color=new at(1,1,1),e.opacity=1;const l=[];if(Array.isArray(a.diffuseFactor)){const c=a.diffuseFactor;e.color.fromArray(c),e.opacity=c[3]}if(a.diffuseTexture!==void 0&&l.push(t.assignTexture(e,"map",a.diffuseTexture,kt)),e.emissive=new at(0,0,0),e.glossiness=a.glossinessFactor!==void 0?a.glossinessFactor:1,e.specular=new at(1,1,1),Array.isArray(a.specularFactor)&&e.specular.fromArray(a.specularFactor),a.specularGlossinessTexture!==void 0){const c=a.specularGlossinessTexture;l.push(t.assignTexture(e,"glossinessMap",c)),l.push(t.assignTexture(e,"specularMap",c,kt))}return Promise.all(l)}createMaterial(e){const r=new Qa(e);return r.fog=!0,r.color=e.color,r.map=e.map===void 0?null:e.map,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=e.aoMap===void 0?null:e.aoMap,r.aoMapIntensity=1,r.emissive=e.emissive,r.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,r.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,r.bumpMap=e.bumpMap===void 0?null:e.bumpMap,r.bumpScale=1,r.normalMap=e.normalMap===void 0?null:e.normalMap,r.normalMapType=ni,e.normalScale&&(r.normalScale=e.normalScale),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=e.specularMap===void 0?null:e.specularMap,r.specular=e.specular,r.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,r.glossiness=e.glossiness,r.alphaMap=null,r.envMap=e.envMap===void 0?null:e.envMap,r.envMapIntensity=1,r}}class vb{constructor(){this.name=Dt.KHR_MESH_QUANTIZATION}}class ri extends vn{constructor(e,r,t,a){super(e,r,t,a)}copySampleValue_(e){const r=this.resultBuffer,t=this.sampleValues,a=this.valueSize,l=e*a*3+a;for(let c=0;c!==a;c++)r[c]=t[l+c];return r}}ri.prototype.beforeStart_=ri.prototype.copySampleValue_;ri.prototype.afterEnd_=ri.prototype.copySampleValue_;ri.prototype.interpolate_=function(v,e,r,t){const a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,n=c*2,f=c*3,h=t-e,m=(r-e)/h,p=m*m,s=p*m,i=v*f,o=i-f,d=-2*s+3*p,u=s-p,g=1-d,b=u-p+m;for(let _=0;_!==c;_++){const w=l[o+_+c],S=l[o+_+n]*h,T=l[i+_+c],L=l[i+_]*h;a[_]=g*w+b*S+d*T+u*L}return a};const bb=new wr;class _b extends ri{interpolate_(e,r,t,a){const l=super.interpolate_(e,r,t,a);return bb.fromArray(l).normalize().toArray(l),l}}const fn={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ds={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Xc={9728:ur,9729:vr,9984:Ga,9985:ah,9986:za,9987:Yi},Yc={33071:Pr,33648:Mo,10497:zi},Zc={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$a={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Pn={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},xb={CUBICSPLINE:void 0,LINEAR:Hi,STEP:Ss},Na={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function wb(v){return v.DefaultMaterial===void 0&&(v.DefaultMaterial=new $i({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ui})),v.DefaultMaterial}function ps(v,e,r){for(const t in r.extensions)v[t]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[t]=r.extensions[t])}function Yn(v,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(v.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Sb(v,e,r){let t=!1,a=!1,l=!1;for(let h=0,m=e.length;h<m;h++){const p=e[h];if(p.POSITION!==void 0&&(t=!0),p.NORMAL!==void 0&&(a=!0),p.COLOR_0!==void 0&&(l=!0),t&&a&&l)break}if(!t&&!a&&!l)return Promise.resolve(v);const c=[],n=[],f=[];for(let h=0,m=e.length;h<m;h++){const p=e[h];if(t){const s=p.POSITION!==void 0?r.getDependency("accessor",p.POSITION):v.attributes.position;c.push(s)}if(a){const s=p.NORMAL!==void 0?r.getDependency("accessor",p.NORMAL):v.attributes.normal;n.push(s)}if(l){const s=p.COLOR_0!==void 0?r.getDependency("accessor",p.COLOR_0):v.attributes.color;f.push(s)}}return Promise.all([Promise.all(c),Promise.all(n),Promise.all(f)]).then(function(h){const m=h[0],p=h[1],s=h[2];return t&&(v.morphAttributes.position=m),a&&(v.morphAttributes.normal=p),l&&(v.morphAttributes.color=s),v.morphTargetsRelative=!0,v})}function Mb(v,e){if(v.updateMorphTargets(),e.weights!==void 0)for(let r=0,t=e.weights.length;r<t;r++)v.morphTargetInfluences[r]=e.weights[r];if(e.extras&&Array.isArray(e.extras.targetNames)){const r=e.extras.targetNames;if(v.morphTargetInfluences.length===r.length){v.morphTargetDictionary={};for(let t=0,a=r.length;t<a;t++)v.morphTargetDictionary[r[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Tb(v){const e=v.extensions&&v.extensions[Dt.KHR_DRACO_MESH_COMPRESSION];let r;return e?r="draco:"+e.bufferView+":"+e.indices+":"+Kc(e.attributes):r=v.indices+":"+Kc(v.attributes)+":"+v.mode,r}function Kc(v){let e="";const r=Object.keys(v).sort();for(let t=0,a=r.length;t<a;t++)e+=r[t]+":"+v[r[t]]+";";return e}function el(v){switch(v){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Eb(v){return v.search(/\.jpe?g($|\?)/i)>0||v.search(/^data\:image\/jpeg/)===0?"image/jpeg":v.search(/\.webp($|\?)/i)>0||v.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class Ab{constructor(e={},r={}){this.json=e,this.extensions={},this.plugins={},this.options=r,this.cache=new tb,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,a=navigator.userAgent.indexOf("Firefox")>-1,l=a?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap=="undefined"||t||a&&l<98?this.textureLoader=new Kh(this.options.manager):this.textureLoader=new id(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new wl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,r){const t=this,a=this.json,l=this.extensions;this.cache.removeAll(),this._invokeAll(function(c){return c._markDefs&&c._markDefs()}),Promise.all(this._invokeAll(function(c){return c.beforeRoot&&c.beforeRoot()})).then(function(){return Promise.all([t.getDependencies("scene"),t.getDependencies("animation"),t.getDependencies("camera")])}).then(function(c){const n={scene:c[0][a.scene||0],scenes:c[0],animations:c[1],cameras:c[2],asset:a.asset,parser:t,userData:{}};ps(l,n,a),Yn(n,a),Promise.all(t._invokeAll(function(f){return f.afterRoot&&f.afterRoot(n)})).then(function(){e(n)})}).catch(r)}_markDefs(){const e=this.json.nodes||[],r=this.json.skins||[],t=this.json.meshes||[];for(let a=0,l=r.length;a<l;a++){const c=r[a].joints;for(let n=0,f=c.length;n<f;n++)e[c[n]].isBone=!0}for(let a=0,l=e.length;a<l;a++){const c=e[a];c.mesh!==void 0&&(this._addNodeRef(this.meshCache,c.mesh),c.skin!==void 0&&(t[c.mesh].isSkinnedMesh=!0)),c.camera!==void 0&&this._addNodeRef(this.cameraCache,c.camera)}}_addNodeRef(e,r){r!==void 0&&(e.refs[r]===void 0&&(e.refs[r]=e.uses[r]=0),e.refs[r]++)}_getNodeRef(e,r,t){if(e.refs[r]<=1)return t;const a=t.clone(),l=(c,n)=>{const f=this.associations.get(c);f!=null&&this.associations.set(n,f);for(const[h,m]of c.children.entries())l(m,n.children[h])};return l(t,a),a.name+="_instance_"+e.uses[r]++,a}_invokeOne(e){const r=Object.values(this.plugins);r.push(this);for(let t=0;t<r.length;t++){const a=e(r[t]);if(a)return a}return null}_invokeAll(e){const r=Object.values(this.plugins);r.unshift(this);const t=[];for(let a=0;a<r.length;a++){const l=e(r[a]);l&&t.push(l)}return t}getDependency(e,r){const t=e+":"+r;let a=this.cache.get(t);if(!a){switch(e){case"scene":a=this.loadScene(r);break;case"node":a=this.loadNode(r);break;case"mesh":a=this._invokeOne(function(l){return l.loadMesh&&l.loadMesh(r)});break;case"accessor":a=this.loadAccessor(r);break;case"bufferView":a=this._invokeOne(function(l){return l.loadBufferView&&l.loadBufferView(r)});break;case"buffer":a=this.loadBuffer(r);break;case"material":a=this._invokeOne(function(l){return l.loadMaterial&&l.loadMaterial(r)});break;case"texture":a=this._invokeOne(function(l){return l.loadTexture&&l.loadTexture(r)});break;case"skin":a=this.loadSkin(r);break;case"animation":a=this._invokeOne(function(l){return l.loadAnimation&&l.loadAnimation(r)});break;case"camera":a=this.loadCamera(r);break;default:throw new Error("Unknown type: "+e)}this.cache.add(t,a)}return a}getDependencies(e){let r=this.cache.get(e);if(!r){const t=this,a=this.json[e+(e==="mesh"?"es":"s")]||[];r=Promise.all(a.map(function(l,c){return t.getDependency(e,c)})),this.cache.add(e,r)}return r}loadBuffer(e){const r=this.json.buffers[e],t=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&e===0)return Promise.resolve(this.extensions[Dt.KHR_BINARY_GLTF].body);const a=this.options;return new Promise(function(l,c){t.load(Nn.resolveURL(r.uri,a.path),l,void 0,function(){c(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(e){const r=this.json.bufferViews[e];return this.getDependency("buffer",r.buffer).then(function(t){const a=r.byteLength||0,l=r.byteOffset||0;return t.slice(l,l+a)})}loadAccessor(e){const r=this,t=this.json,a=this.json.accessors[e];if(a.bufferView===void 0&&a.sparse===void 0)return Promise.resolve(null);const l=[];return a.bufferView!==void 0?l.push(this.getDependency("bufferView",a.bufferView)):l.push(null),a.sparse!==void 0&&(l.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(l).then(function(c){const n=c[0],f=Zc[a.type],h=Ds[a.componentType],m=h.BYTES_PER_ELEMENT,p=m*f,s=a.byteOffset||0,i=a.bufferView!==void 0?t.bufferViews[a.bufferView].byteStride:void 0,o=a.normalized===!0;let d,u;if(i&&i!==p){const g=Math.floor(s/i),b="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+g+":"+a.count;let _=r.cache.get(b);_||(d=new h(n,g*i,a.count*i/m),_=new Ji(d,i/m),r.cache.add(b,_)),u=new qi(_,f,s%i/m,o)}else n===null?d=new h(a.count*f):d=new h(n,s,a.count*f),u=new nr(d,f,o);if(a.sparse!==void 0){const g=Zc.SCALAR,b=Ds[a.sparse.indices.componentType],_=a.sparse.indices.byteOffset||0,w=a.sparse.values.byteOffset||0,S=new b(c[1],_,a.sparse.count*g),T=new h(c[2],w,a.sparse.count*f);n!==null&&(u=new nr(u.array.slice(),u.itemSize,u.normalized));for(let L=0,A=S.length;L<A;L++){const P=S[L];if(u.setX(P,T[L*f]),f>=2&&u.setY(P,T[L*f+1]),f>=3&&u.setZ(P,T[L*f+2]),f>=4&&u.setW(P,T[L*f+3]),f>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return u})}loadTexture(e){const r=this.json,t=this.options,l=r.textures[e].source,c=r.images[l];let n=this.textureLoader;if(c.uri){const f=t.manager.getHandler(c.uri);f!==null&&(n=f)}return this.loadTextureImage(e,l,n)}loadTextureImage(e,r,t){const a=this,l=this.json,c=l.textures[e],n=l.images[r],f=(n.uri||n.bufferView)+":"+c.sampler;if(this.textureCache[f])return this.textureCache[f];const h=this.loadImageSource(r,t).then(function(m){m.flipY=!1,c.name&&(m.name=c.name);const s=(l.samplers||{})[c.sampler]||{};return m.magFilter=Xc[s.magFilter]||vr,m.minFilter=Xc[s.minFilter]||Yi,m.wrapS=Yc[s.wrapS]||zi,m.wrapT=Yc[s.wrapT]||zi,a.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[f]=h,h}loadImageSource(e,r){const t=this,a=this.json,l=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=>p.clone());const c=a.images[e],n=self.URL||self.webkitURL;let f=c.uri||"",h=!1;if(c.bufferView!==void 0)f=t.getDependency("bufferView",c.bufferView).then(function(p){h=!0;const s=new Blob([p],{type:c.mimeType});return f=n.createObjectURL(s),f});else if(c.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(f).then(function(p){return new Promise(function(s,i){let o=s;r.isImageBitmapLoader===!0&&(o=function(d){const u=new ar(d);u.needsUpdate=!0,s(u)}),r.load(Nn.resolveURL(p,l.path),o,void 0,i)})}).then(function(p){return h===!0&&n.revokeObjectURL(f),p.userData.mimeType=c.mimeType||Eb(c.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",f),p});return this.sourceCache[e]=m,m}assignTexture(e,r,t,a){const l=this;return this.getDependency("texture",t.index).then(function(c){if(t.texCoord!==void 0&&t.texCoord!=0&&!(r==="aoMap"&&t.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+t.texCoord+" for texture "+r+" not yet supported."),l.extensions[Dt.KHR_TEXTURE_TRANSFORM]){const n=t.extensions!==void 0?t.extensions[Dt.KHR_TEXTURE_TRANSFORM]:void 0;if(n){const f=l.associations.get(c);c=l.extensions[Dt.KHR_TEXTURE_TRANSFORM].extendTexture(c,n),l.associations.set(c,f)}}return a!==void 0&&(c.encoding=a),e[r]=c,c})}assignFinalMaterial(e){const r=e.geometry;let t=e.material;const a=r.attributes.tangent===void 0,l=r.attributes.color!==void 0,c=r.attributes.normal===void 0;if(e.isPoints){const n="PointsMaterial:"+t.uuid;let f=this.cache.get(n);f||(f=new No,er.prototype.copy.call(f,t),f.color.copy(t.color),f.map=t.map,f.sizeAttenuation=!1,this.cache.add(n,f)),t=f}else if(e.isLine){const n="LineBasicMaterial:"+t.uuid;let f=this.cache.get(n);f||(f=new li,er.prototype.copy.call(f,t),f.color.copy(t.color),this.cache.add(n,f)),t=f}if(a||l||c){let n="ClonedMaterial:"+t.uuid+":";t.isGLTFSpecularGlossinessMaterial&&(n+="specular-glossiness:"),a&&(n+="derivative-tangents:"),l&&(n+="vertex-colors:"),c&&(n+="flat-shading:");let f=this.cache.get(n);f||(f=t.clone(),l&&(f.vertexColors=!0),c&&(f.flatShading=!0),a&&(f.normalScale&&(f.normalScale.y*=-1),f.clearcoatNormalScale&&(f.clearcoatNormalScale.y*=-1)),this.cache.add(n,f),this.associations.set(f,this.associations.get(t))),t=f}t.aoMap&&r.attributes.uv2===void 0&&r.attributes.uv!==void 0&&r.setAttribute("uv2",r.attributes.uv),e.material=t}getMaterialType(){return $i}loadMaterial(e){const r=this,t=this.json,a=this.extensions,l=t.materials[e];let c;const n={},f=l.extensions||{},h=[];if(f[Dt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const p=a[Dt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];c=p.getMaterialType(),h.push(p.extendParams(n,l,r))}else if(f[Dt.KHR_MATERIALS_UNLIT]){const p=a[Dt.KHR_MATERIALS_UNLIT];c=p.getMaterialType(),h.push(p.extendParams(n,l,r))}else{const p=l.pbrMetallicRoughness||{};if(n.color=new at(1,1,1),n.opacity=1,Array.isArray(p.baseColorFactor)){const s=p.baseColorFactor;n.color.fromArray(s),n.opacity=s[3]}p.baseColorTexture!==void 0&&h.push(r.assignTexture(n,"map",p.baseColorTexture,kt)),n.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,n.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(h.push(r.assignTexture(n,"metalnessMap",p.metallicRoughnessTexture)),h.push(r.assignTexture(n,"roughnessMap",p.metallicRoughnessTexture))),c=this._invokeOne(function(s){return s.getMaterialType&&s.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(s){return s.extendMaterialParams&&s.extendMaterialParams(e,n)})))}l.doubleSided===!0&&(n.side=$n);const m=l.alphaMode||Na.OPAQUE;if(m===Na.BLEND?(n.transparent=!0,n.depthWrite=!1):(n.transparent=!1,m===Na.MASK&&(n.alphaTest=l.alphaCutoff!==void 0?l.alphaCutoff:.5)),l.normalTexture!==void 0&&c!==gn&&(h.push(r.assignTexture(n,"normalMap",l.normalTexture)),n.normalScale=new tt(1,1),l.normalTexture.scale!==void 0)){const p=l.normalTexture.scale;n.normalScale.set(p,p)}return l.occlusionTexture!==void 0&&c!==gn&&(h.push(r.assignTexture(n,"aoMap",l.occlusionTexture)),l.occlusionTexture.strength!==void 0&&(n.aoMapIntensity=l.occlusionTexture.strength)),l.emissiveFactor!==void 0&&c!==gn&&(n.emissive=new at().fromArray(l.emissiveFactor)),l.emissiveTexture!==void 0&&c!==gn&&h.push(r.assignTexture(n,"emissiveMap",l.emissiveTexture,kt)),Promise.all(h).then(function(){let p;return c===Qa?p=a[Dt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(n):p=new c(n),l.name&&(p.name=l.name),Yn(p,l),r.associations.set(p,{materials:e}),l.extensions&&ps(a,p,l),p})}createUniqueName(e){const r=Ut.sanitizeNodeName(e||"");let t=r;for(let a=1;this.nodeNamesUsed[t];++a)t=r+"_"+a;return this.nodeNamesUsed[t]=!0,t}loadGeometries(e){const r=this,t=this.extensions,a=this.primitiveCache;function l(n){return t[Dt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(n,r).then(function(f){return Jc(f,n,r)})}const c=[];for(let n=0,f=e.length;n<f;n++){const h=e[n],m=Tb(h),p=a[m];if(p)c.push(p.promise);else{let s;h.extensions&&h.extensions[Dt.KHR_DRACO_MESH_COMPRESSION]?s=l(h):s=Jc(new Zt,h,r),a[m]={primitive:h,promise:s},c.push(s)}}return Promise.all(c)}loadMesh(e){const r=this,t=this.json,a=this.extensions,l=t.meshes[e],c=l.primitives,n=[];for(let f=0,h=c.length;f<h;f++){const m=c[f].material===void 0?wb(this.cache):this.getDependency("material",c[f].material);n.push(m)}return n.push(r.loadGeometries(c)),Promise.all(n).then(function(f){const h=f.slice(0,f.length-1),m=f[f.length-1],p=[];for(let i=0,o=m.length;i<o;i++){const d=m[i],u=c[i];let g;const b=h[i];if(u.mode===fn.TRIANGLES||u.mode===fn.TRIANGLE_STRIP||u.mode===fn.TRIANGLE_FAN||u.mode===void 0)g=l.isSkinnedMesh===!0?new pl(d,b):new xr(d,b),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),u.mode===fn.TRIANGLE_STRIP?g.geometry=Qc(g.geometry,Af):u.mode===fn.TRIANGLE_FAN&&(g.geometry=Qc(g.geometry,uh));else if(u.mode===fn.LINES)g=new ko(d,b);else if(u.mode===fn.LINE_STRIP)g=new Oo(d,b);else if(u.mode===fn.LINE_LOOP)g=new Ch(d,b);else if(u.mode===fn.POINTS)g=new Rh(d,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);Object.keys(g.geometry.morphAttributes).length>0&&Mb(g,l),g.name=r.createUniqueName(l.name||"mesh_"+e),Yn(g,l),u.extensions&&ps(a,g,u),r.assignFinalMaterial(g),p.push(g)}for(let i=0,o=p.length;i<o;i++)r.associations.set(p[i],{meshes:e,primitives:i});if(p.length===1)return p[0];const s=new In;r.associations.set(s,{meshes:e});for(let i=0,o=p.length;i<o;i++)s.add(p[i]);return s})}loadCamera(e){let r;const t=this.json.cameras[e],a=t[t.type];if(!a){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return t.type==="perspective"?r=new br(Xf.radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):t.type==="orthographic"&&(r=new Io(-a.xmag,a.xmag,a.ymag,-a.ymag,a.znear,a.zfar)),t.name&&(r.name=this.createUniqueName(t.name)),Yn(r,t),Promise.resolve(r)}loadSkin(e){const r=this.json.skins[e],t={joints:r.joints};return r.inverseBindMatrices===void 0?Promise.resolve(t):this.getDependency("accessor",r.inverseBindMatrices).then(function(a){return t.inverseBindMatrices=a,t})}loadAnimation(e){const t=this.json.animations[e],a=[],l=[],c=[],n=[],f=[];for(let h=0,m=t.channels.length;h<m;h++){const p=t.channels[h],s=t.samplers[p.sampler],i=p.target,o=i.node!==void 0?i.node:i.id,d=t.parameters!==void 0?t.parameters[s.input]:s.input,u=t.parameters!==void 0?t.parameters[s.output]:s.output;a.push(this.getDependency("node",o)),l.push(this.getDependency("accessor",d)),c.push(this.getDependency("accessor",u)),n.push(s),f.push(i)}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(n),Promise.all(f)]).then(function(h){const m=h[0],p=h[1],s=h[2],i=h[3],o=h[4],d=[];for(let g=0,b=m.length;g<b;g++){const _=m[g],w=p[g],S=s[g],T=i[g],L=o[g];if(_===void 0)continue;_.updateMatrix(),_.matrixAutoUpdate=!0;let A;switch(Pn[L.path]){case Pn.weights:A=Rs;break;case Pn.rotation:A=ti;break;case Pn.position:case Pn.scale:default:A=Ps;break}const P=_.name?_.name:_.uuid,R=T.interpolation!==void 0?xb[T.interpolation]:Hi,D=[];Pn[L.path]===Pn.weights?_.traverse(function(I){I.morphTargetInfluences&&D.push(I.name?I.name:I.uuid)}):D.push(P);let F=S.array;if(S.normalized){const I=el(F.constructor),k=new Float32Array(F.length);for(let U=0,q=F.length;U<q;U++)k[U]=F[U]*I;F=k}for(let I=0,k=D.length;I<k;I++){const U=new A(D[I]+"."+Pn[L.path],w.array,F,R);T.interpolation==="CUBICSPLINE"&&(U.createInterpolant=function(Q){const W=this instanceof ti?_b:ri;return new W(this.times,this.values,this.getValueSize()/3,Q)},U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),d.push(U)}}const u=t.name?t.name:"animation_"+e;return new Ja(u,void 0,d)})}createNodeMesh(e){const r=this.json,t=this,a=r.nodes[e];return a.mesh===void 0?null:t.getDependency("mesh",a.mesh).then(function(l){const c=t._getNodeRef(t.meshCache,a.mesh,l);return a.weights!==void 0&&c.traverse(function(n){if(!!n.isMesh)for(let f=0,h=a.weights.length;f<h;f++)n.morphTargetInfluences[f]=a.weights[f]}),c})}loadNode(e){const r=this.json,t=this.extensions,a=this,l=r.nodes[e],c=l.name?a.createUniqueName(l.name):"";return function(){const n=[],f=a._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return f&&n.push(f),l.camera!==void 0&&n.push(a.getDependency("camera",l.camera).then(function(h){return a._getNodeRef(a.cameraCache,l.camera,h)})),a._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){n.push(h)}),Promise.all(n)}().then(function(n){let f;if(l.isBone===!0?f=new ml:n.length>1?f=new In:n.length===1?f=n[0]:f=new Bt,f!==n[0])for(let h=0,m=n.length;h<m;h++)f.add(n[h]);if(l.name&&(f.userData.name=l.name,f.name=c),Yn(f,l),l.extensions&&ps(t,f,l),l.matrix!==void 0){const h=new pt;h.fromArray(l.matrix),f.applyMatrix4(h)}else l.translation!==void 0&&f.position.fromArray(l.translation),l.rotation!==void 0&&f.quaternion.fromArray(l.rotation),l.scale!==void 0&&f.scale.fromArray(l.scale);return a.associations.has(f)||a.associations.set(f,{}),a.associations.get(f).nodes=e,f})}loadScene(e){const r=this.json,t=this.extensions,a=this.json.scenes[e],l=this,c=new In;a.name&&(c.name=l.createUniqueName(a.name)),Yn(c,a),a.extensions&&ps(t,c,a);const n=a.nodes||[],f=[];for(let h=0,m=n.length;h<m;h++)f.push(ld(n[h],c,r,l));return Promise.all(f).then(function(){const h=m=>{const p=new Map;for(const[s,i]of l.associations)(s instanceof er||s instanceof ar)&&p.set(s,i);return m.traverse(s=>{const i=l.associations.get(s);i!=null&&p.set(s,i)}),p};return l.associations=h(c),c})}}function ld(v,e,r,t){const a=r.nodes[v];return t.getDependency("node",v).then(function(l){if(a.skin===void 0)return l;let c;return t.getDependency("skin",a.skin).then(function(n){c=n;const f=[];for(let h=0,m=c.joints.length;h<m;h++)f.push(t.getDependency("node",c.joints[h]));return Promise.all(f)}).then(function(n){return l.traverse(function(f){if(!f.isMesh)return;const h=[],m=[];for(let p=0,s=n.length;p<s;p++){const i=n[p];if(i){h.push(i);const o=new pt;c.inverseBindMatrices!==void 0&&o.fromArray(c.inverseBindMatrices.array,p*16),m.push(o)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',c.joints[p])}f.bind(new gl(h,m),f.matrixWorld)}),l})}).then(function(l){e.add(l);const c=[];if(a.children){const n=a.children;for(let f=0,h=n.length;f<h;f++){const m=n[f];c.push(ld(m,l,r,t))}}return Promise.all(c)})}function Lb(v,e,r){const t=e.attributes,a=new Or;if(t.POSITION!==void 0){const n=r.json.accessors[t.POSITION],f=n.min,h=n.max;if(f!==void 0&&h!==void 0){if(a.set(new Me(f[0],f[1],f[2]),new Me(h[0],h[1],h[2])),n.normalized){const m=el(Ds[n.componentType]);a.min.multiplyScalar(m),a.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const l=e.targets;if(l!==void 0){const n=new Me,f=new Me;for(let h=0,m=l.length;h<m;h++){const p=l[h];if(p.POSITION!==void 0){const s=r.json.accessors[p.POSITION],i=s.min,o=s.max;if(i!==void 0&&o!==void 0){if(f.setX(Math.max(Math.abs(i[0]),Math.abs(o[0]))),f.setY(Math.max(Math.abs(i[1]),Math.abs(o[1]))),f.setZ(Math.max(Math.abs(i[2]),Math.abs(o[2]))),s.normalized){const d=el(Ds[s.componentType]);f.multiplyScalar(d)}n.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(n)}v.boundingBox=a;const c=new oi;a.getCenter(c.center),c.radius=a.min.distanceTo(a.max)/2,v.boundingSphere=c}function Jc(v,e,r){const t=e.attributes,a=[];function l(c,n){return r.getDependency("accessor",c).then(function(f){v.setAttribute(n,f)})}for(const c in t){const n=$a[c]||c.toLowerCase();n in v.attributes||a.push(l(t[c],n))}if(e.indices!==void 0&&!v.index){const c=r.getDependency("accessor",e.indices).then(function(n){v.setIndex(n)});a.push(c)}return Yn(v,e),Lb(v,e,r),Promise.all(a).then(function(){return e.targets!==void 0?Sb(v,e.targets,r):v})}function Qc(v,e){let r=v.getIndex();if(r===null){const c=[],n=v.getAttribute("position");if(n!==void 0){for(let f=0;f<n.count;f++)c.push(f);v.setIndex(c),r=v.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),v}const t=r.count-2,a=[];if(e===uh)for(let c=1;c<=t;c++)a.push(r.getX(0)),a.push(r.getX(c)),a.push(r.getX(c+1));else for(let c=0;c<t;c++)c%2===0?(a.push(r.getX(c)),a.push(r.getX(c+1)),a.push(r.getX(c+2))):(a.push(r.getX(c+2)),a.push(r.getX(c+1)),a.push(r.getX(c)));a.length/3!==t&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const l=v.clone();return l.setIndex(a),l}class Cb{constructor(e=500){this.tickLength=e,this.past=0,this.present=0,this.requestID=0,this.ticks=0,this.events={}}start(){const e=Date.now();e-this.past>=this.tickLength&&(this.ticks+=1,this.past=e,this._triggerEvents()),this.requestID=requestAnimationFrame(this.start.bind(this))}stop(){cancelAnimationFrame(this.requestID)}every(e,r,t=1){const a={f:r,p:t};this.events[e]=this.events[e]===void 0?[a]:[...this.events[e],a]}setTickLength(e){this.tickLength=e}_triggerEvents(){const e=this.ticks;for(const[r,t]of Object.entries(this.events))e%r===0&&t.forEach(({f:a,p:l})=>{Math.random()<l&&a()})}}var Rb="./assets/logo.c4ac7bd8.glb";const Pb=v=>{v.setup=()=>{v.createCanvas(v.windowWidth,v.windowHeight).id("p5-canvas"),v.background(0),v.pixelDensity(1)},v.draw=()=>{v.background(0),v.circle(v.windowWidth/2,v.windowHeight/2,200)}},Db=v=>{const r=new dl;v.setClearColor(0,0);const t=new br(75,window.innerWidth/window.innerHeight,.1,1e3);let a;v.domElement.width>600?a=150:a=350,t.position.set(0,0,a);const c=new Ml(16711680,3,200);c.position.set(50,50,50),r.add(c);const n=new rd(4210752,1);r.add(n);const f=new eb;let h;f.load(Rb,function(p){r.add(p.scene),p.scene.scale.set(10,10,10),h=p},void 0,void 0);function m(){requestAnimationFrame(m),v.render(r,t),h!==void 0&&(h.scene.rotation.y+=.0025)}m()},Ib=()=>{src(o1).out(o0)},jb=()=>{const v=document.getElementById("sketch"),e=document.getElementById("hydra-canvas");new Hydra({canvas:e,detectAudio:!1,enableStreamCapture:!1}).setResolution(v.offsetWidth,v.offsetHeight);const t=document.getElementById("p5-wrapper");v.appendChild(t),new Pd(Pb,"p5-wrapper");const a=new zt({canvas:document.getElementById("three-canvas"),alpha:!0});a.setSize(window.innerWidth,window.innerHeight),Db(a),s0.init({src:document.getElementById("p5-canvas")}),s1.init({src:document.getElementById("three-canvas")}),src(s1).saturate(0).brightness(.4).contrast(1.4).out(o1),Ib()},Ob=()=>src(o1).modulate(voronoi(3)).out(),kb=()=>src(o1).modulate(voronoi(10)).out(),Nb=()=>src(o1).pixelate(80,80).out(),Fb=()=>src(o1).pixelate(200,200).out(),$c=()=>src(o1).diff(src(o0)).out(o0),eh=()=>src(o1).modulate(src(o0),.2).out(o0),Ub=()=>src(o1).modulate(noise(10),.04).out(),Bb=()=>src(o1).repeatX(2).repeatY(2).modulate(o0).out(),Gb=()=>src(o1).repeatX(4).repeatY(2).modulate(o0).out();window.onload=()=>{jb();const v=new Cb(3e3);v.every(2,$c,.6),v.every(3,eh,.5),v.every(19,Ob),v.every(10,kb),v.every(30,Nb),v.every(15,Fb),v.every(37,$c),v.every(25,eh),v.every(51,Ub),v.every(59,Bb),v.every(35,Gb),v.every(30,()=>v.setTickLength(100)),v.every(70,()=>v.setTickLength(1e3)),v.start()};
